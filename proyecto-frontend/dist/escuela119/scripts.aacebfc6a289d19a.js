(function(Ca,Ss){"object"==typeof exports&&typeof module<"u"?module.exports=Ss():"function"==typeof define&&define.amd?define(Ss):(Ca=typeof globalThis<"u"?globalThis:Ca||self).bootstrap=Ss()})(this,function(){"use strict";const Ca=new Map,Ss={set(W,S,F){Ca.has(W)||Ca.set(W,new Map);const ae=Ca.get(W);ae.has(S)||0===ae.size?ae.set(S,F):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ae.keys())[0]}.`)},get:(W,S)=>Ca.has(W)&&Ca.get(W).get(S)||null,remove(W,S){if(!Ca.has(W))return;const F=Ca.get(W);F.delete(S),0===F.size&&Ca.delete(W)}},va="transitionend",ns=W=>(W&&window.CSS&&window.CSS.escape&&(W=W.replace(/#([^\s"#']+)/g,(S,F)=>`#${CSS.escape(F)}`)),W),Qs=W=>{W.dispatchEvent(new Event(va))},No=W=>!(!W||"object"!=typeof W)&&(void 0!==W.jquery&&(W=W[0]),void 0!==W.nodeType),ps=W=>No(W)?W.jquery?W[0]:W:"string"==typeof W&&W.length>0?document.querySelector(ns(W)):null,as=W=>{if(!No(W)||0===W.getClientRects().length)return!1;const S="visible"===getComputedStyle(W).getPropertyValue("visibility"),F=W.closest("details:not([open])");if(!F)return S;if(F!==W){const ae=W.closest("summary");if(ae&&ae.parentNode!==F||null===ae)return!1}return S},Ar=W=>!W||W.nodeType!==Node.ELEMENT_NODE||!!W.classList.contains("disabled")||(void 0!==W.disabled?W.disabled:W.hasAttribute("disabled")&&"false"!==W.getAttribute("disabled")),Ya=W=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof W.getRootNode){const S=W.getRootNode();return S instanceof ShadowRoot?S:null}return W instanceof ShadowRoot?W:W.parentNode?Ya(W.parentNode):null},Is=()=>{},uo=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ut=[],pt=()=>"rtl"===document.documentElement.dir,lo=W=>{var S;S=()=>{const F=uo();if(F){const ae=W.NAME,Ve=F.fn[ae];F.fn[ae]=W.jQueryInterface,F.fn[ae].Constructor=W,F.fn[ae].noConflict=()=>(F.fn[ae]=Ve,W.jQueryInterface)}},"loading"===document.readyState?(ut.length||document.addEventListener("DOMContentLoaded",()=>{for(const F of ut)F()}),ut.push(S)):S()},jn=(W,S=[],F=W)=>"function"==typeof W?W(...S):F,At=(W,S,F=!0)=>{if(!F)return void jn(W);const ae=(ht=>{if(!ht)return 0;let{transitionDuration:Mt,transitionDelay:mo}=window.getComputedStyle(ht);const Go=Number.parseFloat(Mt),zo=Number.parseFloat(mo);return Go||zo?(Mt=Mt.split(",")[0],mo=mo.split(",")[0],1e3*(Number.parseFloat(Mt)+Number.parseFloat(mo))):0})(S)+5;let Ve=!1;const ve=({target:ht})=>{ht===S&&(Ve=!0,S.removeEventListener(va,ve),jn(W))};S.addEventListener(va,ve),setTimeout(()=>{Ve||Qs(S)},ae)},Ft=(W,S,F,ae)=>{const Ve=W.length;let ve=W.indexOf(S);return-1===ve?!F&&ae?W[Ve-1]:W[0]:(ve+=F?1:-1,ae&&(ve=(ve+Ve)%Ve),W[Math.max(0,Math.min(ve,Ve-1))])},eo=/[^.]*(?=\..*)\.|.*/,ne=/\..*/,it=/::\d+$/,Oe={};let $n=1;const yo={mouseenter:"mouseover",mouseleave:"mouseout"},Dr=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function lr(W,S){return S&&`${S}::${$n++}`||W.uidEvent||$n++}function ot(W){const S=lr(W);return W.uidEvent=S,Oe[S]=Oe[S]||{},Oe[S]}function mn(W,S,F=null){return Object.values(W).find(ae=>ae.callable===S&&ae.delegationSelector===F)}function D(W,S,F){const ae="string"==typeof S,Ve=ae?F:S||F;let ve=fr(W);return Dr.has(ve)||(ve=W),[ae,Ve,ve]}function mt(W,S,F,ae,Ve){if("string"!=typeof S||!W)return;let[ve,ht,Mt]=D(S,F,ae);var tt;S in yo&&(tt=ht,ht=function(kn){if(!kn.relatedTarget||kn.relatedTarget!==kn.delegateTarget&&!kn.delegateTarget.contains(kn.relatedTarget))return tt.call(this,kn)});const mo=ot(W),Go=mo[Mt]||(mo[Mt]={}),zo=mn(Go,ht,ve?F:null);if(zo)return void(zo.oneOff=zo.oneOff&&Ve);const oo=lr(ht,S.replace(eo,"")),tr=ve?function(dn,tt,kn){return function Or(Yn){const wr=dn.querySelectorAll(tt);for(let{target:Hr}=Yn;Hr&&Hr!==this;Hr=Hr.parentNode)for(const je of wr)if(je===Hr)return Do(Yn,{delegateTarget:Hr}),Or.oneOff&&Nt.off(dn,Yn.type,tt,kn),kn.apply(Hr,[Yn])}}(W,F,ht):function(dn,tt){return function kn(Or){return Do(Or,{delegateTarget:dn}),kn.oneOff&&Nt.off(dn,Or.type,tt),tt.apply(dn,[Or])}}(W,ht);tr.delegationSelector=ve?F:null,tr.callable=ht,tr.oneOff=Ve,tr.uidEvent=oo,Go[oo]=tr,W.addEventListener(Mt,tr,ve)}function Ma(W,S,F,ae,Ve){const ve=mn(S[F],ae,Ve);ve&&(W.removeEventListener(F,ve,Boolean(Ve)),delete S[F][ve.uidEvent])}function qn(W,S,F,ae){const Ve=S[F]||{};for(const[ve,ht]of Object.entries(Ve))ve.includes(ae)&&Ma(W,S,F,ht.callable,ht.delegationSelector)}function fr(W){return W=W.replace(ne,""),yo[W]||W}const Nt={on(W,S,F,ae){mt(W,S,F,ae,!1)},one(W,S,F,ae){mt(W,S,F,ae,!0)},off(W,S,F,ae){if("string"!=typeof S||!W)return;const[Ve,ve,ht]=D(S,F,ae),Mt=ht!==S,mo=ot(W),Go=mo[ht]||{},zo=S.startsWith(".");if(void 0===ve){if(zo)for(const oo of Object.keys(mo))qn(W,mo,oo,S.slice(1));for(const[oo,tr]of Object.entries(Go)){const dn=oo.replace(it,"");Mt&&!S.includes(dn)||Ma(W,mo,ht,tr.callable,tr.delegationSelector)}}else{if(!Object.keys(Go).length)return;Ma(W,mo,ht,ve,Ve?F:null)}},trigger(W,S,F){if("string"!=typeof S||!W)return null;const ae=uo();let Ve=null,ve=!0,ht=!0,Mt=!1;S!==fr(S)&&ae&&(Ve=ae.Event(S,F),ae(W).trigger(Ve),ve=!Ve.isPropagationStopped(),ht=!Ve.isImmediatePropagationStopped(),Mt=Ve.isDefaultPrevented());const mo=Do(new Event(S,{bubbles:ve,cancelable:!0}),F);return Mt&&mo.preventDefault(),ht&&W.dispatchEvent(mo),mo.defaultPrevented&&Ve&&Ve.preventDefault(),mo}};function Do(W,S={}){for(const[F,ae]of Object.entries(S))try{W[F]=ae}catch{Object.defineProperty(W,F,{configurable:!0,get:()=>ae})}return W}function Jo(W){if("true"===W)return!0;if("false"===W)return!1;if(W===Number(W).toString())return Number(W);if(""===W||"null"===W)return null;if("string"!=typeof W)return W;try{return JSON.parse(decodeURIComponent(W))}catch{return W}}function X(W){return W.replace(/[A-Z]/g,S=>`-${S.toLowerCase()}`)}const sr={setDataAttribute(W,S,F){W.setAttribute(`data-bs-${X(S)}`,F)},removeDataAttribute(W,S){W.removeAttribute(`data-bs-${X(S)}`)},getDataAttributes(W){if(!W)return{};const S={},F=Object.keys(W.dataset).filter(ae=>ae.startsWith("bs")&&!ae.startsWith("bsConfig"));for(const ae of F){let Ve=ae.replace(/^bs/,"");Ve=Ve.charAt(0).toLowerCase()+Ve.slice(1,Ve.length),S[Ve]=Jo(W.dataset[ae])}return S},getDataAttribute:(W,S)=>Jo(W.getAttribute(`data-bs-${X(S)}`))};class Xe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(S){return S=this._mergeConfigObj(S),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}_configAfterMerge(S){return S}_mergeConfigObj(S,F){const ae=No(F)?sr.getDataAttribute(F,"config"):{};return{...this.constructor.Default,..."object"==typeof ae?ae:{},...No(F)?sr.getDataAttributes(F):{},..."object"==typeof S?S:{}}}_typeCheckConfig(S,F=this.constructor.DefaultType){for(const[Ve,ve]of Object.entries(F)){const ht=S[Ve],Mt=No(ht)?"element":null==(ae=ht)?`${ae}`:Object.prototype.toString.call(ae).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ve).test(Mt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ve}" provided type "${Mt}" but expected type "${ve}".`)}var ae}}class Tt extends Xe{constructor(S,F){super(),(S=ps(S))&&(this._element=S,this._config=this._getConfig(F),Ss.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ss.remove(this._element,this.constructor.DATA_KEY),Nt.off(this._element,this.constructor.EVENT_KEY);for(const S of Object.getOwnPropertyNames(this))this[S]=null}_queueCallback(S,F,ae=!0){At(S,F,ae)}_getConfig(S){return S=this._mergeConfigObj(S,this._element),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}static getInstance(S){return Ss.get(ps(S),this.DATA_KEY)}static getOrCreateInstance(S,F={}){return this.getInstance(S)||new this(S,"object"==typeof F?F:null)}static get VERSION(){return"5.3.0-alpha2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(S){return`${S}${this.EVENT_KEY}`}}const Po=W=>{let S=W.getAttribute("data-bs-target");if(!S||"#"===S){let F=W.getAttribute("href");if(!F||!F.includes("#")&&!F.startsWith("."))return null;F.includes("#")&&!F.startsWith("#")&&(F=`#${F.split("#")[1]}`),S=F&&"#"!==F?F.trim():null}return ns(S)},Ie={find:(W,S=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(S,W)),findOne:(W,S=document.documentElement)=>Element.prototype.querySelector.call(S,W),children:(W,S)=>[].concat(...W.children).filter(F=>F.matches(S)),parents(W,S){const F=[];let ae=W.parentNode.closest(S);for(;ae;)F.push(ae),ae=ae.parentNode.closest(S);return F},prev(W,S){let F=W.previousElementSibling;for(;F;){if(F.matches(S))return[F];F=F.previousElementSibling}return[]},next(W,S){let F=W.nextElementSibling;for(;F;){if(F.matches(S))return[F];F=F.nextElementSibling}return[]},focusableChildren(W){const S=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(F=>`${F}:not([tabindex^="-"])`).join(",");return this.find(S,W).filter(F=>!Ar(F)&&as(F))},getSelectorFromElement(W){const S=Po(W);return S&&Ie.findOne(S)?S:null},getElementFromSelector(W){const S=Po(W);return S?Ie.findOne(S):null},getMultipleElementsFromSelector(W){const S=Po(W);return S?Ie.find(S):[]}},To=(W,S="hide")=>{const ae=W.NAME;Nt.on(document,`click.dismiss${W.EVENT_KEY}`,`[data-bs-dismiss="${ae}"]`,function(Ve){if(["A","AREA"].includes(this.tagName)&&Ve.preventDefault(),Ar(this))return;const ve=Ie.getElementFromSelector(this)||this.closest(`.${ae}`);W.getOrCreateInstance(ve)[S]()})};class Gt extends Tt{static get NAME(){return"alert"}close(){if(Nt.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const S=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,S)}_destroyElement(){this._element.remove(),Nt.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(S){return this.each(function(){const F=Gt.getOrCreateInstance(this);if("string"==typeof S){if(void 0===F[S]||S.startsWith("_")||"constructor"===S)throw new TypeError(`No method named "${S}"`);F[S](this)}})}}To(Gt,"close"),lo(Gt);const Ue='[data-bs-toggle="button"]';class Hs extends Tt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(S){return this.each(function(){const F=Hs.getOrCreateInstance(this);"toggle"===S&&F[S]()})}}Nt.on(document,"click.bs.button.data-api",Ue,W=>{W.preventDefault();const S=W.target.closest(Ue);Hs.getOrCreateInstance(S).toggle()}),lo(Hs);const en={endCallback:null,leftCallback:null,rightCallback:null},Yt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ts extends Xe{constructor(S,F){super(),this._element=S,S&&ts.isSupported()&&(this._config=this._getConfig(F),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return en}static get DefaultType(){return Yt}static get NAME(){return"swipe"}dispose(){Nt.off(this._element,".bs.swipe")}_start(S){this._supportPointerEvents?this._eventIsPointerPenTouch(S)&&(this._deltaX=S.clientX):this._deltaX=S.touches[0].clientX}_end(S){this._eventIsPointerPenTouch(S)&&(this._deltaX=S.clientX-this._deltaX),this._handleSwipe(),jn(this._config.endCallback)}_move(S){this._deltaX=S.touches&&S.touches.length>1?0:S.touches[0].clientX-this._deltaX}_handleSwipe(){const S=Math.abs(this._deltaX);if(S<=40)return;const F=S/this._deltaX;this._deltaX=0,F&&jn(F>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Nt.on(this._element,"pointerdown.bs.swipe",S=>this._start(S)),Nt.on(this._element,"pointerup.bs.swipe",S=>this._end(S)),this._element.classList.add("pointer-event")):(Nt.on(this._element,"touchstart.bs.swipe",S=>this._start(S)),Nt.on(this._element,"touchmove.bs.swipe",S=>this._move(S)),Nt.on(this._element,"touchend.bs.swipe",S=>this._end(S)))}_eventIsPointerPenTouch(S){return this._supportPointerEvents&&("pen"===S.pointerType||"touch"===S.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Jn="next",fs="prev",or="left",Ps="right",Ha="slid.bs.carousel",ks="carousel",qr="active",Cr={ArrowLeft:Ps,ArrowRight:or},_a={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},is={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class _r extends Tt{constructor(S,F){super(S,F),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ie.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ks&&this.cycle()}static get Default(){return _a}static get DefaultType(){return is}static get NAME(){return"carousel"}next(){this._slide(Jn)}nextWhenVisible(){!document.hidden&&as(this._element)&&this.next()}prev(){this._slide(fs)}pause(){this._isSliding&&Qs(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Nt.one(this._element,Ha,()=>this.cycle()):this.cycle())}to(S){const F=this._getItems();if(S>F.length-1||S<0)return;if(this._isSliding)return void Nt.one(this._element,Ha,()=>this.to(S));const ae=this._getItemIndex(this._getActive());ae!==S&&this._slide(S>ae?Jn:fs,F[S])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(S){return S.defaultInterval=S.interval,S}_addEventListeners(){this._config.keyboard&&Nt.on(this._element,"keydown.bs.carousel",S=>this._keydown(S)),"hover"===this._config.pause&&(Nt.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),Nt.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&ts.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const F of Ie.find(".carousel-item img",this._element))Nt.on(F,"dragstart.bs.carousel",ae=>ae.preventDefault());this._swipeHelper=new ts(this._element,{leftCallback:()=>this._slide(this._directionToOrder(or)),rightCallback:()=>this._slide(this._directionToOrder(Ps)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(S){if(/input|textarea/i.test(S.target.tagName))return;const F=Cr[S.key];F&&(S.preventDefault(),this._slide(this._directionToOrder(F)))}_getItemIndex(S){return this._getItems().indexOf(S)}_setActiveIndicatorElement(S){if(!this._indicatorsElement)return;const F=Ie.findOne(".active",this._indicatorsElement);F.classList.remove(qr),F.removeAttribute("aria-current");const ae=Ie.findOne(`[data-bs-slide-to="${S}"]`,this._indicatorsElement);ae&&(ae.classList.add(qr),ae.setAttribute("aria-current","true"))}_updateInterval(){const S=this._activeElement||this._getActive();if(!S)return;const F=Number.parseInt(S.getAttribute("data-bs-interval"),10);this._config.interval=F||this._config.defaultInterval}_slide(S,F=null){if(this._isSliding)return;const ae=this._getActive(),Ve=S===Jn,ve=F||Ft(this._getItems(),ae,Ve,this._config.wrap);if(ve===ae)return;const ht=this._getItemIndex(ve),Mt=oo=>Nt.trigger(this._element,oo,{relatedTarget:ve,direction:this._orderToDirection(S),from:this._getItemIndex(ae),to:ht});if(Mt("slide.bs.carousel").defaultPrevented||!ae||!ve)return;const mo=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ht),this._activeElement=ve;const Go=Ve?"carousel-item-start":"carousel-item-end",zo=Ve?"carousel-item-next":"carousel-item-prev";ve.classList.add(zo),ae.classList.add(Go),ve.classList.add(Go),this._queueCallback(()=>{ve.classList.remove(Go,zo),ve.classList.add(qr),ae.classList.remove(qr,zo,Go),this._isSliding=!1,Mt(Ha)},ae,this._isAnimated()),mo&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ie.findOne(".active.carousel-item",this._element)}_getItems(){return Ie.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(S){return pt()?S===or?fs:Jn:S===or?Jn:fs}_orderToDirection(S){return pt()?S===fs?or:Ps:S===fs?Ps:or}static jQueryInterface(S){return this.each(function(){const F=_r.getOrCreateInstance(this,S);if("number"!=typeof S){if("string"==typeof S){if(void 0===F[S]||S.startsWith("_")||"constructor"===S)throw new TypeError(`No method named "${S}"`);F[S]()}}else F.to(S)})}}Nt.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(W){const S=Ie.getElementFromSelector(this);if(!S||!S.classList.contains(ks))return;W.preventDefault();const F=_r.getOrCreateInstance(S),ae=this.getAttribute("data-bs-slide-to");return ae?(F.to(ae),void F._maybeEnableCycle()):"next"===sr.getDataAttribute(this,"slide")?(F.next(),void F._maybeEnableCycle()):(F.prev(),void F._maybeEnableCycle())}),Nt.on(window,"load.bs.carousel.data-api",()=>{const W=Ie.find('[data-bs-ride="carousel"]');for(const S of W)_r.getOrCreateInstance(S)}),lo(_r);const Zi="show",Pn="collapse",Gn="collapsing",nr='[data-bs-toggle="collapse"]',Di={parent:null,toggle:!0},Sr={parent:"(null|element)",toggle:"boolean"};class zs extends Tt{constructor(S,F){super(S,F),this._isTransitioning=!1,this._triggerArray=[];const ae=Ie.find(nr);for(const Ve of ae){const ve=Ie.getSelectorFromElement(Ve),ht=Ie.find(ve).filter(Mt=>Mt===this._element);null!==ve&&ht.length&&this._triggerArray.push(Ve)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Di}static get DefaultType(){return Sr}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let S=[];if(this._config.parent&&(S=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Ve=>Ve!==this._element).map(Ve=>zs.getOrCreateInstance(Ve,{toggle:!1}))),S.length&&S[0]._isTransitioning||Nt.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const Ve of S)Ve.hide();const F=this._getDimension();this._element.classList.remove(Pn),this._element.classList.add(Gn),this._element.style[F]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ae=`scroll${F[0].toUpperCase()+F.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Gn),this._element.classList.add(Pn,Zi),this._element.style[F]="",Nt.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[F]=`${this._element[ae]}px`}hide(){if(this._isTransitioning||!this._isShown()||Nt.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const S=this._getDimension();this._element.style[S]=`${this._element.getBoundingClientRect()[S]}px`,this._element.classList.add(Gn),this._element.classList.remove(Pn,Zi);for(const F of this._triggerArray){const ae=Ie.getElementFromSelector(F);ae&&!this._isShown(ae)&&this._addAriaAndCollapsedClass([F],!1)}this._isTransitioning=!0,this._element.style[S]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Gn),this._element.classList.add(Pn),Nt.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(S=this._element){return S.classList.contains(Zi)}_configAfterMerge(S){return S.toggle=Boolean(S.toggle),S.parent=ps(S.parent),S}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const S=this._getFirstLevelChildren(nr);for(const F of S){const ae=Ie.getElementFromSelector(F);ae&&this._addAriaAndCollapsedClass([F],this._isShown(ae))}}_getFirstLevelChildren(S){const F=Ie.find(":scope .collapse .collapse",this._config.parent);return Ie.find(S,this._config.parent).filter(ae=>!F.includes(ae))}_addAriaAndCollapsedClass(S,F){if(S.length)for(const ae of S)ae.classList.toggle("collapsed",!F),ae.setAttribute("aria-expanded",F)}static jQueryInterface(S){const F={};return"string"==typeof S&&/show|hide/.test(S)&&(F.toggle=!1),this.each(function(){const ae=zs.getOrCreateInstance(this,F);if("string"==typeof S){if(void 0===ae[S])throw new TypeError(`No method named "${S}"`);ae[S]()}})}}Nt.on(document,"click.bs.collapse.data-api",nr,function(W){("A"===W.target.tagName||W.delegateTarget&&"A"===W.delegateTarget.tagName)&&W.preventDefault();for(const S of Ie.getMultipleElementsFromSelector(this))zs.getOrCreateInstance(S,{toggle:!1}).toggle()}),lo(zs);var Ao="top",Nr="bottom",ls="right",Kt="left",Wo="auto",bs=[Ao,Nr,ls,Kt],cs="start",Dt="end",Nn="clippingParents",Vo="viewport",Vs="popper",ar="reference",Bi=bs.reduce(function(W,S){return W.concat([S+"-"+cs,S+"-"+Dt])},[]),Es=[].concat(bs,[Wo]).reduce(function(W,S){return W.concat([S,S+"-"+cs,S+"-"+Dt])},[]),Ja="beforeRead",Sa="afterRead",ai="beforeMain",ya="afterMain",Pa="beforeWrite",Fa="afterWrite",pe=[Ja,"read",Sa,ai,"main",ya,Pa,"write",Fa];function Be(W){return W?(W.nodeName||"").toLowerCase():null}function nt(W){if(null==W)return window;if("[object Window]"!==W.toString()){var S=W.ownerDocument;return S&&S.defaultView||window}return W}function Qe(W){return W instanceof nt(W).Element||W instanceof Element}function Bt(W){return W instanceof nt(W).HTMLElement||W instanceof HTMLElement}function Wt(W){return typeof ShadowRoot<"u"&&(W instanceof nt(W).ShadowRoot||W instanceof ShadowRoot)}const jt={name:"applyStyles",enabled:!0,phase:"write",fn:function(W){var S=W.state;Object.keys(S.elements).forEach(function(F){var ae=S.styles[F]||{},Ve=S.attributes[F]||{},ve=S.elements[F];Bt(ve)&&Be(ve)&&(Object.assign(ve.style,ae),Object.keys(Ve).forEach(function(ht){var Mt=Ve[ht];!1===Mt?ve.removeAttribute(ht):ve.setAttribute(ht,!0===Mt?"":Mt)}))})},effect:function(W){var S=W.state,F={popper:{position:S.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(S.elements.popper.style,F.popper),S.styles=F,S.elements.arrow&&Object.assign(S.elements.arrow.style,F.arrow),function(){Object.keys(S.elements).forEach(function(ae){var Ve=S.elements[ae],ve=S.attributes[ae]||{},ht=Object.keys(S.styles.hasOwnProperty(ae)?S.styles[ae]:F[ae]).reduce(function(Mt,mo){return Mt[mo]="",Mt},{});Bt(Ve)&&Be(Ve)&&(Object.assign(Ve.style,ht),Object.keys(ve).forEach(function(Mt){Ve.removeAttribute(Mt)}))})}},requires:["computeStyles"]};function Eo(W){return W.split("-")[0]}var ho=Math.max,Fn=Math.min,Qn=Math.round;function Rn(){var W=navigator.userAgentData;return null!=W&&W.brands&&Array.isArray(W.brands)?W.brands.map(function(S){return S.brand+"/"+S.version}).join(" "):navigator.userAgent}function fn(){return!/^((?!chrome|android).)*safari/i.test(Rn())}function br(W,S,F){void 0===S&&(S=!1),void 0===F&&(F=!1);var ae=W.getBoundingClientRect(),Ve=1,ve=1;S&&Bt(W)&&(Ve=W.offsetWidth>0&&Qn(ae.width)/W.offsetWidth||1,ve=W.offsetHeight>0&&Qn(ae.height)/W.offsetHeight||1);var ht=(Qe(W)?nt(W):window).visualViewport,Mt=!fn()&&F,mo=(ae.left+(Mt&&ht?ht.offsetLeft:0))/Ve,Go=(ae.top+(Mt&&ht?ht.offsetTop:0))/ve,zo=ae.width/Ve,oo=ae.height/ve;return{width:zo,height:oo,top:Go,right:mo+zo,bottom:Go+oo,left:mo,x:mo,y:Go}}function Zs(W){var S=br(W),F=W.offsetWidth,ae=W.offsetHeight;return Math.abs(S.width-F)<=1&&(F=S.width),Math.abs(S.height-ae)<=1&&(ae=S.height),{x:W.offsetLeft,y:W.offsetTop,width:F,height:ae}}function Zo(W,S){var F=S.getRootNode&&S.getRootNode();if(W.contains(S))return!0;if(F&&Wt(F)){var ae=S;do{if(ae&&W.isSameNode(ae))return!0;ae=ae.parentNode||ae.host}while(ae)}return!1}function ue(W){return nt(W).getComputedStyle(W)}function _e(W){return["table","td","th"].indexOf(Be(W))>=0}function We(W){return((Qe(W)?W.ownerDocument:W.document)||window.document).documentElement}function yt(W){return"html"===Be(W)?W:W.assignedSlot||W.parentNode||(Wt(W)?W.host:null)||We(W)}function ft(W){return Bt(W)&&"fixed"!==ue(W).position?W.offsetParent:null}function Lt(W){for(var S=nt(W),F=ft(W);F&&_e(F)&&"static"===ue(F).position;)F=ft(F);return F&&("html"===Be(F)||"body"===Be(F)&&"static"===ue(F).position)?S:F||function(ae){var Ve=/firefox/i.test(Rn());if(/Trident/i.test(Rn())&&Bt(ae)&&"fixed"===ue(ae).position)return null;var ve=yt(ae);for(Wt(ve)&&(ve=ve.host);Bt(ve)&&["html","body"].indexOf(Be(ve))<0;){var ht=ue(ve);if("none"!==ht.transform||"none"!==ht.perspective||"paint"===ht.contain||-1!==["transform","perspective"].indexOf(ht.willChange)||Ve&&"filter"===ht.willChange||Ve&&ht.filter&&"none"!==ht.filter)return ve;ve=ve.parentNode}return null}(W)||S}function Fo(W){return["top","bottom"].indexOf(W)>=0?"x":"y"}function So(W,S,F){return ho(W,Fn(S,F))}function tn(W){return Object.assign({},{top:0,right:0,bottom:0,left:0},W)}function Dn(W,S){return S.reduce(function(F,ae){return F[ae]=W,F},{})}const rr={name:"arrow",enabled:!0,phase:"main",fn:function(W){var S,Ur,Ir,F=W.state,ae=W.name,Ve=W.options,ve=F.elements.arrow,ht=F.modifiersData.popperOffsets,Mt=Eo(F.placement),mo=Fo(Mt),Go=[Kt,ls].indexOf(Mt)>=0?"height":"width";if(ve&&ht){var zo=(Ir=F,tn("number"!=typeof(Ur="function"==typeof(Ur=Ve.padding)?Ur(Object.assign({},Ir.rects,{placement:Ir.placement})):Ur)?Ur:Dn(Ur,bs))),oo=Zs(ve),tr="y"===mo?Ao:Kt,dn="y"===mo?Nr:ls,tt=F.rects.reference[Go]+F.rects.reference[mo]-ht[mo]-F.rects.popper[Go],kn=ht[mo]-F.rects.reference[mo],Or=Lt(ve),Yn=Or?"y"===mo?Or.clientHeight||0:Or.clientWidth||0:0,Vn=Yn/2-oo[Go]/2+(tt/2-kn/2),xr=So(zo[tr],Vn,Yn-oo[Go]-zo[dn]);F.modifiersData[ae]=((S={})[mo]=xr,S.centerOffset=xr-Vn,S)}},effect:function(W){var S=W.state,F=W.options.element,ae=void 0===F?"[data-popper-arrow]":F;null!=ae&&("string"!=typeof ae||(ae=S.elements.popper.querySelector(ae)))&&Zo(S.elements.popper,ae)&&(S.elements.arrow=ae)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ln(W){return W.split("-")[1]}var kr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oa(W){var S,F=W.popper,ae=W.popperRect,Ve=W.placement,ve=W.variation,ht=W.offsets,Mt=W.position,mo=W.gpuAcceleration,Go=W.adaptive,zo=W.roundOffsets,oo=W.isFixed,tr=ht.x,dn=void 0===tr?0:tr,tt=ht.y,kn=void 0===tt?0:tt,Or="function"==typeof zo?zo({x:dn,y:kn}):{x:dn,y:kn};dn=Or.x,kn=Or.y;var Yn=ht.hasOwnProperty("x"),wr=ht.hasOwnProperty("y"),Hr=Kt,je=Ao,Vn=window;if(Go){var xr=Lt(F),Oo="clientHeight",Ur="clientWidth";xr===nt(F)&&"static"!==ue(xr=We(F)).position&&"absolute"===Mt&&(Oo="scrollHeight",Ur="scrollWidth"),(Ve===Ao||(Ve===Kt||Ve===ls)&&ve===Dt)&&(je=Nr,kn-=(oo&&xr===Vn&&Vn.visualViewport?Vn.visualViewport.height:xr[Oo])-ae.height,kn*=mo?1:-1),Ve!==Kt&&(Ve!==Ao&&Ve!==Nr||ve!==Dt)||(Hr=ls,dn-=(oo&&xr===Vn&&Vn.visualViewport?Vn.visualViewport.width:xr[Ur])-ae.width,dn*=mo?1:-1)}var Ir,qs,Zn,os,Pr,Yr=Object.assign({position:Mt},Go&&kr),pl=!0===zo?(qs={x:dn,y:kn},Zn=nt(F),os=qs.y,{x:Qn(qs.x*(Pr=Zn.devicePixelRatio||1))/Pr||0,y:Qn(os*Pr)/Pr||0}):{x:dn,y:kn};return dn=pl.x,kn=pl.y,Object.assign({},Yr,mo?((Ir={})[je]=wr?"0":"",Ir[Hr]=Yn?"0":"",Ir.transform=(Vn.devicePixelRatio||1)<=1?"translate("+dn+"px, "+kn+"px)":"translate3d("+dn+"px, "+kn+"px, 0)",Ir):((S={})[je]=wr?kn+"px":"",S[Hr]=Yn?dn+"px":"",S.transform="",S))}const ca={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(W){var S=W.state,F=W.options,ae=F.gpuAcceleration,Ve=void 0===ae||ae,ve=F.adaptive,ht=void 0===ve||ve,Mt=F.roundOffsets,mo=void 0===Mt||Mt,Go={placement:Eo(S.placement),variation:ln(S.placement),popper:S.elements.popper,popperRect:S.rects.popper,gpuAcceleration:Ve,isFixed:"fixed"===S.options.strategy};null!=S.modifiersData.popperOffsets&&(S.styles.popper=Object.assign({},S.styles.popper,oa(Object.assign({},Go,{offsets:S.modifiersData.popperOffsets,position:S.options.strategy,adaptive:ht,roundOffsets:mo})))),null!=S.modifiersData.arrow&&(S.styles.arrow=Object.assign({},S.styles.arrow,oa(Object.assign({},Go,{offsets:S.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:mo})))),S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-placement":S.placement})},data:{}};var ii={passive:!0};const Gr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(W){var S=W.state,F=W.instance,ae=W.options,Ve=ae.scroll,ve=void 0===Ve||Ve,ht=ae.resize,Mt=void 0===ht||ht,mo=nt(S.elements.popper),Go=[].concat(S.scrollParents.reference,S.scrollParents.popper);return ve&&Go.forEach(function(zo){zo.addEventListener("scroll",F.update,ii)}),Mt&&mo.addEventListener("resize",F.update,ii),function(){ve&&Go.forEach(function(zo){zo.removeEventListener("scroll",F.update,ii)}),Mt&&mo.removeEventListener("resize",F.update,ii)}},data:{}};var rs={left:"right",right:"left",bottom:"top",top:"bottom"};function Fs(W){return W.replace(/left|right|bottom|top/g,function(S){return rs[S]})}var Kr={start:"end",end:"start"};function na(W){return W.replace(/start|end/g,function(S){return Kr[S]})}function da(W){var S=nt(W);return{scrollLeft:S.pageXOffset,scrollTop:S.pageYOffset}}function nl(W){return br(We(W)).left+da(W).scrollLeft}function za(W){var S=ue(W);return/auto|scroll|overlay|hidden/.test(S.overflow+S.overflowY+S.overflowX)}function Bo(W){return["html","body","#document"].indexOf(Be(W))>=0?W.ownerDocument.body:Bt(W)&&za(W)?W:Bo(yt(W))}function rl(W,S){var F;void 0===S&&(S=[]);var ae=Bo(W),Ve=ae===(null==(F=W.ownerDocument)?void 0:F.body),ve=nt(ae),ht=Ve?[ve].concat(ve.visualViewport||[],za(ae)?ae:[]):ae,Mt=S.concat(ht);return Ve?Mt:Mt.concat(rl(yt(ht)))}function Xr(W){return Object.assign({},W,{left:W.x,top:W.y,right:W.x+W.width,bottom:W.y+W.height})}function vs(W,S,F){return S===Vo?Xr(function(ae,Ve){var ve=nt(ae),ht=We(ae),Mt=ve.visualViewport,mo=ht.clientWidth,Go=ht.clientHeight,zo=0,oo=0;if(Mt){mo=Mt.width,Go=Mt.height;var tr=fn();(tr||!tr&&"fixed"===Ve)&&(zo=Mt.offsetLeft,oo=Mt.offsetTop)}return{width:mo,height:Go,x:zo+nl(ae),y:oo}}(W,F)):Qe(S)?((ve=br(ae=S,!1,"fixed"===F)).top=ve.top+ae.clientTop,ve.left=ve.left+ae.clientLeft,ve.bottom=ve.top+ae.clientHeight,ve.right=ve.left+ae.clientWidth,ve.width=ae.clientWidth,ve.height=ae.clientHeight,ve.x=ve.left,ve.y=ve.top,ve):Xr(function(ae){var Ve,ve=We(ae),ht=da(ae),Mt=null==(Ve=ae.ownerDocument)?void 0:Ve.body,mo=ho(ve.scrollWidth,ve.clientWidth,Mt?Mt.scrollWidth:0,Mt?Mt.clientWidth:0),Go=ho(ve.scrollHeight,ve.clientHeight,Mt?Mt.scrollHeight:0,Mt?Mt.clientHeight:0),zo=-ht.scrollLeft+nl(ae),oo=-ht.scrollTop;return"rtl"===ue(Mt||ve).direction&&(zo+=ho(ve.clientWidth,Mt?Mt.clientWidth:0)-mo),{width:mo,height:Go,x:zo,y:oo}}(We(W)));var ae,ve}function ji(W){var S,F=W.reference,ae=W.element,Ve=W.placement,ve=Ve?Eo(Ve):null,ht=Ve?ln(Ve):null,Mt=F.x+F.width/2-ae.width/2,mo=F.y+F.height/2-ae.height/2;switch(ve){case Ao:S={x:Mt,y:F.y-ae.height};break;case Nr:S={x:Mt,y:F.y+F.height};break;case ls:S={x:F.x+F.width,y:mo};break;case Kt:S={x:F.x-ae.width,y:mo};break;default:S={x:F.x,y:F.y}}var Go=ve?Fo(ve):null;if(null!=Go){var zo="y"===Go?"height":"width";switch(ht){case cs:S[Go]=S[Go]-(F[zo]/2-ae[zo]/2);break;case Dt:S[Go]=S[Go]+(F[zo]/2-ae[zo]/2)}}return S}function jr(W,S){void 0===S&&(S={});var Zn,ga,os,Pr,De,Wr,Ii,fl,ui,Jr,ae=S.placement,Ve=void 0===ae?W.placement:ae,ve=S.strategy,ht=void 0===ve?W.strategy:ve,Mt=S.boundary,mo=void 0===Mt?Nn:Mt,Go=S.rootBoundary,zo=void 0===Go?Vo:Go,oo=S.elementContext,tr=void 0===oo?Vs:oo,dn=S.altBoundary,tt=void 0!==dn&&dn,kn=S.padding,Or=void 0===kn?0:kn,Yn=tn("number"!=typeof Or?Or:Dn(Or,bs)),Hr=W.rects.popper,je=W.elements[tt?tr===Vs?ar:Vs:tr],Vn=(Zn=Qe(je)?je:je.contextElement||We(W.elements.popper),os=zo,Pr=ht,fl="clippingParents"===(ga=mo)?(Wr=rl(yt(De=Zn)),Qe(Ii=["absolute","fixed"].indexOf(ue(De).position)>=0&&Bt(De)?Lt(De):De)?Wr.filter(function(Ra){return Qe(Ra)&&Zo(Ra,Ii)&&"body"!==Be(Ra)}):[]):[].concat(ga),Jr=(ui=[].concat(fl,[os])).reduce(function(De,Wr){var Ii=vs(Zn,Wr,Pr);return De.top=ho(Ii.top,De.top),De.right=Fn(Ii.right,De.right),De.bottom=Fn(Ii.bottom,De.bottom),De.left=ho(Ii.left,De.left),De},vs(Zn,ui[0],Pr)),Jr.width=Jr.right-Jr.left,Jr.height=Jr.bottom-Jr.top,Jr.x=Jr.left,Jr.y=Jr.top,Jr),xr=br(W.elements.reference),Oo=ji({reference:xr,element:Hr,strategy:"absolute",placement:Ve}),Ur=Xr(Object.assign({},Hr,Oo)),Ir=tr===Vs?Ur:xr,Yr={top:Vn.top-Ir.top+Yn.top,bottom:Ir.bottom-Vn.bottom+Yn.bottom,left:Vn.left-Ir.left+Yn.left,right:Ir.right-Vn.right+Yn.right},pl=W.modifiersData.offset;if(tr===Vs&&pl){var qs=pl[Ve];Object.keys(Yr).forEach(function(Zn){var ga=[ls,Nr].indexOf(Zn)>=0?1:-1,os=[Ao,Nr].indexOf(Zn)>=0?"y":"x";Yr[Zn]+=qs[os]*ga})}return Yr}const ra={name:"flip",enabled:!0,phase:"main",fn:function(W){var S=W.state,F=W.options,ae=W.name;if(!S.modifiersData[ae]._skip){for(var Ve=F.mainAxis,ve=void 0===Ve||Ve,ht=F.altAxis,Mt=void 0===ht||ht,mo=F.fallbackPlacements,Go=F.padding,zo=F.boundary,oo=F.rootBoundary,tr=F.altBoundary,dn=F.flipVariations,tt=void 0===dn||dn,kn=F.allowedAutoPlacements,Or=S.options.placement,Yn=Eo(Or),wr=mo||(Yn!==Or&&tt?function(De){if(Eo(De)===Wo)return[];var Wr=Fs(De);return[na(De),Wr,na(Wr)]}(Or):[Fs(Or)]),Hr=[Or].concat(wr).reduce(function(De,Wr){return De.concat(Eo(Wr)===Wo?function er(W,S){void 0===S&&(S={});var Ve=S.boundary,ve=S.rootBoundary,ht=S.padding,Mt=S.flipVariations,mo=S.allowedAutoPlacements,Go=void 0===mo?Es:mo,zo=ln(S.placement),oo=zo?Mt?Bi:Bi.filter(function(tt){return ln(tt)===zo}):bs,tr=oo.filter(function(tt){return Go.indexOf(tt)>=0});0===tr.length&&(tr=oo);var dn=tr.reduce(function(tt,kn){return tt[kn]=jr(W,{placement:kn,boundary:Ve,rootBoundary:ve,padding:ht})[Eo(kn)],tt},{});return Object.keys(dn).sort(function(tt,kn){return dn[tt]-dn[kn]})}(S,{placement:Wr,boundary:zo,rootBoundary:oo,padding:Go,flipVariations:tt,allowedAutoPlacements:kn}):Wr)},[]),je=S.rects.reference,Vn=S.rects.popper,xr=new Map,Oo=!0,Ur=Hr[0],Ir=0;Ir<Hr.length;Ir++){var Yr=Hr[Ir],pl=Eo(Yr),qs=ln(Yr)===cs,Zn=[Ao,Nr].indexOf(pl)>=0,ga=Zn?"width":"height",os=jr(S,{placement:Yr,boundary:zo,rootBoundary:oo,altBoundary:tr,padding:Go}),Pr=Zn?qs?ls:Kt:qs?Nr:Ao;je[ga]>Vn[ga]&&(Pr=Fs(Pr));var fl=Fs(Pr),ui=[];if(ve&&ui.push(os[pl]<=0),Mt&&ui.push(os[Pr]<=0,os[fl]<=0),ui.every(function(De){return De})){Ur=Yr,Oo=!1;break}xr.set(Yr,ui)}if(Oo)for(var Pd=function(De){var Wr=Hr.find(function(Ii){var Ra=xr.get(Ii);if(Ra)return Ra.slice(0,De).every(function(zl){return zl})});if(Wr)return Ur=Wr,"break"},Jr=tt?3:1;Jr>0&&"break"!==Pd(Jr);Jr--);S.placement!==Ur&&(S.modifiersData[ae]._skip=!0,S.placement=Ur,S.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qo(W,S,F){return void 0===F&&(F={x:0,y:0}),{top:W.top-S.height-F.y,right:W.right-S.width+F.x,bottom:W.bottom-S.height+F.y,left:W.left-S.width-F.x}}function xi(W){return[Ao,ls,Nr,Kt].some(function(S){return W[S]>=0})}const It={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(W){var S=W.state,F=W.name,ae=S.rects.reference,Ve=S.rects.popper,ve=S.modifiersData.preventOverflow,ht=jr(S,{elementContext:"reference"}),Mt=jr(S,{altBoundary:!0}),mo=qo(ht,ae),Go=qo(Mt,Ve,ve),zo=xi(mo),oo=xi(Go);S.modifiersData[F]={referenceClippingOffsets:mo,popperEscapeOffsets:Go,isReferenceHidden:zo,hasPopperEscaped:oo},S.attributes.popper=Object.assign({},S.attributes.popper,{"data-popper-reference-hidden":zo,"data-popper-escaped":oo})}},Ts={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(W){var S=W.state,ae=W.name,Ve=W.options.offset,ve=void 0===Ve?[0,0]:Ve,ht=Es.reduce(function(zo,oo){return zo[oo]=(dn=S.rects,tt=ve,kn=Eo(tr=oo),Or=[Kt,Ao].indexOf(kn)>=0?-1:1,wr=(wr=(Yn="function"==typeof tt?tt(Object.assign({},dn,{placement:tr})):tt)[0])||0,Hr=((Hr=Yn[1])||0)*Or,[Kt,ls].indexOf(kn)>=0?{x:Hr,y:wr}:{x:wr,y:Hr}),zo;var tr,dn,tt,kn,Or,Yn,wr,Hr},{}),Mt=ht[S.placement],Go=Mt.y;null!=S.modifiersData.popperOffsets&&(S.modifiersData.popperOffsets.x+=Mt.x,S.modifiersData.popperOffsets.y+=Go),S.modifiersData[ae]=ht}},As={name:"popperOffsets",enabled:!0,phase:"read",fn:function(W){var S=W.state;S.modifiersData[W.name]=ji({reference:S.rects.reference,element:S.rects.popper,strategy:"absolute",placement:S.placement})},data:{}},Br={name:"preventOverflow",enabled:!0,phase:"main",fn:function(W){var _c,jg,S=W.state,F=W.options,ae=W.name,Ve=F.mainAxis,ve=void 0===Ve||Ve,ht=F.altAxis,Mt=void 0!==ht&&ht,tr=F.tether,dn=void 0===tr||tr,tt=F.tetherOffset,kn=void 0===tt?0:tt,Or=jr(S,{boundary:F.boundary,rootBoundary:F.rootBoundary,padding:F.padding,altBoundary:F.altBoundary}),Yn=Eo(S.placement),wr=ln(S.placement),Hr=!wr,je=Fo(Yn),Vn="x"===je?"y":"x",xr=S.modifiersData.popperOffsets,Oo=S.rects.reference,Ur=S.rects.popper,Ir="function"==typeof kn?kn(Object.assign({},S.rects,{placement:S.placement})):kn,Yr="number"==typeof Ir?{mainAxis:Ir,altAxis:Ir}:Object.assign({mainAxis:0,altAxis:0},Ir),pl=S.modifiersData.offset?S.modifiersData.offset[S.placement]:null,qs={x:0,y:0};if(xr){if(ve){var Zn,ga="y"===je?Ao:Kt,os="y"===je?Nr:ls,Pr="y"===je?"height":"width",fl=xr[je],ui=fl+Or[ga],Pd=fl-Or[os],Jr=dn?-Ur[Pr]/2:0,De=wr===cs?Oo[Pr]:Ur[Pr],Wr=wr===cs?-Ur[Pr]:-Oo[Pr],Ii=S.elements.arrow,Ra=dn&&Ii?Zs(Ii):{width:0,height:0},zl=S.modifiersData["arrow#persistent"]?S.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},mi=zl[ga],Gs=zl[os],wc=So(0,Oo[Pr],Ra[Pr]),Fd=Hr?Oo[Pr]/2-Jr-wc-mi-Yr.mainAxis:De-wc-mi-Yr.mainAxis,Io=Hr?-Oo[Pr]/2+Jr+wc+Gs+Yr.mainAxis:Wr+wc+Gs+Yr.mainAxis,Rl=S.elements.arrow&&Lt(S.elements.arrow),tc=null!=(Zn=pl?.[je])?Zn:0,$c=fl+Io-tc,hd=So(dn?Fn(ui,fl+Fd-tc-(Rl?"y"===je?Rl.clientTop||0:Rl.clientLeft||0:0)):ui,fl,dn?ho(Pd,$c):Pd);xr[je]=hd,qs[je]=hd-fl}if(Mt){var Da,Vl=xr[Vn],js="y"===Vn?"height":"width",sl=Vl+Or["x"===je?Ao:Kt],Dl=Vl-Or["x"===je?Nr:ls],Ba=-1!==[Ao,Kt].indexOf(Yn),yu=null!=(Da=pl?.[Vn])?Da:0,ti=Ba?sl:Vl-Oo[js]-Ur[js]-yu+Yr.altAxis,xc=Ba?Vl+Oo[js]+Ur[js]-yu-Yr.altAxis:Dl,wu=dn&&Ba?(jg=So(ti,Vl,_c=xc))>_c?_c:jg:So(dn?ti:sl,Vl,dn?xc:Dl);xr[Vn]=wu,qs[Vn]=wu-Vl}S.modifiersData[ae]=qs}},requiresIfExists:["offset"]};function zc(W,S,F){void 0===F&&(F=!1);var ae,Ve,oo,tr,dn,tt,ve=Bt(S),ht=Bt(S)&&(tr=(oo=S).getBoundingClientRect(),dn=Qn(tr.width)/oo.offsetWidth||1,tt=Qn(tr.height)/oo.offsetHeight||1,1!==dn||1!==tt),Mt=We(S),mo=br(W,ht,F),Go={scrollLeft:0,scrollTop:0},zo={x:0,y:0};return(ve||!ve&&!F)&&(("body"!==Be(S)||za(Mt))&&(Go=(ae=S)!==nt(ae)&&Bt(ae)?{scrollLeft:(Ve=ae).scrollLeft,scrollTop:Ve.scrollTop}:da(ae)),Bt(S)?((zo=br(S,!0)).x+=S.clientLeft,zo.y+=S.clientTop):Mt&&(zo.x=nl(Mt))),{x:mo.left+Go.scrollLeft-zo.x,y:mo.top+Go.scrollTop-zo.y,width:mo.width,height:mo.height}}function Xl(W){var S=new Map,F=new Set,ae=[];function Ve(ve){F.add(ve.name),[].concat(ve.requires||[],ve.requiresIfExists||[]).forEach(function(ht){if(!F.has(ht)){var Mt=S.get(ht);Mt&&Ve(Mt)}}),ae.push(ve)}return W.forEach(function(ve){S.set(ve.name,ve)}),W.forEach(function(ve){F.has(ve.name)||Ve(ve)}),ae}var Lr={placement:"bottom",modifiers:[],strategy:"absolute"};function Sl(){for(var W=arguments.length,S=new Array(W),F=0;F<W;F++)S[F]=arguments[F];return!S.some(function(ae){return!(ae&&"function"==typeof ae.getBoundingClientRect)})}function Er(W){void 0===W&&(W={});var F=W.defaultModifiers,ae=void 0===F?[]:F,Ve=W.defaultOptions,ve=void 0===Ve?Lr:Ve;return function(ht,Mt,mo){void 0===mo&&(mo=ve);var Go,zo,oo={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lr,ve),modifiersData:{},elements:{reference:ht,popper:Mt},attributes:{},styles:{}},tr=[],dn=!1,tt={state:oo,setOptions:function(Or){var Yn="function"==typeof Or?Or(oo.options):Or;kn(),oo.options=Object.assign({},ve,oo.options,Yn),oo.scrollParents={reference:Qe(ht)?rl(ht):ht.contextElement?rl(ht.contextElement):[],popper:rl(Mt)};var wr,Hr,Vn,xr,je=(wr=[].concat(ae,oo.options.modifiers),Hr=wr.reduce(function(Vn,xr){var Oo=Vn[xr.name];return Vn[xr.name]=Oo?Object.assign({},Oo,xr,{options:Object.assign({},Oo.options,xr.options),data:Object.assign({},Oo.data,xr.data)}):xr,Vn},{}),Vn=Object.keys(Hr).map(function(Vn){return Hr[Vn]}),xr=Xl(Vn),pe.reduce(function(Oo,Ur){return Oo.concat(xr.filter(function(Ir){return Ir.phase===Ur}))},[]));return oo.orderedModifiers=je.filter(function(Vn){return Vn.enabled}),oo.orderedModifiers.forEach(function(Vn){var Oo=Vn.options,Ir=Vn.effect;if("function"==typeof Ir){var Yr=Ir({state:oo,name:Vn.name,instance:tt,options:void 0===Oo?{}:Oo});tr.push(Yr||function(){})}}),tt.update()},forceUpdate:function(){if(!dn){var Or=oo.elements,Yn=Or.reference,wr=Or.popper;if(Sl(Yn,wr)){oo.rects={reference:zc(Yn,Lt(wr),"fixed"===oo.options.strategy),popper:Zs(wr)},oo.reset=!1,oo.placement=oo.options.placement,oo.orderedModifiers.forEach(function(Ir){return oo.modifiersData[Ir.name]=Object.assign({},Ir.data)});for(var Hr=0;Hr<oo.orderedModifiers.length;Hr++)if(!0!==oo.reset){var je=oo.orderedModifiers[Hr],Vn=je.fn,xr=je.options;"function"==typeof Vn&&(oo=Vn({state:oo,options:void 0===xr?{}:xr,name:je.name,instance:tt})||oo)}else oo.reset=!1,Hr=-1}}},update:(Go=function(){return new Promise(function(Or){tt.forceUpdate(),Or(oo)})},function(){return zo||(zo=new Promise(function(Or){Promise.resolve().then(function(){zo=void 0,Or(Go())})})),zo}),destroy:function(){kn(),dn=!0}};if(!Sl(ht,Mt))return tt;function kn(){tr.forEach(function(Or){return Or()}),tr=[]}return tt.setOptions(mo).then(function(Or){!dn&&mo.onFirstUpdate&&mo.onFirstUpdate(Or)}),tt}}var fc=Er(),Ns=Er({defaultModifiers:[Gr,As,ca,jt]}),Ui=Er({defaultModifiers:[Gr,As,ca,jt,Ts,ra,Br,rr,It]});const ka=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ya,afterRead:Sa,afterWrite:Fa,applyStyles:jt,arrow:rr,auto:Wo,basePlacements:bs,beforeMain:ai,beforeRead:Ja,beforeWrite:Pa,bottom:Nr,clippingParents:Nn,computeStyles:ca,createPopper:Ui,createPopperBase:fc,createPopperLite:Ns,detectOverflow:jr,end:Dt,eventListeners:Gr,flip:ra,hide:It,left:Kt,main:"main",modifierPhases:pe,offset:Ts,placements:Es,popper:Vs,popperGenerator:Er,popperOffsets:As,preventOverflow:Br,read:"read",reference:ar,right:ls,start:cs,top:Ao,variationPlacements:Bi,viewport:Vo,write:"write"},Symbol.toStringTag,{value:"Module"})),Kn="dropdown",Yl="ArrowUp",Ms="ArrowDown",kl="click.bs.dropdown.data-api",Fl="keydown.bs.dropdown.data-api",vr="show",wa='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Y=`${wa}.show`,le=".dropdown-menu",Ce=pt()?"top-end":"top-start",Le=pt()?"top-start":"top-end",ke=pt()?"bottom-end":"bottom-start",lt=pt()?"bottom-start":"bottom-end",ct=pt()?"left-start":"right-start",Rt=pt()?"right-start":"left-start",wo={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Jt={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ko extends Tt{constructor(S,F){super(S,F),this._popper=null,this._parent=this._element.parentNode,this._menu=Ie.next(this._element,le)[0]||Ie.prev(this._element,le)[0]||Ie.findOne(le,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wo}static get DefaultType(){return Jt}static get NAME(){return Kn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ar(this._element)||this._isShown())return;const S={relatedTarget:this._element};if(!Nt.trigger(this._element,"show.bs.dropdown",S).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const F of[].concat(...document.body.children))Nt.on(F,"mouseover",Is);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(vr),this._element.classList.add(vr),Nt.trigger(this._element,"shown.bs.dropdown",S)}}hide(){!Ar(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(S){if(!Nt.trigger(this._element,"hide.bs.dropdown",S).defaultPrevented){if("ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))Nt.off(F,"mouseover",Is);this._popper&&this._popper.destroy(),this._menu.classList.remove(vr),this._element.classList.remove(vr),this._element.setAttribute("aria-expanded","false"),sr.removeDataAttribute(this._menu,"popper"),Nt.trigger(this._element,"hidden.bs.dropdown",S)}}_getConfig(S){if("object"==typeof(S=super._getConfig(S)).reference&&!No(S.reference)&&"function"!=typeof S.reference.getBoundingClientRect)throw new TypeError(`${Kn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return S}_createPopper(){if(void 0===ka)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let S=this._element;"parent"===this._config.reference?S=this._parent:No(this._config.reference)?S=ps(this._config.reference):"object"==typeof this._config.reference&&(S=this._config.reference);const F=this._getPopperConfig();this._popper=Ui(S,this._menu,F)}_isShown(){return this._menu.classList.contains(vr)}_getPlacement(){const S=this._parent;if(S.classList.contains("dropend"))return ct;if(S.classList.contains("dropstart"))return Rt;if(S.classList.contains("dropup-center"))return"top";if(S.classList.contains("dropdown-center"))return"bottom";const F="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return S.classList.contains("dropup")?F?Le:Ce:F?lt:ke}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:S}=this._config;return"string"==typeof S?S.split(",").map(F=>Number.parseInt(F,10)):"function"==typeof S?F=>S(F,this._element):S}_getPopperConfig(){const S={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(sr.setDataAttribute(this._menu,"popper","static"),S.modifiers=[{name:"applyStyles",enabled:!1}]),{...S,...jn(this._config.popperConfig,[S])}}_selectMenuItem({key:S,target:F}){const ae=Ie.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ve=>as(Ve));ae.length&&Ft(ae,F,S===Ms,!ae.includes(F)).focus()}static jQueryInterface(S){return this.each(function(){const F=ko.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S])throw new TypeError(`No method named "${S}"`);F[S]()}})}static clearMenus(S){if(2===S.button||"keyup"===S.type&&"Tab"!==S.key)return;const F=Ie.find(Y);for(const ae of F){const Ve=ko.getInstance(ae);if(!Ve||!1===Ve._config.autoClose)continue;const ve=S.composedPath(),ht=ve.includes(Ve._menu);if(ve.includes(Ve._element)||"inside"===Ve._config.autoClose&&!ht||"outside"===Ve._config.autoClose&&ht||Ve._menu.contains(S.target)&&("keyup"===S.type&&"Tab"===S.key||/input|select|option|textarea|form/i.test(S.target.tagName)))continue;const Mt={relatedTarget:Ve._element};"click"===S.type&&(Mt.clickEvent=S),Ve._completeHide(Mt)}}static dataApiKeydownHandler(S){const F=/input|textarea/i.test(S.target.tagName),ae="Escape"===S.key,Ve=[Yl,Ms].includes(S.key);if(!Ve&&!ae||F&&!ae)return;S.preventDefault();const ve=this.matches(wa)?this:Ie.prev(this,wa)[0]||Ie.next(this,wa)[0]||Ie.findOne(wa,S.delegateTarget.parentNode),ht=ko.getOrCreateInstance(ve);if(Ve)return S.stopPropagation(),ht.show(),void ht._selectMenuItem(S);ht._isShown()&&(S.stopPropagation(),ht.hide(),ve.focus())}}Nt.on(document,Fl,wa,ko.dataApiKeydownHandler),Nt.on(document,Fl,le,ko.dataApiKeydownHandler),Nt.on(document,kl,ko.clearMenus),Nt.on(document,"keyup.bs.dropdown.data-api",ko.clearMenus),Nt.on(document,kl,wa,function(W){W.preventDefault(),ko.getOrCreateInstance(this).toggle()}),lo(ko);const cn="mousedown.bs.backdrop",Xn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},zn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class bn extends Xe{constructor(S){super(),this._config=this._getConfig(S),this._isAppended=!1,this._element=null}static get Default(){return Xn}static get DefaultType(){return zn}static get NAME(){return"backdrop"}show(S){if(!this._config.isVisible)return void jn(S);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{jn(S)})}hide(S){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),jn(S)})):jn(S)}dispose(){this._isAppended&&(Nt.off(this._element,cn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const S=document.createElement("div");S.className=this._config.className,this._config.isAnimated&&S.classList.add("fade"),this._element=S}return this._element}_configAfterMerge(S){return S.rootElement=ps(S.rootElement),S}_append(){if(this._isAppended)return;const S=this._getElement();this._config.rootElement.append(S),Nt.on(S,cn,()=>{jn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(S){At(S,this._getElement(),this._config.isAnimated)}}const vn=".bs.focustrap",ir="backward",fe={autofocus:!0,trapElement:null},Qa={autofocus:"boolean",trapElement:"element"};class gl extends Xe{constructor(S){super(),this._config=this._getConfig(S),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return fe}static get DefaultType(){return Qa}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Nt.off(document,vn),Nt.on(document,"focusin.bs.focustrap",S=>this._handleFocusin(S)),Nt.on(document,"keydown.tab.bs.focustrap",S=>this._handleKeydown(S)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Nt.off(document,vn))}_handleFocusin(S){const{trapElement:F}=this._config;if(S.target===document||S.target===F||F.contains(S.target))return;const ae=Ie.focusableChildren(F);0===ae.length?F.focus():this._lastTabNavDirection===ir?ae[ae.length-1].focus():ae[0].focus()}_handleKeydown(S){"Tab"===S.key&&(this._lastTabNavDirection=S.shiftKey?ir:"forward")}}const li=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Vc=".sticky-top",yr="padding-right",hl="margin-right";class Ld{constructor(){this._element=document.body}getWidth(){const S=document.documentElement.clientWidth;return Math.abs(window.innerWidth-S)}hide(){const S=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,yr,F=>F+S),this._setElementAttributes(li,yr,F=>F+S),this._setElementAttributes(Vc,hl,F=>F-S)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,yr),this._resetElementAttributes(li,yr),this._resetElementAttributes(Vc,hl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(S,F,ae){const Ve=this.getWidth();this._applyManipulationCallback(S,ve=>{if(ve!==this._element&&window.innerWidth>ve.clientWidth+Ve)return;this._saveInitialAttribute(ve,F);const ht=window.getComputedStyle(ve).getPropertyValue(F);ve.style.setProperty(F,`${ae(Number.parseFloat(ht))}px`)})}_saveInitialAttribute(S,F){const ae=S.style.getPropertyValue(F);ae&&sr.setDataAttribute(S,F,ae)}_resetElementAttributes(S,F){this._applyManipulationCallback(S,ae=>{const Ve=sr.getDataAttribute(ae,F);null!==Ve?(sr.removeDataAttribute(ae,F),ae.style.setProperty(F,Ve)):ae.style.removeProperty(F)})}_applyManipulationCallback(S,F){if(No(S))F(S);else for(const ae of Ie.find(S,this._element))F(ae)}}const El=".bs.modal",Zc="hidden.bs.modal",Wi="show.bs.modal",hu="modal-open",Ci="modal-static",jc={backdrop:!0,focus:!0,keyboard:!0},Uc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Jl extends Tt{constructor(S,F){super(S,F),this._dialog=Ie.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ld,this._addEventListeners()}static get Default(){return jc}static get DefaultType(){return Uc}static get NAME(){return"modal"}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||this._isTransitioning||Nt.trigger(this._element,Wi,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(hu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(S)))}hide(){this._isShown&&!this._isTransitioning&&(Nt.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Nt.off(window,El),Nt.off(this._dialog,El),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new bn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gl({trapElement:this._element})}_showElement(S){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const F=Ie.findOne(".modal-body",this._dialog);F&&(F.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Nt.trigger(this._element,"shown.bs.modal",{relatedTarget:S})},this._dialog,this._isAnimated())}_addEventListeners(){Nt.on(this._element,"keydown.dismiss.bs.modal",S=>{"Escape"===S.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Nt.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Nt.on(this._element,"mousedown.dismiss.bs.modal",S=>{Nt.one(this._element,"click.dismiss.bs.modal",F=>{this._element===S.target&&this._element===F.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(hu),this._resetAdjustments(),this._scrollBar.reset(),Nt.trigger(this._element,Zc)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Nt.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const S=this._element.scrollHeight>document.documentElement.clientHeight,F=this._element.style.overflowY;"hidden"===F||this._element.classList.contains(Ci)||(S||(this._element.style.overflowY="hidden"),this._element.classList.add(Ci),this._queueCallback(()=>{this._element.classList.remove(Ci),this._queueCallback(()=>{this._element.style.overflowY=F},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const S=this._element.scrollHeight>document.documentElement.clientHeight,F=this._scrollBar.getWidth(),ae=F>0;if(ae&&!S){const Ve=pt()?"paddingLeft":"paddingRight";this._element.style[Ve]=`${F}px`}if(!ae&&S){const Ve=pt()?"paddingRight":"paddingLeft";this._element.style[Ve]=`${F}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(S,F){return this.each(function(){const ae=Jl.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===ae[S])throw new TypeError(`No method named "${S}"`);ae[S](F)}})}}Nt.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(W){const S=Ie.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&W.preventDefault(),Nt.one(S,Wi,ae=>{ae.defaultPrevented||Nt.one(S,Zc,()=>{as(this)&&this.focus()})});const F=Ie.findOne(".modal.show");F&&Jl.getInstance(F).hide(),Jl.getOrCreateInstance(S).toggle(this)}),To(Jl),lo(Jl);const bc="showing",_i=".offcanvas.show",vc="hidePrevented.bs.offcanvas",Ol="hidden.bs.offcanvas",Tl={backdrop:!0,keyboard:!0,scroll:!1},ua={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ds extends Tt{constructor(S,F){super(S,F),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Tl}static get DefaultType(){return ua}static get NAME(){return"offcanvas"}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||Nt.trigger(this._element,"show.bs.offcanvas",{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ld).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(bc),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(bc),Nt.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:S})},this._element,!0))}hide(){this._isShown&&(Nt.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ld).reset(),Nt.trigger(this._element,Ol)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const S=Boolean(this._config.backdrop);return new bn({className:"offcanvas-backdrop",isVisible:S,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:S?()=>{"static"!==this._config.backdrop?this.hide():Nt.trigger(this._element,vc)}:null})}_initializeFocusTrap(){return new gl({trapElement:this._element})}_addEventListeners(){Nt.on(this._element,"keydown.dismiss.bs.offcanvas",S=>{"Escape"===S.key&&(this._config.keyboard?this.hide():Nt.trigger(this._element,vc))})}static jQueryInterface(S){return this.each(function(){const F=ds.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S]||S.startsWith("_")||"constructor"===S)throw new TypeError(`No method named "${S}"`);F[S](this)}})}}Nt.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(W){const S=Ie.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&W.preventDefault(),Ar(this))return;Nt.one(S,Ol,()=>{as(this)&&this.focus()});const F=Ie.findOne(_i);F&&F!==S&&ds.getInstance(F).hide(),ds.getOrCreateInstance(S).toggle(this)}),Nt.on(window,"load.bs.offcanvas.data-api",()=>{for(const W of Ie.find(_i))ds.getOrCreateInstance(W).show()}),Nt.on(window,"resize.bs.offcanvas",()=>{for(const W of Ie.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(W).position&&ds.getOrCreateInstance(W).hide()}),To(ds),lo(ds);const $i=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Va=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Hd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,pu=(W,S)=>{const F=W.nodeName.toLowerCase();return S.includes(F)?!$i.has(F)||Boolean(Va.test(W.nodeValue)||Hd.test(W.nodeValue)):S.filter(ae=>ae instanceof RegExp).some(ae=>ae.test(F))},md={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ql={allowList:md,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},us={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ma={entry:"(string|element|function|null)",selector:"(string|element)"};class Al extends Xe{constructor(S){super(),this._config=this._getConfig(S)}static get Default(){return Ql}static get DefaultType(){return us}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(S=>this._resolvePossibleFunction(S)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(S){return this._checkContent(S),this._config.content={...this._config.content,...S},this}toHtml(){const S=document.createElement("div");S.innerHTML=this._maybeSanitize(this._config.template);for(const[Ve,ve]of Object.entries(this._config.content))this._setContent(S,ve,Ve);const F=S.children[0],ae=this._resolvePossibleFunction(this._config.extraClass);return ae&&F.classList.add(...ae.split(" ")),F}_typeCheckConfig(S){super._typeCheckConfig(S),this._checkContent(S.content)}_checkContent(S){for(const[F,ae]of Object.entries(S))super._typeCheckConfig({selector:F,entry:ae},ma)}_setContent(S,F,ae){const Ve=Ie.findOne(ae,S);Ve&&((F=this._resolvePossibleFunction(F))?No(F)?this._putElementInTemplate(ps(F),Ve):this._config.html?Ve.innerHTML=this._maybeSanitize(F):Ve.textContent=F:Ve.remove())}_maybeSanitize(S){return this._config.sanitize?function(F,ae,Ve){if(!F.length)return F;if(Ve&&"function"==typeof Ve)return Ve(F);const ve=(new window.DOMParser).parseFromString(F,"text/html"),ht=[].concat(...ve.body.querySelectorAll("*"));for(const Mt of ht){const mo=Mt.nodeName.toLowerCase();if(!Object.keys(ae).includes(mo)){Mt.remove();continue}const Go=[].concat(...Mt.attributes),zo=[].concat(ae["*"]||[],ae[mo]||[]);for(const oo of Go)pu(oo,zo)||Mt.removeAttribute(oo.nodeName)}return ve.body.innerHTML}(S,this._config.allowList,this._config.sanitizeFn):S}_resolvePossibleFunction(S){return jn(S,[this])}_putElementInTemplate(S,F){if(this._config.html)return F.innerHTML="",void F.append(S);F.textContent=S.textContent}}const Ea=new Set(["sanitize","allowList","sanitizeFn"]),$s="fade",Li="show",Wc="hide.bs.modal",Mn="hover",ec={AUTO:"auto",TOP:"top",RIGHT:pt()?"left":"right",BOTTOM:"bottom",LEFT:pt()?"right":"left"},Nl={allowList:md,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},fu={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class di extends Tt{constructor(S,F){if(void 0===ka)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(S,F),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Nl}static get DefaultType(){return fu}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Nt.off(this._element.closest(".modal"),Wc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const S=Nt.trigger(this._element,this.constructor.eventName("show")),F=(Ya(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(S.defaultPrevented||!F)return;this._disposePopper();const ae=this._getTipElement();this._element.setAttribute("aria-describedby",ae.getAttribute("id"));const{container:Ve}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ve.append(ae),Nt.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(ae),ae.classList.add(Li),"ontouchstart"in document.documentElement)for(const ve of[].concat(...document.body.children))Nt.on(ve,"mouseover",Is);this._queueCallback(()=>{Nt.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Nt.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Li),"ontouchstart"in document.documentElement)for(const S of[].concat(...document.body.children))Nt.off(S,"mouseover",Is);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Nt.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(S){const F=this._getTemplateFactory(S).toHtml();if(!F)return null;F.classList.remove($s,Li),F.classList.add(`bs-${this.constructor.NAME}-auto`);const ae=(Ve=>{do{Ve+=Math.floor(1e6*Math.random())}while(document.getElementById(Ve));return Ve})(this.constructor.NAME).toString();return F.setAttribute("id",ae),this._isAnimated()&&F.classList.add($s),F}setContent(S){this._newContent=S,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(S){return this._templateFactory?this._templateFactory.changeContent(S):this._templateFactory=new Al({...this._config,content:S,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(S){return this.constructor.getOrCreateInstance(S.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains($s)}_isShown(){return this.tip&&this.tip.classList.contains(Li)}_createPopper(S){const F=jn(this._config.placement,[this,S,this._element]),ae=ec[F.toUpperCase()];return Ui(this._element,S,this._getPopperConfig(ae))}_getOffset(){const{offset:S}=this._config;return"string"==typeof S?S.split(",").map(F=>Number.parseInt(F,10)):"function"==typeof S?F=>S(F,this._element):S}_resolvePossibleFunction(S){return jn(S,[this._element])}_getPopperConfig(S){const F={placement:S,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:ae=>{this._getTipElement().setAttribute("data-popper-placement",ae.state.placement)}}]};return{...F,...jn(this._config.popperConfig,[F])}}_setListeners(){const S=this._config.trigger.split(" ");for(const F of S)if("click"===F)Nt.on(this._element,this.constructor.eventName("click"),this._config.selector,ae=>{this._initializeOnDelegatedTarget(ae).toggle()});else if("manual"!==F){const ae=this.constructor.eventName(F===Mn?"mouseenter":"focusin"),Ve=this.constructor.eventName(F===Mn?"mouseleave":"focusout");Nt.on(this._element,ae,this._config.selector,ve=>{const ht=this._initializeOnDelegatedTarget(ve);ht._activeTrigger["focusin"===ve.type?"focus":Mn]=!0,ht._enter()}),Nt.on(this._element,Ve,this._config.selector,ve=>{const ht=this._initializeOnDelegatedTarget(ve);ht._activeTrigger["focusout"===ve.type?"focus":Mn]=ht._element.contains(ve.relatedTarget),ht._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Nt.on(this._element.closest(".modal"),Wc,this._hideModalHandler)}_fixTitle(){const S=this._element.getAttribute("title");S&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",S),this._element.setAttribute("data-bs-original-title",S),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(S,F){clearTimeout(this._timeout),this._timeout=setTimeout(S,F)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(S){const F=sr.getDataAttributes(this._element);for(const ae of Object.keys(F))Ea.has(ae)&&delete F[ae];return S={...F,..."object"==typeof S&&S?S:{}},S=this._mergeConfigObj(S),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}_configAfterMerge(S){return S.container=!1===S.container?document.body:ps(S.container),"number"==typeof S.delay&&(S.delay={show:S.delay,hide:S.delay}),"number"==typeof S.title&&(S.title=S.title.toString()),"number"==typeof S.content&&(S.content=S.content.toString()),S}_getDelegateConfig(){const S={};for(const[F,ae]of Object.entries(this._config))this.constructor.Default[F]!==ae&&(S[F]=ae);return S.selector=!1,S.trigger="manual",S}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(S){return this.each(function(){const F=di.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S])throw new TypeError(`No method named "${S}"`);F[S]()}})}}lo(di);const yc={...di.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Gm={...di.DefaultType,content:"(null|string|element|function)"};class ei extends di{static get Default(){return yc}static get DefaultType(){return Gm}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(S){return this.each(function(){const F=ei.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S])throw new TypeError(`No method named "${S}"`);F[S]()}})}}lo(ei);const qi="click.bs.scrollspy",Ml="active",bu={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},V={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class K extends Tt{constructor(S,F){super(S,F),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bu}static get DefaultType(){return V}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const S of this._observableSections.values())this._observer.observe(S)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(S){return S.target=ps(S.target)||document.body,S.rootMargin=S.offset?`${S.offset}px 0px -30%`:S.rootMargin,"string"==typeof S.threshold&&(S.threshold=S.threshold.split(",").map(F=>Number.parseFloat(F))),S}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Nt.off(this._config.target,qi),Nt.on(this._config.target,qi,"[href]",S=>{const F=this._observableSections.get(S.target.hash);if(F){S.preventDefault();const ae=this._rootElement||window,Ve=F.offsetTop-this._element.offsetTop;if(ae.scrollTo)return void ae.scrollTo({top:Ve,behavior:"smooth"});ae.scrollTop=Ve}}))}_getNewObserver(){return new IntersectionObserver(F=>this._observerCallback(F),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(S){const F=ht=>this._targetLinks.get(`#${ht.target.id}`),ae=ht=>{this._previousScrollData.visibleEntryTop=ht.target.offsetTop,this._process(F(ht))},Ve=(this._rootElement||document.documentElement).scrollTop,ve=Ve>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Ve;for(const ht of S){if(!ht.isIntersecting){this._activeTarget=null,this._clearActiveClass(F(ht));continue}const Mt=ht.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ve&&Mt){if(ae(ht),!Ve)return}else ve||Mt||ae(ht)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const S=Ie.find("[href]",this._config.target);for(const F of S){if(!F.hash||Ar(F))continue;const ae=Ie.findOne(F.hash,this._element);as(ae)&&(this._targetLinks.set(F.hash,F),this._observableSections.set(F.hash,ae))}}_process(S){this._activeTarget!==S&&(this._clearActiveClass(this._config.target),this._activeTarget=S,S.classList.add(Ml),this._activateParents(S),Nt.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:S}))}_activateParents(S){if(S.classList.contains("dropdown-item"))Ie.findOne(".dropdown-toggle",S.closest(".dropdown")).classList.add(Ml);else for(const F of Ie.parents(S,".nav, .list-group"))for(const ae of Ie.prev(F,".nav-link, .nav-item > .nav-link, .list-group-item"))ae.classList.add(Ml)}_clearActiveClass(S){S.classList.remove(Ml);const F=Ie.find("[href].active",S);for(const ae of F)ae.classList.remove(Ml)}static jQueryInterface(S){return this.each(function(){const F=K.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S]||S.startsWith("_")||"constructor"===S)throw new TypeError(`No method named "${S}"`);F[S]()}})}}Nt.on(window,"load.bs.scrollspy.data-api",()=>{for(const W of Ie.find('[data-bs-spy="scroll"]'))K.getOrCreateInstance(W)}),lo(K);const G="ArrowLeft",se="ArrowRight",He="ArrowUp",Fe="ArrowDown",gt="active",Pt="show",zt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ro=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${zt}`;class co extends Tt{constructor(S){super(S),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Nt.on(this._element,"keydown.bs.tab",F=>this._keydown(F)))}static get NAME(){return"tab"}show(){const S=this._element;if(this._elemIsActive(S))return;const F=this._getActiveElem(),ae=F?Nt.trigger(F,"hide.bs.tab",{relatedTarget:S}):null;Nt.trigger(S,"show.bs.tab",{relatedTarget:F}).defaultPrevented||ae&&ae.defaultPrevented||(this._deactivate(F,S),this._activate(S,F))}_activate(S,F){S&&(S.classList.add(gt),this._activate(Ie.getElementFromSelector(S)),this._queueCallback(()=>{"tab"===S.getAttribute("role")?(S.removeAttribute("tabindex"),S.setAttribute("aria-selected",!0),this._toggleDropDown(S,!0),Nt.trigger(S,"shown.bs.tab",{relatedTarget:F})):S.classList.add(Pt)},S,S.classList.contains("fade")))}_deactivate(S,F){S&&(S.classList.remove(gt),S.blur(),this._deactivate(Ie.getElementFromSelector(S)),this._queueCallback(()=>{"tab"===S.getAttribute("role")?(S.setAttribute("aria-selected",!1),S.setAttribute("tabindex","-1"),this._toggleDropDown(S,!1),Nt.trigger(S,"hidden.bs.tab",{relatedTarget:F})):S.classList.remove(Pt)},S,S.classList.contains("fade")))}_keydown(S){if(![G,se,He,Fe].includes(S.key))return;S.stopPropagation(),S.preventDefault();const F=[se,Fe].includes(S.key),ae=Ft(this._getChildren().filter(Ve=>!Ar(Ve)),S.target,F,!0);ae&&(ae.focus({preventScroll:!0}),co.getOrCreateInstance(ae).show())}_getChildren(){return Ie.find(ro,this._parent)}_getActiveElem(){return this._getChildren().find(S=>this._elemIsActive(S))||null}_setInitialAttributes(S,F){this._setAttributeIfNotExists(S,"role","tablist");for(const ae of F)this._setInitialAttributesOnChild(ae)}_setInitialAttributesOnChild(S){S=this._getInnerElement(S);const F=this._elemIsActive(S),ae=this._getOuterElement(S);S.setAttribute("aria-selected",F),ae!==S&&this._setAttributeIfNotExists(ae,"role","presentation"),F||S.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(S,"role","tab"),this._setInitialAttributesOnTargetPanel(S)}_setInitialAttributesOnTargetPanel(S){const F=Ie.getElementFromSelector(S);F&&(this._setAttributeIfNotExists(F,"role","tabpanel"),S.id&&this._setAttributeIfNotExists(F,"aria-labelledby",`${S.id}`))}_toggleDropDown(S,F){const ae=this._getOuterElement(S);if(!ae.classList.contains("dropdown"))return;const Ve=(ve,ht)=>{const Mt=Ie.findOne(ve,ae);Mt&&Mt.classList.toggle(ht,F)};Ve(".dropdown-toggle",gt),Ve(".dropdown-menu",Pt),ae.setAttribute("aria-expanded",F)}_setAttributeIfNotExists(S,F,ae){S.hasAttribute(F)||S.setAttribute(F,ae)}_elemIsActive(S){return S.classList.contains(gt)}_getInnerElement(S){return S.matches(ro)?S:Ie.findOne(ro,S)}_getOuterElement(S){return S.closest(".nav-item, .list-group-item")||S}static jQueryInterface(S){return this.each(function(){const F=co.getOrCreateInstance(this);if("string"==typeof S){if(void 0===F[S]||S.startsWith("_")||"constructor"===S)throw new TypeError(`No method named "${S}"`);F[S]()}})}}Nt.on(document,"click.bs.tab",zt,function(W){["A","AREA"].includes(this.tagName)&&W.preventDefault(),Ar(this)||co.getOrCreateInstance(this).show()}),Nt.on(window,"load.bs.tab",()=>{for(const W of Ie.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))co.getOrCreateInstance(W)}),lo(co);const xt="show",on="showing",ur={animation:"boolean",autohide:"boolean",delay:"number"},xo={animation:!0,autohide:!0,delay:5e3};class gn extends Tt{constructor(S,F){super(S,F),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return xo}static get DefaultType(){return ur}static get NAME(){return"toast"}show(){Nt.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(xt,on),this._queueCallback(()=>{this._element.classList.remove(on),Nt.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Nt.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(on),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(on,xt),Nt.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(xt),super.dispose()}isShown(){return this._element.classList.contains(xt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(S,F){switch(S.type){case"mouseover":case"mouseout":this._hasMouseInteraction=F;break;case"focusin":case"focusout":this._hasKeyboardInteraction=F}if(F)return void this._clearTimeout();const ae=S.relatedTarget;this._element===ae||this._element.contains(ae)||this._maybeScheduleHide()}_setListeners(){Nt.on(this._element,"mouseover.bs.toast",S=>this._onInteraction(S,!0)),Nt.on(this._element,"mouseout.bs.toast",S=>this._onInteraction(S,!1)),Nt.on(this._element,"focusin.bs.toast",S=>this._onInteraction(S,!0)),Nt.on(this._element,"focusout.bs.toast",S=>this._onInteraction(S,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(S){return this.each(function(){const F=gn.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===F[S])throw new TypeError(`No method named "${S}"`);F[S](this)}})}}return To(gn),lo(gn),{Alert:Gt,Button:Hs,Carousel:_r,Collapse:zs,Dropdown:ko,Modal:Jl,Offcanvas:ds,Popover:ei,ScrollSpy:K,Tab:co,Toast:gn,Tooltip:di}}),function(){"use strict";var Ca=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var o=typeof t;return"object"===o&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===o&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":o},Ss=function(t){return{eq:t}},va=Ss(function(t,o){return t===o}),ns=function(t){return Ss(function(o,n){if(o.length!==n.length)return!1;for(var s=o.length,i=0;i<s;i++)if(!t.eq(o[i],n[i]))return!1;return!0})},Qs=function(t){return Ss(function(o,n){var p,w,C,s=Object.keys(o),i=Object.keys(n);if(!(p=va,w=ns(p),C=function(w){return Array.prototype.slice.call(w).sort(void 0)},Ss(function(O,R){return w.eq(C(O),C(R))})).eq(s,i))return!1;for(var c=s.length,d=0;d<c;d++){var u=s[d];if(!t.eq(o[u],n[u]))return!1}return!0})},No=Ss(function(t,o){if(t===o)return!0;var n=Ca(t);return n===Ca(o)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===o:"array"===n?ns(No).eq(t,o):"object"===n&&Qs(No).eq(t,o))});const ps=Object.getPrototypeOf,as=(t,o,n)=>{var s;return!!n(t,o.prototype)||(null===(s=t.constructor)||void 0===s?void 0:s.name)===o.name},Ar=t=>o=>(n=>{const s=typeof n;return null===n?"null":"object"===s&&Array.isArray(n)?"array":"object"===s&&as(n,String,(i,c)=>c.isPrototypeOf(i))?"string":s})(o)===t,Ya=t=>o=>typeof o===t,Is=t=>o=>t===o,_n=(t,o)=>ut(t)&&as(t,o,(n,s)=>ps(n)===s),uo=Ar("string"),ut=Ar("object"),pt=t=>_n(t,Object),lo=Ar("array"),jn=Is(null),At=Ya("boolean"),Ft=Is(void 0),eo=t=>null==t,ne=t=>!eo(t),it=Ya("function"),Oe=Ya("number"),$n=(t,o)=>{if(lo(t)){for(let n=0,s=t.length;n<s;++n)if(!o(t[n]))return!1;return!0}return!1},yo=()=>{},Dr=(t,o)=>(...n)=>t(o.apply(null,n)),lr=(t,o)=>n=>t(o(n)),ot=t=>()=>t,mn=t=>t,D=(t,o)=>t===o;function mt(t,...o){return(...n)=>{const s=o.concat(n);return t.apply(null,s)}}const Ma=t=>o=>!t(o),qn=t=>()=>{throw new Error(t)},fr=t=>t(),Nt=t=>{t()},Do=ot(!1),Jo=ot(!0);class X{constructor(o,n){this.tag=o,this.value=n}static some(o){return new X(!0,o)}static none(){return X.singletonNone}fold(o,n){return this.tag?n(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?X.some(o(this.value)):X.none()}bind(o){return this.tag?o(this.value):X.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:X.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return ne(o)?X.some(o):X.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}X.singletonNone=new X(!1);const sr=Array.prototype.slice,Xe=Array.prototype.indexOf,Tt=Array.prototype.push,Po=(t,o)=>Xe.call(t,o),Ie=(t,o)=>Po(t,o)>-1,To=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return!0;return!1},Gt=(t,o)=>{const n=t.length,s=new Array(n);for(let i=0;i<n;i++)s[i]=o(t[i],i);return s},Ue=(t,o)=>{for(let n=0,s=t.length;n<s;n++)o(t[n],n)},Hs=(t,o)=>{for(let n=t.length-1;n>=0;n--)o(t[n],n)},en=(t,o)=>{const n=[],s=[];for(let i=0,c=t.length;i<c;i++){const d=t[i];(o(d,i)?n:s).push(d)}return{pass:n,fail:s}},Yt=(t,o)=>{const n=[];for(let s=0,i=t.length;s<i;s++){const c=t[s];o(c,s)&&n.push(c)}return n},ts=(t,o,n)=>(Hs(t,(s,i)=>{n=o(n,s,i)}),n),Jn=(t,o,n)=>(Ue(t,(s,i)=>{n=o(n,s,i)}),n),fs=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++){const c=t[s];if(o(c,s))return X.some(c);if(n(c,s))break}return X.none()},or=(t,o)=>fs(t,o,Do),Ps=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return X.some(n);return X.none()},Ha=t=>{const o=[];for(let n=0,s=t.length;n<s;++n){if(!lo(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Tt.apply(o,t[n])}return o},ks=(t,o)=>Ha(Gt(t,o)),qr=(t,o)=>{for(let n=0,s=t.length;n<s;++n)if(!0!==o(t[n],n))return!1;return!0},Cr=t=>{const o=sr.call(t,0);return o.reverse(),o},_a=(t,o)=>Yt(t,n=>!Ie(o,n)),is=(t,o)=>{const n={};for(let s=0,i=t.length;s<i;s++){const c=t[s];n[String(c)]=o(c,s)}return n},_r=(t,o)=>{const n=sr.call(t,0);return n.sort(o),n},Zi=(t,o)=>o>=0&&o<t.length?X.some(t[o]):X.none(),Pn=t=>Zi(t,0),Gn=t=>Zi(t,t.length-1),nr=it(Array.from)?Array.from:t=>sr.call(t),Di=(t,o)=>{for(let n=0;n<t.length;n++){const s=o(t[n],n);if(s.isSome())return s}return X.none()},Sr=Object.keys,zs=Object.hasOwnProperty,Ao=(t,o)=>{const n=Sr(t);for(let s=0,i=n.length;s<i;s++){const c=n[s];o(t[c],c)}},Nr=(t,o)=>ls(t,(n,s)=>({k:s,v:o(n,s)})),ls=(t,o)=>{const n={};return Ao(t,(s,i)=>{const c=o(s,i);n[c.k]=c.v}),n},Kt=t=>(o,n)=>{t[n]=o},Wo=(t,o,n,s)=>{Ao(t,(i,c)=>{(o(i,c)?n:s)(i,c)})},bs=(t,o)=>{const n={};return Wo(t,o,Kt(n),yo),n},cs=(t,o)=>{const n=[];return Ao(t,(s,i)=>{n.push(o(s,i))}),n},Dt=t=>cs(t,mn),Nn=(t,o)=>Vo(t,o)?X.from(t[o]):X.none(),Vo=(t,o)=>zs.call(t,o),Vs=(t,o)=>Vo(t,o)&&null!=t[o],ar=t=>{const o={};return Ue(t,n=>{o[n]={}}),Sr(o)},Bi=t=>void 0!==t.length,Es=Array.isArray,Ja=(t,o,n)=>{if(!t)return!1;if(n=n||t,Bi(t)){for(let s=0,i=t.length;s<i;s++)if(!1===o.call(n,t[s],s,t))return!1}else for(const s in t)if(Vo(t,s)&&!1===o.call(n,t[s],s,t))return!1;return!0},si=(t,o)=>{const n=[];return Ja(t,(s,i)=>{n.push(o(s,i,t))}),n},Sa=(t,o)=>{const n=[];return Ja(t,(s,i)=>{o&&!o(s,i,t)||n.push(s)}),n},ai=(t,o,n,s)=>{let i=Ft(n)?t[0]:n;for(let c=0;c<t.length;c++)i=o.call(s,i,t[c],c);return i},ta=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++)if(o.call(n,t[s],s,t))return s;return-1},ya=t=>t[t.length-1],Pa=t=>{let o,n=!1;return(...s)=>(n||(n=!0,o=t.apply(null,s)),o)},Os=()=>Fa(0,0),Fa=(t,o)=>({major:t,minor:o}),pe={nu:Fa,detect:(t,o)=>{const n=String(o).toLowerCase();return 0===t.length?Os():((s,i)=>{const c=((u,p)=>{for(let v=0;v<u.length;v++){const w=u[v];if(w.test(p))return w}})(s,i);if(!c)return{major:0,minor:0};const d=u=>Number(i.replace(c,"$"+u));return Fa(d(1),d(2))})(t,n)},unknown:Os},Be=(t,o)=>{const n=String(o).toLowerCase();return or(t,s=>s.search(n))},nt=(t,o,n)=>""===o||t.length>=o.length&&t.substr(n,n+o.length)===o,Qe=(t,o)=>Wt(t,o)?t.substring(o.length):t,Bt=(t,o,n=0,s)=>{const i=t.indexOf(o,n);return-1!==i&&(!!Ft(s)||i+o.length<=s)},Wt=(t,o)=>nt(t,o,0),jt=(t,o)=>nt(t,o,t.length-o.length),Eo=t=>o=>o.replace(t,""),ho=Eo(/^\s+|\s+$/g),Fn=Eo(/^\s+/g),Qn=Eo(/\s+$/g),Rn=t=>t.length>0,fn=t=>!Rn(t),br=(t,o=10)=>{const n=parseInt(t,o);return isNaN(n)?X.none():X.some(n)},Zs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zo=t=>o=>Bt(o,t),ue=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Bt(t,"edge/")&&Bt(t,"chrome")&&Bt(t,"safari")&&Bt(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Zs],search:t=>Bt(t,"chrome")&&!Bt(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Bt(t,"msie")||Bt(t,"trident")},{name:"Opera",versionRegexes:[Zs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zo("firefox")},{name:"Safari",versionRegexes:[Zs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Bt(t,"safari")||Bt(t,"mobile/"))&&Bt(t,"applewebkit")}],_e=[{name:"Windows",search:Zo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Bt(t,"iphone")||Bt(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zo("linux"),versionRegexes:[]},{name:"Solaris",search:Zo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],We={browsers:ot(ue),oses:ot(_e)},ft="Chromium",Fo="Firefox",tn=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isEdge:s("Edge"),isChromium:s(ft),isIE:s("IE"),isOpera:s("Opera"),isFirefox:s(Fo),isSafari:s("Safari")}},Dn=()=>tn({current:void 0,version:pe.unknown()}),rr=tn,ln=(ot("Edge"),ot(ft),ot("IE"),ot("Opera"),ot(Fo),ot("Safari"),"Windows"),kr="Android",ii="Solaris",Gr="FreeBSD",rs="ChromeOS",Fs=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isWindows:s(ln),isiOS:s("iOS"),isAndroid:s(kr),isMacOS:s("macOS"),isLinux:s("Linux"),isSolaris:s(ii),isFreeBSD:s(Gr),isChromeOS:s(rs)}},Kr=()=>Fs({current:void 0,version:pe.unknown()}),na=Fs,da=(ot(ln),ot("iOS"),ot(kr),ot("Linux"),ot("macOS"),ot(ii),ot(Gr),ot(rs),t=>window.matchMedia(t).matches);let nl=Pa(()=>((t,o,n)=>{const s=We.browsers(),i=We.oses(),c=o.bind(p=>{return v=s,Di(p.brands,C=>{const O=C.brand.toLowerCase();return or(v,R=>{var A;return O===(null===(A=R.brand)||void 0===A?void 0:A.toLowerCase())}).map(R=>({current:R.name,version:pe.nu(parseInt(C.version,10),0)}))});var v}).orThunk(()=>{return Be(s,v=t).map(w=>{const C=pe.detect(w.versionRegexes,v);return{current:w.name,version:C}});var v}).fold(Dn,rr),d=(p=i,v=t,Be(p,v).map(w=>{const C=pe.detect(w.versionRegexes,v);return{current:w.name,version:C}})).fold(Kr,na),u=((p,v,w,C)=>{const O=p.isiOS()&&!0===/ipad/i.test(w),R=p.isiOS()&&!O,A=p.isiOS()||p.isAndroid(),H=A||C("(pointer:coarse)"),M=O||!R&&A&&C("(min-device-width:768px)"),P=R||A&&!M,j=v.isSafari()&&p.isiOS()&&!1===/safari/i.test(w),$=!P&&!M&&!j;return{isiPad:ot(O),isiPhone:ot(R),isTablet:ot(M),isPhone:ot(P),isTouch:ot(H),isAndroid:p.isAndroid,isiOS:p.isiOS,isWebView:ot(j),isDesktop:ot($)}})(d,c,t,n);var p,v;return{browser:c,os:d,deviceType:u}})(navigator.userAgent,X.from(navigator.userAgentData),da));const za=()=>nl(),Bo=navigator.userAgent,rl=za(),Xr=rl.browser,vs=rl.os,ji=rl.deviceType,jr=-1!==Bo.indexOf("Windows Phone"),er={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Xr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Xr.isIE(),windowsPhone:jr,browser:{current:Xr.current,version:Xr.version,isChromium:Xr.isChromium,isEdge:Xr.isEdge,isFirefox:Xr.isFirefox,isIE:Xr.isIE,isOpera:Xr.isOpera,isSafari:Xr.isSafari},os:{current:vs.current,version:vs.version,isAndroid:vs.isAndroid,isChromeOS:vs.isChromeOS,isFreeBSD:vs.isFreeBSD,isiOS:vs.isiOS,isLinux:vs.isLinux,isMacOS:vs.isMacOS,isSolaris:vs.isSolaris,isWindows:vs.isWindows},deviceType:{isDesktop:ji.isDesktop,isiPad:ji.isiPad,isiPhone:ji.isiPhone,isPhone:ji.isPhone,isTablet:ji.isTablet,isTouch:ji.isTouch,isWebView:ji.isWebView}},ra=/^\s*|\s*$/g,qo=t=>eo(t)?"":(""+t).replace(ra,""),xi=function(t,o,n,s){s=s||this,t&&(n&&(t=t[n]),Ja(t,(i,c)=>!1!==o.call(s,i,c,n)&&(xi(i,o,n,s),!0)))},It={trim:qo,isArray:Es,is:(t,o)=>o?!("array"!==o||!Es(t))||typeof t===o:void 0!==t,toArray:t=>{if(Es(t))return t;{const o=[];for(let n=0,s=t.length;n<s;n++)o[n]=t[n];return o}},makeMap:(t,o,n={})=>{const s=uo(t)?t.split(o||","):t||[];let i=s.length;for(;i--;)n[s[i]]={};return n},each:Ja,map:si,grep:Sa,inArray:(t,o)=>{if(t)for(let n=0,s=t.length;n<s;n++)if(t[n]===o)return n;return-1},hasOwn:Vo,extend:(t,...o)=>{for(let n=0;n<o.length;n++){const s=o[n];for(const i in s)if(Vo(s,i)){const c=s[i];void 0!==c&&(t[i]=c)}}return t},walk:xi,resolve:(t,o=window)=>{const n=t.split(".");for(let s=0,i=n.length;s<i&&(o=o[n[s]]);s++);return o},explode:(t,o)=>lo(t)?t:""===t?[]:si(t.split(o||","),qo),_addCacheSuffix:t=>{const o=er.cacheSuffix;return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},Ts=(t,o,n=D)=>t.exists(s=>n(s,o)),As=(t,o,n)=>t.isSome()&&o.isSome()?X.some(n(t.getOrDie(),o.getOrDie())):X.none(),Br=(t,o)=>t?X.some(o):X.none(),zc=typeof window<"u"?window:Function("return this;")(),Xl=(t,o)=>((n,s)=>{let i=s??zc;for(let c=0;c<n.length&&null!=i;++c)i=i[n[c]];return i})(t.split("."),o),Lr=Object.getPrototypeOf,Er=t=>t.dom.nodeName.toLowerCase(),fc=t=>t.dom.nodeType,Ns=t=>o=>fc(o)===t,Ui=t=>ka(t)&&(t=>{const o=Xl("ownerDocument.defaultView",t);return ut(t)&&((n=o,((s,i)=>{const c=Xl("HTMLElement",i);if(null==c)throw new Error("HTMLElement not available on this browser");return c})(0,n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Lr(t).constructor.name));var n})(t.dom),ka=Ns(1),Kn=Ns(3),Yl=Ns(9),Ms=Ns(11),kl=t=>o=>ka(o)&&Er(o)===t,Fl=(t,o,n)=>{if(!(uo(n)||At(n)||Oe(n)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(o,n+"")},vr=(t,o,n)=>{Fl(t.dom,o,n)},wa=(t,o)=>{const n=t.dom;Ao(o,(s,i)=>{Fl(n,i,s)})},Y=(t,o)=>{const n=t.dom.getAttribute(o);return null===n?void 0:n},le=(t,o)=>X.from(Y(t,o)),Ce=(t,o)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(o)},Le=(t,o)=>{t.dom.removeAttribute(o)},ke=t=>Jn(t.dom.attributes,(o,n)=>(o[n.name]=n.value,o),{}),lt=(t,o)=>{const n=Y(t,o);return void 0===n||""===n?[]:n.split(" ")},ct=t=>void 0!==t.dom.classList,Rt=t=>lt(t,"class"),wo=(t,o)=>((n,s,i)=>{const c=lt(n,s).concat([i]);return vr(n,s,c.join(" ")),!0})(t,"class",o),Jt=(t,o)=>((n,s,i)=>{const c=Yt(lt(n,s),d=>d!==i);return c.length>0?vr(n,s,c.join(" ")):Le(n,s),!1})(t,"class",o),ko=(t,o)=>{ct(t)?t.dom.classList.add(o):wo(t,o)},Sn=t=>{0===(ct(t)?t.dom.classList:Rt(t)).length&&Le(t,"class")},cn=(t,o)=>{ct(t)?t.dom.classList.remove(o):Jt(t,o),Sn(t)},Xn=(t,o)=>ct(t)&&t.dom.classList.contains(o),zn=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},bn=(t,o)=>{const n=(o||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,t),new Error(s)}return zn(n.childNodes[0])},vn=(t,o)=>{const n=(o||document).createElement(t);return zn(n)},ir=(t,o)=>{const n=(o||document).createTextNode(t);return zn(n)},fe=zn,gl=(t,o)=>{const n=[],s=c=>(n.push(c),o(c));let i=o(t);do{i=i.bind(s)}while(i.isSome());return n},li=(t,o)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const s=n;if(void 0!==s.matches)return s.matches(o);if(void 0!==s.msMatchesSelector)return s.msMatchesSelector(o);if(void 0!==s.webkitMatchesSelector)return s.webkitMatchesSelector(o);if(void 0!==s.mozMatchesSelector)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},Vc=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,yr=(t,o)=>t.dom===o.dom,hl=(t,o)=>{const n=t.dom,s=o.dom;return n!==s&&n.contains(s)},Ld=t=>fe(t.dom.ownerDocument),El=t=>Yl(t)?t:Ld(t),Zc=t=>fe(El(t).dom.defaultView),Wi=t=>X.from(t.dom.parentNode).map(fe),hu=t=>X.from(t.dom.parentElement).map(fe),qm=(t,o)=>{const n=it(o)?o:Do;let s=t.dom;const i=[];for(;null!=s.parentNode;){const c=s.parentNode,d=fe(c);if(i.push(d),!0===n(d))break;s=c}return i},Ci=t=>X.from(t.dom.previousSibling).map(fe),jc=t=>X.from(t.dom.nextSibling).map(fe),Uc=t=>Cr(gl(t,Ci)),Jl=t=>gl(t,jc),ss=t=>Gt(t.dom.childNodes,fe),bc=(t,o)=>X.from(t.dom.childNodes[o]).map(fe),Id=t=>bc(t,0),_i=t=>bc(t,t.dom.childNodes.length-1),vc=t=>t.dom.childNodes.length,Ol=t=>Ms(t)&&ne(t.dom.host),Tl=it(Element.prototype.attachShadow)&&it(Node.prototype.getRootNode),ua=ot(Tl),ds=Tl?t=>fe(t.dom.getRootNode()):El,$i=t=>Ol(t)?t:(o=>{const n=o.dom.head;if(null==n)throw new Error("Head is not available yet");return fe(n)})(El(t)),Va=t=>fe(t.dom.host),Hd=t=>{if(ua()&&ne(t.target)){const o=fe(t.target);if(ka(o)&&pu(o)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Pn(n)}}return X.from(t.target)},pu=t=>ne(t.dom.shadowRoot),md=t=>{const o=Kn(t)?t.dom.parentNode:t.dom;if(null==o||null===o.ownerDocument)return!1;const n=o.ownerDocument;return(s=>{const i=ds(s);return Ol(i)?X.some(i):X.none()})(fe(o)).fold(()=>n.body.contains(o),lr(md,Va))};var Ql=(t,o,n,s,i)=>t(n,s)?X.some(n):it(i)&&i(n)?X.none():o(n,s,i);const us=(t,o,n)=>{let s=t.dom;const i=it(n)?n:Do;for(;s.parentNode;){s=s.parentNode;const c=fe(s);if(o(c))return X.some(c);if(i(c))break}return X.none()},ma=(t,o,n)=>Ql((s,i)=>i(s),us,t,o,n),Al=(t,o,n)=>us(t,s=>li(s,o),n),Ea=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return Vc(i)?X.none():X.from(i.querySelector(n)).map(fe)})(o,t),$s=(t,o,n)=>Ql((s,i)=>li(s,i),Al,t,o,n),Li=(t,o=!1)=>{return md(t)?t.dom.isContentEditable:(n=t,$s(n,"[contenteditable]")).fold(ot(o),s=>"true"===gd(s));var n},gd=t=>t.dom.contentEditable,Wc=t=>void 0!==t.style&&it(t.style.getPropertyValue),Mn=(t,o,n)=>{if(!uo(n))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Wc(t)&&t.style.setProperty(o,n)},ci=(t,o,n)=>{Mn(t.dom,o,n)},ec=(t,o)=>{const n=t.dom;Ao(o,(s,i)=>{Mn(n,i,s)})},Nl=(t,o)=>{const n=t.dom,s=window.getComputedStyle(n).getPropertyValue(o);return""!==s||md(t)?s:fu(n,o)},fu=(t,o)=>Wc(t)?t.style.getPropertyValue(o):"",di=(t,o)=>{const s=fu(t.dom,o);return X.from(s).filter(i=>i.length>0)},yc=t=>{const o={},n=t.dom;if(Wc(n))for(let s=0;s<n.style.length;s++){const i=n.style.item(s);o[i]=n.style[i]}return o},Gm=(t,o)=>{var n,s;s=o,Wc(n=t.dom)&&n.style.removeProperty(s),Ts(le(t,"style").map(ho),"")&&Le(t,"style")},ei=(t,o)=>{Wi(t).each(n=>{n.dom.insertBefore(o.dom,t.dom)})},qi=(t,o)=>{jc(t).fold(()=>{Wi(t).each(n=>{Un(n,o)})},n=>{ei(n,o)})},Ml=(t,o)=>{Id(t).fold(()=>{Un(t,o)},n=>{t.dom.insertBefore(o.dom,n.dom)})},Un=(t,o)=>{t.dom.appendChild(o.dom)},bu=(t,o)=>{ei(t,o),Un(o,t)},V=(t,o)=>{Ue(o,n=>{Un(t,n)})},K=t=>{t.dom.textContent="",Ue(ss(t),o=>{G(o)})},G=t=>{const o=t.dom;null!==o.parentNode&&o.parentNode.removeChild(o)},se=t=>{const o=ss(t);var n,s;o.length>0&&(n=t,Ue(s=o,(i,c)=>{qi(0===c?n:s[c-1],i)})),G(t)},He=t=>Gt(t,fe),Fe=t=>t.dom.innerHTML,gt=(t,o)=>{const n=Ld(t).dom,s=fe(n.createDocumentFragment()),i=((c,d)=>{const u=(d||document).createElement("div");return u.innerHTML=c,ss(fe(u))})(o,n);V(s,i),K(t),Un(t,s)},Pt=(t,o,n,s)=>{t.dom.removeEventListener(o,n,s)},zt=(t,o)=>({left:t,top:o,translate:(n,s)=>zt(t+n,o+s)}),ro=zt,co=(t,o)=>void 0!==t?t:void 0!==o?o:0,Wn=t=>{const o=t.dom,n=o.ownerDocument.body;return n===o?ro(n.offsetLeft,n.offsetTop):md(t)?(s=>{const i=s.getBoundingClientRect();return ro(i.left,i.top)})(o):ro(0,0)},xt=t=>{const o=void 0!==t?t.dom:document;return ro(o.body.scrollLeft||o.documentElement.scrollLeft,o.body.scrollTop||o.documentElement.scrollTop)},on=(t,o)=>{za().browser.isSafari()&&it(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(o)},ur=(t,o,n,s)=>({x:t,y:o,width:n,height:s,right:t+n,bottom:o+s}),xo=t=>{const o=void 0===t?window:t,s=xt(fe(o.document));return(i=>{const c=void 0===i?window:i;return za().browser.isFirefox()?X.none():X.from(c.visualViewport)})(o).fold(()=>{const i=o.document.documentElement;return ur(s.left,s.top,i.clientWidth,i.clientHeight)},i=>ur(Math.max(i.pageLeft,s.left),Math.max(i.pageTop,s.top),i.width,i.height))},gn=(t,o)=>{let n=[];return Ue(ss(t),s=>{o(s)&&(n=n.concat([s])),n=n.concat(gn(s,o))}),n},W=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return Vc(i)?[]:Gt(i.querySelectorAll(n),fe)})(o,t),S=(t,o,n)=>Al(t,o,n).isSome();class F{constructor(o,n){this.node=o,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,n,s,i){if(o){if(!i&&o[n])return o[n];if(o!==this.rootNode){let c=o[s];if(c)return c;for(let d=o.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[s],c)return c}}}findPreviousNode(o,n){if(o){const s=o.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n)for(let c=s.lastChild;c;c=c.lastChild)if(!c.lastChild)return c;return s}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const ae=t=>o=>!!o&&o.nodeType===t,Ve=t=>!!t&&!Object.getPrototypeOf(t),ve=ae(1),ht=t=>{const o=t.toLowerCase();return n=>ne(n)&&n.nodeName.toLowerCase()===o},Mt=t=>{const o=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return Ie(o,s)}return!1}},mo=(t,o)=>{const n=o.toLowerCase().split(" ");return s=>{if(ve(s)){const i=s.ownerDocument.defaultView;if(i)for(let c=0;c<n.length;c++){const d=i.getComputedStyle(s,null);if((d?d.getPropertyValue(t):null)===n[c])return!0}}return!1}},Go=t=>o=>ve(o)&&o.hasAttribute(t),zo=t=>ve(t)&&t.hasAttribute("data-mce-bogus"),oo=t=>ve(t)&&"TABLE"===t.tagName,tr=t=>o=>!(!ve(o)||o.contentEditable!==t&&o.getAttribute("data-mce-contenteditable")!==t),dn=Mt(["textarea","input"]),tt=ae(3),kn=ae(4),Or=ae(7),Yn=ae(8),wr=ae(9),Hr=ae(11),je=ht("br"),Vn=ht("img"),xr=tr("true"),Oo=tr("false"),Ur=Mt(["td","th"]),Ir=Mt(["td","th","caption"]),Yr=Mt(["video","audio","object","embed"]),pl=ht("li"),qs=ht("details"),Zn=ht("summary"),os="\xa0",Pr=t=>"\ufeff"===t,fl=((t,o)=>{const n=s=>t(s)?X.from(s.dom.nodeValue):X.none();return{get:s=>{if(!t(s))throw new Error("Can only get text value of a text node");return n(s).getOr("")},getOption:n,set:(s,i)=>{if(!t(s))throw new Error("Can only set raw text value of a text node");s.dom.nodeValue=i}}})(Kn),ui=t=>fl.get(t),Pd=t=>fl.getOption(t),Jr=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),De=t=>{let o;return n=>(o=o||is(t,Jo),Vo(o,Er(n)))},Wr=De(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Ii=t=>ka(t)&&!Wr(t),Ra=t=>ka(t)&&"br"===Er(t),zl=De(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),mi=De(["ul","ol","dl"]),Gs=De(["li","dd","dt"]),wc=De(["thead","tbody","tfoot"]),Fd=De(["td","th"]),Io=De(["pre","script","textarea","style"]),Rl=De(Jr),vu=t=>Rl(t)||Ii(t),tc=()=>{const t=vn("br");return vr(t,"data-mce-bogus","1"),t},$c=t=>{K(t),Un(t,tc())},hd=t=>{_i(t).each(o=>{Ci(o).each(n=>{Wr(t)&&Ra(o)&&Wr(n)&&G(o)})})},Da="\ufeff",sm=Pr,qc=t=>t.replace(/\uFEFF/g,""),Vl=ve,js=tt,sl=t=>(js(t)&&(t=t.parentNode),Vl(t)&&t.hasAttribute("data-mce-caret")),Dl=t=>js(t)&&sm(t.data),Ba=t=>sl(t)||Dl(t),yu=t=>t.firstChild!==t.lastChild||!je(t.firstChild),ti=t=>{const o=t.container();return!!tt(o)&&(o.data.charAt(t.offset())===Da||t.isAtStart()&&Dl(o.previousSibling))},xc=t=>{const o=t.container();return!!tt(o)&&(o.data.charAt(t.offset()-1)===Da||t.isAtEnd()&&Dl(o.nextSibling))},wu=t=>js(t)&&t.data[0]===Da,xu=t=>js(t)&&t.data[t.data.length-1]===Da,Cc=t=>t&&t.hasAttribute("data-mce-caret")?((o=>{var n;const s=o.getElementsByTagName("br"),i=s[s.length-1];zo(i)&&(null===(n=i.parentNode)||void 0===n||n.removeChild(i))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,_c=t=>sl(t.startContainer),jg=xr,Gc=Oo,Wh=je,am=tt,Cu=Mt(["script","style","textarea"]),Sc=Mt(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Km=Mt(["table"]),im=Ba,kc=t=>!im(t)&&(am(t)?!Cu(t.parentNode):Sc(t)||Wh(t)||Km(t)||vf(t)),vf=t=>{return!(ve(o=t)&&"true"===o.getAttribute("unselectable"))&&Gc(t);var o},sa=(t,o)=>kc(t)&&((n,s)=>{for(let i=n.parentNode;i&&i!==s;i=i.parentNode){if(vf(i))return!1;if(jg(i))return!0}return!0})(t,o),Sx=/^[ \t\r\n]*$/,oc=t=>Sx.test(t),yf=t=>{for(const o of t)if(!Pr(o))return!1;return!0},$h=t=>"\n"===t||"\r"===t,_u=(t,o=4,n=!0,s=!0)=>{const i=(p=o)<=0?"":new Array(p+1).join(" "),c=t.replace(/\t/g,i);var p;return Jn(c,(u,p)=>{return-1!==" \f\t\v".indexOf(p)||p===os?u.pcIsSpace||""===u.str&&n||u.str.length===c.length-1&&s||(w=u.str.length+1)<(v=c).length&&w>=0&&$h(v[w])?{pcIsSpace:!1,str:u.str+os}:{pcIsSpace:!0,str:u.str+" "}:{pcIsSpace:$h(p),str:u.str+p};var v,w},{pcIsSpace:!1,str:""}).str},bl=(t,o)=>{return kc(t)&&(s=o,!(tt(n=t)&&oc(n.data)&&!((i,c)=>{const d=fe(c),u=fe(i);return S(u,"pre,code",mt(yr,d))})(n,s)))||(n=>ve(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||Xm(t);var n,s},Xm=Go("data-mce-bookmark"),lm=Go("data-mce-bogus"),kx=t=>ve(t)&&"all"===t.getAttribute("data-mce-bogus"),ea=(t,o=!0)=>((n,s)=>{let i=0;if(bl(n,n))return!1;{let c=n.firstChild;if(!c)return!0;const d=new F(c,n);do{if(s){if(kx(c)){c=d.next(!0);continue}if(lm(c)){c=d.next();continue}}if(je(c))i++,c=d.next();else{if(bl(c,n))return!1;c=d.next()}}while(c);return i<=1}})(t.dom,o),Ym="data-mce-block",Ug=t=>{return(o=t,Yt(Sr(o),n=>!/[A-Z]/.test(n))).join(",");var o},y0=(t,o)=>ne(o.querySelector(t))?(o.setAttribute(Ym,"true"),"inline-boundary"===o.getAttribute("data-mce-selected")&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(Ym),!1),wf=(t,o)=>{const n=Ug(t.getTransparentElements()),s=Ug(t.getBlockElements());return Yt(o.querySelectorAll(n),i=>y0(s,i))},Wg=(t,o)=>{var n;const s=o?"lastChild":"firstChild";for(let i=t[s];i;i=i[s])if(ea(fe(i)))return void(null===(n=i.parentNode)||void 0===n||n.removeChild(i))},nc=(t,o)=>{const n=wf(t,o);var s,i,c;((t,o,n)=>{const s=t.getBlockElements(),i=fe(o),c=u=>Er(u)in s,d=u=>yr(u,i);Ue(He(n),u=>{us(u,c,d).each(p=>{const v=Yt(ss(u),O=>c(O)&&!t.isValidChild(Er(p),Er(O)));if(v.length>0){const w=hu(p);Ue(v,C=>{us(C,c,d).each(O=>{((R,A)=>{const H=document.createRange(),M=R.parentNode;if(M){H.setStartBefore(R),H.setEndBefore(A);const P=H.extractContents();Wg(P,!0),H.setStartAfter(A),H.setEndAfter(R);const j=H.extractContents();Wg(j,!1),ea(fe(P))||M.insertBefore(P,R),ea(fe(A))||M.insertBefore(A,R),ea(fe(j))||M.insertBefore(j,R),M.removeChild(R)}})(O.dom,C.dom)})}),w.each(C=>wf(t,C.dom))}})})})(t,o,n),s=t,i=o,c=n,Ue([...c,...zd(s,i)?[i]:[]],d=>Ue(W(fe(d),d.nodeName.toLowerCase()),u=>{ey(s,u.dom)&&se(u)}))},Qm=(t,o)=>{if(xf(t,o)){const n=Ug(t.getBlockElements());y0(n,o)}},cm=t=>t.hasAttribute(Ym),$g=(t,o)=>Vo(t.getTransparentElements(),o),xf=(t,o)=>ve(o)&&$g(t,o.nodeName),zd=(t,o)=>xf(t,o)&&cm(o),ey=(t,o)=>xf(t,o)&&!cm(o),w0=(t,o)=>1===o.type&&$g(t,o.name)&&uo(o.attr(Ym)),qh=za().browser,Gh=t=>or(t,ka),qg=(t,o)=>t.children&&Ie(t.children,o),Fr=(t,o={})=>{let n=0;const s={},i=fe(t),c=El(i),d=p=>new Promise((v,w)=>{let C;const O=It._addCacheSuffix(p),R=Nn(s,O).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));s[O]=R,R.count++;const A=($,oe)=>{Ue($,Nt),R.status=oe,R.passed=[],R.failed=[],C&&(C.onload=null,C.onerror=null,C=null)},H=()=>A(R.passed,2),M=()=>A(R.failed,3);if(v&&R.passed.push(v),w&&R.failed.push(w),1===R.status)return;if(2===R.status)return void H();if(3===R.status)return void M();R.status=1;const P=vn("link",c.dom);var j;wa(P,{rel:"stylesheet",type:"text/css",id:R.id}),o.contentCssCors&&vr(P,"crossOrigin","anonymous"),o.referrerPolicy&&vr(P,"referrerpolicy",o.referrerPolicy),C=P.dom,C.onload=H,C.onerror=M,j=P,Un($i(i),j),vr(P,"href",O)}),u=p=>{const v=It._addCacheSuffix(p);Nn(s,v).each(w=>{0==--w.count&&(delete s[v],(C=>{const O=$i(i);Ea(O,"#"+C).each(G)})(w.id))})};return{load:d,loadAll:p=>Promise.allSettled(Gt(p,v=>d(v).then(ot(v)))).then(v=>{const w=en(v,C=>"fulfilled"===C.status);return w.fail.length>0?Promise.reject(Gt(w.fail,C=>C.reason)):Gt(w.pass,C=>C.value)}),unload:u,unloadAll:p=>{Ue(p,v=>{u(v)})},_setReferrerPolicy:p=>{o.referrerPolicy=p},_setContentCssCors:p=>{o.contentCssCors=p}}},Co=(()=>{const t=new WeakMap;return{forElement:(o,n)=>{const s=ds(o).dom;return X.from(t.get(s)).getOrThunk(()=>{const i=Fr(s,n);return t.set(s,i),i})}}})(),pd=(t,o)=>ne(t)&&(bl(t,o)||Ii(fe(t))),Kh=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Xh=(t,o,n)=>{var s;const i=n||o;if(ve(o)&&Kh(o))return o;const c=o.childNodes;for(let d=c.length-1;d>=0;d--)Xh(t,c[d],i);if(ve(o)){const d=o.childNodes;1===d.length&&Kh(d[0])&&(null===(s=o.parentNode)||void 0===s||s.insertBefore(d[0],o))}return Hr(d=o)||wr(d)||bl(o,i)||(d=>!!ve(d)&&d.childNodes.length>0)(o)||((d,u)=>tt(d)&&d.data.length>0&&((p,v)=>{const w=new F(p,v).prev(!1),C=new F(p,v).next(!1),O=Ft(w)||pd(w,v),R=Ft(C)||pd(C,v);return O&&R})(d,u))(o,i)||t.remove(o),o;var d},Cf=It.makeMap,Mr=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yh=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gg=/[<>&\"\']/g,Ct=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,_f={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},fd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Kg={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Sf=(t,o)=>{const n={};if(t){const s=t.split(",");o=o||10;for(let i=0;i<s.length;i+=2){const c=String.fromCharCode(parseInt(s[i],o));if(!fd[c]){const d="&"+s[i+1]+";";n[c]=d,n[d]=c}}return n}},Su=Sf("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Jh=(t,o)=>t.replace(o?Mr:Yh,n=>fd[n]||n),dm=(t,o)=>t.replace(o?Mr:Yh,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":fd[n]||"&#"+n.charCodeAt(0)+";"),ys=(t,o,n)=>{const s=n||Su;return t.replace(o?Mr:Yh,i=>fd[i]||s[i]||i)},Hi={encodeRaw:Jh,encodeAllRaw:t=>(""+t).replace(Gg,o=>fd[o]||o),encodeNumeric:dm,encodeNamed:ys,getEncodeFunc:(t,o)=>{const n=Sf(o)||Su,s=Cf(t.replace(/\+/g,","));return s.named&&s.numeric?(i,c)=>i.replace(c?Mr:Yh,d=>void 0!==fd[d]?fd[d]:void 0!==n[d]?n[d]:d.length>1?"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";":"&#"+d.charCodeAt(0)+";"):s.named?o?(i,c)=>ys(i,c,n):ys:s.numeric?dm:Jh},decode:t=>t.replace(Ct,(o,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):_f[n]||String.fromCharCode(n):Kg[o]||Su[o]||(s=>{const i=vn("div").dom;return i.innerHTML=s,i.textContent||i.innerText||s})(o))},kf={},Ec={},Qh={},Oc=It.makeMap,Si=It.each,Tc=It.extend,ty=It.explode,x0=It.inArray,ki=(t,o)=>(t=It.trim(t))?t.split(o||" "):[],ep=(t,o={})=>{const n=Oc(t," ",Oc(t.toUpperCase()," "));return Tc(n,o)},bo=t=>ep("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Ef=(t,o)=>{if(t){const n={};return uo(t)&&(t={"*":t}),Si(t,(s,i)=>{n[i]=n[i.toUpperCase()]="map"===o?Oc(s,/[, ]/):ty(s,/[, ]/)}),n}},ku=(t={})=>{var o;const n={},s={};let i=[];const c={},d={},u=(vt,qt,Ro)=>{const fo=t[vt];if(fo)return Oc(fo,/[, ]/,Oc(fo.toUpperCase(),/[, ]/));{let sn=Ec[vt];return sn||(sn=ep(qt,Ro),Ec[vt]=sn),sn}},p=null!==(o=t.schema)&&void 0!==o?o:"html5",v=(vt=>{const qt={};let Ro,fo,sn,hn;const io=(wi,ba="",gc="")=>{const Kl=ki(gc),Ad=ki(wi);let Nd=Ad.length;for(;Nd--;){const zi=ki([Ro,ba].join(" "));qt[Ad[Nd]]={attributes:is(zi,()=>({})),attributesOrder:zi,children:is(Kl,ot(Qh))}}},In=(wi,ba)=>{const gc=ki(wi),Kl=ki(ba);let Ad=gc.length;for(;Ad--;){const Nd=qt[gc[Ad]];for(let zi=0,Fc=Kl.length;zi<Fc;zi++)Nd.attributes[Kl[zi]]={},Nd.attributesOrder.push(Kl[zi])}};if(kf[vt])return kf[vt];if(Ro="id accesskey class dir lang style tabindex title role",fo="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",sn="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==vt&&(Ro+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",fo+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",sn+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==vt){Ro+=" xml:lang";const wi="acronym applet basefont big font strike tt";sn=[sn,wi].join(" "),Si(ki(wi),gc=>{io(gc,"",sn)});const ba="center dir isindex noframes";fo=[fo,ba].join(" "),hn=[fo,sn].join(" "),Si(ki(ba),gc=>{io(gc,"",hn)})}return hn=hn||[fo,sn].join(" "),io("html","manifest","head body"),io("head","","base command link meta noscript script style title"),io("title hr noscript br"),io("base","href target"),io("link","href rel media hreflang type sizes hreflang"),io("meta","name http-equiv content charset"),io("style","media type scoped"),io("script","src async defer type charset"),io("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",hn),io("dd div","",hn),io("address dt caption","","html4"===vt?sn:hn),io("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",sn),io("blockquote","cite",hn),io("ol","reversed start type","li"),io("ul","","li"),io("li","value",hn),io("dl","","dt dd"),io("a","href target rel media hreflang type","html4"===vt?sn:hn),io("q","cite",sn),io("ins del","cite datetime",hn),io("img","src sizes srcset alt usemap ismap width height"),io("iframe","src name width height",hn),io("embed","src type width height"),io("object","data type typemustmatch name usemap form width height",[hn,"param"].join(" ")),io("param","name value"),io("map","name",[hn,"area"].join(" ")),io("area","alt coords shape href target rel media hreflang type"),io("table","border","caption colgroup thead tfoot tbody tr"+("html4"===vt?" col":"")),io("colgroup","span","col"),io("col","span"),io("tbody thead tfoot","","tr"),io("tr","","td th"),io("td","colspan rowspan headers",hn),io("th","colspan rowspan headers scope abbr",hn),io("form","accept-charset action autocomplete enctype method name novalidate target",hn),io("fieldset","disabled form name",[hn,"legend"].join(" ")),io("label","form for",sn),io("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),io("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===vt?hn:sn),io("select","disabled form multiple name required size","option optgroup"),io("optgroup","disabled label","option"),io("option","disabled label selected value"),io("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),io("menu","type label",[hn,"li"].join(" ")),io("noscript","",hn),"html4"!==vt&&(io("wbr"),io("ruby","",[sn,"rt rp"].join(" ")),io("figcaption","",hn),io("mark rt rp summary bdi","",sn),io("canvas","width height",hn),io("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[hn,"track source"].join(" ")),io("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[hn,"track source"].join(" ")),io("picture","","img source"),io("source","src srcset type media sizes"),io("track","kind src srclang label default"),io("datalist","",[sn,"option"].join(" ")),io("article section nav aside main header footer","",hn),io("hgroup","","h1 h2 h3 h4 h5 h6"),io("figure","",[hn,"figcaption"].join(" ")),io("time","datetime",sn),io("dialog","open",hn),io("command","type label icon disabled checked radiogroup command"),io("output","for form name",sn),io("progress","value max",sn),io("meter","value min max low high optimum",sn),io("details","open",[hn,"summary"].join(" ")),io("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==vt&&(In("script","language xml:space"),In("style","xml:space"),In("object","declare classid code codebase codetype archive standby align border hspace vspace"),In("embed","align name hspace vspace"),In("param","valuetype type"),In("a","charset name rev shape coords"),In("br","clear"),In("applet","codebase archive code object alt name width height align hspace vspace"),In("img","name longdesc align border hspace vspace"),In("iframe","longdesc frameborder marginwidth marginheight scrolling align"),In("font basefont","size color face"),In("input","usemap align"),In("select"),In("textarea"),In("h1 h2 h3 h4 h5 h6 div p legend caption","align"),In("ul","type compact"),In("li","type"),In("ol dl menu dir","compact"),In("pre","width xml:space"),In("hr","align noshade size width"),In("isindex","prompt"),In("table","summary width frame rules cellspacing cellpadding align bgcolor"),In("col","width align char charoff valign"),In("colgroup","width align char charoff valign"),In("thead","align char charoff valign"),In("tr","align char charoff valign bgcolor"),In("th","axis align char charoff valign nowrap bgcolor width height"),In("form","accept"),In("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),In("tfoot","align char charoff valign"),In("tbody","align char charoff valign"),In("area","nohref"),In("body","background bgcolor text link vlink alink")),"html4"!==vt&&(In("input button select textarea","autofocus"),In("input textarea","placeholder"),In("a","download"),In("link script img","crossorigin"),In("img","loading"),In("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==vt&&Ue([qt.video,qt.audio],wi=>{delete wi.children.audio,delete wi.children.video}),Si(ki("a form meter progress dfn"),wi=>{qt[wi]&&delete qt[wi].children[wi]}),delete qt.caption.children.table,delete qt.script,kf[vt]=qt,qt})(p);!1===t.verify_html&&(t.valid_elements="*[*]");const w=Ef(t.valid_styles),C=Ef(t.invalid_styles,"map"),O=Ef(t.valid_classes,"map"),R=u("whitespace_elements","pre script noscript style textarea video audio iframe object code"),A=u("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),H=u("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),M=u("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),P="td th iframe video audio object script code",j=u("non_empty_elements",P+" pre",H),$=u("move_caret_before_on_enter_elements",P+" table",H),oe=u("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ie=u("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",oe),be=u("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Se=u("transparent_elements","a ins del canvas map");Si("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),vt=>{d[vt]=new RegExp("</"+vt+"[^>]*>","gi")});const ze=vt=>new RegExp("^"+vt.replace(/([?+*])/g,".$1")+"$"),at=vt=>{const qt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ro=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,fo=/[*?+]/;if(vt){const sn=ki(vt,",");let hn,io;n["@"]&&(hn=n["@"].attributes,io=n["@"].attributesOrder);for(let In=0,wi=sn.length;In<wi;In++){let ba=qt.exec(sn[In]);if(ba){const gc=ba[1],Kl=ba[2],Ad=ba[3],Nd=ba[5],zi={},Fc=[],Ia={attributes:zi,attributesOrder:Fc};if("#"===gc&&(Ia.paddEmpty=!0),"-"===gc&&(Ia.removeEmpty=!0),"!"===ba[4]&&(Ia.removeEmptyAttrs=!0),hn&&(Ao(hn,(Um,Ig)=>{zi[Ig]=Um}),io&&Fc.push(...io)),Nd){const Um=ki(Nd,"|");for(let Ig=0,jv=Um.length;Ig<jv;Ig++)if(ba=Ro.exec(Um[Ig]),ba){const Wm={},Uv=ba[1],dd=ba[2].replace(/[\\:]:/g,":"),Zh=ba[3],ud=ba[4];if("!"===Uv&&(Ia.attributesRequired=Ia.attributesRequired||[],Ia.attributesRequired.push(dd),Wm.required=!0),"-"===Uv){delete zi[dd],Fc.splice(x0(Fc,dd),1);continue}if(Zh&&("="===Zh&&(Ia.attributesDefault=Ia.attributesDefault||[],Ia.attributesDefault.push({name:dd,value:ud}),Wm.defaultValue=ud),"~"===Zh&&(Ia.attributesForced=Ia.attributesForced||[],Ia.attributesForced.push({name:dd,value:ud}),Wm.forcedValue=ud),"<"===Zh&&(Wm.validValues=Oc(ud,"?"))),fo.test(dd)){const Md=Wm;Ia.attributePatterns=Ia.attributePatterns||[],Md.pattern=ze(dd),Ia.attributePatterns.push(Md)}else zi[dd]||Fc.push(dd),zi[dd]=Wm}}if(hn||"@"!==Kl||(hn=zi,io=Fc),Ad&&(Ia.outputName=Kl,n[Ad]=Ia),fo.test(Kl)){const Um=Ia;Um.pattern=ze(Kl),i.push(Um)}else n[Kl]=Ia}}}},Je=vt=>{i=[],Ue(Sr(n),qt=>{delete n[qt]}),at(vt),Si(v,(qt,Ro)=>{s[Ro]=qt.children})},Ae=vt=>{const qt=/^(~)?(.+)$/;vt&&(delete Ec.text_block_elements,delete Ec.block_elements,Si(ki(vt,","),Ro=>{const fo=qt.exec(Ro);if(fo){const sn="~"===fo[1],hn=sn?"span":"div",io=fo[2];if(s[io]=s[hn],c[io]=hn,j[io.toUpperCase()]={},j[io]={},sn||(ie[io.toUpperCase()]={},ie[io]={}),!n[io]){let In=n[hn];In=Tc({},In),delete In.removeEmptyAttrs,delete In.removeEmpty,n[io]=In}Si(s,(In,wi)=>{In[hn]&&(s[wi]=In=Tc({},s[wi]),In[io]=In[hn])})}}))},Pe=vt=>{const qt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete kf[p],vt&&Si(ki(vt,","),Ro=>{const fo=qt.exec(Ro);if(fo){const sn=fo[1];let hn;hn=sn?s[fo[2]]:s[fo[2]]={"#comment":{}},hn=s[fo[2]],Si(ki(fo[3],"|"),io=>{"-"===sn?delete hn[io]:hn[io]={}})}})},Me=vt=>{const qt=n[vt];if(qt)return qt;let Ro=i.length;for(;Ro--;){const fo=i[Ro];if(fo.pattern.test(vt))return fo}};t.valid_elements?Je(t.valid_elements):(Si(v,(vt,qt)=>{n[qt]={attributes:vt.attributes,attributesOrder:vt.attributesOrder},s[qt]=vt.children}),Si(ki("strong/b em/i"),vt=>{const qt=ki(vt,"/");n[qt[1]].outputName=qt[0]}),Si(be,(vt,qt)=>{n[qt]&&(t.padd_empty_block_inline_children&&(n[qt].paddInEmptyBlock=!0),n[qt].removeEmpty=!0)}),Si(ki("ol ul blockquote a table tbody"),vt=>{n[vt]&&(n[vt].removeEmpty=!0)}),Si(ki("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),vt=>{n[vt]&&(n[vt].paddEmpty=!0)}),Si(ki("span"),vt=>{n[vt].removeEmptyAttrs=!0})),Ae(t.custom_elements),Pe(t.valid_children),at(t.extended_valid_elements),Pe("+ol[ul|ol],+ul[ul|ol]"),Si({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(vt,qt)=>{n[qt]&&(n[qt].parentsRequired=ki(vt))}),t.invalid_elements&&Si(ty(t.invalid_elements),vt=>{n[vt]&&delete n[vt]}),Me("span")||at("span[!data-mce-type|*]");const qe=ot(w),Qt=ot(C),Ht=ot(O),Lo=ot(M),to=ot(ie),wn=ot(oe),xn=ot(be),ao=ot(Object.seal(H)),Mo=ot(A),rn=ot(j),Te=ot($),Re=ot(R),st=ot(Se),kt=ot(Object.seal(d)),bt=ot(c);return{type:p,children:s,elements:n,getValidStyles:qe,getValidClasses:Ht,getBlockElements:to,getInvalidStyles:Qt,getVoidElements:ao,getTextBlockElements:wn,getTextInlineElements:xn,getBoolAttrs:Lo,getElementRule:Me,getSelfClosingElements:Mo,getNonEmptyElements:rn,getMoveCaretBeforeOnEnterElements:Te,getWhitespaceElements:Re,getTransparentElements:st,getSpecialElements:kt,isValidChild:(vt,qt)=>{const Ro=s[vt.toLowerCase()];return!(!Ro||!Ro[qt.toLowerCase()])},isValid:(vt,qt)=>{const Ro=Me(vt);if(Ro){if(!qt)return!0;{if(Ro.attributes[qt])return!0;const fo=Ro.attributePatterns;if(fo){let sn=fo.length;for(;sn--;)if(fo[sn].pattern.test(qt))return!0}}}return!1},getCustomElements:bt,addValidElements:at,setValidElements:Je,addCustomElements:Ae,addValidChildren:Pe}},Of=(t={},o)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,c={};let d,u;o&&(d=o.getValidStyles(),u=o.getInvalidStyles());const v="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let C=0;C<v.length;C++)c[v[C]]="\ufeff"+C,c["\ufeff"+C]=v[C];const w={parse:C=>{const O={};let R=!1;const A=t.url_converter,H=t.url_converter_scope||w,M=(Je,Ae,Pe)=>{const Me=O[Je+"-top"+Ae];if(!Me)return;const qe=O[Je+"-right"+Ae];if(!qe)return;const Qt=O[Je+"-bottom"+Ae];if(!Qt)return;const Ht=O[Je+"-left"+Ae];if(!Ht)return;const Lo=[Me,qe,Qt,Ht];let to=Lo.length-1;for(;to--&&Lo[to]===Lo[to+1];);to>-1&&Pe||(O[Je+Ae]=-1===to?Lo[0]:Lo.join(" "),delete O[Je+"-top"+Ae],delete O[Je+"-right"+Ae],delete O[Je+"-bottom"+Ae],delete O[Je+"-left"+Ae])},P=Je=>{const Ae=O[Je];if(!Ae)return;const Pe=Ae.split(" ");let Me=Pe.length;for(;Me--;)if(Pe[Me]!==Pe[0])return!1;return O[Je]=Pe[0],!0},j=Je=>(R=!0,c[Je]),$=(Je,Ae)=>(R&&(Je=Je.replace(/\uFEFF[0-9]/g,Pe=>c[Pe])),Ae||(Je=Je.replace(/\\([\'\";:])/g,"$1")),Je),oe=Je=>String.fromCharCode(parseInt(Je.slice(1),16)),ie=Je=>Je.replace(/\\[0-9a-f]+/gi,oe),be=(Je,Ae,Pe,Me,qe,Qt)=>{if(qe=qe||Qt)return"'"+(qe=$(qe)).replace(/\'/g,"\\'")+"'";if(Ae=$(Ae||Pe||Me||""),!t.allow_script_urls){const Ht=Ae.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ht)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(Ht))return""}return A&&(Ae=A.call(H,Ae,"style")),"url('"+Ae.replace(/\'/g,"\\'")+"')"};if(C){let Je;for(C=(C=C.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,j).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ae=>Ae.replace(/[;:]/g,j));Je=s.exec(C);){s.lastIndex=Je.index+Je[0].length;let Ae=Je[1].replace(i,"").toLowerCase(),Pe=Je[2].replace(i,"");if(Ae&&Pe){if(Ae=ie(Ae),Pe=ie(Pe),-1!==Ae.indexOf("\ufeff")||-1!==Ae.indexOf('"')||!t.allow_script_urls&&("behavior"===Ae||/expression\s*\(|\/\*|\*\//.test(Pe)))continue;"font-weight"===Ae&&"700"===Pe?Pe="bold":"color"!==Ae&&"background-color"!==Ae||(Pe=Pe.toLowerCase()),Pe=Pe.replace(n,be),O[Ae]=R?$(Pe,!0):Pe}}M("border","",!0),M("border","-width"),M("border","-color"),M("border","-style"),M("padding",""),M("margin",""),ze="border-style",at="border-color",P(Se="border-width")&&P(ze)&&P(at)&&(O.border=O[Se]+" "+O[ze]+" "+O[at],delete O[Se],delete O[ze],delete O[at]),"medium none"===O.border&&delete O.border,"none"===O["border-image"]&&delete O["border-image"]}var Se,ze,at;return O},serialize:(C,O)=>{let R="";const A=(H,M)=>{const P=M[H];if(P)for(let j=0,$=P.length;j<$;j++){const oe=P[j],ie=C[oe];ie&&(R+=(R.length>0?" ":"")+oe+": "+ie+";")}};return O&&d?(A("*",d),A(O,d)):Ao(C,(H,M)=>{H&&((P,j)=>{if(!u||!j)return!0;let $=u["*"];return!($&&$[P]||($=u[j],$&&$[P]))})(M,O)&&(R+=(R.length>0?" ":"")+M+": "+H+";")}),R}};return w},oy={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Tf=(t,o)=>{const n=o??{};for(const s in t)Vo(oy,s)||(n[s]=t[s]);return ne(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},eg=(t,o,n,s)=>{var i;const c=Tf(o,s);return c.type=t,eo(c.target)&&(c.target=null!==(i=c.srcElement)&&void 0!==i?i:n),(eo((d=o).preventDefault)||(u=d)instanceof Event||it(u.initEvent))&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=Jo,it(o.preventDefault)&&o.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=Jo,it(o.stopPropagation)&&o.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=Jo,c.stopPropagation()},(d=>d.isDefaultPrevented===Jo||d.isDefaultPrevented===Do)(c)||(c.isDefaultPrevented=!0===c.defaultPrevented?Jo:Do,c.isPropagationStopped=!0===c.cancelBubble?Jo:Do,c.isImmediatePropagationStopped=Do)),c;var d,u},Xg=/^(?:mouse|contextmenu)|click/,tg=(t,o,n,s)=>{t.addEventListener(o,n,s||!1)},um=(t,o,n,s)=>{t.removeEventListener(o,n,s||!1)},tp=(t,o)=>{const n=eg(t.type,t,document,o);if(ne(s=t)&&Xg.test(s.type)&&Ft(t.pageX)&&!Ft(t.clientX)){const s=n.target.ownerDocument||document,i=s.documentElement,c=s.body,d=n;d.pageX=t.clientX+(i&&i.scrollLeft||c&&c.scrollLeft||0)-(i&&i.clientLeft||c&&c.clientLeft||0),d.pageY=t.clientY+(i&&i.scrollTop||c&&c.scrollTop||0)-(i&&i.clientTop||c&&c.clientTop||0)}var s;return n},Af=(t,o,n)=>{const s=t.document,i={type:"ready"};if(n.domLoaded)return void o(i);const c=()=>{um(t,"DOMContentLoaded",c),um(t,"load",c),n.domLoaded||(n.domLoaded=!0,o(i)),t=null};"complete"===s.readyState||"interactive"===s.readyState&&s.body?c():tg(t,"DOMContentLoaded",c),n.domLoaded||tg(t,"load",c)};class Eu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,n,s,i){const c=this;let d;const u=window,p=O=>{c.executeHandlers(tp(O||u.event),v)};if(!o||tt(o)||Yn(o))return s;let v;o[c.expando]?v=o[c.expando]:(v=c.count++,o[c.expando]=v,c.events[v]={}),i=i||o;const w=n.split(" ");let C=w.length;for(;C--;){let O=w[C],R=p,A=!1,H=!1;"DOMContentLoaded"===O&&(O="ready"),c.domLoaded&&"ready"===O&&"complete"===o.readyState?s.call(i,tp({type:O})):(c.hasFocusIn||"focusin"!==O&&"focusout"!==O||(A=!0,H="focusin"===O?"focus":"blur",R=M=>{const P=tp(M||u.event);P.type="focus"===P.type?"focusin":"focusout",c.executeHandlers(P,v)}),d=c.events[v][O],d?"ready"===O&&c.domLoaded?s(tp({type:O})):d.push({func:s,scope:i}):(c.events[v][O]=d=[{func:s,scope:i}],d.fakeName=H,d.capture=A,d.nativeHandler=R,"ready"===O?Af(o,R,c):tg(o,H||O,R,A)))}return o=d=null,s}unbind(o,n,s){if(!o||tt(o)||Yn(o))return this;const i=o[this.expando];if(i){let c=this.events[i];if(n){const d=n.split(" ");let u=d.length;for(;u--;){const p=d[u],v=c[p];if(v){if(s){let w=v.length;for(;w--;)if(v[w].func===s){const C=v.nativeHandler,O=v.fakeName,R=v.capture,A=v.slice(0,w).concat(v.slice(w+1));A.nativeHandler=C,A.fakeName=O,A.capture=R,c[p]=A}}s&&0!==v.length||(delete c[p],um(o,v.fakeName||p,v.nativeHandler,v.capture))}}}else Ao(c,(d,u)=>{um(o,d.fakeName||u,d.nativeHandler,d.capture)}),c={};for(const d in c)if(Vo(c,d))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,n,s){return this.dispatch(o,n,s)}dispatch(o,n,s){if(!o||tt(o)||Yn(o))return this;const i=tp({type:n,target:o},s);do{const c=o[this.expando];c&&this.executeHandlers(i,c),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||tt(o)||Yn(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const n=o.getElementsByTagName("*");let s=n.length;for(;s--;)(o=n[s])[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,n){const s=this.events[n],i=s&&s[o.type];if(i)for(let c=0,d=i.length;c<d;c++){const u=i[c];if(u&&!1===u.func.call(u.scope,o)&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}Eu.Event=new Eu;const Vd=It.each,op=It.grep,Yg="data-mce-style",Jg=It.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Rs=(t,o,n)=>{eo(n)||""===n?Le(t,o):vr(t,o,n)},vl=t=>t.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),Zl=(t,o)=>{let n=0;if(t)for(let s=t.nodeType,i=t.previousSibling;i;i=i.previousSibling){const c=i.nodeType;(!o||!tt(i)||c!==s&&i.data.length)&&(n++,s=c)}return n},Pi=(t,o)=>{const n=Y(o,"style"),s=t.serialize(t.parse(n),Er(o));Rs(o,Yg,s)},np=(t,o,n)=>{const s=vl(o);var i,c;eo(n)||""===n?Gm(t,s):ci(t,s,(c=s,Oe(i=n)?Vo(Jg,c)?i+"":i+"px":i))},ws=(t,o={})=>{const n={},s=window,i={};let c=0;const d=Co.forElement(fe(t),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),u=[],p=o.schema?o.schema:ku({}),v=Of({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),w=o.ownEvents?new Eu:Eu.Event,C=p.getBlockElements(),O=Te=>Te&&t&&uo(Te)?t.getElementById(Te):Te,R=Te=>{const Re=O(Te);return ne(Re)?fe(Re):null},A=(Te,Re,st="")=>{let kt;const bt=R(Te);if(ne(bt)&&ka(bt)){const vt=rn[Re];kt=vt&&vt.get?vt.get(bt.dom,Re):Y(bt,Re)}return ne(kt)?kt:st},H=Te=>{const Re=O(Te);return eo(Re)?[]:Re.attributes},M=(Te,Re,st)=>{ze(Te,kt=>{if(ve(kt)){const bt=fe(kt),vt=""===st?null:st,qt=Y(bt,Re),Ro=rn[Re];Ro&&Ro.set?Ro.set(bt.dom,vt,Re):Rs(bt,Re,vt),qt!==vt&&o.onSetAttrib&&o.onSetAttrib({attrElm:bt.dom,attrName:Re,attrValue:vt})}})},P=()=>o.root_element||t.body,j=(Te,Re)=>((st,kt,bt)=>{let vt=0,qt=0;const Ro=st.ownerDocument;if(bt=bt||st,kt){if(bt===st&&kt.getBoundingClientRect&&"static"===Nl(fe(st),"position")){const sn=kt.getBoundingClientRect();return vt=sn.left+(Ro.documentElement.scrollLeft||st.scrollLeft)-Ro.documentElement.clientLeft,qt=sn.top+(Ro.documentElement.scrollTop||st.scrollTop)-Ro.documentElement.clientTop,{x:vt,y:qt}}let fo=kt;for(;fo&&fo!==bt&&fo.nodeType&&!qg(fo,bt);)vt+=fo.offsetLeft||0,qt+=fo.offsetTop||0,fo=fo.offsetParent;for(fo=kt.parentNode;fo&&fo!==bt&&fo.nodeType&&!qg(fo,bt);)vt-=fo.scrollLeft||0,qt-=fo.scrollTop||0,fo=fo.parentNode;qt+=(sn=fe(kt),qh.isFirefox()&&"table"===Er(sn)?Gh(ss(sn)).filter(hn=>"caption"===Er(hn)).bind(hn=>Gh(Jl(hn)).map(io=>io.dom.offsetTop<=hn.dom.offsetTop?-hn.dom.offsetHeight:0)).getOr(0):0)}var sn;return{x:vt,y:qt}})(t.body,O(Te),Re),$=(Te,Re,st)=>{const kt=O(Te);if(!eo(kt)&&ve(kt))return st?Nl(fe(kt),vl(Re)):("float"===(Re=Re.replace(/-(\D)/g,(bt,vt)=>vt.toUpperCase()))&&(Re="cssFloat"),kt.style?kt.style[Re]:void 0)},oe=Te=>{const Re=O(Te);if(!Re)return{w:0,h:0};let st=$(Re,"width"),kt=$(Re,"height");return st&&-1!==st.indexOf("px")||(st="0"),kt&&-1!==kt.indexOf("px")||(kt="0"),{w:parseInt(st,10)||Re.offsetWidth||Re.clientWidth,h:parseInt(kt,10)||Re.offsetHeight||Re.clientHeight}},ie=(Te,Re)=>{if(!Te)return!1;const st=lo(Te)?Te:[Te];return To(st,kt=>li(fe(kt),Re))},be=(Te,Re,st,kt)=>{const bt=[];let vt=O(Te);kt=void 0===kt;const qt=st||("BODY"!==P().nodeName?P().parentNode:null);if(uo(Re))if("*"===Re)Re=ve;else{const Ro=Re;Re=fo=>ie(fo,Ro)}for(;vt&&!(vt===qt||eo(vt.nodeType)||wr(vt)||Hr(vt));){if(!Re||Re(vt)){if(!kt)return[vt];bt.push(vt)}vt=vt.parentNode}return kt?bt:null},Se=(Te,Re,st)=>{let kt=Re;if(Te){uo(Re)&&(kt=bt=>ie(bt,Re));for(let bt=Te[st];bt;bt=bt[st])if(it(kt)&&kt(bt))return bt}return null},ze=function(Te,Re,st){const kt=st??this;if(lo(Te)){const bt=[];return Vd(Te,(vt,qt)=>{const Ro=O(vt);Ro&&bt.push(Re.call(kt,Ro,qt))}),bt}{const bt=O(Te);return!!bt&&Re.call(kt,bt)}},at=(Te,Re)=>{ze(Te,st=>{Ao(Re,(kt,bt)=>{M(st,bt,kt)})})},Je=(Te,Re)=>{ze(Te,st=>{const kt=fe(st);gt(kt,Re)})},Ae=(Te,Re,st,kt,bt)=>ze(Te,vt=>{const qt=uo(Re)?t.createElement(Re):Re;return ne(st)&&at(qt,st),kt&&(!uo(kt)&&kt.nodeType?qt.appendChild(kt):uo(kt)&&Je(qt,kt)),bt?qt:vt.appendChild(qt)}),Pe=(Te,Re,st)=>Ae(t.createElement(Te),Te,Re,st,!0),Me=Hi.encodeAllRaw,qe=(Te,Re)=>ze(Te,st=>{const kt=fe(st);return Re&&Ue(ss(kt),bt=>{Kn(bt)&&0===bt.dom.length?G(bt):ei(kt,bt)}),G(kt),kt.dom}),Qt=(Te,Re,st)=>{ze(Te,kt=>{if(ve(kt)){const bt=fe(kt),vt=Re.split(" ");Ue(vt,qt=>{var Ro,fo,hn,io;ne(st)?(st?ko:cn)(bt,qt):(fo=qt,ct(Ro=bt)?Ro.dom.classList.toggle(fo):(io=fo,Ie(Rt(hn=Ro),io)?Jt(hn,io):wo(hn,io)),Sn(Ro))})}})},Ht=(Te,Re,st)=>ze(Re,kt=>{var bt;const vt=lo(Re)?Te.cloneNode(!0):Te;return st&&Vd(op(kt.childNodes),qt=>{vt.appendChild(qt)}),null===(bt=kt.parentNode)||void 0===bt||bt.replaceChild(vt,kt),kt}),Lo=Te=>{if(ve(Te)){const Re="a"===Te.nodeName.toLowerCase()&&!A(Te,"href")&&A(Te,"id");if(A(Te,"name")||A(Te,"data-mce-bookmark")||Re)return!0}return!1},to=()=>t.createRange(),wn=(Te,Re,st,kt)=>{if(lo(Te)){let bt=Te.length;const vt=[];for(;bt--;)vt[bt]=wn(Te[bt],Re,st,kt);return vt}return!o.collect||Te!==t&&Te!==s||u.push([Te,Re,st,kt]),w.bind(Te,Re,st,kt||Mo)},xn=(Te,Re,st)=>{if(lo(Te)){let kt=Te.length;const bt=[];for(;kt--;)bt[kt]=xn(Te[kt],Re,st);return bt}if(u.length>0&&(Te===t||Te===s)){let kt=u.length;for(;kt--;){const[bt,vt,qt]=u[kt];Te!==bt||Re&&Re!==vt||st&&st!==qt||w.unbind(bt,vt,qt)}}return w.unbind(Te,Re,st)},ao=Te=>{if(Te&&ve(Te)){const Re=Te.getAttribute("data-mce-contenteditable");return Re&&"inherit"!==Re?Re:"inherit"!==Te.contentEditable?Te.contentEditable:null}return null},Mo={doc:t,settings:o,win:s,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:d,boundEvents:u,styles:v,schema:p,events:w,isBlock:Te=>uo(Te)?Vo(C,Te):ve(Te)&&(Vo(C,Te.nodeName)||zd(p,Te)),root:null,clone:(Te,Re)=>Te.cloneNode(Re),getRoot:P,getViewPort:Te=>{const Re=xo(Te);return{x:Re.x,y:Re.y,w:Re.width,h:Re.height}},getRect:Te=>{const Re=O(Te),st=j(Re),kt=oe(Re);return{x:st.x,y:st.y,w:kt.w,h:kt.h}},getSize:oe,getParent:(Te,Re,st)=>{const kt=be(Te,Re,st,!1);return kt&&kt.length>0?kt[0]:null},getParents:be,get:O,getNext:(Te,Re)=>Se(Te,Re,"nextSibling"),getPrev:(Te,Re)=>Se(Te,Re,"previousSibling"),select:(Te,Re)=>{var st,kt;const bt=null!==(kt=null!==(st=O(Re))&&void 0!==st?st:o.root_element)&&void 0!==kt?kt:t;return it(bt.querySelectorAll)?nr(bt.querySelectorAll(Te)):[]},is:ie,add:Ae,create:Pe,createHTML:(Te,Re,st="")=>{let kt="<"+Te;for(const bt in Re)Vs(Re,bt)&&(kt+=" "+bt+'="'+Me(Re[bt])+'"');return fn(st)&&Vo(p.getVoidElements(),Te)?kt+" />":kt+">"+st+"</"+Te+">"},createFragment:Te=>{const Re=t.createElement("div"),st=t.createDocumentFragment();let kt;for(st.appendChild(Re),Te&&(Re.innerHTML=Te);kt=Re.firstChild;)st.appendChild(kt);return st.removeChild(Re),st},remove:qe,setStyle:(Te,Re,st)=>{ze(Te,kt=>{const bt=fe(kt);np(bt,Re,st),o.update_styles&&Pi(v,bt)})},getStyle:$,setStyles:(Te,Re)=>{ze(Te,st=>{const kt=fe(st);Ao(Re,(bt,vt)=>{np(kt,vt,bt)}),o.update_styles&&Pi(v,kt)})},removeAllAttribs:Te=>ze(Te,Re=>{const st=Re.attributes;for(let kt=st.length-1;kt>=0;kt--)Re.removeAttributeNode(st.item(kt))}),setAttrib:M,setAttribs:at,getAttrib:A,getPos:j,parseStyle:Te=>v.parse(Te),serializeStyle:(Te,Re)=>v.serialize(Te,Re),addStyle:Te=>{if(Mo!==ws.DOM&&t===document){if(n[Te])return;n[Te]=!0}let Re=t.getElementById("mceDefaultStyles");if(!Re){Re=t.createElement("style"),Re.id="mceDefaultStyles",Re.type="text/css";const st=t.head;st.firstChild?st.insertBefore(Re,st.firstChild):st.appendChild(Re)}Re.styleSheet?Re.styleSheet.cssText+=Te:Re.appendChild(t.createTextNode(Te))},loadCSS:Te=>{Te||(Te=""),Ue(Te.split(","),Re=>{i[Re]=!0,d.load(Re).catch(yo)})},addClass:(Te,Re)=>{Qt(Te,Re,!0)},removeClass:(Te,Re)=>{Qt(Te,Re,!1)},hasClass:(Te,Re)=>{const st=R(Te),kt=Re.split(" ");return ne(st)&&qr(kt,bt=>Xn(st,bt))},toggleClass:Qt,show:Te=>{ze(Te,Re=>Gm(fe(Re),"display"))},hide:Te=>{ze(Te,Re=>ci(fe(Re),"display","none"))},isHidden:Te=>{const Re=R(Te);return ne(Re)&&Ts(di(Re,"display"),"none")},uniqueId:Te=>(Te||"mce_")+c++,setHTML:Je,getOuterHTML:Te=>{const Re=R(Te);return ne(Re)?ve(Re.dom)?Re.dom.outerHTML:(st=>{const kt=vn("div"),bt=fe(st.dom.cloneNode(!0));return Un(kt,bt),Fe(kt)})(Re):""},setOuterHTML:(Te,Re)=>{ze(Te,st=>{ve(st)&&(st.outerHTML=Re)})},decode:Hi.decode,encode:Me,insertAfter:(Te,Re)=>{const st=O(Re);return ze(Te,kt=>{const bt=st?.parentNode,vt=st?.nextSibling;return bt&&(vt?bt.insertBefore(kt,vt):bt.appendChild(kt)),kt})},replace:Ht,rename:(Te,Re)=>{if(Te.nodeName!==Re.toUpperCase()){const st=Pe(Re);return Vd(H(Te),kt=>{M(st,kt.nodeName,A(Te,kt.nodeName))}),Ht(st,Te,!0),st}return Te},findCommonAncestor:(Te,Re)=>{let st=Te;for(;st;){let kt=Re;for(;kt&&st!==kt;)kt=kt.parentNode;if(st===kt)break;st=st.parentNode}return!st&&Te.ownerDocument?Te.ownerDocument.documentElement:st},run:ze,getAttribs:H,isEmpty:(Te,Re,st)=>{let kt=0;if(Lo(Te))return!1;const bt=Te.firstChild;if(bt){const vt=new F(bt,Te),qt=p?p.getWhitespaceElements():{},Ro=Re||(p?p.getNonEmptyElements():null);let fo=bt;do{if(ve(fo)){const sn=fo.getAttribute("data-mce-bogus");if(sn){fo=vt.next("all"===sn);continue}const hn=fo.nodeName.toLowerCase();if(Ro&&Ro[hn]){if("br"===hn){kt++,fo=vt.next();continue}return!1}if(Lo(fo))return!1}if(Yn(fo)||tt(fo)&&!oc(fo.data)&&(!st?.includeZwsp||!yf(fo.data))||tt(fo)&&fo.parentNode&&qt[fo.parentNode.nodeName]&&oc(fo.data))return!1;fo=vt.next()}while(fo)}return kt<=1},createRng:to,nodeIndex:Zl,split:(Te,Re,st)=>{let kt,bt,vt=to();if(Te&&Re&&Te.parentNode&&Re.parentNode){const qt=Te.parentNode;return vt.setStart(qt,Zl(Te)),vt.setEnd(Re.parentNode,Zl(Re)),kt=vt.extractContents(),vt=to(),vt.setStart(Re.parentNode,Zl(Re)+1),vt.setEnd(qt,Zl(Te)+1),bt=vt.extractContents(),qt.insertBefore(Xh(Mo,kt),Te),qt.insertBefore(st||Re,Te),qt.insertBefore(Xh(Mo,bt),Te),qe(Te),st||Re}},bind:wn,unbind:xn,fire:(Te,Re,st)=>w.dispatch(Te,Re,st),dispatch:(Te,Re,st)=>w.dispatch(Te,Re,st),getContentEditable:ao,getContentEditableParent:Te=>{const Re=P();let st=null;for(let kt=Te;kt&&kt!==Re&&(st=ao(kt),null===st);kt=kt.parentNode);return st},isEditable:Te=>{if(ne(Te)){const Re=ve(Te)?Te:Te.parentElement;return ne(Re)&&Li(fe(Re))}return!1},destroy:()=>{if(u.length>0){let Te=u.length;for(;Te--;){const[Re,st,kt]=u[Te];w.unbind(Re,st,kt)}}Ao(i,(Te,Re)=>{d.unload(Re),delete i[Re]})},isChildOf:(Te,Re)=>Te===Re||Re.contains(Te),dumpRng:Te=>"startContainer: "+Te.startContainer.nodeName+", startOffset: "+Te.startOffset+", endContainer: "+Te.endContainer.nodeName+", endOffset: "+Te.endOffset},rn=((Te,Re,st)=>{const kt=Re.keep_values,vt={style:{set:(qt,Ro)=>{const fo=fe(qt);kt&&Rs(fo,Yg,Ro),Le(fo,"style"),uo(Ro)&&ec(fo,Te.parse(Ro))},get:qt=>{const Ro=fe(qt),fo=Y(Ro,Yg)||Y(Ro,"style");return Te.serialize(Te.parse(fo),Er(Ro))}}};return kt&&(vt.href=vt.src={set:(qt,Ro,fo)=>{const sn=fe(qt);it(Re.url_converter)&&ne(Ro)&&(Ro=Re.url_converter.call(Re.url_converter_scope||st(),String(Ro),fo,qt)),Rs(sn,"data-mce-"+fo,Ro),Rs(sn,fo,Ro)},get:(qt,Ro)=>{const fo=fe(qt);return Y(fo,"data-mce-"+Ro)||Y(fo,Ro)}}),vt})(v,o,ot(Mo));return Mo};ws.DOM=ws(document),ws.nodeIndex=Zl;const ny=ws.DOM;class Zd{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((n,s)=>{const i=ny;let c;const d=()=>{i.remove(u),c&&(c.onerror=c.onload=c=null)},u=i.uniqueId();c=document.createElement("script"),c.id=u,c.type="text/javascript",c.src=It._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=()=>{d(),n()},c.onerror=()=>{d(),s("Failed to load script: "+o)},(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(o){return 2===this.states[o]}markDone(o){this.states[o]=2}add(o){const n=this;return n.queue.push(o),void 0===n.states[o]&&(n.states[o]=0),new Promise((s,i)=>{n.scriptLoadedCallbacks[o]||(n.scriptLoadedCallbacks[o]=[]),n.scriptLoadedCallbacks[o].push({resolve:s,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const n=this,s=(p,v)=>{Nn(n.scriptLoadedCallbacks,v).each(w=>{Ue(w,C=>C[p](v))}),delete n.scriptLoadedCallbacks[v]},i=p=>{const v=Yt(p,w=>"rejected"===w.status);return v.length>0?Promise.reject(ks(v,({reason:w})=>lo(w)?w:[w])):Promise.resolve()},c=p=>Promise.allSettled(Gt(p,v=>2===n.states[v]?(s("resolve",v),Promise.resolve()):3===n.states[v]?(s("reject",v),Promise.reject(v)):(n.states[v]=1,n.loadScript(v).then(()=>{n.states[v]=2,s("resolve",v);const w=n.queue;return w.length>0?(n.queue=[],c(w).then(i)):Promise.resolve()},()=>(n.states[v]=3,s("reject",v),Promise.reject(v)))))),d=p=>(n.loading=!0,c(p).then(v=>{n.loading=!1;const w=n.queueLoadedCallbacks.shift();return X.from(w).each(Nt),i(v)})),u=ar(o);return n.loading?new Promise((p,v)=>{n.queueLoadedCallbacks.push(()=>{d(u).then(p,v)})}):d(u)}}Zd.ScriptLoader=new Zd;const Za=t=>{let o=t;return{get:()=>o,set:n=>{o=n}}},Kc={},Nf=Za("en"),Mf=()=>Nn(Kc,Nf.get()),Ac={getData:()=>Nr(Kc,t=>({...t})),setCode:t=>{t&&Nf.set(t)},getCode:()=>Nf.get(),add:(t,o)=>{let n=Kc[t];n||(Kc[t]=n={}),Ao(o,(s,i)=>{n[i.toLowerCase()]=s})},translate:t=>{const o=Mf().getOr({}),n=u=>it(u)?Object.prototype.toString.call(u):s(u)?"":""+u,s=u=>""===u||null==u,i=u=>{const p=n(u);return Nn(o,p.toLowerCase()).map(n).getOr(p)},c=u=>u.replace(/{context:\w+}$/,"");if(s(t))return"";if(ut(d=t)&&Vo(d,"raw"))return n(t.raw);var d,u;if(lo(u=t)&&u.length>1){const u=t.slice(1);return c(i(t[0]).replace(/\{([0-9]+)\}/g,(p,v)=>Vo(u,v)?n(u[v]):p))}return c(i(t))},isRtl:()=>Mf().bind(t=>Nn(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Vo(Kc,t)},Ei=()=>{const t=[],o={},n={},s=[],i=(p,v)=>{const w=Yt(s,C=>C.name===p&&C.state===v);Ue(w,C=>C.resolve())},c=p=>Vo(o,p),d=(p,v)=>{const w=Ac.getCode();!w||v&&-1===(","+(v||"")+",").indexOf(","+w+",")||Zd.ScriptLoader.add(o[p]+"/langs/"+w+".js")},u=(p,v="added")=>"added"===v&&Vo(n,p)||"loaded"===v&&c(p)?Promise.resolve():new Promise(w=>{s.push({name:p,state:v,resolve:w})});return{items:t,urls:o,lookup:n,get:p=>{if(n[p])return n[p].instance},requireLangPack:(p,v)=>{!1!==Ei.languageLoad&&(c(p)?d(p,v):u(p,"loaded").then(()=>d(p,v)))},add:(p,v)=>(t.push(v),n[p]={instance:v},i(p,"added"),v),remove:p=>{delete o[p],delete n[p]},createUrl:(p,v)=>uo(v)?uo(p)?{prefix:"",resource:v,suffix:""}:{prefix:p.prefix,resource:v,suffix:p.suffix}:v,load:(p,v)=>{if(o[p])return Promise.resolve();let w=uo(v)?v:v.prefix+v.resource+v.suffix;0!==w.indexOf("/")&&-1===w.indexOf("://")&&(w=Ei.baseURL+"/"+w),o[p]=w.substring(0,w.lastIndexOf("/"));const C=()=>(i(p,"loaded"),Promise.resolve());return n[p]?C():Zd.ScriptLoader.add(w).then(C)},waitFor:u}};Ei.languageLoad=!0,Ei.baseURL="",Ei.PluginManager=Ei(),Ei.ThemeManager=Ei(),Ei.ModelManager=Ei();const Qg=t=>{const o=Za(X.none()),n=()=>o.get().each(s=>clearInterval(s));return{clear:()=>{n(),o.set(X.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(X.some(setInterval(s,t)))}}},Us=()=>{const t=(o=>{const n=Za(X.none()),s=()=>n.get().each(o);return{clear:()=>{s(),n.set(X.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:i=>{s(),n.set(X.some(i))}}})(yo);return{...t,on:o=>t.get().each(o)}},Ws=(t,o)=>{let n=null;return{cancel:()=>{jn(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{jn(n)&&(n=setTimeout(()=>{n=null,t.apply(null,s)},o))}}},Gi=(t,o)=>{let n=null;const s=()=>{jn(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...i)=>{s(),n=setTimeout(()=>{n=null,t.apply(null,i)},o)}}},jl=ot("mce-annotation"),Oi=ot("data-mce-annotation"),mm=ot("data-mce-annotation-uid"),rc=ot("data-mce-annotation-active"),Xc=ot("data-mce-annotation-classes"),og=ot("data-mce-annotation-attrs"),rp=t=>o=>yr(o,t),Rf=(t,o)=>{const n=t.selection.getRng(),s=fe(n.startContainer),i=fe(t.getBody()),c=o.fold(()=>"."+jl(),u=>`[${Oi()}="${u}"]`),d=bc(s,n.startOffset).getOr(s);return $s(d,c,rp(i)).bind(u=>le(u,`${mm()}`).bind(p=>le(u,`${Oi()}`).map(v=>{const w=C0(t,p);return{uid:p,name:v,elements:w}})))},Df=(t,o)=>Ce(t,"data-mce-bogus")||S(t,'[data-mce-bogus="all"]',rp(o)),C0=(t,o)=>{const n=fe(t.getBody()),s=W(n,`[${mm()}="${o}"]`);return Yt(s,i=>!Df(i,n))},gm=(t,o)=>{const n=fe(t.getBody()),s=W(n,`[${Oi()}="${o}"]`),i={};return Ue(s,c=>{if(!Df(c,n)){const d=Y(c,mm()),u=Nn(i,d).getOr([]);i[d]=u.concat([c])}}),i};let ng=0;const Ks=t=>{const o=(new Date).getTime(),n=Math.floor(1e9*Math.random());return ng++,t+"_"+n+ng+String(o)},_0=(t,o)=>fe(t.dom.cloneNode(o)),Ou=t=>_0(t,!1),sp=t=>_0(t,!0),ja=(t,o)=>{const n=((i,c)=>{const d=vn(c),u=ke(i);return wa(d,u),d})(t,o);qi(t,n);const s=ss(t);return V(n,s),G(t),n},sc=(t,o,n=Do)=>{const s=new F(t,o),i=c=>{let d;do{d=s[c]()}while(d&&!tt(d)&&!n(d));return X.from(d).filter(tt)};return{current:()=>X.from(s.current()).filter(tt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Tu=(t,o)=>{const n=o||(i=>t.isBlock(i)||je(i)||Oo(i)),s=(i,c,d,u)=>{if(tt(i)){const p=u(i,c,i.data);if(-1!==p)return X.some({container:i,offset:p})}return d().bind(p=>s(p.container,p.offset,d,u))};return{backwards:(i,c,d,u)=>{const p=sc(i,u??t.getRoot(),n);return s(i,c,()=>p.prev().map(v=>({container:v,offset:v.length})),d).getOrNull()},forwards:(i,c,d,u)=>{const p=sc(i,u??t.getRoot(),n);return s(i,c,()=>p.next().map(v=>({container:v,offset:0})),d).getOrNull()}}},hm=Math.round,pm=t=>t?{left:hm(t.left),top:hm(t.top),bottom:hm(t.bottom),right:hm(t.right),width:hm(t.width),height:hm(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Bf=(t,o)=>(t=pm(t),o||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Nc=(t,o,n)=>t>=0&&t<=Math.min(o.height,n.height)/2,Mc=(t,o)=>{const n=Math.min(o.height/2,t.height/2);return t.bottom-n<o.top||!(t.top>o.bottom)&&Nc(o.top-t.bottom,t,o)},fm=(t,o)=>t.top>o.bottom||!(t.bottom<o.top)&&Nc(o.bottom-t.top,t,o),Oa=(t,o,n)=>{const s=Math.max(Math.min(o,t.left+t.width),t.left),i=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((o-s)*(o-s)+(n-i)*(n-i))},Bl=t=>{const o=t.startContainer,n=t.startOffset;return o===t.endContainer&&o.hasChildNodes()&&t.endOffset===n+1?o.childNodes[n]:null},ac=(t,o)=>{if(ve(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(d=n.length-1,Math.min(Math.max(o,0),d))]}var d;return t},ry=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),bm=t=>uo(t)&&t.charCodeAt(0)>=768&&ry.test(t),vm=ve,Lf=kc,ap=mo("display","block table"),al=mo("float","left right"),ym=((...t)=>o=>{for(let n=0;n<t.length;n++)if(!t[n](o))return!1;return!0})(vm,Lf,Ma(al)),If=Ma(mo("white-space","pre pre-line pre-wrap")),rg=tt,S0=je,sy=ws.nodeIndex,jd=(t,o)=>o<0&&ve(t)&&t.hasChildNodes()?void 0:ac(t,o),bd=t=>t?t.createRange():ws.DOM.createRng(),wm=t=>uo(t)&&/[\r\n\t ]/.test(t),cr=t=>!!t.setStart&&!!t.setEnd,il=t=>{const o=t.startContainer,n=t.startOffset;if(wm(t.toString())&&If(o.parentNode)&&tt(o)){const s=o.data;if(wm(s[n-1])||wm(s[n+1]))return!0}return!1},Au=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,vd=t=>{var o;let n;const s=t.getClientRects();return n=pm(s.length>0?s[0]:t.getBoundingClientRect()),!cr(t)&&S0(t)&&Au(n)?(i=>{const c=i.ownerDocument,d=bd(c),u=c.createTextNode(os),p=i.parentNode;p.insertBefore(u,i),d.setStart(u,0),d.setEnd(u,1);const v=pm(d.getBoundingClientRect());return p.removeChild(u),v})(t):Au(n)&&cr(t)&&null!==(o=(i=>{const d=i.endContainer,u=i.startOffset,p=i.endOffset;if(i.startContainer===d&&tt(d)&&0===u&&1===p){const v=i.cloneRange();return v.setEndAfter(d),vd(v)}return null})(t))&&void 0!==o?o:n},Qr=(t,o)=>{const n=Bf(t,o);return n.width=1,n.right=n.left+1,n},rt=(t,o,n)=>{const s=()=>(n||(n=(i=>{const c=[],d=w=>{var C,O;0!==w.height&&(c.length>0&&(C=w).left===(O=c[c.length-1]).left&&C.top===O.top&&C.bottom===O.bottom&&C.right===O.right||c.push(w))},u=(w,C)=>{const O=bd(w.ownerDocument);if(C<w.data.length){if(bm(w.data[C]))return;if(bm(w.data[C-1])&&(O.setStart(w,C),O.setEnd(w,C+1),!il(O)))return void d(Qr(vd(O),!1))}C>0&&(O.setStart(w,C-1),O.setEnd(w,C),il(O)||d(Qr(vd(O),!1))),C<w.data.length&&(O.setStart(w,C),O.setEnd(w,C+1),il(O)||d(Qr(vd(O),!0)))},p=i.container(),v=i.offset();if(rg(p))return u(p,v),c;if(vm(p))if(i.isAtEnd()){const w=jd(p,v);rg(w)&&u(w,w.data.length),ym(w)&&!S0(w)&&d(Qr(vd(w),!1))}else{const w=jd(p,v);if(rg(w)&&u(w,0),ym(w)&&i.isAtEnd())return d(Qr(vd(w),!1)),c;const C=jd(i.container(),i.offset()-1);ym(C)&&!S0(C)&&(ap(C)||ap(w)||!ym(w))&&d(Qr(vd(C),!1)),ym(w)&&d(Qr(vd(w),!0))}return c})(rt(t,o))),n);return{container:ot(t),offset:ot(o),toRange:()=>{const i=bd(t.ownerDocument);return i.setStart(t,o),i.setEnd(t,o),i},getClientRects:s,isVisible:()=>s().length>0,isAtStart:()=>(rg(t),0===o),isAtEnd:()=>rg(t)?o>=t.data.length:o>=t.childNodes.length,isEqual:i=>i&&t===i.container()&&o===i.offset(),getNode:i=>jd(t,i?o-1:o)}};rt.fromRangeStart=t=>rt(t.startContainer,t.startOffset),rt.fromRangeEnd=t=>rt(t.endContainer,t.endOffset),rt.after=t=>rt(t.parentNode,sy(t)+1),rt.before=t=>rt(t.parentNode,sy(t)),rt.isAbove=(t,o)=>As(Pn(o.getClientRects()),Gn(t.getClientRects()),Mc).getOr(!1),rt.isBelow=(t,o)=>As(Gn(o.getClientRects()),Pn(t.getClientRects()),fm).getOr(!1),rt.isAtStart=t=>!!t&&t.isAtStart(),rt.isAtEnd=t=>!!t&&t.isAtEnd(),rt.isTextPosition=t=>!!t&&tt(t.container()),rt.isElementPosition=t=>!rt.isTextPosition(t);const xm=(t,o)=>{tt(o)&&0===o.data.length&&t.remove(o)},gi=(t,o,n)=>{var s,c;Hr(n)?((s,i,c)=>{const d=X.from(c.firstChild),u=X.from(c.lastChild);i.insertNode(c),d.each(p=>xm(s,p.previousSibling)),u.each(p=>xm(s,p.nextSibling))})(t,o,n):(s=t,o.insertNode(c=n),xm(s,c.previousSibling),xm(s,c.nextSibling))},ll=tt,ip=zo,Hf=ws.nodeIndex,Pf=t=>{const o=t.parentNode;return ip(o)?Pf(o):o},lp=t=>t?ai(t.childNodes,(o,n)=>(ip(n)&&"BR"!==n.nodeName?o=o.concat(lp(n)):o.push(n),o),[]):[],k0=t=>o=>t===o,E0=t=>(ll(t)?"text()":t.nodeName.toLowerCase())+"["+(o=>{let n,s;n=lp(Pf(o)),s=ta(n,k0(o),o),n=n.slice(0,s+1);const i=ai(n,(c,d,u)=>(ll(d)&&ll(n[u-1])&&c++,c),0);return n=Sa(n,Mt([o.nodeName])),s=ta(n,k0(o),o),s-i})(t)+"]",O0=(t,o)=>{let n,s=[],i=o.container(),c=o.offset();if(ll(i))n=((u,p)=>{let v=u;for(;(v=v.previousSibling)&&ll(v);)p+=v.data.length;return p})(i,c);else{const u=i.childNodes;c>=u.length?(n="after",c=u.length-1):n="before",i=u[c]}s.push(E0(i));let d=((u,p,v)=>{const w=[];for(let C=p.parentNode;C&&C!==u;C=C.parentNode)w.push(C);return w})(t,i);return d=Sa(d,Ma(zo)),s=s.concat(si(d,u=>E0(u))),s.reverse().join("/")+","+n},T0=(t,o)=>{if(!o)return null;const n=o.split(","),s=n[0].split("/"),i=n.length>1?n[1]:"before",c=ai(s,(d,u)=>{const p=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(u);return p?("text()"===p[1]&&(p[1]="#text"),((v,w,C)=>{let O=lp(v);return O=Sa(O,(R,A)=>!ll(R)||!ll(O[A-1])),O=Sa(O,Mt([w])),O[C]})(d,p[1],parseInt(p[2],10))):null},t);if(!c)return null;if(!ll(c)&&c.parentNode){let d;return d="after"===i?Hf(c)+1:Hf(c),rt(c.parentNode,d)}return((d,u)=>{let p=d,v=0;for(;ll(p);){const w=p.data.length;if(u>=v&&u<=v+w){d=p,u-=v;break}if(!ll(p.nextSibling)){d=p,u=w;break}v+=w,p=p.nextSibling}return ll(d)&&u>d.data.length&&(u=d.data.length),rt(d,u)})(c,parseInt(i,10))},Nu=Oo,Ul=(t,o,n,s,i)=>{const c=i?s.startContainer:s.endContainer;let d=i?s.startOffset:s.endOffset;const u=[],p=t.getRoot();if(tt(c))u.push(n?((v,w,C)=>{let O=v(w.data.slice(0,C)).length;for(let R=w.previousSibling;R&&tt(R);R=R.previousSibling)O+=v(R.data).length;return O})(o,c,d):d);else{let v=0;const w=c.childNodes;d>=w.length&&w.length&&(v=1,d=Math.max(0,w.length-1)),u.push(t.nodeIndex(w[d],n)+v)}for(let v=c;v&&v!==p;v=v.parentNode)u.push(t.nodeIndex(v,n));return u},hi=(t,o,n)=>{let s=0;return It.each(t.select(o),i=>"all"===i.getAttribute("data-mce-bogus")?void 0:i!==n&&void s++),s},Mu=(t,o)=>{let n=o?t.startContainer:t.endContainer,s=o?t.startOffset:t.endOffset;if(ve(n)&&"TR"===n.nodeName){const i=n.childNodes;n=i[Math.min(o?s:s-1,i.length-1)],n&&(s=o?0:n.childNodes.length,o?t.setStart(n,s):t.setEnd(n,s))}},A0=t=>(Mu(t,!0),Mu(t,!1),t),N0=(t,o)=>{if(ve(t)&&(t=ac(t,o),Nu(t)))return t;if(Ba(t)){tt(t)&&sl(t)&&(t=t.parentNode);let n=t.previousSibling;if(Nu(n)||(n=t.nextSibling,Nu(n)))return n}},M0=(t,o,n)=>{const s=n.getNode(),i=n.getRng();if("IMG"===s.nodeName||Nu(s)){const d=s.nodeName;return{name:d,index:hi(n.dom,d,s)}}const c=N0((d=i).startContainer,d.startOffset)||N0(d.endContainer,d.endOffset);var d;if(c){const d=c.tagName;return{name:d,index:hi(n.dom,d,c)}}return((d,u,p,v)=>{const w=u.dom,C=Ul(w,d,p,v,!0),O=u.isForward(),R=_c(v)?{isFakeCaret:!0}:{};return u.isCollapsed()?{start:C,forward:O,...R}:{start:C,end:Ul(w,d,p,v,!1),forward:O,...R}})(t,n,o,i)},Ff=(t,o,n)=>{const s={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return n?t.create("span",s,"&#xFEFF;"):t.create("span",s)},zf=(t,o)=>{const n=t.dom;let s=t.getRng();const i=n.uniqueId(),c=t.isCollapsed(),d=t.getNode(),u=d.nodeName,p=t.isForward();if("IMG"===u)return{name:u,index:hi(n,u,d)};const v=A0(s.cloneRange());if(!c){v.collapse(!1);const C=Ff(n,i+"_end",o);gi(n,v,C)}s=A0(s),s.collapse(!0);const w=Ff(n,i+"_start",o);return gi(n,s,w),t.moveToBookmark({id:i,keep:!0,forward:p}),{id:i,forward:p}},Vf=mt(M0,mn,!0),Ti=t=>{const o=c=>c(t),n=ot(t),s=()=>i,i={tag:!0,inner:t,fold:(c,d)=>d(t),isValue:Jo,isError:Do,map:c=>Xs.value(c(t)),mapError:s,bind:o,exists:o,forall:o,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:c=>{c(t)},toOptional:()=>X.some(t)};return i},Ai=t=>{const o=()=>n,n={tag:!1,inner:t,fold:(s,i)=>s(t),isValue:Do,isError:Jo,map:o,mapError:s=>Xs.error(s(t)),bind:o,exists:Do,forall:Jo,getOr:mn,or:mn,getOrThunk:fr,orThunk:fr,getOrDie:qn(String(t)),each:yo,toOptional:X.none};return n},Xs={value:Ti,error:Ai,fromOption:(t,o)=>t.fold(()=>Ai(o),Ti)},Ta=t=>{if(!lo(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const o=[],n={};return Ue(t,(s,i)=>{const c=Sr(s);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],u=s[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!lo(u))throw new Error("case arguments must be an array");o.push(d),n[d]=(...p)=>{const v=p.length;if(v!==u.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+u.length+" ("+u+"), got "+v);return{fold:(...w)=>{if(w.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+w.length);return w[i].apply(null,p)},match:w=>{const C=Sr(w);if(o.length!==C.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+"\nActual: "+C.join(","));if(!qr(o,O=>Ie(C,O)))throw new Error("Not all branches were specified when using match. Specified: "+C.join(", ")+"\nRequired: "+o.join(", "));return w[d].apply(null,p)},log:w=>{console.log(w,{constructors:o,constructor:d,params:p})}}}}),n};Ta([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Wl=t=>"inline-command"===t.type||"inline-format"===t.type,ha=t=>"block-command"===t.type||"block-format"===t.type,eh=t=>{const o=s=>Xs.error({message:s,pattern:t}),n=(s,i,c)=>{if(void 0!==t.format){let d;if(lo(t.format)){if(!qr(t.format,uo))return o(s+" pattern has non-string items in the `format` array");d=t.format}else{if(!uo(t.format))return o(s+" pattern has non-string `format` parameter");d=[t.format]}return Xs.value(i(d))}return void 0!==t.cmd?uo(t.cmd)?Xs.value(c(t.cmd,t.value)):o(s+" pattern has non-string `cmd` parameter"):o(s+" pattern is missing both `format` and `cmd` parameters")};if(!ut(t))return o("Raw pattern is not an object");if(!uo(t.start))return o("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!uo(t.end))return o("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return o("Inline pattern has empty `start` and `end` parameters");let s=t.start,i=t.end;return 0===i.length&&(i=s,s=""),n("Inline",c=>({type:"inline-format",start:s,end:i,format:c}),(c,d)=>({type:"inline-command",start:s,end:i,cmd:c,value:d}))}return void 0!==t.replacement?uo(t.replacement)?0===t.start.length?o("Replacement pattern has empty `start` parameter"):Xs.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?o("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:t.start,format:s[0]}),(s,i)=>({type:"block-command",start:t.start,cmd:s,value:i}))},Ua=t=>Yt(t,ha),R0=t=>Yt(t,Wl),Zf=t=>{const o=(n=>{const s=[],i=[];return Ue(n,c=>{c.fold(d=>{s.push(d)},d=>{i.push(d)})}),{errors:s,values:i}})(Gt(t,eh));return Ue(o.errors,n=>console.error(n.message,n.pattern)),o.values},jf=za().deviceType,D0=jf.isTouch(),Uf=ws.DOM,Cm=t=>_n(t,RegExp),po=t=>o=>o.options.get(t),Ru=t=>uo(t)||ut(t),cp=(t,o="")=>n=>{const s=uo(n);if(s){if(-1!==n.indexOf("=")){const i=(c=>{const d=c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(",");return Jn(d,(u,p)=>{const v=p.split("="),w=v[0],C=v.length>1?v[1]:w;return u[ho(w)]=ho(C),u},{})})(n);return{value:Nn(i,t.id).getOr(o),valid:s}}return{value:n,valid:s}}return{valid:!1,message:"Must be a string."}},B0=po("iframe_attrs"),ay=po("doctype"),Vt=po("document_base_url"),Ex=po("body_id"),pi=po("body_class"),L0=po("content_security_policy"),I0=po("br_in_pre"),yl=po("forced_root_block"),Ki=po("forced_root_block_attrs"),Wf=po("newline_behavior"),Ll=po("br_newline_selector"),dp=po("no_newline_selector"),th=po("keep_styles"),Ud=po("end_container_on_empty_block"),Rc=po("automatic_uploads"),$f=po("images_reuse_filename"),Yc=po("images_replace_blob_uris"),oh=po("icons"),qf=po("icons_url"),Gf=po("images_upload_url"),Kf=po("images_upload_base_path"),Xf=po("images_upload_credentials"),H0=po("images_upload_handler"),P0=po("content_css_cors"),Yf=po("referrer_policy"),F0=po("language"),z0=po("language_url"),Jf=po("indent_use_margin"),up=po("indentation"),Ox=po("content_css"),mp=po("content_style"),sg=po("font_css"),Ds=po("directionality"),cl=po("inline_boundaries_selector"),oi=po("object_resizing"),V0=po("resize_img_proportional"),iy=po("placeholder"),Z0=po("event_root"),gp=po("service_message"),_m=po("theme"),ly=po("theme_url"),ag=po("model"),nh=po("model_url"),ig=po("inline_boundaries"),j0=po("formats"),hp=po("preview_styles"),lg=po("format_empty_lines"),pp=po("format_noneditable_selector"),cg=po("custom_ui_selector"),rh=po("inline"),U0=po("hidden_input"),Wd=po("submit_patch"),Sm=po("add_form_submit_trigger"),fp=po("add_unload_trigger"),km=po("custom_undo_redo_levels"),bp=po("disable_nodechange"),Qf=po("readonly"),cy=po("editable_root"),e1=po("content_css_cors"),vp=po("plugins"),t1=po("external_plugins"),W0=po("block_unsupported_drop"),$0=po("visual"),o1=po("visual_table_class"),dy=po("visual_anchor_class"),dg=po("iframe_aria_text"),yp=po("setup"),n1=po("init_instance_callback"),Tx=po("urlconverter_callback"),sh=po("auto_focus"),ah=po("browser_spellcheck"),uy=po("protect"),ug=po("paste_block_drop"),Du=po("paste_data_images"),q0=po("paste_preprocess"),G0=po("paste_postprocess"),Bu=po("newdocument_content"),ih=po("paste_webkit_styles"),my=po("paste_remove_styles_if_webkit"),r1=po("paste_merge_formats"),K0=po("smart_paste"),Xi=po("paste_as_text"),gy=po("paste_tab_spaces"),X0=po("allow_html_data_urls"),Y0=po("text_patterns"),hy=po("text_patterns_lookup"),wp=po("noneditable_class"),J0=po("editable_class"),s1=po("noneditable_regexp"),py=po("preserve_cdata"),Ax=po("highlight_on_focus"),mg=po("xss_sanitization"),a1=po("init_content_sync"),lh=t=>It.explode(t.options.get("images_file_types")),Q0=po("table_tab_navigation"),fy=po("details_initial_state"),eb=po("details_serialized_state"),tb=ve,Em=tt,xp=t=>{const o=t.parentNode;o&&o.removeChild(t)},ch=t=>{const o=qc(t);return{count:t.length-o.length,text:o}},Om=t=>{let o;for(;-1!==(o=t.data.lastIndexOf(Da));)t.deleteData(o,1)},by=(t,o)=>($d(t),o),$d=t=>{tb(t)&&Ba(t)&&(yu(t)?t.removeAttribute("data-mce-caret"):xp(t)),Em(t)&&(Om(t),0===t.data.length&&xp(t))},dh=Oo,Mx=Yr,Cp=Ur,_p=(t,o,n)=>{const s=Bf(o.getBoundingClientRect(),n);let i,c;if("BODY"===t.tagName){const u=t.ownerDocument.documentElement;i=t.scrollLeft||u.scrollLeft,c=t.scrollTop||u.scrollTop}else{const u=t.getBoundingClientRect();i=t.scrollLeft-u.left,c=t.scrollTop-u.top}s.left+=i,s.right+=i,s.top+=c,s.bottom+=c,s.width=1;let d=o.offsetWidth-o.clientWidth;return d>0&&(n&&(d*=-1),s.left+=d,s.right+=d),s},uh=()=>er.browser.isFirefox(),qd=t=>dh(t)||Mx(t),Gd=t=>(qd(t)||oo(t)&&uh())&&hu(fe(t)).exists(Li),ob=xr,mh=Oo,vy=Yr,Lu=mo("display","block table table-cell table-caption list-item"),i1=Ba,Sp=sl,ic=ve,nb=tt,kp=kc,Kd=t=>t>0,Tm=t=>t<0,Iu=(t,o)=>{let n;for(;n=t(o);)if(!Sp(n))return n;return null},Am=(t,o,n,s,i)=>{const c=new F(t,s),d=mh(t)||Sp(t);let u;if(Tm(o)){if(d&&(u=Iu(c.prev.bind(c),!0),n(u)))return u;for(;u=Iu(c.prev.bind(c),i);)if(n(u))return u}if(Kd(o)){if(d&&(u=Iu(c.next.bind(c),!0),n(u)))return u;for(;u=Iu(c.next.bind(c),i);)if(n(u))return u}return null},Hu=(t,o)=>{for(;t&&t!==o;){if(Lu(t))return t;t=t.parentNode}return null},yd=(t,o,n)=>Hu(t.container(),n)===Hu(o.container(),n),l1=(t,o)=>{if(!o)return X.none();const n=o.container(),s=o.offset();return ic(n)?X.from(n.childNodes[s+t]):X.none()},c1=(t,o)=>{var n;const s=(null!==(n=o.ownerDocument)&&void 0!==n?n:document).createRange();return t?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),s},yy=(t,o,n)=>Hu(o,t)===Hu(n,t),wy=(t,o,n)=>{const s=t?"previousSibling":"nextSibling";let i=n;for(;i&&i!==o;){let c=i[s];if(c&&i1(c)&&(c=c[s]),mh(c)||vy(c)){if(yy(o,c,i))return c;break}if(kp(c))break;i=i.parentNode}return null},Xd=mt(c1,!0),Pu=mt(c1,!1),Ep=(t,o,n)=>{let s;const i=mt(wy,!0,o),c=mt(wy,!1,o),d=n.startContainer,u=n.startOffset;if(sl(d)){const p=nb(d)?d.parentNode:d,v=p.getAttribute("data-mce-caret");if("before"===v&&(s=p.nextSibling,Gd(s)))return Xd(s);if("after"===v&&(s=p.previousSibling,Gd(s)))return Pu(s)}if(!n.collapsed)return n;if(tt(d)){if(i1(d)){if(1===t){if(s=c(d),s)return Xd(s);if(s=i(d),s)return Pu(s)}if(-1===t){if(s=i(d),s)return Pu(s);if(s=c(d),s)return Xd(s)}return n}if(xu(d)&&u>=d.data.length-1)return 1===t&&(s=c(d),s)?Xd(s):n;if(wu(d)&&u<=1)return-1===t&&(s=i(d),s)?Pu(s):n;if(u===d.data.length)return s=c(d),s?Xd(s):n;if(0===u)return s=i(d),s?Pu(s):n}return n},mr=(t,o)=>l1(t?0:-1,o).filter(mh),ni=(t,o,n)=>{const s=Ep(t,o,n);return-1===t?rt.fromRangeStart(s):rt.fromRangeEnd(s)},$l=t=>X.from(t.getNode()).map(fe),Fu=(t,o)=>{let n=o;for(;n=t(n);)if(n.isVisible())return n;return n},d1=(t,o)=>{const n=yd(t,o);return!(n||!je(t.getNode()))||n};var La,t;(t=La||(La={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const Rx=Oo,Jc=tt,u1=ve,m1=je,gg=kc,rb=t=>{return Sc(t)||!!vf(o=t)&&!Jn(nr(o.getElementsByTagName("*")),(n,s)=>n||jg(s),!1);var o},Op=sa,gh=(t,o)=>t.hasChildNodes()&&o<t.childNodes.length?t.childNodes[o]:null,g1=(t,o)=>{if(Kd(t)){if(gg(o.previousSibling)&&!Jc(o.previousSibling))return rt.before(o);if(Jc(o))return rt(o,0)}if(Tm(t)){if(gg(o.nextSibling)&&!Jc(o.nextSibling))return rt.after(o);if(Jc(o))return rt(o,o.data.length)}return Tm(t)?m1(o)?rt.before(o):rt.after(o):rt.before(o)},Tp=(t,o,n)=>{let s,i,c,d;if(!u1(n)||!o)return null;if(o.isEqual(rt.after(n))&&n.lastChild){if(d=rt.after(n.lastChild),Tm(t)&&gg(n.lastChild)&&u1(n.lastChild))return m1(n.lastChild)?rt.before(n.lastChild):d}else d=o;const u=d.container();let p=d.offset();if(Jc(u)){if(Tm(t)&&p>0)return rt(u,--p);if(Kd(t)&&p<u.length)return rt(u,++p);s=u}else{if(Tm(t)&&p>0&&(i=gh(u,p-1),gg(i)))return!rb(i)&&(c=Am(i,t,Op,i),c)?Jc(c)?rt(c,c.data.length):rt.after(c):Jc(i)?rt(i,i.data.length):rt.before(i);if(Kd(t)&&p<u.childNodes.length&&(i=gh(u,p),gg(i)))return m1(i)?((w,C)=>{const O=C.nextSibling;return O&&gg(O)?Jc(O)?rt(O,0):rt.before(O):Tp(La.Forwards,rt.after(C),w)})(n,i):!rb(i)&&(c=Am(i,t,Op,i),c)?Jc(c)?rt(c,0):rt.before(c):Jc(i)?rt(i,0):rt.after(i);s=i||d.getNode()}if(s&&(Kd(t)&&d.isAtEnd()||Tm(t)&&d.isAtStart())&&(s=Am(s,t,Jo,n,!0),Op(s,n)))return g1(t,s);i=s&&Am(s,t,Op,n);const v=ya(Yt(((w,C)=>{const O=[];let R=w;for(;R&&R!==C;)O.push(R),R=R.parentNode;return O})(u,n),Rx));return!v||i&&v.contains(i)?i?g1(t,i):null:(d=Kd(t)?rt.after(v):rt.before(v),d)},wd=t=>({next:o=>Tp(La.Forwards,o,t),prev:o=>Tp(La.Backwards,o,t)}),h1=t=>rt.isTextPosition(t)?0===t.offset():kc(t.getNode()),sb=t=>{if(rt.isTextPosition(t)){const o=t.container();return t.offset()===o.data.length}return kc(t.getNode(!0))},xy=(t,o)=>!rt.isTextPosition(t)&&!rt.isTextPosition(o)&&t.getNode()===o.getNode(!0),Ut=(t,o,n)=>{const s=wd(o);return X.from(t?s.next(n):s.prev(n))},xa=(t,o,n)=>Ut(t,o,n).bind(s=>{return yd(n,s,o)&&(c=n,d=s,t?!xy(c,d)&&(rt.isTextPosition(u=c)||!je(u.getNode()))&&sb(c)&&h1(d):!xy(d,c)&&h1(c)&&sb(d))?Ut(t,o,s):X.some(s);var c,d,u}),p1=(t,o,n,s)=>xa(t,o,n).bind(i=>s(i)?p1(t,o,i,s):X.some(i)),Aa=(t,o)=>{const n=t?o.firstChild:o.lastChild;return tt(n)?X.some(rt(n,t?0:n.data.length)):n?kc(n)?X.some(t?rt.before(n):je(s=n)?rt.before(s):rt.after(s)):((i,c,d)=>{const u=i?rt.before(d):rt.after(d);return Ut(i,c,u)})(t,o,n):X.none();var s},fi=mt(Ut,!0),Ni=mt(Ut,!1),dl=mt(Aa,!0),Il=mt(Aa,!1),hg="_mce_caret",Dc=t=>ve(t)&&t.id===hg,Nm=(t,o)=>{let n=o;for(;n&&n!==t;){if(Dc(n))return n;n=n.parentNode}return null},Cy=t=>Vo(t,"name"),g=t=>It.isArray(t.start),f=t=>!(!Cy(t)&&At(t.forward))||t.forward,_=(t,o)=>(ve(o)&&t.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),E=(t,o)=>Il(t).fold(Do,n=>(o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),!0)),B=(t,o,n)=>!(o.hasChildNodes()||!Nm(t,o)||(((s,i)=>{var c;const d=(null!==(c=s.ownerDocument)&&void 0!==c?c:document).createTextNode(Da);s.appendChild(d),i.setStart(d,0),i.setEnd(d,0)})(o,n),0)),I=(t,o,n,s)=>{const i=n[o?"start":"end"],c=t.getRoot();if(i){let d=c,u=i[0];for(let p=i.length-1;d&&p>=1;p--){const v=d.childNodes;if(B(c,d,s))return!0;if(i[p]>v.length-1)return!!B(c,d,s)||E(d,s);d=v[i[p]]}tt(d)&&(u=Math.min(i[0],d.data.length)),ve(d)&&(u=Math.min(i[0],d.childNodes.length)),o?s.setStart(d,u):s.setEnd(d,u)}return!0},Z=t=>tt(t)&&t.data.length>0,q=(t,o,n)=>{const s=t.get(n.id+"_"+o),i=s?.parentNode,c=n.keep;if(s&&i){let d,u;if("start"===o?c?s.hasChildNodes()?(d=s.firstChild,u=1):Z(s.nextSibling)?(d=s.nextSibling,u=0):Z(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)+1):(d=i,u=t.nodeIndex(s)):c?s.hasChildNodes()?(d=s.firstChild,u=1):Z(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)):(d=i,u=t.nodeIndex(s)),!c){const p=s.previousSibling,v=s.nextSibling;let w;for(It.each(It.grep(s.childNodes),C=>{tt(C)&&(C.data=C.data.replace(/\uFEFF/g,""))});w=t.get(n.id+"_"+o);)t.remove(w,!0);if(tt(v)&&tt(p)&&!er.browser.isOpera()){const C=p.data.length;p.appendData(v.data),t.remove(v),d=p,u=C}}return X.some(rt(d,u))}return X.none()},te=(t,o,n)=>((s,i,c=!1)=>{return 2===i?M0(qc,c,s):3===i?(d=>{const u=d.getRng();return{start:O0(d.dom.getRoot(),rt.fromRangeStart(u)),end:O0(d.dom.getRoot(),rt.fromRangeEnd(u)),forward:d.isForward()}})(s):i?{rng:(d=s).getRng(),forward:d.isForward()}:zf(s,!1);var d})(t,o,n),ge=(t,o)=>{((n,s)=>{const i=n.dom;if(s){if(g(s))return((c,d)=>{const u=c.createRng();return I(c,!0,d,u)&&I(c,!1,d,u)?X.some({range:u,forward:f(d)}):X.none()})(i,s);if(uo(s.start))return((c,d)=>{const u=X.from(T0(c.getRoot(),d.start)),p=X.from(T0(c.getRoot(),d.end));return As(u,p,(v,w)=>{const C=c.createRng();return C.setStart(v.container(),v.offset()),C.setEnd(w.container(),w.offset()),{range:C,forward:f(d)}})})(i,s);if(Vo(s,"id"))return((c,d)=>{const u=q(c,"start",d),p=q(c,"end",d);return As(u,p.or(u),(v,w)=>{const C=c.createRng();return C.setStart(_(c,v.container()),v.offset()),C.setEnd(_(c,w.container()),w.offset()),{range:C,forward:f(d)}})})(i,s);if(Cy(s))return((c,d)=>X.from(c.select(d.name)[d.index]).map(u=>{const p=c.createRng();return p.selectNode(u),{range:p,forward:!0}}))(i,s);if((c=>Vo(c,"rng"))(s))return X.some({range:s.rng,forward:f(s)})}return X.none()})(t,o).each(({range:n,forward:s})=>{t.setRng(n,s)})},ye=t=>ve(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),he=t=>"\xa0"===t,Ee=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),$e=t=>!Ee(t)&&!he(t)&&!Pr(t),Ze=t=>{const o=t.toString(16);return(1===o.length?"0"+o:o).toUpperCase()},et=t=>{return{value:(n=Ze(t.red)+Ze(t.green)+Ze(t.blue),Qe(n,"#").toUpperCase())};var n},dt=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,St=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,wt=(t,o,n,s)=>({red:t,green:o,blue:n,alpha:s}),$t=(t,o,n,s)=>{const i=parseInt(t,10),c=parseInt(o,10),d=parseInt(n,10),u=parseFloat(s);return wt(i,c,d,u)},Xt=t=>(o=>{if("transparent"===o)return X.some(wt(0,0,0,0));const n=dt.exec(o);if(null!==n)return X.some($t(n[1],n[2],n[3],"1"));const s=St.exec(o);return null!==s?X.some($t(s[1],s[2],s[3],s[4])):X.none()})(t).map(et).map(o=>"#"+o.value).getOr(t),no=t=>{const o=[];if(t)for(let n=0;n<t.rangeCount;n++)o.push(t.getRangeAt(n));return o},$o=(t,o)=>{const n=W(o,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Yt(ks(t,c=>{const d=Bl(c);return d?[fe(d)]:[]}),Fd)},jo=t=>$o(no(t.selection.getSel()),fe(t.getBody())),gr=(t,o)=>Al(t,"table",o),un=t=>Id(t).fold(ot([t]),o=>[t].concat(un(o))),Bn=t=>_i(t).fold(ot([t]),o=>"br"===Er(o)?Ci(o).map(n=>[t].concat(Bn(n))).getOr([]):[t].concat(Bn(o))),yn=(t,o)=>As((n=>{const s=n.startContainer,i=n.startOffset;return tt(s)?0===i?X.some(fe(s)):X.none():X.from(s.childNodes[i]).map(fe)})(o),(n=>{const s=n.endContainer,i=n.endOffset;return tt(s)?i===s.data.length?X.some(fe(s)):X.none():X.from(s.childNodes[i-1]).map(fe)})(o),(n,s)=>{const i=or(un(t),mt(yr,n)),c=or(Bn(t),mt(yr,s));return i.isSome()&&c.isSome()}).getOr(!1),Vr=(t,o,n,s)=>{const i=n,c=new F(n,i),d=bs(t.schema.getMoveCaretBeforeOnEnterElements(),(p,v)=>!Ie(["td","th","table"],v.toLowerCase()));let u=n;do{if(tt(u)&&0!==It.trim(u.data).length)return void(s?o.setStart(u,0):o.setEnd(u,u.data.length));if(d[u.nodeName])return void(s?o.setStartBefore(u):"BR"===u.nodeName?o.setEndBefore(u):o.setEndAfter(u))}while(u=s?c.next():c.prev());"BODY"===i.nodeName&&(s?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},En=t=>{const o=t.selection.getSel();return ne(o)&&o.rangeCount>0},aa=(t,o)=>{const n=jo(t);n.length>0?Ue(n,s=>{const i=s.dom,c=t.dom.createRng();c.setStartBefore(i),c.setEndAfter(i),o(c,!0)}):o(t.selection.getRng(),!1)},Wa=(t,o,n)=>{const s=zf(t,o);n(s),t.moveToBookmark(s)},Ji=t=>Oe(t?.nodeType),Yd=t=>ve(t)&&!ye(t)&&!Dc(t)&&!zo(t),$a=t=>!0===t.isContentEditable,zu=(t,o,n)=>{const{selection:s,dom:i}=t,c=s.getNode(),d=Oo(c);Wa(s,!0,()=>{o()}),d&&Oo(c)&&i.isChildOf(c,t.getBody())?t.selection.select(c):n(s.getStart())&&hh(i,s)},hh=(t,o)=>{var n,s;const i=o.getRng(),{startContainer:c,startOffset:d}=i;if(!((u,p)=>{if(Yd(p)&&!/^(TD|TH)$/.test(p.nodeName)){const v=u.getAttrib(p,"data-mce-selected"),w=parseInt(v,10);return!isNaN(w)&&w>0}return!1})(t,o.getNode())&&ve(c)){const u=c.childNodes,p=t.getRoot();let v;if(d<u.length){const w=u[d];v=new F(w,null!==(n=t.getParent(w,t.isBlock))&&void 0!==n?n:p)}else{const w=u[u.length-1];v=new F(w,null!==(s=t.getParent(w,t.isBlock))&&void 0!==s?s:p),v.next(!0)}for(let w=v.current();w;w=v.next()){if("false"===t.getContentEditable(w))return;if(tt(w)&&!pg(w))return i.setStart(w,0),void o.setRng(i)}}},Ap=(t,o,n)=>{if(t){const s=o?"nextSibling":"previousSibling";for(t=n?t:t[s];t;t=t[s])if(ve(t)||!pg(t))return t}},ph=(t,o)=>!!t.getTextBlockElements()[o.nodeName.toLowerCase()]||zd(t,o),xd=(t,o,n)=>t.schema.isValidChild(o,n),pg=(t,o=!1)=>{if(ne(t)&&tt(t)){const n=o?t.data.replace(/ /g,"\xa0"):t.data;return oc(n)}return!1},d4=(t,o)=>{const n=t.dom;return Yd(o)&&"false"===n.getContentEditable(o)&&((s,i)=>{const c="[data-mce-cef-wrappable]",d=pp(s),u=fn(d)?c:`${c},${d}`;return li(fe(i),u)})(t,o)&&0===n.select('[contenteditable="true"]',o).length},fh=(t,o)=>it(t)?t(o):(ne(o)&&(t=t.replace(/%(\w+)/g,(n,s)=>o[s]||n)),t),lc=(t,o)=>(t=""+((t=t||"").nodeName||t),o=""+((o=o||"").nodeName||o),t.toLowerCase()===o.toLowerCase()),ul=(t,o)=>{if(eo(t))return null;{let n=String(t);return"color"!==o&&"backgroundColor"!==o||(n=Xt(n)),"fontWeight"===o&&700===t&&(n="bold"),"fontFamily"===o&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},fg=(t,o,n)=>{const s=t.getStyle(o,n);return ul(s,n)},u4=(t,o)=>{let n;return t.getParent(o,s=>!!ve(s)&&(n=t.getStyle(s,"text-decoration"),!!n&&"none"!==n)),n},_y=(t,o,n)=>t.getParents(o,n,t.getRoot()),dr=(t,o,n)=>{const s=t.formatter.get(o);return ne(s)&&To(s,n)},Mm=t=>Vs(t,"block"),Qc=t=>Vs(t,"selector"),bi=t=>Vs(t,"inline"),Dx=t=>Qc(t)&&!1!==t.expand&&!bi(t),f1=ye,m4=_y,g4=pg,Bx=ph,Sy=(t,o)=>{let n=o;for(;n;){if(ve(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:o;n=n.parentNode}return o},Lx=(t,o,n,s)=>{const i=o.data;if(t){for(let c=n;c>0;c--)if(s(i.charAt(c-1)))return c}else for(let c=n;c<i.length;c++)if(s(i.charAt(c)))return c;return-1},PT=(t,o,n)=>Lx(t,o,n,s=>he(s)||Ee(s)),FT=(t,o,n)=>Lx(t,o,n,$e),h4=(t,o,n,s,i,c)=>{let d;const u=t.getParent(n,t.isBlock)||o,p=(v,w,C)=>{const O=Tu(t);return X.from((i?O.backwards:O.forwards)(v,w,(A,H)=>f1(A.parentNode)?-1:(d=A,C(i,A,H)),u))};return p(n,s,PT).bind(v=>c?p(v.container,v.offset+(i?-1:0),FT):X.some(v)).orThunk(()=>d?X.some({container:d,offset:i?0:d.length}):X.none())},Ko=(t,o,n,s,i)=>{const c=s[i];tt(s)&&fn(s.data)&&c&&(s=c);const d=m4(t,s);for(let u=0;u<d.length;u++)for(let p=0;p<o.length;p++){const v=o[p];if((!ne(v.collapsed)||v.collapsed===n.collapsed)&&Qc(v)&&t.is(d[u],v.selector))return d[u]}return s},Ix=(t,o,n,s)=>{var i;let c=n;const d=t.getRoot(),u=o[0];if(Mm(u)&&(c=u.wrapper?null:t.getParent(n,u.block,d)),!c){const p=null!==(i=t.getParent(n,"LI,TD,TH"))&&void 0!==i?i:d;c=t.getParent(tt(n)?n.parentNode:n,v=>v!==d&&Bx(t.schema,v),p)}if(c&&Mm(u)&&u.wrapper&&(c=m4(t,c,"ul,ol").reverse()[0]||c),!c)for(c=n;c&&c[s]&&!t.isBlock(c[s])&&(c=c[s],!lc(c,"br")););return c||n},b1=(t,o,n,s)=>{const i=n.parentNode;return!ne(n[s])&&(!(i!==o&&!eo(i)&&!t.isBlock(i))||b1(t,o,i,s))},v1=(t,o,n,s,i)=>{let c=n;const d=i?"previousSibling":"nextSibling",u=t.getRoot();if(tt(n)&&!g4(n)&&(i?s>0:s<n.data.length))return n;for(;c;){if(!o[0].block_expand&&t.isBlock(c))return c;for(let v=c[d];v;v=v[d]){const w=tt(v)&&!b1(t,u,v,d);if(!f1(v)&&(!je(p=v)||!p.getAttribute("data-mce-bogus")||p.nextSibling)&&!g4(v,w))return c}if(c===u||c.parentNode===u){n=c;break}c=c.parentNode}var p;return n},Hx=t=>f1(t.parentNode)||f1(t),bh=(t,o,n,s=!1)=>{let{startContainer:i,startOffset:c,endContainer:d,endOffset:u}=o;const p=n[0];return ve(i)&&i.hasChildNodes()&&(i=ac(i,c),tt(i)&&(c=0)),ve(d)&&d.hasChildNodes()&&(d=ac(d,o.collapsed?u:u-1),tt(d)&&(u=d.data.length)),i=Sy(t,i),d=Sy(t,d),Hx(i)&&(i=f1(i)?i:i.parentNode,i=o.collapsed?i.previousSibling||i:i.nextSibling||i,tt(i)&&(c=o.collapsed?i.length:0)),Hx(d)&&(d=f1(d)?d:d.parentNode,d=o.collapsed?d.nextSibling||d:d.previousSibling||d,tt(d)&&(u=o.collapsed?0:d.length)),o.collapsed&&(h4(t,t.getRoot(),i,c,!0,s).each(({container:v,offset:w})=>{i=v,c=w}),h4(t,t.getRoot(),d,u,!1,s).each(({container:v,offset:w})=>{d=v,u=w})),(bi(p)||p.block_expand)&&(bi(p)&&tt(i)&&0!==c||(i=v1(t,n,i,c,!0)),bi(p)&&tt(d)&&u!==d.data.length||(d=v1(t,n,d,u,!1))),Dx(p)&&(i=Ko(t,n,o,i,"previousSibling"),d=Ko(t,n,o,d,"nextSibling")),(Mm(p)||Qc(p))&&(i=Ix(t,n,i,"previousSibling"),d=Ix(t,n,d,"nextSibling"),Mm(p)&&(t.isBlock(i)||(i=v1(t,n,i,c,!0)),t.isBlock(d)||(d=v1(t,n,d,u,!1)))),ve(i)&&i.parentNode&&(c=t.nodeIndex(i),i=i.parentNode),ve(d)&&d.parentNode&&(u=t.nodeIndex(d)+1,d=d.parentNode),{startContainer:i,startOffset:c,endContainer:d,endOffset:u}},y1=(t,o,n)=>{var s;const i=o.startOffset,c=ac(o.startContainer,i),d=o.endOffset,u=ac(o.endContainer,d-1),p=M=>{const P=M[0];tt(P)&&P===c&&i>=P.data.length&&M.splice(0,1);const j=M[M.length-1];return 0===d&&M.length>0&&j===u&&tt(j)&&M.splice(M.length-1,1),M},v=(M,P,j)=>{const $=[];for(;M&&M!==j;M=M[P])$.push(M);return $},w=(M,P)=>t.getParent(M,j=>j.parentNode===P,P),C=(M,P,j)=>{const $=j?"nextSibling":"previousSibling";for(let oe=M,ie=oe.parentNode;oe&&oe!==P;oe=ie){ie=oe.parentNode;const be=v(oe===M?oe:oe[$],$);be.length&&(j||be.reverse(),n(p(be)))}};if(c===u)return n(p([c]));const O=null!==(s=t.findCommonAncestor(c,u))&&void 0!==s?s:t.getRoot();if(t.isChildOf(c,u))return C(c,O,!0);if(t.isChildOf(u,c))return C(u,O);const R=w(c,O)||c,A=w(u,O)||u;C(c,R,!0);const H=v(R===c?R:R.nextSibling,"nextSibling",A===u?A.nextSibling:A);H.length&&n(p(H)),C(u,A)},p4=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],f4=(t,o,n,s,i,c)=>{const{uid:d=o,...u}=n;ko(t,jl()),vr(t,`${mm()}`,d),vr(t,`${Oi()}`,s);const{attributes:p={},classes:v=[]}=i(d,u);if(wa(t,p),w=t,Ue(v,O=>{ko(w,O)}),c){v.length>0&&vr(t,`${Xc()}`,v.join(","));const w=Sr(p);w.length>0&&vr(t,`${og()}`,w.join(","))}var w},b4=(t,o,n,s,i)=>{const c=vn("span",t);return f4(c,o,n,s,i,!1),c},v4=t=>{const o=(()=>{const c={};return{register:(d,u)=>{c[d]={name:d,settings:u}},lookup:d=>Nn(c,d).map(u=>u.settings),getNames:()=>Sr(c)}})();((c,d)=>{const u=Oi(),p=w=>X.from(w.attr(u)).bind(d.lookup),v=w=>{var C,O;w.attr(mm(),null),w.attr(Oi(),null),w.attr(rc(),null);const R=X.from(w.attr(og())).map(P=>P.split(",")).getOr([]),A=X.from(w.attr(Xc())).map(P=>P.split(",")).getOr([]);Ue(R,P=>w.attr(P,null));const H=null!==(O=null===(C=w.attr("class"))||void 0===C?void 0:C.split(" "))&&void 0!==O?O:[],M=_a(H,[jl()].concat(A));w.attr("class",M.length>0?M.join(" "):null),w.attr(Xc(),null),w.attr(og(),null)};c.serializer.addTempAttr(rc()),c.serializer.addAttributeFilter(u,w=>{for(const C of w)p(C).each(O=>{!1===O.persistent&&("span"===C.name?C.unwrap():v(C))})})})(t,o);const n=((c,d)=>{const u=Za({}),p=()=>({listeners:[],previous:Us()}),v=(R,A)=>{w(R,H=>(A(H),H))},w=(R,A)=>{const H=u.get(),M=A(Nn(H,R).getOrThunk(p));H[R]=M,u.set(H)},C=(R,A)=>{Ue(C0(c,R),H=>{A?vr(H,rc(),"true"):Le(H,rc())})},O=Gi(()=>{const R=_r(d.getNames());Ue(R,A=>{w(A,H=>{const M=H.previous.get();return Rf(c,X.some(A)).fold(()=>{M.each(P=>{var j;v(j=A,$=>{Ue($.listeners,oe=>oe(!1,j))}),H.previous.clear(),C(P,!1)})},({uid:P,name:j,elements:$})=>{var oe,ie,be;Ts(M,P)||(M.each(oe=>C(oe,!1)),ie=P,be=$,v(oe=j,Se=>{Ue(Se.listeners,ze=>ze(!0,oe,{uid:ie,nodes:Gt(be,at=>at.dom)}))}),H.previous.set(P),C(P,!0))}),{previous:H.previous,listeners:H.listeners}})})},30);return c.on("remove",()=>{O.cancel()}),c.on("NodeChange",()=>{O.throttle()}),{addListener:(R,A)=>{w(R,H=>({previous:H.previous,listeners:H.listeners.concat([A])}))}}})(t,o),s=kl("span"),i=c=>{Ue(c,d=>{s(d)?se(d):(u=>{cn(u,jl()),Le(u,`${mm()}`),Le(u,`${Oi()}`),Le(u,`${rc()}`);const p=le(u,`${og()}`).map(C=>C.split(",")).getOr([]),v=le(u,`${Xc()}`).map(C=>C.split(",")).getOr([]);var w;Ue(p,C=>Le(u,C)),w=u,Ue(v,C=>{cn(w,C)}),Le(u,`${Xc()}`),Le(u,`${og()}`)})(d)})};return{register:(c,d)=>{o.register(c,d)},annotate:(c,d)=>{o.lookup(c).each(u=>{var p,v,w,C;v=c,w=u,C=d,(p=t).undoManager.transact(()=>{const O=p.selection,R=O.getRng(),A=jo(p).length>0,H=Ks("mce-annotation");if(R.collapsed&&!A&&((M,P)=>{const j=bh(M.dom,P,[{inline:"span"}]);P.setStart(j.startContainer,j.startOffset),P.setEnd(j.endContainer,j.endOffset),M.selection.setRng(P)})(p,R),O.getRng().collapsed&&!A){const M=b4(p.getDoc(),H,C,v,w.decorate);gt(M,os),O.getRng().insertNode(M.dom),O.select(M.dom)}else Wa(O,!1,()=>{aa(p,M=>{((t,o,n,s,i,c)=>{const d=[],u=b4(t.getDoc(),n,c,s,i),p=Us(),v=()=>{p.clear()},w=O=>{Ue(O,C)},C=O=>{switch(R=t,A=O,H="span",M=Er(O),Wi(A).fold(()=>"skipping",P=>{return"br"===M||Kn(j=A)&&ui(j)===Da?"valid":(j=>ka(j)&&Xn(j,jl()))(A)?"existing":Dc(A.dom)?"caret":To(p4,j=>li(A,j))?"valid-block":xd(R,H,M)&&xd(R,Er(P),H)?"valid":"invalid-child";var j})){case"invalid-child":{v();const R=ss(O);w(R),v();break}case"valid-block":v(),f4(O,n,c,s,i,!0);break;case"valid":{const R=p.get().getOrThunk(()=>{const A=Ou(u);return d.push(A),p.set(A),A});bu(O,R);break}}var R,A,H,M};y1(t.dom,o,O=>{v(),(R=>{const A=Gt(R,fe);w(A)})(O)})})(p,M,H,v,w.decorate,C)})})})})},annotationChanged:(c,d)=>{n.addListener(c,d)},remove:c=>{Rf(t,X.some(c)).each(({elements:d})=>{const u=t.selection.getBookmark();i(d),t.selection.moveToBookmark(u)})},removeAll:c=>{const d=t.selection.getBookmark();Ao(gm(t,c),(u,p)=>{i(u)}),t.selection.moveToBookmark(d)},getAll:c=>{const d=gm(t,c);return Nr(d,u=>Gt(u,p=>p.dom))}}},Jd=t=>({getBookmark:mt(te,t),moveToBookmark:mt(ge,t)});Jd.isBookmarkNode=ye;const Vu=(t,o,n)=>!n.collapsed&&To(n.getClientRects(),s=>{return d=o,(c=t)>=(i=s).left&&c<=i.right&&d>=i.top&&d<=i.bottom;var i,c,d}),ab=(t,o,n)=>{t.dispatch(o,n)},cc=(t,o,n,s)=>{t.dispatch("FormatApply",{format:o,node:n,vars:s})},ib=(t,o,n,s)=>{t.dispatch("FormatRemove",{format:o,node:n,vars:s})},w1=(t,o)=>t.dispatch("SetContent",o),lb=(t,o)=>t.dispatch("GetContent",o),Np=(t,o)=>t.dispatch("PastePlainTextToggle",{state:o}),vo={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||vo.metaKeyPressed(t),metaKeyPressed:t=>er.os.isMacOS()||er.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Mp="data-mce-selected",y4=Math.abs,ky=Math.round,pr={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Qd=(t,o)=>{const n=o.dom,s=o.getDoc(),i=document,c=o.getBody();let d,u,p,v,w,C,O,R,A,H,M,P,j,$,oe;const ie=ao=>ne(ao)&&(Vn(ao)||n.is(ao,"figure.image")),be=ao=>Yr(ao)||n.hasClass(ao,"mce-preview-object"),Se=ao=>{const Mo=ao.target;((rn,Te)=>{if("longpress"===(Re=rn).type||0===Re.type.indexOf("touch")){const Re=rn.touches[0];return ie(rn.target)&&!Vu(Re.clientX,Re.clientY,Te)}var Re;return ie(rn.target)&&!Vu(rn.clientX,rn.clientY,Te)})(ao,o.selection.getRng())&&!ao.isDefaultPrevented()&&o.selection.select(Mo)},ze=ao=>n.hasClass(ao,"mce-preview-object")&&ne(ao.firstElementChild)?[ao,ao.firstElementChild]:n.is(ao,"figure.image")?[ao.querySelector("img")]:[ao],at=ao=>{const Mo=oi(o);return!!Mo&&"false"!==ao.getAttribute("data-mce-resize")&&ao!==o.getBody()&&(n.hasClass(ao,"mce-preview-object")&&ne(ao.firstElementChild)?li(fe(ao.firstElementChild),Mo):li(fe(ao),Mo))},Je=(ao,Mo,rn)=>{if(ne(rn)){const Te=ze(ao);Ue(Te,Re=>{Re.style[Mo]||!o.schema.isValid(Re.nodeName.toLowerCase(),Mo)?n.setStyle(Re,Mo,rn):n.setAttrib(Re,Mo,""+rn)})}},Ae=(ao,Mo,rn)=>{Je(ao,"width",Mo),Je(ao,"height",rn)},Pe=ao=>{let Mo,rn,Te,Re,st;Mo=ao.screenX-C,rn=ao.screenY-O,P=Mo*v[2]+R,j=rn*v[3]+A,P=P<5?5:P,j=j<5?5:j,Te=(ie(d)||be(d))&&!1!==V0(o)?!vo.modifierPressed(ao):vo.modifierPressed(ao),Te&&(y4(Mo)>y4(rn)?(j=ky(P*H),P=ky(j/H)):(P=ky(j/H),j=ky(P*H))),Ae(u,P,j),Re=v.startPos.x+Mo,st=v.startPos.y+rn,Re=Re>0?Re:0,st=st>0?st:0,n.setStyles(p,{left:Re,top:st,display:"block"}),p.innerHTML=P+" &times; "+j,v[2]<0&&u.clientWidth<=P&&n.setStyle(u,"left",void 0+(R-P)),v[3]<0&&u.clientHeight<=j&&n.setStyle(u,"top",void 0+(A-j)),Mo=c.scrollWidth-$,rn=c.scrollHeight-oe,Mo+rn!==0&&n.setStyles(p,{left:Re-Mo,top:st-rn}),M||(o.dispatch("ObjectResizeStart",{target:d,width:R,height:A,origin:"corner-"+v.name}),M=!0)},Me=()=>{const ao=M;M=!1,ao&&(Je(d,"width",P),Je(d,"height",j)),n.unbind(s,"mousemove",Pe),n.unbind(s,"mouseup",Me),i!==s&&(n.unbind(i,"mousemove",Pe),n.unbind(i,"mouseup",Me)),n.remove(u),n.remove(p),n.remove(w),qe(d),ao&&(o.dispatch("ObjectResized",{target:d,width:P,height:j,origin:"corner-"+v.name}),n.setAttrib(d,"style",n.getAttrib(d,"style"))),o.nodeChanged()},qe=ao=>{wn();const Mo=n.getPos(ao,c),rn=Mo.x,Te=Mo.y,Re=ao.getBoundingClientRect(),st=Re.width||Re.right-Re.left,kt=Re.height||Re.bottom-Re.top;d!==ao&&(Ht(),d=ao,P=j=0);const bt=o.dispatch("ObjectSelected",{target:ao});at(ao)&&!bt.isDefaultPrevented()?Ao(pr,(vt,qt)=>{let Ro=n.get("mceResizeHandle"+qt);Ro&&n.remove(Ro),Ro=n.add(c,"div",{id:"mceResizeHandle"+qt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+qt+"-resize; margin:0; padding:0"}),n.bind(Ro,"mousedown",fo=>{fo.stopImmediatePropagation(),fo.preventDefault(),(sn=>{const hn=ze(d)[0];var io;C=sn.screenX,O=sn.screenY,R=hn.clientWidth,A=hn.clientHeight,H=A/R,v=vt,v.name=qt,v.startPos={x:st*vt[0]+rn,y:kt*vt[1]+Te},$=c.scrollWidth,oe=c.scrollHeight,w=n.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(w,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),u=be(io=d)?n.create("img",{src:er.transparentSrc}):io.cloneNode(!0),n.addClass(u,"mce-clonedresizable"),n.setAttrib(u,"data-mce-bogus","all"),u.contentEditable="false",n.setStyles(u,{left:rn,top:Te,margin:0}),Ae(u,st,kt),u.removeAttribute(Mp),c.appendChild(u),n.bind(s,"mousemove",Pe),n.bind(s,"mouseup",Me),i!==s&&(n.bind(i,"mousemove",Pe),n.bind(i,"mouseup",Me)),p=n.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},R+" &times; "+A)})(fo)}),vt.elm=Ro,n.setStyles(Ro,{left:st*vt[0]+rn-Ro.offsetWidth/2,top:kt*vt[1]+Te-Ro.offsetHeight/2})}):Ht(!1)},Qt=Ws(qe,0),Ht=(ao=!0)=>{Qt.cancel(),wn(),d&&ao&&d.removeAttribute(Mp),Ao(pr,(Mo,rn)=>{const Te=n.get("mceResizeHandle"+rn);Te&&(n.unbind(Te),n.remove(Te))})},Lo=(ao,Mo)=>n.isChildOf(ao,Mo),to=ao=>{if(M||o.removed||o.composing)return;const Mo="mousedown"===ao.type?ao.target:t.getNode(),rn=$s(fe(Mo),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Re=>Re.dom).filter(Re=>n.isEditable(Re.parentElement)).getOrUndefined(),Te=ne(rn)?n.getAttrib(rn,Mp,"1"):"1";if(Ue(n.select(`img[${Mp}],hr[${Mp}]`),Re=>{Re.removeAttribute(Mp)}),ne(rn)&&Lo(rn,c)&&o.hasFocus()){xn();const Re=t.getStart(!0);if(Lo(Re,rn)&&Lo(t.getEnd(!0),rn))return n.setAttrib(rn,Mp,Te),void Qt.throttle(rn)}Ht()},wn=()=>{Ao(pr,ao=>{ao.elm&&(n.unbind(ao.elm),delete ao.elm)})},xn=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{xn(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",to),o.on("keyup compositionend",ao=>{d&&"TABLE"===d.nodeName&&to(ao)}),o.on("hide blur",Ht),o.on("contextmenu longpress",Se,!0)}),o.on("remove",wn),{isResizable:at,showResizeRect:qe,hideResizeRect:Ht,updateResizeRect:to,destroy:()=>{Qt.cancel(),d=u=w=null}}},Rp=(t,o,n)=>{const s=t.document.createRange();var i,c;return i=s,o.fold(c=>{i.setStartBefore(c.dom)},(c,d)=>{i.setStart(c.dom,d)},c=>{i.setStartAfter(c.dom)}),c=s,n.fold(u=>{c.setEndBefore(u.dom)},(u,p)=>{c.setEnd(u.dom,p)},u=>{c.setEndAfter(u.dom)}),s},Px=(t,o,n,s,i)=>{const c=t.document.createRange();return c.setStart(o.dom,n),c.setEnd(s.dom,i),c},bg=Ta([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Rr=(t,o,n)=>o(fe(n.startContainer),n.startOffset,fe(n.endContainer),n.endOffset),Fx=(t,o,n,s)=>({start:t,soffset:o,finish:n,foffset:s}),zx=document.caretPositionFromPoint?(t,o,n)=>{var s,i;return X.from(null===(i=(s=t.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(s,o,n)).bind(c=>{if(null===c.offsetNode)return X.none();const d=t.dom.createRange();return d.setStart(c.offsetNode,c.offset),d.collapse(),X.some(d)})}:document.caretRangeFromPoint?(t,o,n)=>{var s,i;return X.from(null===(i=(s=t.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(s,o,n))}:X.none,Vx=Ta([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ed={before:Vx.before,on:Vx.on,after:Vx.after,cata:(t,o,n,s)=>t.fold(o,n,s),getStart:t=>t.fold(mn,mn,mn)},Rm=Ta([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Dp={domRange:Rm.domRange,relative:Rm.relative,exact:Rm.exact,exactFromRange:t=>Rm.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const o=t.match({domRange:s=>fe(s.startContainer),relative:(s,i)=>ed.getStart(s),exact:(s,i,c,d)=>s});return Zc(o)},range:Fx},Ey=(t,o)=>{const n=Er(t);return"input"===n?ed.after(t):Ie(["br","img"],n)?0===o?ed.before(t):ed.after(t):ed.on(t,o)},zT=(t,o)=>{const n=t.fold(ed.before,Ey,ed.after),s=o.fold(ed.before,Ey,ed.after);return Dp.relative(n,s)},x1=(t,o,n,s)=>{const i=Ey(t,o),c=Ey(n,s);return Dp.relative(i,c)},vh=(t,o)=>{const n=(o||document).createDocumentFragment();return Ue(t,s=>{n.appendChild(s.dom)}),fe(n)},Zx=(t,o,n)=>{return(s=Zc(fe(n)).dom,i=t,c=o,((d,u,p)=>{const v=fe(d.document);return zx(v,u,p).map(w=>Fx(fe(w.startContainer),w.startOffset,fe(w.endContainer),w.endOffset))})(s,i,c)).map(s=>{const i=n.createRange();return i.setStart(s.start.dom,s.soffset),i.setEnd(s.finish.dom,s.foffset),i}).getOrUndefined();var s,i,c},jx=(t,o)=>ne(t)&&ne(o)&&t.startContainer===o.startContainer&&t.startOffset===o.startOffset&&t.endContainer===o.endContainer&&t.endOffset===o.endOffset,Ux=(t,o,n)=>null!==((s,i,c)=>{let d=s;for(;d&&d!==i;){if(c(d))return d;d=d.parentNode}return null})(t,o,n),ZT=(t,o,n)=>Ux(t,o,s=>s.nodeName===n),w4=(t,o)=>Ba(t)&&!Ux(t,o,Dc),Oy=(t,o,n)=>{const s=o.parentNode;if(s){const i=new F(o,t.getParent(s,t.isBlock)||t.getRoot());let c;for(;c=i[n?"prev":"next"]();)if(je(c))return!0}return!1},cb=(t,o,n,s,i)=>{const c=t.getRoot(),d=t.schema.getNonEmptyElements(),u=i.parentNode;let p,v;if(!u)return X.none();const w=t.getParent(u,t.isBlock)||c;if(s&&je(i)&&o&&t.isEmpty(w))return X.some(rt(u,t.nodeIndex(i)));const C=new F(i,w);for(;v=C[s?"prev":"next"]();){if("false"===t.getContentEditableParent(v)||w4(v,c))return X.none();if(tt(v)&&v.data.length>0)return ZT(v,c,"A")?X.none():X.some(rt(v,s?v.data.length:0));if(t.isBlock(v)||d[v.nodeName.toLowerCase()])return X.none();p=v}return Yn(p)?X.none():n&&p?X.some(rt(p,0)):X.none()},Ty=(t,o,n,s)=>{const i=t.getRoot();let c,d=!1,u=n?s.startContainer:s.endContainer,p=n?s.startOffset:s.endOffset;const v=ve(u)&&p===u.childNodes.length,w=t.schema.getNonEmptyElements();let C=n;if(Ba(u))return X.none();if(ve(u)&&p>u.childNodes.length-1&&(C=!1),wr(u)&&(u=i,p=0),u===i){if(C&&(c=u.childNodes[p>0?p-1:0],c)&&(Ba(c)||w[c.nodeName]||oo(c)))return X.none();if(u.hasChildNodes()){if(p=Math.min(!C&&p>0?p-1:p,u.childNodes.length-1),u=u.childNodes[p],p=tt(u)&&v?u.data.length:0,!o&&u===i.lastChild&&oo(u)||((O,R)=>{let A=R;for(;A&&A!==O;){if(Oo(A))return!0;A=A.parentNode}return!1})(i,u)||Ba(u))return X.none();if(u.hasChildNodes()&&!oo(u)){c=u;const O=new F(u,i);do{if(Oo(c)||Ba(c)){d=!1;break}if(tt(c)&&c.data.length>0){p=C?0:c.data.length,u=c,d=!0;break}if(w[c.nodeName.toLowerCase()]&&!Ir(c)){p=t.nodeIndex(c),u=c.parentNode,C||p++,d=!0;break}}while(c=C?O.next():O.prev())}}}return o&&(tt(u)&&0===p&&cb(t,v,o,!0,u).each(O=>{u=O.container(),p=O.offset(),d=!0}),ve(u)&&(c=u.childNodes[p],c||(c=u.childNodes[p-1]),!c||!je(c)||"A"===(null===(A=c.previousSibling)||void 0===A?void 0:A.nodeName)||Oy(t,c,!1)||Oy(t,c,!0)||cb(t,v,o,!0,c).each(O=>{u=O.container(),p=O.offset(),d=!0}))),C&&!o&&tt(u)&&p===u.data.length&&cb(t,v,o,!1,u).each(O=>{u=O.container(),p=O.offset(),d=!0}),d&&u?X.some(rt(u,p)):X.none();var A},db=(t,o)=>{const n=o.collapsed,s=o.cloneRange(),i=rt.fromRangeStart(o);return Ty(t,n,!0,s).each(c=>{n&&rt.isAbove(i,c)||s.setStart(c.container(),c.offset())}),n||Ty(t,n,!1,s).each(c=>{s.setEnd(c.container(),c.offset())}),n&&s.collapse(!0),jx(o,s)?X.none():X.some(s)},ub=(t,o)=>t.splitText(o),mb=t=>{let o=t.startContainer,n=t.startOffset,s=t.endContainer,i=t.endOffset;if(o===s&&tt(o)){if(n>0&&n<o.data.length)if(s=ub(o,n),o=s.previousSibling,i>n){i-=n;const c=ub(s,i).previousSibling;o=s=c,i=c.data.length,n=0}else i=0}else if(tt(o)&&n>0&&n<o.data.length&&(o=ub(o,n),n=0),tt(s)&&i>0&&i<s.data.length){const c=ub(s,i).previousSibling;s=c,i=c.data.length}return{startContainer:o,startOffset:n,endContainer:s,endOffset:i}},Dm=t=>({walk:(o,n)=>y1(t,o,n),split:mb,expand:(o,n={type:"word"})=>{if("word"===n.type){const s=bh(t,o,[{inline:"span"}]),i=t.createRng();return i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),i}return o},normalize:o=>db(t,o).fold(Do,n=>(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),!0))});Dm.compareRanges=jx,Dm.getCaretRangeFromPoint=Zx,Dm.getSelectedNode=Bl,Dm.getNode=ac;const x4=((t,o)=>{const n=i=>{const c=(d=>{const u=d.dom;return md(d)?u.getBoundingClientRect().height:u.offsetHeight})(i);if(c<=0||null===c){const d=Nl(i,t);return parseFloat(d)||0}return c},s=(i,c)=>Jn(c,(d,u)=>{const p=Nl(i,u),v=void 0===p?0:parseInt(p,10);return isNaN(v)?d:d+v},0);return{set:(i,c)=>{if(!Oe(c)&&!c.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+c);const d=i.dom;Wc(d)&&(d.style[t]=c+"px")},get:n,getOuter:n,aggregate:s,max:(i,c,d)=>{const u=s(i,d);return c>u?c-u:0}}})("height"),Wx=()=>fe(document),$x=(t,o)=>t.view(o).fold(ot([]),n=>{const s=t.owner(n),i=$x(t,s);return[n].concat(i)});var C4=Object.freeze({__proto__:null,view:t=>{var o;return(t.dom===document?X.none():X.from(null===(o=t.dom.defaultView)||void 0===o?void 0:o.frameElement)).map(fe)},owner:t=>El(t)});const Ay=t=>"textarea"===Er(t),qx=(t,o)=>{const n=(i=>{const c=i.dom.ownerDocument,d=c.body,u=c.defaultView,p=c.documentElement;if(d===i.dom)return ro(d.offsetLeft,d.offsetTop);const v=co(u?.pageYOffset,p.scrollTop),w=co(u?.pageXOffset,p.scrollLeft),C=co(p.clientTop,d.clientTop),O=co(p.clientLeft,d.clientLeft);return Wn(i).translate(w-O,v-C)})(t),s=x4.get(t);return{element:t,bottom:n.top+s,height:s,pos:n,cleanup:o}},_4=(t,o,n,s)=>{k4(t,(i,c)=>Ny(t,o,n,s),n)},S4=(t,o,n,s,i)=>{const c={elm:s.element.dom,alignToTop:i};t.dispatch("ScrollIntoView",c).isDefaultPrevented()||(n(o,xt(o).top,s,i),t.dispatch("AfterScrollIntoView",c))},Ny=(t,o,n,s)=>{fe(t.getBody());const c=fe(t.getDoc()),d=((u,p)=>{const v=((C,O)=>{const R=ss(C);if(0===R.length||Ay(C))return{element:C,offset:O};if(O<R.length&&!Ay(R[O]))return{element:R[O],offset:0};{const A=R[R.length-1];return Ay(A)?{element:C,offset:O}:"img"===Er(A)?{element:A,offset:1}:Kn(A)?{element:A,offset:ui(A).length}:{element:A,offset:ss(A).length}}})(u,p),w=bn('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return ei(v.element,w),qx(w,()=>G(w))})(fe(n.startContainer),n.startOffset);S4(t,c,o,d,s),d.cleanup()},Gx=(t,o,n,s)=>{const i=fe(t.getDoc());S4(t,i,n,qx(fe(o),yo),s)},k4=(t,o,n)=>{const s=n.startContainer,i=n.startOffset,c=n.endContainer,d=n.endOffset;o(fe(s),fe(c));const u=t.dom.createRng();u.setStart(s,i),u.setEnd(c,d),t.selection.setRng(n)},My=(t,o)=>t.element.dom.scrollIntoView({block:o?"start":"end"}),E4=(t,o,n,s)=>{const i=o+t,c=n.pos.top,d=n.bottom,u=d-c>=o;c<t?My(n,!1!==s):c>i?My(n,u?!1!==s:!0===s):d>i&&!u&&My(n,!0===s)},O4=(t,o,n,s)=>{const i=Zc(t).dom.innerHeight;E4(o,i,n,s)},T4=(t,o,n,s)=>{const i=Zc(t).dom.innerHeight;E4(o,i,n,s);const c=(u=>{const p=Wx(),v=xt(p),w=((R,A)=>{const H=A.owner(R);return $x(A,H)})(u,C4),C=Wn(u),O=ts(w,(R,A)=>{const H=Wn(A);return{left:R.left+H.left,top:R.top+H.top}},{left:0,top:0});return ro(O.left+C.left+v.left,O.top+C.top+v.top)})(n.element),d=xo(window);c.top<d.y?on(n.element,!1!==s):c.top>d.bottom&&on(n.element,!0===s)},jT=(t,o,n)=>_4(t,O4,o,n),UT=(t,o,n)=>Gx(t,o,O4,n),A4=(t,o,n)=>_4(t,T4,o,n),N4=(t,o,n)=>Gx(t,o,T4,n),yh=(t,o,n)=>{(t.inline?jT:A4)(t,o,n)},M4=t=>t.dom.focus(),Ry=t=>{const o=ds(t).dom;return t.dom===o.activeElement},Kx=(t=Wx())=>X.from(t.dom.activeElement).map(fe),Xx=(t,o)=>{const n=Kn(o)?ui(o).length:ss(o).length+1;return t>n?n:t<0?0:t},R4=t=>Dp.range(t.start,Xx(t.soffset,t.start),t.finish,Xx(t.foffset,t.finish)),Yx=(t,o)=>!Ve(o.dom)&&(hl(t,o)||yr(t,o)),D4=t=>o=>Yx(t,o.start)&&Yx(t,o.finish),WT=t=>Dp.range(fe(t.startContainer),t.startOffset,fe(t.endContainer),t.endOffset),Dy=t=>{const o=document.createRange();try{return o.setStart(t.start.dom,t.soffset),o.setEnd(t.finish.dom,t.foffset),X.some(o)}catch{return X.none()}},By=t=>{const o=t.inline||er.browser.isFirefox()?(n=fe(t.getBody()),(s=>{const i=s.getSelection();return(i&&0!==i.rangeCount?X.from(i.getRangeAt(0)):X.none()).map(WT)})(Zc(n).dom).filter(D4(n))):X.none();var n;t.bookmark=o.isSome()?o:t.bookmark},Ly=t=>(t.bookmark?t.bookmark:X.none()).bind(o=>{return n=fe(t.getBody()),X.from(o).filter(D4(n)).map(R4);var n}).bind(Dy),Jx={isEditorUIElement:t=>{const o=t.className.toString();return-1!==o.indexOf("tox-")||-1!==o.indexOf("mce-")}},td={setEditorTimeout:(t,o,n)=>{return Oe(i=n)||(i=0),setTimeout(()=>{t.removed||o()},i);var i},setEditorInterval:(t,o,n)=>{const s=(Oe(c=n)||(c=0),setInterval(()=>{t.removed?clearInterval(s):o()},c));var c;return s}};let C1;const Qx=ws.DOM,_1=t=>{const o=t.classList;return void 0!==o&&(o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"))},gb=(t,o)=>{const n=cg(t);return null!==Qx.getParent(o,i=>{return ve(c=i)&&Jx.isEditorUIElement(c)||!!n&&t.dom.is(i,n);var c})},Iy=t=>{try{const o=ds(fe(t.getElement()));return Kx(o).fold(()=>document.body,n=>n.dom)}catch{return document.body}},$T=(t,o)=>{const n=o.editor;(i=>{const c=Ws(()=>{By(i)},0);i.on("init",()=>{var d,v;i.inline&&((d,u)=>{const p=()=>{u.throttle()};ws.DOM.bind(document,"mouseup",p),d.on("remove",()=>{ws.DOM.unbind(document,"mouseup",p)})})(i,c),v=c,(d=i).on("mouseup touchend",w=>{v.throttle()}),d.on("keyup NodeChange AfterSetSelectionRange",p=>{(v=>"nodechange"===v.type&&v.selectionChange)(p)||By(d)})}),i.on("remove",()=>{c.cancel()})})(n);const s=(i,c)=>{Ax(i)&&!0!==i.inline&&c(fe(i.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const i=t.focusedEditor;_1(Iy(n))&&s(n,ko),i!==n&&(i&&i.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:i}),n.focus(!0))}),n.on("focusout",()=>{td.setEditorTimeout(n,()=>{const i=t.focusedEditor;_1(Iy(n))&&i===n||s(n,cn),gb(n,Iy(n))||i!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),C1||(C1=i=>{const c=t.activeEditor;c&&Hd(i).each(d=>{d.ownerDocument===document&&(d===document.body||gb(c,d)||t.focusedEditor!==c||(c.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Qx.bind(document,"focusin",C1))},qT=(t,o)=>{t.focusedEditor===o.editor&&(t.focusedEditor=null),!t.activeEditor&&C1&&(Qx.unbind(document,"focusin",C1),C1=null)},B4=(t,o)=>{var n,s,i;(n=fe(t.getBody()),s=o,(i=s,i.collapsed?X.from(ac(i.startContainer,i.startOffset)).map(fe):X.none()).bind(i=>wc(i)?X.some(i):hl(n,i)?X.none():X.some(n))).bind(n=>dl(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},eC=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Bp=t=>{return t.inline?(o=>{const n=o.getBody();return n&&(s=fe(n),Ry(s)||(i=s,Kx(ds(i)).filter(c=>i.dom.contains(c.dom))).isSome());var s,i})(t):ne((o=t).iframeElement)&&Ry(fe(o.iframeElement));var o},tC=t=>t.editorManager.setActive(t),oC=(t,o,n,s,i)=>{const d=n?o.startOffset:o.endOffset;return X.from(n?o.startContainer:o.endContainer).map(fe).map(u=>s&&o.collapsed?u:bc(u,i(u,d)).getOr(u)).bind(u=>ka(u)?X.some(u):Wi(u).filter(ka)).map(u=>u.dom).getOr(t)},L4=(t,o,n=!1)=>oC(t,o,!0,n,(s,i)=>Math.min(vc(s),i)),nC=(t,o,n=!1)=>oC(t,o,!1,n,(s,i)=>i>0?i-1:i),rC=(t,o)=>{const n=t;for(;t&&tt(t)&&0===t.length;)t=o?t.nextSibling:t.previousSibling;return t||n},sC=(t,o)=>Gt(o,n=>{const s=t.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),GT=["img","br"],I4=t=>{return Pd(t).filter(n=>0!==n.trim().length||n.indexOf(os)>-1).isSome()||Ie(GT,Er(t))||Ui(n=t)&&"false"===Y(n,"contenteditable");var n},H4="[data-mce-autocompleter]",P4=t=>Ea(t,H4),XT={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Hy=(t,o,n)=>{const s=n?"lastChild":"firstChild",i=n?"prev":"next";if(t[s])return t[s];if(t!==o){let c=t[i];if(c)return c;for(let d=t.parent;d&&d!==o;d=d.parent)if(c=d[i],c)return c}},YT=t=>{var o;const n=null!==(o=t.value)&&void 0!==o?o:"";if(!oc(n))return!1;const s=t.parent;return!s||"span"===s.name&&!s.attr("style")||!/^[ ]+$/.test(n)},F4=t=>{const o="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||o};class dc{static create(o,n){const s=new dc(o,XT[o]||1);return n&&Ao(n,(i,c)=>{s.attr(c,i)}),s}constructor(o,n){this.name=o,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(o){const n=this;return o.parent&&o.remove(),n.insert(o,n),n.remove(),n}attr(o,n){const s=this;if(!uo(o))return ne(o)&&Ao(o,(c,d)=>{s.attr(d,c)}),s;const i=s.attributes;if(i){if(void 0!==n){if(null===n){if(o in i.map){delete i.map[o];let c=i.length;for(;c--;)if(i[c].name===o)return i.splice(c,1),s}return s}if(o in i.map){let c=i.length;for(;c--;)if(i[c].name===o){i[c].value=n;break}}else i.push({name:o,value:n});return i.map[o]=n,s}return i.map[o]}}clone(){const o=this,n=new dc(o.name,o.type),s=o.attributes;if(s){const i=[];i.map={};for(let c=0,d=s.length;c<d;c++){const u=s[c];"id"!==u.name&&(i[i.length]={name:u.name,value:u.value},i.map[u.name]=u.value)}n.attributes=i}return n.value=o.value,n}wrap(o){const n=this;return n.parent&&(n.parent.insert(o,n),o.append(n)),n}unwrap(){const o=this;for(let n=o.firstChild;n;){const s=n.next;o.insert(n,o,!0),n=s}o.remove()}remove(){const o=this,n=o.parent,s=o.next,i=o.prev;return n&&(n.firstChild===o?(n.firstChild=s,s&&(s.prev=null)):i&&(i.next=s),n.lastChild===o?(n.lastChild=i,i&&(i.next=null)):s&&(s.prev=i),o.parent=o.next=o.prev=null),o}append(o){const n=this;o.parent&&o.remove();const s=n.lastChild;return s?(s.next=o,o.prev=s,n.lastChild=o):n.lastChild=n.firstChild=o,o.parent=n,o}insert(o,n,s){o.parent&&o.remove();const i=n.parent||this;return s?(n===i.firstChild?i.firstChild=o:n.prev&&(n.prev.next=o),o.prev=n.prev,o.next=n,n.prev=o):(n===i.lastChild?i.lastChild=o:n.next&&(n.next.prev=o),o.next=n.next,o.prev=n,n.next=o),o.parent=i,o}getAll(o){const n=this,s=[];for(let i=n.firstChild;i;i=Hy(i,n))i.name===o&&s.push(i);return s}children(){const o=[];for(let n=this.firstChild;n;n=n.next)o.push(n);return o}empty(){const o=this;if(o.firstChild){const n=[];for(let i=o.firstChild;i;i=Hy(i,o))n.push(i);let s=n.length;for(;s--;){const i=n[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,n={},s){var i;const c=this;let d=c.firstChild;if(F4(c))return!1;if(d)do{if(1===d.type){if(d.attr("data-mce-bogus"))continue;if(o[d.name]||F4(d))return!1}if(8===d.type||3===d.type&&!YT(d)||3===d.type&&d.parent&&n[d.parent.name]&&oc(null!==(i=d.value)&&void 0!==i?i:"")||s&&s(d))return!1}while(d=Hy(d,c));return!0}walk(o){return Hy(this,null,o)}}const z4=(t,o,n=0)=>{const s=t.toLowerCase();if(-1!==s.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(s.substr(n))){const i=s.indexOf("[endif]",n);return s.indexOf(">",i)}if(o){const i=s.indexOf(">",n);return-1!==i?i:s.length}{const i=/--!?>/g;i.lastIndex=n;const c=i.exec(t);return c?c.index+c[0].length:s.length}},JT=(t,o,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,i=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,c=t.getVoidElements();let d=1,u=n;for(;0!==d;)for(s.lastIndex=u;;){const p=s.exec(o);if(null===p)return u;if("!"===p[1]){u=Wt(p[2],"--")?z4(o,!1,p.index+3):z4(o,!0,p.index+1);break}{i.lastIndex=s.lastIndex;const v=i.exec(o);if(jn(v)||v.index!==s.lastIndex)continue;"/"===p[1]?d-=1:Vo(c,p[2])||(d+=1),u=s.lastIndex+v[0].length;break}}return u},Ho=(t,o)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=t.schema;let i=((u,p)=>{const v=new RegExp(["\\s?("+u.join("|")+')="[^"]+"'].join("|"),"gi");return p.replace(v,"")})(t.getTempAttrs(),o);const c=s.getVoidElements();let d;for(;d=n.exec(i);){const u=n.lastIndex,p=d[0].length;let v;v=c[d[1]]?u:JT(s,i,u),i=i.substring(0,u-p)+i.substring(v),n.lastIndex=u-p}return qc(i)},V4=Ho,aC=t=>{const o=W(t,"[data-mce-bogus]");Ue(o,n=>{"all"===Y(n,"data-mce-bogus")?G(n):Ra(n)?(ei(n,ir("\ufeff")),G(n)):se(n)})},Z4=t=>{const o=W(t,"input");Ue(o,n=>{Le(n,"name")})},j4=It.makeMap,hb=t=>{const o=[],n=(t=t||{}).indent,s=j4(t.indent_before||""),i=j4(t.indent_after||""),c=Hi.getEncodeFunc(t.entity_encoding||"raw",t.entities),d="xhtml"!==t.element_format;return{start:(u,p,v)=>{if(n&&s[u]&&o.length>0){const w=o[o.length-1];w.length>0&&"\n"!==w&&o.push("\n")}if(o.push("<",u),p)for(let w=0,C=p.length;w<C;w++){const O=p[w];o.push(" ",O.name,'="',c(O.value,!0),'"')}if(o[o.length]=!v||d?">":" />",v&&n&&i[u]&&o.length>0){const w=o[o.length-1];w.length>0&&"\n"!==w&&o.push("\n")}},end:u=>{let p;o.push("</",u,">"),n&&i[u]&&o.length>0&&(p=o[o.length-1],p.length>0&&"\n"!==p&&o.push("\n"))},text:(u,p)=>{u.length>0&&(o[o.length]=p?u:c(u))},cdata:u=>{o.push("<![CDATA[",u,"]]>")},comment:u=>{o.push("\x3c!--",u,"--\x3e")},pi:(u,p)=>{p?o.push("<?",u," ",c(p),"?>"):o.push("<?",u,"?>"),n&&o.push("\n")},doctype:u=>{o.push("<!DOCTYPE",u,">",n?"\n":"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},vg=(t={},o=ku())=>{const n=hb(t);return t.validate=!("validate"in t)||t.validate,{serialize:s=>{const i=t.validate,c={3:u=>{var p;n.text(null!==(p=u.value)&&void 0!==p?p:"",u.raw)},8:u=>{var p;n.comment(null!==(p=u.value)&&void 0!==p?p:"")},7:u=>{n.pi(u.name,u.value)},10:u=>{var p;n.doctype(null!==(p=u.value)&&void 0!==p?p:"")},4:u=>{var p;n.cdata(null!==(p=u.value)&&void 0!==p?p:"")},11:u=>{let p=u;if(p=p.firstChild)do{d(p)}while(p=p.next)}};n.reset();const d=u=>{var p;const v=c[u.type];if(v)v(u);else{const w=u.name,C=w in o.getVoidElements();let O=u.attributes;if(i&&O&&O.length>1){const R=[];R.map={};const A=o.getElementRule(u.name);if(A){for(let H=0,M=A.attributesOrder.length;H<M;H++){const P=A.attributesOrder[H];if(P in O.map){const j=O.map[P];R.map[P]=j,R.push({name:P,value:j})}}for(let H=0,M=O.length;H<M;H++){const P=O[H].name;if(!(P in R.map)){const j=O.map[P];R.map[P]=j,R.push({name:P,value:j})}}O=R}}if(n.start(w,O,C),!C){let R=u.firstChild;if(R){"pre"!==w&&"textarea"!==w||3!==R.type||"\n"!==(null===(p=R.value)||void 0===p?void 0:p[0])||n.text("\n",!0);do{d(R)}while(R=R.next)}n.end(w)}}};return 1!==s.type||t.inner?3===s.type?c[3](s):c[11](s):d(s),n.getContent()}}},U4=new Set;Ue(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{U4.add(t)});const pn=["font","text-decoration","text-emphasis"],On=(t,o)=>Sr(t.parseStyle(t.getAttrib(o,"style"))),W4=(t,o,n)=>{const s=On(t,o),i=On(t,n),c=d=>{var u,p;const v=null!==(u=t.getStyle(o,d))&&void 0!==u?u:"",w=null!==(p=t.getStyle(n,d))&&void 0!==p?p:"";return Rn(v)&&Rn(w)&&v!==w};return To(s,d=>{const u=p=>To(p,v=>v===d);if(!u(i)&&u(pn)){const p=Yt(i,v=>To(pn,w=>Wt(v,w)));return To(p,c)}return c(d)})},$4=(t,o,n)=>X.from(n.container()).filter(tt).exists(s=>{const i=t?0:-1;return o(s.data.charAt(n.offset()+i))}),lC=mt($4,!0,Ee),cC=mt($4,!1,Ee),nn=t=>{const o=t.container();return tt(o)&&(0===o.data.length||sm(o.data)&&Jd.isBookmarkNode(o.parentNode))},eu=(t,o)=>n=>l1(t?0:-1,n).filter(o).isSome(),dC=t=>Vn(t)&&"block"===Nl(fe(t),"display"),uC=t=>{return Oo(t)&&!(ve(o=t)&&"all"===o.getAttribute("data-mce-bogus"));var o},QT=eu(!0,dC),eA=eu(!1,dC),S1=eu(!0,Yr),pb=eu(!1,Yr),Ln=eu(!0,oo),mC=eu(!1,oo),Zu=eu(!0,uC),yg=eu(!1,uC),gC=(t,o)=>{return i=Do,hl(s=o,n=t)?qm(n,c=>i(c)||yr(c,s)).slice(0,-1):[];var n,s,i},Bm=(t,o)=>[t].concat(gC(t,o)),Py=(t,o,n)=>p1(t,o,n,nn),hC=(t,o)=>or(Bm(fe(o.container()),t),Wr),pC=(t,o,n)=>Py(t,o.dom,n).forall(s=>hC(o,n).fold(()=>!yd(s,n,o.dom),i=>!yd(s,n,o.dom)&&hl(i,fe(s.container())))),q4=(t,o,n)=>hC(o,n).fold(()=>Py(t,o.dom,n).forall(s=>!yd(s,n,o.dom)),s=>Py(t,s.dom,n).isNone()),fC=mt(q4,!1),G4=mt(q4,!0),tA=mt(pC,!1),oA=mt(pC,!0),bC=t=>$l(t).exists(Ra),k1=(t,o,n)=>{const s=Yt(Bm(fe(n.container()),o),Wr),i=Pn(s).getOr(o);return Ut(t,i.dom,n).filter(bC)},vC=(t,o)=>$l(o).exists(Ra)||k1(!0,t,o).isSome(),yC=(t,o)=>{return(n=o,X.from(n.getNode(!0)).map(fe)).exists(Ra)||k1(!1,t,o).isSome();var n},nA=mt(k1,!1),rA=mt(k1,!0),wC=t=>rt.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),wh=(t,o)=>{const n=Yt(Bm(fe(o.container()),t),Wr);return Pn(n).getOr(t)},xC=(t,o)=>wC(o)?cC(o):cC(o)||Ni(wh(t,o).dom,o).exists(cC),CC=(t,o)=>wC(o)?lC(o):lC(o)||fi(wh(t,o).dom,o).exists(lC),_C=t=>$l(t).bind(o=>ma(o,ka)).exists(o=>{return n=Nl(o,"white-space"),Ie(["pre","pre-wrap"],n);var n}),K4=(t,o)=>n=>{return s=new F(n,t)[o](),ne(s)&&Oo(s)&&Lu(s);var s},SC=(t,o)=>{return!_C(o)&&(Ni((n=t).dom,s=o).isNone()||fi(n.dom,s).isNone()||fC(n,s)||G4(n,s)||yC(n,s)||vC(n,s)||xC(t,o)||CC(t,o));var n,s},E1=(t,o)=>!_C(o)&&(fC(t,o)||tA(t,o)||yC(t,o)||xC(t,o)||((n,s)=>{const i=Ni(n.dom,s).getOr(s),c=K4(n.dom,"prev");return s.isAtStart()&&(c(s.container())||c(i.container()))})(t,o)),Qi=(t,o)=>!_C(o)&&(G4(t,o)||oA(t,o)||vC(t,o)||CC(t,o)||((n,s)=>{const i=fi(n.dom,s).getOr(s),c=K4(n.dom,"next");return s.isAtEnd()&&(c(s.container())||c(i.container()))})(t,o)),kC=(t,o)=>E1(t,o)||Qi(t,(n=>{const s=n.container(),i=n.offset();return tt(s)&&i<s.data.length?rt(s,i+1):n})(o)),xh=(t,o)=>he(t.charAt(o)),Na=(t,o)=>Ee(t.charAt(o)),fb=(t,o,n)=>{const s=o.data,i=rt(o,0);return n||!xh(s,0)||kC(t,i)?!!(n&&Na(s,0)&&E1(t,i))&&(o.data=os+s.slice(1),!0):(o.data=" "+s.slice(1),!0)},Fi=(t,o,n)=>{const s=o.data,i=rt(o,s.length-1);return n||!xh(s,s.length-1)||kC(t,i)?!!(n&&Na(s,s.length-1)&&Qi(t,i))&&(o.data=s.slice(0,-1)+os,!0):(o.data=s.slice(0,-1)+" ",!0)},od=(t,o,n)=>{if(0===n)return;const s=fe(t),i=us(s,Wr).getOr(s),c=t.data.slice(o,o+n),d=o+n>=t.data.length&&Qi(i,rt(t,t.data.length)),u=0===o&&E1(i,rt(t,0));t.replaceData(o,n,_u(c,4,u,d))},Fy=(t,o)=>{const n=t.data.slice(o),s=n.length-Fn(n).length;od(t,o,s)},zy=(t,o)=>{const n=t.data.slice(0,o),s=n.length-Qn(n).length;od(t,o-s,s)},bb=(t,o,n,s=!0)=>{const i=Qn(t.data).length,c=s?t:o,d=s?o:t;return s?c.appendData(d.data):c.insertData(0,d.data),G(fe(d)),n&&Fy(c,i),c},EC=(t,o)=>((n,s)=>{const i=n.container(),c=n.offset();return!rt.isTextPosition(n)&&i===s.parentNode&&c>rt.before(s).offset()})(o,t)?rt(o.container(),o.offset()-1):o,OC=t=>{return kc(t.previousSibling)?X.some(tt(o=t.previousSibling)?rt(o,o.data.length):rt.after(o)):t.previousSibling?Il(t.previousSibling):X.none();var o},TC=t=>{return kc(t.nextSibling)?X.some(tt(o=t.nextSibling)?rt(o,0):rt.before(o)):t.nextSibling?dl(t.nextSibling):X.none();var o},NC=(t,o,n)=>{n.fold(()=>{t.focus()},s=>{t.selection.setRng(s.toRange(),o)})},tu=(t,o)=>o&&Vo(t.schema.getBlockElements(),Er(o)),sA=t=>{if(ea(t)){const o=bn('<br data-mce-bogus="1">');return K(t),Un(t,o),X.some(rt.before(o.dom))}return X.none()},wg=(t,o,n,s=!0)=>{const i=((t,o,n)=>{return(s=t,i=o,c=n,s?(d=i,TC(u=c).orThunk(()=>OC(u)).orThunk(()=>{return fi(p=d,rt.after(v=u)).orThunk(()=>Ni(p,rt.before(v)));var p,v})):((d,u)=>OC(u).orThunk(()=>TC(u)).orThunk(()=>{return p=d,X.from((v=u).previousSibling?v.previousSibling:v.parentNode).bind(w=>Ni(p,rt.before(w))).orThunk(()=>fi(p,rt.after(v)));var p,v}))(i,c)).map(mt(EC,n));var s,i,c,d,u})(o,t.getBody(),n.dom),c=us(n,mt(tu,t),(d=t.getBody(),p=>p.dom===d));var d;const u=((p,v,w)=>{const C=Ci(p).filter(Kn),O=jc(p).filter(Kn);return G(p),(R=C,A=O,H=v,M=(P,j,$)=>{const oe=P.dom,ie=j.dom,be=oe.data.length;return bb(oe,ie,w),$.container()===ie?rt(oe,be):$},R.isSome()&&A.isSome()&&H.isSome()?X.some(M(R.getOrDie(),A.getOrDie(),H.getOrDie())):X.none()).orThunk(()=>(w&&(C.each(P=>zy(P.dom,P.dom.length)),O.each(P=>Fy(P.dom,0))),v));var R,A,H,M})(n,i,(v=n,Vo(t.schema.getTextInlineElements(),Er(v))));var v;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):c.bind(sA).fold(()=>{s&&NC(t,o,u)},p=>{s&&NC(t,o,X.some(p))})},Cd=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ju=(t,o)=>li(fe(o),cl(t))&&!zd(t.schema,o)&&t.dom.isEditable(o),O1=t=>{var o,n;return"rtl"===ws.DOM.getStyle(t,"direction",!0)||(n=null!==(o=t.textContent)&&void 0!==o?o:"",Cd.test(n))},Ch=(t,o,n)=>{const s=(i=t,c=o,Yt(ws.DOM.getParents(n.container(),"*",c),i));var i,c;return X.from(s[s.length-1])},Hl=(t,o)=>{const n=o.container(),s=o.offset();return t?Dl(n)?tt(n.nextSibling)?rt(n.nextSibling,0):rt.after(n):ti(o)?rt(n,s+1):o:Dl(n)?tt(n.previousSibling)?rt(n.previousSibling,n.previousSibling.data.length):rt.before(n):xc(o)?rt(n,s-1):o},xs=mt(Hl,!0),T1=mt(Hl,!1),MC=(t,o)=>{const n=s=>s.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(o),t.off("beforeinput input",n)},Vy=t=>MC(t,"Delete"),RC=t=>zl(t)||Gs(t),A1=(t,o)=>{return hl(t,o)?ma(o,RC,(n=t,s=>Ts(Wi(s),n,yr))):X.none();var n},vb=(t,o=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!o})},Zy=(t,o,n)=>As(dl(n),Il(n),(s,i)=>{const c=Hl(!0,s),d=Hl(!1,i),u=Hl(!1,o);return t?fi(n,u).exists(p=>p.isEqual(d)&&o.isEqual(c)):Ni(n,u).exists(p=>p.isEqual(c)&&o.isEqual(d))}).getOr(!0),yb=t=>{var o;return(8===fc(o=t)||"#comment"===Er(o)?Ci(t):_i(t)).bind(yb).orThunk(()=>X.some(t))},jy=(t,o,n,s=!0)=>{var i;o.deleteContents();const c=yb(n).getOr(n),d=fe(null!==(i=t.dom.getParent(c.dom,t.dom.isBlock))&&void 0!==i?i:n.dom);if(d.dom===t.getBody()?vb(t,s):ea(d)&&($c(d),s&&t.selection.setCursorLocation(d.dom,0)),!yr(n,d)){const p=Ts(Wi(d),n)?[]:Wi(u=d).map(ss).map(v=>Yt(v,w=>!yr(u,w))).getOr([]);Ue(p.concat(ss(n)),v=>{yr(v,d)||hl(v,d)||!ea(v)||G(v)})}var u},Uy=t=>W(t,"td,th"),Wy=(t,o)=>({start:t,end:o}),N1=Ta([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),wb=(t,o)=>$s(fe(t),"td,th",o),DC=t=>!yr(t.start,t.end),Lp=(t,o)=>gr(t.start,o).bind(n=>gr(t.end,o).bind(s=>Br(yr(n,s),n))),$y=t=>o=>Lp(o,t).map(n=>({rng:o,table:n,cells:Uy(n)})),qy=(t,o,n,s)=>{if(n.collapsed||!t.forall(DC))return X.none();if(o.isSameTable){const i=t.bind($y(s));return X.some({start:i,end:i})}{const i=wb(n.startContainer,s),c=wb(n.endContainer,s),d=i.bind((p=s,v=>gr(v,p).bind(w=>Gn(Uy(w)).map(C=>Wy(v,C))))).bind($y(s)),u=c.bind((p=>v=>gr(v,p).bind(w=>Pn(Uy(w)).map(C=>Wy(C,v))))(s)).bind($y(s));return X.some({start:d,end:u})}var p},X4=(t,o)=>Ps(t,n=>yr(n,o)),BC=t=>As(X4(t.cells,t.rng.start),X4(t.cells,t.rng.end),(o,n)=>t.cells.slice(o,n+1)),LC=(t,o)=>{const{startTable:n,endTable:s}=o,i=t.cloneRange();return n.each(c=>i.setStartAfter(c.dom)),s.each(c=>i.setEndBefore(c.dom)),i},IC=t=>Ue(t,o=>{Le(o,"contenteditable"),$c(o)}),M1=(t,o,n,s)=>{const i=n.cloneRange();s?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),Gy(t,i,o,!1).each(c=>c())},HC=t=>{const o=jo(t),n=fe(t.selection.getNode());Ur(n.dom)&&ea(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),o.length>1&&To(o,s=>yr(s,n))&&vr(n,"data-mce-selected","1")},PC=(t,o,n)=>X.some(()=>{const s=t.selection.getRng(),i=n.bind(({rng:c,isStartInTable:d})=>{const u=X.from((v=t).dom.getParent(d?c.endContainer:c.startContainer,v.dom.isBlock)).map(fe);var v;c.deleteContents(),((v,w,C)=>{C.each(O=>{w?G(O):($c(O),v.selection.setCursorLocation(O.dom,0))})})(t,d,u.filter(ea));const p=d?o[0]:o[o.length-1];return M1(t,p,s,d),ea(p)?X.none():X.some(d?o.slice(1):o.slice(0,-1))}).getOr(o);IC(i),HC(t)}),J4=(t,o,n,s)=>X.some(()=>{const i=t.selection.getRng(),c=o[0],d=n[n.length-1];M1(t,c,i,!0),M1(t,d,i,!1);const u=ea(c)?o:o.slice(1),p=ea(d)?n:n.slice(0,-1);IC(u.concat(p)),s.deleteContents(),HC(t)}),Gy=(t,o,n,s=!0)=>X.some(()=>{jy(t,o,n,s)}),Q4=(t,o)=>X.some(()=>wg(t,!1,o)),FC=(t,o)=>or(Bm(o,t),Fd),Ky=(t,o)=>or(Bm(o,t),kl("caption")),xb=(t,o)=>X.some(()=>{$c(o),t.selection.setCursorLocation(o.dom,0)}),zC=(t,o)=>t?Ln(o):mC(o),Xy=(t,o)=>{const n=fe(t.selection.getStart(!0)),s=jo(t);return t.selection.isCollapsed()&&0===s.length?((t,o,n)=>{const s=fe(t.getBody());return Ky(s,n).fold(()=>((i,c,d,u)=>{const p=rt.fromRangeStart(i.selection.getRng());return FC(d,u).bind(v=>{return ea(v)?xb(i,v):(C=d,R=v,A=p,xa(c,i.getBody(),A).bind(H=>FC(C,fe(H.getNode())).bind(M=>yr(M,R)?X.none():X.some(yo))));var C,R,A})})(t,o,s,n).orThunk(()=>Br(((i,c)=>{const d=rt.fromRangeStart(i.selection.getRng());return zC(c,d)||Ut(c,i.getBody(),d).exists(u=>zC(c,u))})(t,o),yo)),i=>((c,d,u,p)=>{const v=rt.fromRangeStart(c.selection.getRng());return ea(p)?xb(c,p):(C=u,R=p,A=v,xa(O=d,(w=c).getBody(),A).fold(()=>X.some(yo),H=>{return P=O,j=A,$=H,dl((M=R).dom).bind(oe=>Il(M.dom).map(ie=>P?j.isEqual(oe)&&$.isEqual(ie):j.isEqual(ie)&&$.isEqual(oe))).getOr(!0)?((M,P)=>xb(M,P))(w,R):((M,P,j)=>Ky(M,fe(j.getNode())).fold(()=>X.some(yo),$=>Br(!yr($,P),yo)))(C,R,H);var M,P,j,$}));var w,C,O,R,A})(t,o,s,i))})(t,o,n):((i,c,d)=>{const u=fe(i.getBody()),p=i.selection.getRng();return 0!==d.length?PC(i,d,X.none()):(v=i,C=p,Ky(w=u,c).fold(()=>{return R=v,((t,o)=>{const n=(c=t,d=>yr(c,d)),s=((c,d)=>{const u=wb(c.startContainer,d),p=wb(c.endContainer,d);return As(u,p,Wy)})(o,n),i=((c,d)=>{const u=R=>gr(fe(R),d),p=u(c.startContainer),v=u(c.endContainer),w=p.isSome(),C=v.isSome(),O=As(p,v,yr).getOr(!1);return{startTable:p,endTable:v,isStartInTable:w,isEndInTable:C,isSameTable:O,isMultiTable:!O&&w&&C}})(o,n);var c;return((c,d,u)=>c.exists(p=>{return w=u,!DC(v=p)&&Lp(v,w).exists(C=>{const O=C.dom.rows;return 1===O.length&&1===O[0].cells.length})&&yn(p.start,d);var v,w}))(s,o,n)?s.map(c=>N1.singleCellTable(o,c.start)):i.isMultiTable?((c,d,u,p)=>qy(c,d,u,p).bind(({start:v,end:w})=>{const C=v.bind(BC).getOr([]),O=w.bind(BC).getOr([]);if(C.length>0&&O.length>0){const R=LC(u,d);return X.some(N1.multiTable(C,O,R))}return X.none()}))(s,i,o,n):((c,d,u,p)=>qy(c,d,u,p).bind(({start:v,end:w})=>v.or(w)).bind(v=>{const{isSameTable:w}=d,C=BC(v).getOr([]);if(w&&v.cells.length===C.length)return X.some(N1.fullTable(v.table));if(C.length>0){if(w)return X.some(N1.partialTable(C,X.none()));{const O=LC(u,d);return X.some(N1.partialTable(C,X.some({...d,rng:O})))}}return X.none()}))(s,i,o,n)})(w,C).bind(M=>M.fold(mt(Gy,R),mt(Q4,R),mt(PC,R),mt(J4,R)));var R},R=>xb(v,R)));var v,w,C})(t,n,s)},_h=(t,o)=>{let n=o;for(;n&&n!==t;){if(xr(n)||Oo(n))return n;n=n.parentNode}return null},t3=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],o3=It.each,Yy=t=>{const o=t.dom,n=new Set(t.serializer.getTempAttrs()),s=i=>To(t3,c=>Wt(i,c))||n.has(i);return{compare:(i,c)=>{if(i.nodeName!==c.nodeName||i.nodeType!==c.nodeType)return!1;const d=p=>{const v={};return o3(o.getAttribs(p),w=>{const C=w.nodeName.toLowerCase();"style"===C||s(C)||(v[C]=o.getAttrib(p,C))}),v},u=(p,v)=>{for(const w in p)if(Vo(p,w)){const C=v[w];if(Ft(C)||p[w]!==C)return!1;delete v[w]}for(const w in v)if(Vo(v,w))return!1;return!0};return!(ve(i)&&ve(c)&&(!u(d(i),d(c))||!u(o.parseStyle(o.getAttrib(i,"style")),o.parseStyle(o.getAttrib(c,"style"))))||ye(i)||ye(c))},isAttributeInternal:s}},Jy=(t,o,n,s)=>{const i=n.name;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.name===i){const p=s.nodes[i];p?p.nodes.push(n):s.nodes[i]={filter:u,nodes:[n]}}}if(n.attributes)for(let c=0,d=o.length;c<d;c++){const u=o[c],p=u.name;if(p in n.attributes.map){const v=s.attributes[p];v?v.nodes.push(n):s.attributes[p]={filter:u,nodes:[n]}}}},Cb=(t,o)=>{const n=(s,i)=>{Ao(s,c=>{const d=nr(c.nodes);Ue(c.filter.callbacks,u=>{for(let p=d.length-1;p>=0;p--){const v=d[p];(i?void 0!==v.attr(c.filter.name):v.name===c.filter.name)&&!eo(v.parent)||d.splice(p,1)}d.length>0&&u(d,c.filter.name,o)})})};n(t.nodes,!1),n(t.attributes,!0)},VC=(t,o,n,s={})=>{const i=((c,d,u)=>{const p={nodes:{},attributes:{}};return u.firstChild&&((v,w)=>{let C=v;for(;C=C.walk();)Jy(c,d,C,p)})(u),p})(t,o,n);Cb(i,s)},Qy=(t,o,n)=>{if(t.insert&&o(n)){const s=new dc("br",1);s.attr("data-mce-bogus","1"),n.empty().append(s)}else n.empty().append(new dc("#text",3)).value=os},_b=(t,o)=>{const n=t?.firstChild;return ne(n)&&n===t.lastChild&&n.name===o},Ip=(t,o,n,s)=>s.isEmpty(o,n,i=>!0===t.getElementRule(i.name)?.paddEmpty),Sb=t=>{let o;for(let n=t;n;n=n.parent){const s=n.attr("contenteditable");if("false"===s)break;"true"===s&&(o=n)}return X.from(o)},kb=(t,o,n=t.parent)=>{if(o.getSpecialElements()[t.name])t.empty().remove();else{const s=t.children();for(const i of s)n&&!o.isValidChild(n.name,i.name)&&kb(i,o,n);t.unwrap()}},e2=(t,o,n,s=yo)=>{const i=o.getTextBlockElements(),c=o.getNonEmptyElements(),d=o.getWhitespaceElements(),u=It.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=new Set,v=w=>w!==n&&!u[w.name];for(let w=0;w<t.length;w++){const C=t[w];let O,R,A;if(!C.parent||p.has(C))continue;if(i[C.name]&&"li"===C.parent.name){let M=C.next;for(;M&&i[M.name];)M.name="li",p.add(M),C.parent.insert(M,C.parent),M=M.next;C.unwrap();continue}const H=[C];for(O=C.parent;O&&!o.isValidChild(O.name,C.name)&&v(O);O=O.parent)H.push(O);if(O&&H.length>1)if(o.isValidChild(O.name,C.name)){H.reverse(),R=H[0].clone(),s(R);let M=R;for(let P=0;P<H.length-1;P++){o.isValidChild(M.name,H[P].name)&&P>0?(A=H[P].clone(),s(A),M.append(A)):A=M;for(let j=H[P].firstChild;j&&j!==H[P+1];){const $=j.next;A.append(j),j=$}M=A}Ip(o,c,d,R)?O.insert(C,H[0],!0):(O.insert(R,H[0],!0),O.insert(C,R)),O=H[0],(Ip(o,c,d,O)||_b(O,"br"))&&O.empty().remove()}else kb(C,o);else if(C.parent){if("li"===C.name){let M=C.prev;if(M&&("ul"===M.name||"ol"===M.name)){M.append(C);continue}if(M=C.next,M&&("ul"===M.name||"ol"===M.name)&&M.firstChild){M.insert(C,M.firstChild,!0);continue}const P=new dc("ul",1);s(P),C.wrap(P);continue}if(o.isValidChild(C.parent.name,"div")&&o.isValidChild("div",C.name)){const M=new dc("div",1);s(M),C.wrap(M)}else kb(C,o)}}},Hp=(t,o,n=o.parent)=>!(!n||!t.children[o.name]||t.isValidChild(n.name,o.name))||!(!n||"a"!==o.name||!((s,i)=>{let c=s;for(;c;){if("a"===c.name)return!0;c=c.parent}return!1})(n)),Eb=t=>t.collapsed?t:(o=>{const n=rt.fromRangeStart(o),s=rt.fromRangeEnd(o),i=o.commonAncestorContainer;return Ut(!1,i,s).map(c=>!yd(n,s,i)&&yd(n,c,i)?((d,u,p,v)=>{const w=document.createRange();return w.setStart(d,u),w.setEnd(p,v),w})(n.container(),n.offset(),c.container(),c.offset()):o).getOr(o)})(t),Lm=(t,o)=>{const n=t.getParent(o,t.isBlock);return n&&"LI"===n.nodeName?n:null},jC=(t,o)=>{const n=rt.after(t),s=wd(o).prev(n);return s?s.toRange():null},n3=["pre"],t2=Ur,UC=(t,o,n)=>{var s,i;const c=t.selection,d=t.dom,u=t.parser,p=n.merge,v=vg({validate:!0},t.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,w);let C=c.getRng();const O=C.startContainer,R=t.getBody();var $,oe;O===R&&c.isCollapsed()&&d.isBlock(R.firstChild)&&($=t,ne(oe=R.firstChild)&&!$.schema.getVoidElements()[oe.nodeName])&&d.isEmpty(R.firstChild)&&(C=d.createRng(),C.setStart(R.firstChild,0),C.setEnd(R.firstChild,0),c.setRng(C)),c.isCollapsed()||($=>{const oe=$.dom,ie=Eb($.selection.getRng());$.selection.setRng(ie);const be=oe.getParent(ie.startContainer,t2);var Se,ze,at;Se=oe,ze=ie,ne(at=be)&&at===Se.getParent(ze.endContainer,t2)&&yn(fe(at),ze)?Gy($,ie,fe(be)):ie.startContainer===ie.endContainer&&ie.endOffset-ie.startOffset==1&&tt(ie.startContainer.childNodes[ie.startOffset])?ie.deleteContents():$.getDoc().execCommand("Delete",!1)})(t);const A=c.getNode(),H={context:A.nodeName.toLowerCase(),data:n.data,insert:!0},M=u.parse(o,H);if(!0===n.paste&&((t,o)=>{let n=o.firstChild,s=o.lastChild;return n&&"meta"===n.name&&(n=n.next),s&&"mce_marker"===s.attr("id")&&(s=s.prev),((i,c)=>{const d=i.getNonEmptyElements();return ne(c)&&(c.isEmpty(d)||(p=c,i.getBlockElements()[p.name]&&ne((v=p).firstChild)&&v.firstChild===v.lastChild&&(v=>"br"===v.name||v.value===os)(p.firstChild)));var p,v})(t,s)&&(s=s?.prev),!(!n||n!==s||"ul"!==n.name&&"ol"!==n.name)})(t.schema,M)&&(($,oe)=>!!Lm($,oe))(d,A))return C=((t,o,n,s)=>{const i=((C,O,R)=>{const A=O.serialize(R);return(H=>{var M,P;const j=H.firstChild,$=H.lastChild;return j&&"META"===j.nodeName&&(null===(M=j.parentNode)||void 0===M||M.removeChild(j)),$&&"mce_marker"===$.id&&(null===(P=$.parentNode)||void 0===P||P.removeChild($)),H})(C.createFragment(A))})(o,t,s),c=Lm(o,n.startContainer),d=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ne(null==(o=n)?void 0:o.firstChild)&&o.firstChild===o.lastChild&&((s=o.firstChild).data===os||je(s)))?t.slice(0,-1):t;var s,o,n})(Yt(null!==(p=i.firstChild?.childNodes)&&void 0!==p?p:[],C=>"LI"===C.nodeName));var p;const v=o.getRoot(),w=C=>{const O=rt.fromRangeStart(n),R=wd(o.getRoot()),H=(1===C?R.prev(O):R.next(O))?.getNode();return!H||Lm(o,H)!==c};return c?w(1)?((C,O,R)=>{const A=C.parentNode;return A&&It.each(O,H=>{A.insertBefore(H,C)}),((H,M)=>{const P=rt.before(H),j=wd(M).next(P);return j?j.toRange():null})(C,R)})(c,d,v):w(2)?(C=c,R=v,o.insertAfter((O=d).reverse(),C),jC(O[0],R)):((C,O,R,A)=>{const H=((P,j)=>{const $=j.cloneRange(),oe=j.cloneRange();return $.setStartBefore(P),oe.setEndAfter(P),[$.cloneContents(),oe.cloneContents()]})(C,A),M=C.parentNode;return M&&(M.insertBefore(H[0],C),It.each(O,P=>{M.insertBefore(P,C)}),M.insertBefore(H[1],C),M.removeChild(C)),jC(O[O.length-1],R)})(c,d,v,n):null;var C,O,R})(v,d,c.getRng(),M),C&&c.setRng(C),o;!0===n.paste&&(($,oe,ie,be)=>{var Se;const ze=oe.firstChild,at=oe.lastChild,Je=ze===("bookmark"===at.attr("data-mce-type")?at.prev:at),Ae=Ie(n3,ze.name);if(Je&&Ae){const Pe="false"!==ze.attr("contenteditable"),Me=(null===(Se=$.getParent(ie,$.isBlock))||void 0===Se?void 0:Se.nodeName.toLowerCase())===ze.name,qe=X.from(_h(be,ie)).forall(xr);return Pe&&Me&&qe}return!1})(d,M,A,t.getBody())&&(null===(s=M.firstChild)||void 0===s||s.unwrap()),($=>{let oe=$;for(;oe=oe.walk();)1===oe.type&&oe.attr("data-mce-fragment","1")})(M);let P=M.lastChild;if(P&&"mce_marker"===P.attr("id")){const $=P;for(P=P.prev;P;P=P.walk(!0))if(3===P.type||!d.isBlock(P.name)){P.parent&&t.schema.isValidChild(P.parent.name,"span")&&P.parent.insert($,P,"br"===P.name);break}}if(t._selectionOverrides.showBlockCaretContainer(A),H.invalid){t.selection.setContent(w);let $,oe=c.getNode();const ie=t.getBody();for(wr(oe)?oe=$=ie:$=oe;$&&$!==ie;)oe=$,$=$.parentNode;o=oe===ie?ie.innerHTML:d.getOuterHTML(oe);const be=u.parse(o),Se=(Pe=>{for(let Me=Pe;Me;Me=Me.walk())if("mce_marker"===Me.attr("id"))return X.some(Me);return X.none()})(be),ze=Se.bind(Sb).getOr(be);Se.each(Pe=>Pe.replace(M));const at=M.children(),Je=null!==(i=M.parent)&&void 0!==i?i:be;M.unwrap();const Ae=Yt(at,Pe=>Hp(t.schema,Pe,Je));e2(Ae,t.schema,ze),VC(u.getNodeFilters(),u.getAttributeFilters(),be),o=v.serialize(be),oe===ie?d.setHTML(ie,o):d.setOuterHTML(oe,o)}else o=v.serialize(M),(($,oe,ie)=>{var be;if("all"===ie.getAttribute("data-mce-bogus"))null===(be=ie.parentNode)||void 0===be||be.insertBefore($.dom.createFragment(oe),ie);else{const Se=ie.firstChild,ze=ie.lastChild;!Se||Se===ze&&"BR"===Se.nodeName?$.dom.setHTML(ie,oe):$.selection.setContent(oe,{no_events:!0})}})(t,o,A);var j;return(($,oe)=>{const ie=$.schema.getTextInlineElements(),be=$.dom;if(oe){const Se=$.getBody(),ze=Yy($);It.each(be.select("*[data-mce-fragment]"),at=>{if(ne(ie[at.nodeName.toLowerCase()])&&qr(On(be,at),Pe=>!U4.has(Pe)))for(let Je=at.parentElement;ne(Je)&&Je!==Se&&!W4(be,at,Je);Je=Je.parentElement)if(ze.compare(Je,at)){be.remove(at,!0);break}})}})(t,p),(($,oe)=>{var ie,be,Se;let ze;const at=$.dom,Je=$.selection;if(!oe)return;Je.scrollIntoView(oe);const Ae=_h($.getBody(),oe);if(Ae&&"false"===at.getContentEditable(Ae))return at.remove(oe),void Je.select(Ae);let Pe=at.createRng();const Me=oe.previousSibling;if(tt(Me)){Pe.setStart(Me,null!==(be=null===(ie=Me.nodeValue)||void 0===ie?void 0:ie.length)&&void 0!==be?be:0);const Qt=oe.nextSibling;tt(Qt)&&(Me.appendData(Qt.data),null===(Se=Qt.parentNode)||void 0===Se||Se.removeChild(Qt))}else Pe.setStartBefore(oe),Pe.setEndBefore(oe);const qe=at.getParent(oe,at.isBlock);at.remove(oe),qe&&at.isEmpty(qe)&&(K(fe(qe)),Pe.setStart(qe,0),Pe.setEnd(qe,0),t2(qe)||qe.getAttribute("data-mce-fragment")||!(ze=(Qt=>{let Ht=rt.fromRangeStart(Qt);return Ht=wd($.getBody()).next(Ht),Ht?.toRange()})(Pe))?at.add(qe,at.create("br",{"data-mce-bogus":"1"})):(Pe=ze,at.remove(qe))),Je.setRng(Pe)})(t,d.get("mce_marker")),j=t.getBody(),It.each(j.getElementsByTagName("*"),$=>{$.removeAttribute("data-mce-fragment")}),(($,oe)=>{X.from($.getParent(oe,"td,th")).map(fe).each(hd)})(d,c.getStart()),($=>{Ue(nr($.getBody().querySelectorAll("details")),oe=>{const ie=Yt(nr(oe.children),be=>"SUMMARY"===be.nodeName);ie.length>1&&Ue(ie.slice(1),be=>{const Se=fe(be);cn(Se,"mce-accordion-summary"),ja(Se,"p")})})})(t),(($,oe,ie)=>{const be=qm(fe(ie),Se=>yr(Se,fe(oe)));Zi(be,be.length-2).filter(ka).fold(()=>nc($,oe),Se=>nc($,Se.dom))})(t.schema,t.getBody(),c.getStart()),o},nd=t=>t instanceof dc,Tb=(t,o,n)=>{var s;t.dom.setHTML(t.getBody(),o),!0!==n&&Bp(s=t)&&dl(s.getBody()).each(i=>{const c=i.getNode(),d=oo(c)?dl(c).getOr(i):i;s.selection.setRng(d.toRange())})},WC=t=>it(t)?t:Do,$C=(t,o,n)=>{const s=o(t),i=WC(n);return s.orThunk(()=>i(t)?X.none():((c,d,u)=>{let p=c.dom;const v=WC(u);for(;p.parentNode;){p=p.parentNode;const w=fe(p),C=d(w);if(C.isSome())return C;if(v(w))break}return X.none()})(t,o,i))},n2=lc,qC=(t,o,n)=>{const s=t.formatter.get(n);if(s)for(let i=0;i<s.length;i++){const c=s[i];if(Qc(c)&&!1===c.inherit&&t.dom.is(o,c.selector))return!0}return!1},Ab=(t,o,n,s,i)=>{const c=t.dom.getRoot();if(o===c)return!1;const d=t.dom.getParent(o,u=>!!qC(t,u,n)||u.parentNode===c||!!Uu(t,u,n,s,!0));return!!Uu(t,d,n,s,i)},Nb=(t,o,n)=>!(!bi(n)||!n2(o,n.inline))||!(!Mm(n)||!n2(o,n.block))||!!Qc(n)&&ve(o)&&t.is(o,n.selector),R1=(t,o,n,s,i,c)=>{const d=n[s],u="attributes"===s;if(it(n.onmatch))return n.onmatch(o,n,s);if(d)if(Bi(d)){for(let p=0;p<d.length;p++)if(u?t.getAttrib(o,d[p]):fg(t,o,d[p]))return!0}else for(const p in d)if(Vo(d,p)){const v=u?t.getAttrib(o,p):fg(t,o,p),w=fh(d[p],c),C=eo(v)||fn(v);if(C&&eo(w))continue;if(i&&C&&!n.exact||(!i||n.exact)&&!n2(v,ul(w,p)))return!1}return!0},Uu=(t,o,n,s,i)=>{const c=t.formatter.get(n),d=t.dom;if(c&&ve(o))for(let u=0;u<c.length;u++){const p=c[u];if(Nb(t.dom,o,p)&&R1(d,o,p,"attributes",i,s)&&R1(d,o,p,"styles",i,s)){const v=p.classes;if(v)for(let w=0;w<v.length;w++)if(!t.dom.hasClass(o,fh(v[w],s)))return;return p}}},r2=(t,o,n,s,i)=>{if(s)return Ab(t,s,o,n,i);if(s=t.selection.getNode(),Ab(t,s,o,n,i))return!0;const c=t.selection.getStart();return!(c===s||!Ab(t,c,o,n,i))},r3=t=>(o=>{const n=[];let s=o;for(;s;){if(tt(s)&&"\ufeff"!==s.data||s.childNodes.length>1)return[];ve(s)&&n.push(s),s=s.firstChild}return n})(t).length>0,s2=t=>{if(t){const o=new F(t,t);for(let n=o.current();n;n=o.next())if(tt(n))return n}return null},xg=t=>{const o=vn("span");return wa(o,{id:hg,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Un(o,ir("\ufeff")),o},GC=(t,o,n=!0)=>{const s=t.dom,i=t.selection;if(r3(o))wg(t,!1,fe(o),n);else{const c=i.getRng(),d=s.getParent(o,s.isBlock),u=c.startContainer,p=c.startOffset,v=c.endContainer,w=c.endOffset,C=(O=>{const R=s2(O);return R&&"\ufeff"===R.data.charAt(0)&&R.deleteData(0,1),R})(o);s.remove(o,!0),u===C&&p>0&&c.setStart(C,p-1),v===C&&w>0&&c.setEnd(C,w-1),d&&s.isEmpty(d)&&$c(fe(d)),i.setRng(c)}},KC=(t,o,n=!0)=>{const s=t.dom,i=t.selection;if(o)GC(t,o,n);else if(!(o=Nm(t.getBody(),i.getStart())))for(;o=s.get(hg);)GC(t,o,n)},Mb=(t,o)=>(t.appendChild(o),o),XC=(t,o)=>{var n;const s=ts(t,(c,d)=>Mb(c,d.cloneNode(!1)),o),i=null!==(n=s.ownerDocument)&&void 0!==n?n:document;return Mb(s,i.createTextNode("\ufeff"))},a3=t=>{const o=xg(!1),n=XC(t,o.dom);return{caretContainer:o,caretPosition:rt(n,0)}},YC=(t,o)=>{const{caretContainer:n,caretPosition:s}=a3(o);return ei(fe(t),n),G(fe(t)),s},Sh=(t,o)=>{const n=t.schema.getTextInlineElements();return Vo(n,Er(o))&&!Dc(o.dom)&&!zo(o.dom)},JC=t=>Dc(t.dom)&&r3(t.dom),D1={},QC=Mt(["pre"]);((t,o)=>{D1[t]||(D1[t]=[]),D1[t].push(n=>{if(!n.selection.getRng().collapsed){const s=n.selection.getSelectedBlocks(),i=Yt(Yt(s,QC),(c=s,d=>{const u=d.previousSibling;return QC(u)&&Ie(c,u)}));Ue(i,c=>{((d,u)=>{const p=fe(u),v=El(p).dom;G(p),V(fe(d),[vn("br",v),vn("br",v),...ss(p)])})(c.previousSibling,c)})}var c})})("pre");const Rb=["fontWeight","fontStyle","color","fontSize","fontFamily"],e_=(t,o)=>{const n=t.get(o);return lo(n)?or(n,s=>{return bi(s)&&"span"===s.inline&&ut((i=s).styles)&&To(Sr(i.styles),c=>Ie(Rb,c));var i}):X.none()},t_=(t,o)=>Ni(o,rt.fromRangeStart(t)).isNone(),i3=(t,o)=>!1===fi(o,rt.fromRangeEnd(t)).exists(n=>!je(n.getNode())||fi(o,n).isSome()),Db=t=>o=>pl(o)&&t.isEditable(o),o_=t=>Yt(t.getSelectedBlocks(),Db(t.dom)),Bb=It.each,a2=t=>ve(t)&&!ye(t)&&!Dc(t)&&!zo(t),i2=(t,o)=>{for(let n=t;n;n=n[o]){if(tt(n)&&Rn(n.data))return t;if(ve(n)&&!ye(n))return n}return t},n_=(t,o,n)=>{const s=Yy(t),i=ve(o)&&$a(o),c=ve(n)&&$a(n);if(i&&c){const d=i2(o,"previousSibling"),u=i2(n,"nextSibling");if(s.compare(d,u)){for(let p=d.nextSibling;p&&p!==u;){const v=p;p=p.nextSibling,d.appendChild(v)}return t.dom.remove(u),It.each(It.grep(u.childNodes),p=>{d.appendChild(p)}),d}}return n},Lb=(t,o,n,s)=>{var i;if(s&&!1!==o.merge_siblings){const c=null!==(i=n_(t,Ap(s),s))&&void 0!==i?i:s;n_(t,c,Ap(c,!0))}},Wu=(t,o,n)=>{Bb(t.childNodes,s=>{a2(s)&&(o(s)&&n(s),s.hasChildNodes()&&Wu(s,o,n))})},l3=(t,o)=>n=>!(!n||!fg(t,n,o)),l2=(t,o,n)=>s=>{var i,c;t.setStyle(s,o,n),""===s.getAttribute("style")&&s.removeAttribute("style"),i=t,"SPAN"===(c=s).nodeName&&0===i.getAttribs(c).length&&i.remove(c,!0)},Ys=Ta([{keep:[]},{rename:["name"]},{removed:[]}]),r_=/^(src|href|style)$/,Ib=It.each,ou=lc,s_=(t,o,n)=>t.isChildOf(o,n)&&o!==n&&!t.isBlock(n),a_=(t,o,n)=>{let s=o[n?"startContainer":"endContainer"],i=o[n?"startOffset":"endOffset"];if(ve(s)){const c=s.childNodes.length-1;!n&&i&&i--,s=s.childNodes[i>c?c:i]}return tt(s)&&n&&i>=s.data.length&&(s=new F(s,t.getBody()).next()||s),tt(s)&&!n&&0===i&&(s=new F(s,t.getBody()).prev()||s),s},B1=(t,o)=>{const n=o?"firstChild":"lastChild",s=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&s?"TR"===t.nodeName&&s[n]||s:t},i_=(t,o,n,s)=>{var i;const c=t.create(n,s);return null===(i=o.parentNode)||void 0===i||i.insertBefore(c,o),c.appendChild(o),c},c3=(t,o,n,s,i)=>{const c=fe(o),d=fe(t.create(s,i)),u=n?Jl(c):Uc(c);return V(d,u),n?(ei(c,d),Ml(d,c)):(qi(c,d),Un(d,c)),d.dom},Fp=(t,o,n)=>{const s=o.parentNode;let i;const c=t.dom,d=yl(t);var u;Mm(n)&&s===c.getRoot()&&(n.list_block&&ou(o,n.list_block)||Ue(nr(o.childNodes),u=>{xd(t,d,u.nodeName.toLowerCase())?i?i.appendChild(u):(i=i_(c,u,d),c.setAttribs(i,Ki(t))):i=null})),Qc(u=n)&&bi(u)&&Ts(Nn(u,"mixed"),!0)&&!ou(n.inline,o)||c.remove(o,!0)},d3=(t,o,n)=>Oe(t)?{name:o,value:null}:{name:t,value:fh(o,n)},kh=(t,o)=>{""===t.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},u3=(t,o,n,s,i)=>{let c=!1;Ib(n.styles,(d,u)=>{const{name:p,value:v}=d3(u,d,s),w=ul(v,p);(n.remove_similar||jn(v)||!ve(i)||ou(fg(t,i,p),w))&&t.setStyle(o,p,""),c=!0}),c&&kh(t,o)},Cg=(t,o,n,s,i)=>{const c=t.dom,d=Yy(t),u=t.schema;if(bi(o)&&$g(u,o.inline)&&zd(u,s)&&s.parentElement===t.getBody())return Fp(t,s,o),Ys.removed();if(!o.ceFalseOverride&&s&&"false"===c.getContentEditableParent(s)||s&&!Nb(c,s,o)&&(!o.links||"A"!==s.nodeName))return Ys.keep();const p=s,v=o.preserve_attributes;if(bi(o)&&"all"===o.remove&&lo(v)){const w=Yt(c.getAttribs(p),C=>Ie(v,C.name.toLowerCase()));if(c.removeAllAttribs(p),Ue(w,C=>c.setAttrib(p,C.name,C.value)),w.length>0)return Ys.rename("span")}if("all"!==o.remove){u3(c,p,o,n,i),Ib(o.attributes,(C,O)=>{const{name:R,value:A}=d3(O,C,n);if(o.remove_similar||jn(A)||!ve(i)||ou(c.getAttrib(i,R),A)){if("class"===R){const H=c.getAttrib(p,R);if(H){let M="";if(Ue(H.split(/\s+/),P=>{/mce\-\w+/.test(P)&&(M+=(M?" ":"")+P)}),M)return void c.setAttrib(p,R,M)}}if(r_.test(R)&&p.removeAttribute("data-mce-"+R),"style"===R&&Mt(["li"])(p)&&"none"===c.getStyle(p,"list-style-type"))return p.removeAttribute(R),void c.setStyle(p,"list-style-type","none");"class"===R&&p.removeAttribute("className"),p.removeAttribute(R)}}),Ib(o.classes,C=>{C=fh(C,n),ve(i)&&!c.hasClass(i,C)||c.removeClass(p,C)});const w=c.getAttribs(p);for(let C=0;C<w.length;C++)if(!d.isAttributeInternal(w[C].nodeName))return Ys.keep()}return"none"!==o.remove?(Fp(t,p,o),Ys.removed()):Ys.keep()},_d=(t,o,n,s)=>Cg(t,o,n,s,s).fold(ot(s),i=>(t.dom.createFragment().appendChild(s),t.dom.rename(s,i)),ot(null)),Hb=(t,o,n,s,i)=>{(s||t.selection.isEditable())&&((c,d,u,p,v)=>{const w=c.formatter.get(d),C=w[0],O=c.dom,R=c.selection,A=$=>{const oe=((ie,be,Se,ze,at)=>{let Je;return be.parentNode&&Ue(_y(ie.dom,be.parentNode).reverse(),Ae=>{if(!Je&&ve(Ae)&&"_start"!==Ae.id&&"_end"!==Ae.id){const Pe=Uu(ie,Ae,Se,ze,at);Pe&&!1!==Pe.split&&(Je=Ae)}}),Je})(c,$,d,u,v);return((ie,be,Se,ze,at,Je,Ae,Pe)=>{var Me,qe;let Qt,Ht;const Lo=ie.dom;if(Se){const to=Se.parentNode;for(let wn=ze.parentNode;wn&&wn!==to;wn=wn.parentNode){let xn=Lo.clone(wn,!1);for(let ao=0;ao<be.length&&(xn=_d(ie,be[ao],Pe,xn),null!==xn);ao++);xn&&(Qt&&xn.appendChild(Qt),Ht||(Ht=xn),Qt=xn)}Ae.mixed&&Lo.isBlock(Se)||(ze=null!==(Me=Lo.split(Se,ze))&&void 0!==Me?Me:ze),Qt&&Ht&&(null===(qe=at.parentNode)||void 0===qe||qe.insertBefore(Qt,at),Ht.appendChild(at),bi(Ae)&&Lb(ie,Ae,0,Qt))}return ze})(c,w,oe,$,$,0,C,u)},H=$=>To(w,oe=>zp(c,oe,u,$,$)),M=$=>{const oe=nr($.childNodes),ie=H($)||To(w,Se=>Nb(O,$,Se)),be=$.parentNode;if(!ie&&ne(be)&&Dx(C)&&H(be),C.deep&&oe.length)for(let Se=0;Se<oe.length;Se++)M(oe[Se]);Ue(["underline","line-through","overline"],Se=>{ve($)&&c.dom.getStyle($,"text-decoration")===Se&&$.parentNode&&u4(O,$.parentNode)===Se&&zp(c,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Se}},void 0,$)})},P=$=>{const oe=O.get($?"_start":"_end");if(oe){let ie=oe[$?"firstChild":"lastChild"];return ye(be=ie)&&ve(be)&&("_start"===be.id||"_end"===be.id)&&(ie=ie[$?"firstChild":"lastChild"]),tt(ie)&&0===ie.data.length&&(ie=$?oe.previousSibling||oe.nextSibling:oe.nextSibling||oe.previousSibling),O.remove(oe,!0),ie}var be;return null},j=$=>{let oe,ie,be=bh(O,$,w,$.collapsed);if(C.split){if(be=mb(be),oe=a_(c,be,!0),ie=a_(c,be),oe!==ie){if(oe=B1(oe,!0),ie=B1(ie,!1),s_(O,oe,ie)){const ze=X.from(oe.firstChild).getOr(oe);return A(c3(O,ze,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void P(!0)}if(s_(O,ie,oe)){const ze=X.from(ie.lastChild).getOr(ie);return A(c3(O,ze,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void P(!1)}oe=i_(O,oe,"span",{id:"_start","data-mce-type":"bookmark"}),ie=i_(O,ie,"span",{id:"_end","data-mce-type":"bookmark"});const Se=O.createRng();Se.setStartAfter(oe),Se.setEndBefore(ie),y1(O,Se,ze=>{Ue(ze,at=>{ye(at)||ye(at.parentNode)||A(at)})}),A(oe),A(ie),oe=P(!0),ie=P()}else oe=ie=A(oe);be.startContainer=oe.parentNode?oe.parentNode:oe,be.startOffset=O.nodeIndex(oe),be.endContainer=ie.parentNode?ie.parentNode:ie,be.endOffset=O.nodeIndex(ie)+1}y1(O,be,Se=>{Ue(Se,M)})};if(p){if(Ji(p)){const $=O.createRng();$.setStartBefore(p),$.setEndAfter(p),j($)}else j(p);ib(c,d,p,u)}else R.isCollapsed()&&bi(C)&&!jo(c).length?((t,o,n,s)=>{const i=t.dom,c=t.selection;let d=!1;const u=t.formatter.get(o);if(!u)return;const p=c.getRng(),v=p.startContainer,w=p.startOffset;let C=v;tt(v)&&(w!==v.data.length&&(d=!0),C=C.parentNode);const O=[];let R;for(;C;){if(Uu(t,C,o,n,s)){R=C;break}C.nextSibling&&(d=!0),O.push(C),C=C.parentNode}if(R)if(d){const A=c.getBookmark();p.collapse(!0);let H=bh(i,p,u,!0);H=mb(H),t.formatter.remove(o,n,H,s),c.moveToBookmark(A)}else{const A=Nm(t.getBody(),R),H=xg(!1).dom;((j,$,oe)=>{var ie,be;const Se=j.dom,ze=Se.getParent(oe,mt(ph,j.schema));ze&&Se.isEmpty(ze)?null===(ie=oe.parentNode)||void 0===ie||ie.replaceChild($,oe):((at=>{const Je=W(at,"br"),Ae=Yt((Pe=>{const Me=[];let qe=Pe.dom;for(;qe;)Me.push(fe(qe)),qe=qe.lastChild;return Me})(at).slice(-1),Ra);Je.length===Ae.length&&Ue(Ae,G)})(fe(oe)),Se.isEmpty(oe)?null===(be=oe.parentNode)||void 0===be||be.replaceChild($,oe):Se.insertAfter($,oe))})(t,H,A??R);const M=((j,$,oe,ie,be,Se)=>{const ze=j.formatter,at=j.dom,Je=Yt(Sr(ze.get()),Pe=>Pe!==ie&&!Bt(Pe,"removeformat")),Ae=(Pe=j,Me=oe,Jn(Je,(Qt,Ht)=>{const Lo=dr(Pe,Ht,xn=>{const ao=Mo=>it(Mo)||Mo.length>1&&"%"===Mo.charAt(0);return To(["styles","attributes"],Mo=>Nn(xn,Mo).exists(rn=>{const Te=lo(rn)?rn:Dt(rn);return To(Te,ao)}))});return Pe.formatter.matchNode(Me,Ht,{},Lo)?Qt.concat([Ht]):Qt},[]));var Pe,Me;if(Yt(Ae,Pe=>!((Me,qe,Qt)=>{const Ht=["inline","block","selector","attributes","styles","classes"],Lo=to=>bs(to,(wn,xn)=>To(Ht,ao=>ao===xn));return dr(Me,qe,to=>{const wn=Lo(to);return dr(Me,Qt,xn=>{const ao=Lo(xn);return((Mo,rn,Te=No)=>Qs(Te).eq(Mo,rn))(wn,ao)})})})(j,Pe,ie)).length>0){const Pe=oe.cloneNode(!1);return at.add($,Pe),ze.remove(ie,be,Pe,Se),at.remove(Pe),X.some(Pe)}return X.none()})(t,H,R,o,n,s),P=XC(O.concat(M.toArray()),H);A&&GC(t,A,!1),c.setCursorLocation(P,1),i.isEmpty(R)&&i.remove(R)}})(c,d,u,v):(zu(c,()=>aa(c,j),$=>bi(C)&&r2(c,d,u,$)),c.nodeChanged()),$=c,ie=u,"removeformat"===(oe=d)?Ue(o_($.selection),be=>{Ue(Rb,Se=>$.dom.setStyle(be,Se,"")),kh($.dom,be)}):e_($.formatter,oe).each(be=>{Ue(o_($.selection),Se=>u3($.dom,Se,be,ie,null))}),ib(c,d,p,u);var $,oe,ie})(t,o,n,s,i)},zp=(t,o,n,s,i)=>Cg(t,o,n,s,i).fold(Do,c=>(t.dom.rename(s,c),!0),Jo),m3=It.each,c2=It.each,Pb=(t,o,n,s)=>{if(c2(n.styles,(i,c)=>{t.setStyle(o,c,fh(i,s))}),n.styles){const i=t.getAttrib(o,"style");i&&t.setAttrib(o,"data-mce-style",i)}},iA=(t,o,n,s)=>{const i=t.formatter.get(o),c=i[0],d=!s&&t.selection.isCollapsed(),u=t.dom,p=t.selection,v=(A,H=c)=>{it(H.onformat)&&H.onformat(A,H,n,s),Pb(u,A,H,n),c2(H.attributes,(M,P)=>{u.setAttrib(A,P,fh(M,n))}),c2(H.classes,M=>{const P=fh(M,n);u.hasClass(A,P)||u.addClass(A,P)})},w=(A,H)=>{let M=!1;return c2(A,P=>!(!Qc(P)||("false"!==u.getContentEditable(H)||P.ceFalseOverride)&&(!ne(P.collapsed)||P.collapsed===d)&&u.is(H,P.selector)&&!Dc(H)&&(v(H,P),M=!0,1))),M},O=(A,H,M)=>{const P=[];let j=!0;const $=c.inline||c.block,oe=(A=>{if(uo(A)){const H=u.create(A);return v(H),H}return null})($);y1(A,H,ie=>{let be;const Se=ze=>{let at=!1,Je=j,Ae=!1;const Pe=ze.parentNode,Me=Pe.nodeName.toLowerCase(),qe=A.getContentEditable(ze);ne(qe)&&(Je=j,j="true"===qe,at=!0,Ae=d4(t,ze));const Qt=j&&!at;if(je(ze)&&!((Ht,Lo,to,wn)=>{if(lg(Ht)&&bi(Lo)&&to.parentNode){const xn=bo(Ht.schema),ao=((t,o)=>((n,s)=>{const i=n.dom;return i.parentNode?(c=fe(i.parentNode),or(c.dom.childNodes,u=>(c=>!yr(n,c)&&s(c))(fe(u))).map(fe)):X.none();var c})(t,o).isSome())(fe(to),Mo=>Dc(Mo.dom));return Vs(xn,wn)&&ea(fe(to.parentNode),!1)&&!ao}return!1})(t,c,ze,Me))return be=null,void(Mm(c)&&A.remove(ze));if(Ht=ze,Mm(Lo=c)&&!0===Lo.wrapper&&Uu(t,Ht,o,n))be=null;else{if(((Ht,Lo,to)=>{const wn=Mm(xn=c)&&!0!==xn.wrapper&&ph(t.schema,Ht)&&xd(t,Lo,$);var xn;return to&&wn})(ze,Me,Qt)){const Ht=A.rename(ze,$);return v(Ht),P.push(Ht),void(be=null)}if(Qc(c)){let Ht=w(i,ze);if(!Ht&&ne(Pe)&&Dx(c)&&(Ht=w(i,Pe)),!bi(c)||Ht)return void(be=null)}ne(oe)&&((Ht,Lo,to,wn)=>{const xn=Ht.nodeName.toLowerCase(),ao=xd(t,$,xn)&&xd(t,Lo,$),Mo=!M&&tt(Ht)&&sm(Ht.data),rn=Dc(Ht),Te=!bi(c)||!A.isBlock(Ht);return(to||wn)&&ao&&!Mo&&!rn&&Te})(ze,Me,Qt,Ae)?(be||(be=A.clone(oe,!1),Pe.insertBefore(be,ze),P.push(be)),Ae&&at&&(j=Je),be.appendChild(ze)):(be=null,Ue(nr(ze.childNodes),Se),at&&(j=Je),be=null)}var Ht,Lo};Ue(ie,Se)}),!0===c.links&&Ue(P,ie=>{const be=Se=>{"A"===Se.nodeName&&v(Se,c),Ue(nr(Se.childNodes),be)};be(ie)}),Ue(P,ie=>{const be=(Se=>{let ze=0;return Ue(Se.childNodes,at=>{var Je;ne(Je=at)&&tt(Je)&&0===Je.length||ye(at)||ze++}),ze})(ie);var Se;!(P.length>1)&&A.isBlock(ie)||0!==be?(bi(c)||Mm(c)&&c.wrapper)&&(c.exact||1!==be||(ie=or((Se=ie).childNodes,Yd).filter(at=>"false"!==A.getContentEditable(at)&&Nb(A,at,c)).map(at=>{const Je=A.clone(at,!1);return v(Je),A.replace(Je,Se,!0),A.remove(at,!0),Je}).getOr(Se)),((Se,ze,at,Je)=>{m3(ze,Ae=>{var Pe,Me,qe;bi(Ae)&&m3(Se.dom.select(Ae.inline,Je),Pe=>{a2(Pe)&&zp(Se,Ae,at,Pe,Ae.exact?Pe:null)}),Pe=Se.dom,qe=Je,(Me=Ae).clear_child_styles&&Bb(Pe.select(Me.links?"*:not(a)":"*",qe),Ht=>{a2(Ht)&&$a(Ht)&&Bb(Me.styles,(Lo,to)=>{Pe.setStyle(Ht,to,"")})})})})(t,i,n,ie),((Se,ze,at,Je,Ae)=>{const Pe=Ae.parentNode;Uu(Se,Pe,at,Je)&&zp(Se,ze,Je,Ae)||ze.merge_with_parents&&Pe&&Se.dom.getParent(Pe,Me=>!!Uu(Se,Me,at,Je)&&(zp(Se,ze,Je,Ae),!0))})(t,c,o,n,ie),((Se,ze,at,Je)=>{if(ze.styles&&ze.styles.backgroundColor){const Ae=l3(Se,"fontSize");Wu(Je,Pe=>Ae(Pe)&&$a(Pe),l2(Se,"backgroundColor",fh(ze.styles.backgroundColor,at)))}})(A,c,n,ie),((Se,ze,at,Je)=>{const Ae=Pe=>{if(ve(Pe)&&ve(Pe.parentNode)&&$a(Pe)){const Me=u4(Se,Pe.parentNode);Se.getStyle(Pe,"color")&&Me?Se.setStyle(Pe,"text-decoration",Me):Se.getStyle(Pe,"text-decoration")===Me&&Se.setStyle(Pe,"text-decoration",null)}};ze.styles&&(ze.styles.color||ze.styles.textDecoration)&&(It.walk(Je,Ae,"childNodes"),Ae(Je))})(A,c,0,ie),((Se,ze,at,Je)=>{if(bi(ze)&&("sub"===ze.inline||"sup"===ze.inline)){const Ae=l3(Se,"fontSize");Wu(Je,Me=>Ae(Me)&&$a(Me),l2(Se,"fontSize",""));const Pe=Yt(Se.select("sup"===ze.inline?"sub":"sup",Je),$a);Se.remove(Pe,!0)}})(A,c,0,ie),Lb(t,c,0,ie)):A.remove(ie,!0)})},R=Ji(s)?s:p.getNode();if("false"===u.getContentEditable(R)&&!d4(t,R))return w(i,s=R),void cc(t,o,s,n);if(c){if(s)if(Ji(s)){if(!w(i,s)){const A=u.createRng();A.setStartBefore(s),A.setEndAfter(s),O(u,bh(u,A,i),!0)}}else O(u,s,!0);else d&&bi(c)&&!jo(t).length?((A,H,M)=>{let P;const j=A.selection,$=A.formatter.get(H);if(!$)return;const oe=j.getRng();let ie=oe.startOffset;const be=oe.startContainer.nodeValue;P=Nm(A.getBody(),j.getStart());const Se=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(be&&ie>0&&ie<be.length&&Se.test(be.charAt(ie))&&Se.test(be.charAt(ie-1))){const Je=j.getBookmark();oe.collapse(!0);let Ae=bh(A.dom,oe,$);Ae=mb(Ae),A.formatter.apply(H,M,Ae),j.moveToBookmark(Je)}else{let Je=P?s2(P):null;P&&"\ufeff"===Je?.data||(ze=A.getDoc(),at=xg(!0).dom,P=ze.importNode(at,!0),Je=P.firstChild,oe.insertNode(P),ie=1),A.formatter.apply(H,M,P),j.setCursorLocation(Je,ie)}var ze,at})(t,o,n):(p.setRng(Eb(p.getRng())),zu(t,()=>{aa(t,(A,H)=>{const M=H?A:bh(u,A,i);O(u,M,!1)})},Jo),t.nodeChanged()),e_(t.formatter,o).each(A=>{var H;Ue(Yt((M=>{const P=M.getSelectedBlocks(),j=M.getRng();if(M.isCollapsed())return[];if(1===P.length)return t_(j,P[0])&&i3(j,P[0])?P:[];{const $=Pn(P).filter(be=>t_(j,be)).toArray(),oe=Gn(P).filter(be=>i3(j,be)).toArray(),ie=P.slice(1,-1);return $.concat(ie).concat(oe)}})(H=t.selection),Db(H.dom)),H=>Pb(u,H,A,n))});H=t,Vo(D1,A=o)&&Ue(D1[A],M=>{M(H)})}var A,H;cc(t,o,s,n)},Sd=(t,o,n,s)=>{(s||t.selection.isEditable())&&iA(t,o,n,s)},Fb=t=>Vo(t,"vars"),l_=t=>t.selection.getStart(),d2=(t,o,n,s,i)=>fs(o,c=>{const d=t.formatter.matchNode(c,n,i??{},s);return!Ft(d)},c=>!!qC(t,c,n)||!s&&ne(t.formatter.matchNode(c,n,i,!0))),u2=(t,o)=>{const n=o??l_(t);return Yt(_y(t.dom,n),s=>ve(s)&&!zo(s))},Eh=(t,o,n)=>{const s=u2(t,o);Ao(n,(i,c)=>{const d=u=>{const p=d2(t,s,c,u.similar,Fb(u)?u.vars:void 0),v=p.isSome();if(u.state.get()!==v){u.state.set(v);const w=p.getOr(o);Fb(u)?u.callback(v,{node:w,format:c,parents:s}):Ue(u.callbacks,C=>C(v,{node:w,format:c,parents:s}))}};Ue([i.withSimilar,i.withoutSimilar],d),Ue(i.withVars,d)})},m2=It.explode,c_=()=>{const t={};return{addFilter:(o,n)=>{Ue(m2(o),s=>{Vo(t,s)||(t[s]={name:s,callbacks:[]}),t[s].callbacks.push(n)})},getFilters:()=>Dt(t),removeFilter:(o,n)=>{Ue(m2(o),s=>{if(Vo(t,s))if(ne(n)){const i=t[s],c=Yt(i.callbacks,d=>d!==n);c.length>0?i.callbacks=c:delete t[s]}else delete t[s]})}}},L1=(t,o)=>{t.addNodeFilter("br",(n,s,i)=>{const c=It.extend({},o.getBlockElements()),d=o.getNonEmptyElements(),u=o.getWhitespaceElements();c.body=1;const p=v=>{return v.name in c&&(1===(C=v).type&&$g(o,C.name)&&Ft(C.attr(Ym)));var C};for(let v=0,w=n.length;v<w;v++){let C=n[v],O=C.parent;if(O&&c[O.name]&&C===O.lastChild){let R=C.prev;for(;R;){const A=R.name;if("span"!==A||"bookmark"!==R.attr("data-mce-type")){"br"===A&&(C=null);break}R=R.prev}if(C&&(C.remove(),Ip(o,d,u,O))){const A=o.getElementRule(O.name);A&&(A.removeEmpty?O.remove():A.paddEmpty&&Qy(i,p,O))}}else{let R=C;for(;O&&O.firstChild===R&&O.lastChild===R&&(R=O,!c[O.name]);)O=O.parent;if(R===O){const A=new dc("#text",3);A.value=os,C.replace(A)}}}})},d_=t=>{const[o,...n]=t.split(","),s=n.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const c=";base64"===i[2],d=c?(u=>{const p=/([a-z0-9+\/=\s]+)/i.exec(u);return p?p[1]:""})(s):decodeURIComponent(s);return X.some({type:i[1],data:d,base64Encoded:c})}return X.none()},u_=(t,o,n=!0)=>{let s=o;if(n)try{s=atob(o)}catch{return X.none()}const i=new Uint8Array(s.length);for(let c=0;c<i.length;c++)i[c]=s.charCodeAt(c);return X.some(new Blob([i],{type:t}))},g2=t=>new Promise((o,n)=>{const s=new FileReader;s.onloadend=()=>{o(s.result)},s.onerror=()=>{var i;n(null===(i=s.error)||void 0===i?void 0:i.message)},s.readAsDataURL(t)});let cA=0;const m_=(t,o,n)=>d_(t).bind(({data:s,type:i,base64Encoded:c})=>{if(o&&!c)return X.none();{const d=c?s:btoa(s);return n(d,i)}}),g_=(t,o,n)=>{const s=t.create("blobid"+cA++,o,n);return t.add(s),s},g3=(t,o,n=!1)=>m_(o,n,(s,i)=>X.from(t.getByData(s,i)).orThunk(()=>u_(i,s).map(c=>g_(t,c,s))));function Vp(t){return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function h_(t,o){return(h_=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n})(t,o)}function p_(t,o,n){return(p_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(s,i,c){var d=[null];d.push.apply(d,i);var u=new(Function.bind.apply(s,d));return c&&h_(u,c.prototype),u}).apply(null,arguments)}function $u(t){return function(o){if(Array.isArray(o))return f_(o)}(t)||function(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(t)||function(o,n){if(o){if("string"==typeof o)return f_(o,n);var s=Object.prototype.toString.call(o).slice(8,-1);return"Object"===s&&o.constructor&&(s=o.constructor.name),"Map"===s||"Set"===s?Array.from(o):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?f_(o,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f_(t,o){(null==o||o>t.length)&&(o=t.length);for(var n=0,s=new Array(o);n<o;n++)s[n]=t[n];return s}var uA=Object.hasOwnProperty,h3=Object.setPrototypeOf,mA=Object.isFrozen,gA=Object.getPrototypeOf,p3=Object.getOwnPropertyDescriptor,Bc=Object.freeze,Lc=Object.seal,hA=Object.create,f3=typeof Reflect<"u"&&Reflect,zb=f3.apply,b_=f3.construct;zb||(zb=function(t,o,n){return t.apply(o,n)}),Bc||(Bc=function(t){return t}),Lc||(Lc=function(t){return t}),b_||(b_=function(t,o){return p_(t,$u(o))});var b3,pA=qu(Array.prototype.forEach),fA=qu(Array.prototype.pop),Vb=qu(Array.prototype.push),h2=qu(String.prototype.toLowerCase),v_=qu(String.prototype.match),nu=qu(String.prototype.replace),v3=qu(String.prototype.indexOf),Zb=qu(String.prototype.trim),wl=qu(RegExp.prototype.test),p2=(b3=TypeError,function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return b_(b3,o)});function qu(t){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return zb(t,o,s)}}function ms(t,o){h3&&h3(t,null);for(var n=o.length;n--;){var s=o[n];if("string"==typeof s){var i=h2(s);i!==s&&(mA(o)||(o[n]=i),s=i)}t[s]=!0}return t}function Zp(t){var o,n=hA(null);for(o in t)zb(uA,t,[o])&&(n[o]=t[o]);return n}function f2(t,o){for(;null!==t;){var n=p3(t,o);if(n){if(n.get)return qu(n.get);if("function"==typeof n.value)return qu(n.value)}t=gA(t)}return function(s){return console.warn("fallback value for",s),null}}var y_=Bc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),b2=Bc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),w_=Bc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),v2=Bc(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),y2=Bc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),vi=Bc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jp=Bc(["#text"]),x_=Bc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),jb=Bc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ub=Bc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gu=Bc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Oh=Lc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bA=Lc(/<%[\w\W]*|[\w\W]*%>/gm),vA=Lc(/^data-[\-\w.\u00B7-\uFFFF]/),I1=Lc(/^aria-[\-\w]+$/),H1=Lc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),P1=Lc(/^(?:\w+script|data):/i),yA=Lc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),C_=Lc(/^html$/i),y3=function(){return typeof window>"u"?null:window},w3=function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y3(),n=function(Ke){return t(Ke)};if(n.version="2.3.8",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;var s=o.document,i=o.document,c=o.DocumentFragment,d=o.HTMLTemplateElement,u=o.Node,p=o.Element,v=o.NodeFilter,w=o.NamedNodeMap,C=void 0===w?o.NamedNodeMap||o.MozNamedAttrMap:w,O=o.HTMLFormElement,R=o.DOMParser,A=o.trustedTypes,H=p.prototype,M=f2(H,"cloneNode"),P=f2(H,"nextSibling"),j=f2(H,"childNodes"),$=f2(H,"parentNode");if("function"==typeof d){var oe=i.createElement("template");oe.content&&oe.content.ownerDocument&&(i=oe.content.ownerDocument)}var ie=function(Ke,An){if("object"!==Vp(Ke)||"function"!=typeof Ke.createPolicy)return null;var Qo=null,Js="data-tt-policy-suffix";An.currentScript&&An.currentScript.hasAttribute(Js)&&(Qo=An.currentScript.getAttribute(Js));var Mi="dompurify"+(Qo?"#"+Qo:"");try{return Ke.createPolicy(Mi,{createHTML:function(Ri){return Ri}})}catch{return console.warn("TrustedTypes policy "+Mi+" could not be created."),null}}(A,s),be=ie?ie.createHTML(""):"",Se=i,ze=Se.implementation,at=Se.createNodeIterator,Je=Se.createDocumentFragment,Ae=Se.getElementsByTagName,Pe=s.importNode,Me={};try{Me=Zp(i).documentMode?i.documentMode:{}}catch{}var qe={};n.isSupported="function"==typeof $&&ze&&void 0!==ze.createHTMLDocument&&9!==Me;var Qt,Ht,Lo=Oh,to=bA,wn=vA,xn=I1,ao=P1,Mo=yA,rn=H1,Te=null,Re=ms({},[].concat($u(y_),$u(b2),$u(w_),$u(y2),$u(jp))),st=null,kt=ms({},[].concat($u(x_),$u(jb),$u(Ub),$u(Gu))),bt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,qt=null,Ro=!0,fo=!0,sn=!1,hn=!1,io=!1,In=!1,wi=!1,ba=!1,gc=!1,Kl=!1,Ad=!0,Nd=!0,zi=!1,Fc={},Ia=null,Um=ms({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ig=null,jv=ms({},["audio","video","img","source","image","track"]),Wm=null,Uv=ms({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dd="http://www.w3.org/1998/Math/MathML",Zh="http://www.w3.org/2000/svg",ud="http://www.w3.org/1999/xhtml",Md=ud,Qk=!1,kT=["application/xhtml+xml","text/html"],gf=null,M5=i.createElement("form"),ET=function(Ke){return Ke instanceof RegExp||Ke instanceof Function},$m=function(Ke){gf&&gf===Ke||(Ke&&"object"===Vp(Ke)||(Ke={}),Ke=Zp(Ke),Te="ALLOWED_TAGS"in Ke?ms({},Ke.ALLOWED_TAGS):Re,st="ALLOWED_ATTR"in Ke?ms({},Ke.ALLOWED_ATTR):kt,Wm="ADD_URI_SAFE_ATTR"in Ke?ms(Zp(Uv),Ke.ADD_URI_SAFE_ATTR):Uv,Ig="ADD_DATA_URI_TAGS"in Ke?ms(Zp(jv),Ke.ADD_DATA_URI_TAGS):jv,Ia="FORBID_CONTENTS"in Ke?ms({},Ke.FORBID_CONTENTS):Um,vt="FORBID_TAGS"in Ke?ms({},Ke.FORBID_TAGS):{},qt="FORBID_ATTR"in Ke?ms({},Ke.FORBID_ATTR):{},Fc="USE_PROFILES"in Ke&&Ke.USE_PROFILES,Ro=!1!==Ke.ALLOW_ARIA_ATTR,fo=!1!==Ke.ALLOW_DATA_ATTR,sn=Ke.ALLOW_UNKNOWN_PROTOCOLS||!1,hn=Ke.SAFE_FOR_TEMPLATES||!1,io=Ke.WHOLE_DOCUMENT||!1,ba=Ke.RETURN_DOM||!1,gc=Ke.RETURN_DOM_FRAGMENT||!1,Kl=Ke.RETURN_TRUSTED_TYPE||!1,wi=Ke.FORCE_BODY||!1,Ad=!1!==Ke.SANITIZE_DOM,Nd=!1!==Ke.KEEP_CONTENT,zi=Ke.IN_PLACE||!1,rn=Ke.ALLOWED_URI_REGEXP||rn,Md=Ke.NAMESPACE||ud,Ke.CUSTOM_ELEMENT_HANDLING&&ET(Ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=Ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ke.CUSTOM_ELEMENT_HANDLING&&ET(Ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=Ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ke.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(bt.allowCustomizedBuiltInElements=Ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qt=Qt=-1===kT.indexOf(Ke.PARSER_MEDIA_TYPE)?"text/html":Ke.PARSER_MEDIA_TYPE,Ht="application/xhtml+xml"===Qt?function(An){return An}:h2,hn&&(fo=!1),gc&&(ba=!0),Fc&&(Te=ms({},$u(jp)),st=[],!0===Fc.html&&(ms(Te,y_),ms(st,x_)),!0===Fc.svg&&(ms(Te,b2),ms(st,jb),ms(st,Gu)),!0===Fc.svgFilters&&(ms(Te,w_),ms(st,jb),ms(st,Gu)),!0===Fc.mathMl&&(ms(Te,y2),ms(st,Ub),ms(st,Gu))),Ke.ADD_TAGS&&(Te===Re&&(Te=Zp(Te)),ms(Te,Ke.ADD_TAGS)),Ke.ADD_ATTR&&(st===kt&&(st=Zp(st)),ms(st,Ke.ADD_ATTR)),Ke.ADD_URI_SAFE_ATTR&&ms(Wm,Ke.ADD_URI_SAFE_ATTR),Ke.FORBID_CONTENTS&&(Ia===Um&&(Ia=Zp(Ia)),ms(Ia,Ke.FORBID_CONTENTS)),Nd&&(Te["#text"]=!0),io&&ms(Te,["html","head","body"]),Te.table&&(ms(Te,["tbody"]),delete vt.tbody),Bc&&Bc(Ke),gf=Ke)},e4=ms({},["mi","mo","mn","ms","mtext"]),Wv=ms({},["foreignobject","desc","title","annotation-xml"]),R5=ms({},["title","style","font","a","script"]),$v=ms({},b2);ms($v,w_),ms($v,v2);var t4=ms({},y2);ms(t4,vi);var Hg=function(Ke){Vb(n.removed,{element:Ke});try{Ke.parentNode.removeChild(Ke)}catch{try{Ke.outerHTML=be}catch{Ke.remove()}}},h0=function(Ke,An){try{Vb(n.removed,{attribute:An.getAttributeNode(Ke),from:An})}catch{Vb(n.removed,{attribute:null,from:An})}if(An.removeAttribute(Ke),"is"===Ke&&!st[Ke])if(ba||gc)try{Hg(An)}catch{}else try{An.setAttribute(Ke,"")}catch{}},OT=function(Ke){var An,Qo;if(wi)Ke="<remove></remove>"+Ke;else{var Js=v_(Ke,/^[\r\n\t ]+/);Qo=Js&&Js[0]}"application/xhtml+xml"===Qt&&(Ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ke+"</body></html>");var Mi=ie?ie.createHTML(Ke):Ke;if(Md===ud)try{An=(new R).parseFromString(Mi,Qt)}catch{}if(!An||!An.documentElement){An=ze.createDocument(Md,"template",null);try{An.documentElement.innerHTML=Qk?"":Mi}catch{}}var Ri=An.body||An.documentElement;return Ke&&Qo&&Ri.insertBefore(i.createTextNode(Qo),Ri.childNodes[0]||null),Md===ud?Ae.call(An,io?"html":"body")[0]:io?An.documentElement:Ri},ri=function(Ke){return at.call(Ke.ownerDocument||Ke,Ke,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT,null,!1)},qv=function(Ke){return"object"===Vp(u)?Ke instanceof u:Ke&&"object"===Vp(Ke)&&"number"==typeof Ke.nodeType&&"string"==typeof Ke.nodeName},Pg=function(Ke,An,Qo){qe[Ke]&&pA(qe[Ke],function(Js){Js.call(n,An,Qo,gf)})},bx=function(Ke){var An,Qo;if(Pg("beforeSanitizeElements",Ke,null),(Qo=Ke)instanceof O&&("string"!=typeof Qo.nodeName||"string"!=typeof Qo.textContent||"function"!=typeof Qo.removeChild||!(Qo.attributes instanceof C)||"function"!=typeof Qo.removeAttribute||"function"!=typeof Qo.setAttribute||"string"!=typeof Qo.namespaceURI||"function"!=typeof Qo.insertBefore)||wl(/[\u0080-\uFFFF]/,Ke.nodeName))return Hg(Ke),!0;var Js=Ht(Ke.nodeName);if(Pg("uponSanitizeElement",Ke,{tagName:Js,allowedTags:Te}),Ke.hasChildNodes()&&!qv(Ke.firstElementChild)&&(!qv(Ke.content)||!qv(Ke.content.firstElementChild))&&wl(/<[/\w]/g,Ke.innerHTML)&&wl(/<[/\w]/g,Ke.textContent)||"select"===Js&&wl(/<template/i,Ke.innerHTML))return Hg(Ke),!0;if(!Te[Js]||vt[Js]){if(!vt[Js]&&vx(Js)&&(bt.tagNameCheck instanceof RegExp&&wl(bt.tagNameCheck,Js)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Js)))return!1;if(Nd&&!Ia[Js]){var Mi=$(Ke)||Ke.parentNode,Ri=j(Ke)||Ke.childNodes;if(Ri&&Mi)for(var ia=Ri.length-1;ia>=0;--ia)Mi.insertBefore(M(Ri[ia],!0),P(Ke))}return Hg(Ke),!0}return Ke instanceof p&&!function(rm){var el=$(rm);el&&el.tagName||(el={namespaceURI:ud,tagName:"template"});var tl=h2(rm.tagName),hf=h2(el.tagName);return rm.namespaceURI===Zh?el.namespaceURI===ud?"svg"===tl:el.namespaceURI===dd?"svg"===tl&&("annotation-xml"===hf||e4[hf]):Boolean($v[tl]):rm.namespaceURI===dd?el.namespaceURI===ud?"math"===tl:el.namespaceURI===Zh?"math"===tl&&Wv[hf]:Boolean(t4[tl]):rm.namespaceURI===ud&&!(el.namespaceURI===Zh&&!Wv[hf])&&!(el.namespaceURI===dd&&!e4[hf])&&!t4[tl]&&(R5[tl]||!$v[tl])}(Ke)?(Hg(Ke),!0):"noscript"!==Js&&"noembed"!==Js||!wl(/<\/no(script|embed)/i,Ke.innerHTML)?(hn&&3===Ke.nodeType&&(An=nu(An=Ke.textContent,Lo," "),An=nu(An,to," "),Ke.textContent!==An&&(Vb(n.removed,{element:Ke.cloneNode()}),Ke.textContent=An)),Pg("afterSanitizeElements",Ke,null),!1):(Hg(Ke),!0)},o4=function(Ke,An,Qo){if(Ad&&("id"===An||"name"===An)&&(Qo in i||Qo in M5))return!1;if((!fo||qt[An]||!wl(wn,An))&&(!Ro||!wl(xn,An)))if(!st[An]||qt[An]){if(!(vx(Ke)&&(bt.tagNameCheck instanceof RegExp&&wl(bt.tagNameCheck,Ke)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Ke))&&(bt.attributeNameCheck instanceof RegExp&&wl(bt.attributeNameCheck,An)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(An))||"is"===An&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&wl(bt.tagNameCheck,Qo)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Qo))))return!1}else if(!Wm[An]&&!wl(rn,nu(Qo,Mo,""))&&("src"!==An&&"xlink:href"!==An&&"href"!==An||"script"===Ke||0!==v3(Qo,"data:")||!Ig[Ke])&&(!sn||wl(ao,nu(Qo,Mo,"")))&&Qo)return!1;return!0},vx=function(Ke){return Ke.indexOf("-")>0},TT=function(Ke){var An,Qo,Js,Mi;Pg("beforeSanitizeAttributes",Ke,null);var Ri=Ke.attributes;if(Ri){var ia={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st};for(Mi=Ri.length;Mi--;){var rm=An=Ri[Mi],el=rm.name,tl=rm.namespaceURI;Qo="value"===el?An.value:Zb(An.value),Js=Ht(el);var hf=Qo;if(ia.attrName=Js,ia.attrValue=Qo,ia.keepAttr=!0,ia.forceKeepAttr=void 0,Pg("uponSanitizeAttribute",Ke,ia),Qo=ia.attrValue,!ia.forceKeepAttr)if(ia.keepAttr)if(wl(/\/>/i,Qo))h0(el,Ke);else{hn&&(Qo=nu(Qo,Lo," "),Qo=nu(Qo,to," "));var B5=Ht(Ke.nodeName);if(o4(B5,Js,Qo)){if(Qo!==hf)try{tl?Ke.setAttributeNS(tl,el,Qo):Ke.setAttribute(el,Qo)}catch{h0(el,Ke)}}else h0(el,Ke)}else h0(el,Ke)}Pg("afterSanitizeAttributes",Ke,null)}},D5=function Ke(An){var Qo,Js=ri(An);for(Pg("beforeSanitizeShadowDOM",An,null);Qo=Js.nextNode();)Pg("uponSanitizeShadowNode",Qo,null),bx(Qo)||(Qo.content instanceof c&&Ke(Qo.content),TT(Qo));Pg("afterSanitizeShadowDOM",An,null)};return n.sanitize=function(Ke,An){var Qo,Js,Mi,Ri,ia;if((Qk=!Ke)&&(Ke="\x3c!--\x3e"),"string"!=typeof Ke&&!qv(Ke)){if("function"!=typeof Ke.toString)throw p2("toString is not a function");if("string"!=typeof(Ke=Ke.toString()))throw p2("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Vp(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof Ke)return o.toStaticHTML(Ke);if(qv(Ke))return o.toStaticHTML(Ke.outerHTML)}return Ke}if(In||$m(An),n.removed=[],"string"==typeof Ke&&(zi=!1),zi){if(Ke.nodeName){var rm=Ht(Ke.nodeName);if(!Te[rm]||vt[rm])throw p2("root node is forbidden and cannot be sanitized in-place")}}else if(Ke instanceof u)1===(Js=(Qo=OT("\x3c!----\x3e")).ownerDocument.importNode(Ke,!0)).nodeType&&"BODY"===Js.nodeName||"HTML"===Js.nodeName?Qo=Js:Qo.appendChild(Js);else{if(!ba&&!hn&&!io&&-1===Ke.indexOf("<"))return ie&&Kl?ie.createHTML(Ke):Ke;if(!(Qo=OT(Ke)))return ba?null:Kl?be:""}Qo&&wi&&Hg(Qo.firstChild);for(var el=ri(zi?Ke:Qo);Mi=el.nextNode();)3===Mi.nodeType&&Mi===Ri||bx(Mi)||(Mi.content instanceof c&&D5(Mi.content),TT(Mi),Ri=Mi);if(Ri=null,zi)return Ke;if(ba){if(gc)for(ia=Je.call(Qo.ownerDocument);Qo.firstChild;)ia.appendChild(Qo.firstChild);else ia=Qo;return st.shadowroot&&(ia=Pe.call(s,ia,!0)),ia}var tl=io?Qo.outerHTML:Qo.innerHTML;return io&&Te["!doctype"]&&Qo.ownerDocument&&Qo.ownerDocument.doctype&&Qo.ownerDocument.doctype.name&&wl(C_,Qo.ownerDocument.doctype.name)&&(tl="<!DOCTYPE "+Qo.ownerDocument.doctype.name+">\n"+tl),hn&&(tl=nu(tl,Lo," "),tl=nu(tl,to," ")),ie&&Kl?ie.createHTML(tl):tl},n.setConfig=function(Ke){$m(Ke),In=!0},n.clearConfig=function(){gf=null,In=!1},n.isValidAttribute=function(Ke,An,Qo){gf||$m({});var Js=Ht(Ke),Mi=Ht(An);return o4(Js,Mi,Qo)},n.addHook=function(Ke,An){"function"==typeof An&&(qe[Ke]=qe[Ke]||[],Vb(qe[Ke],An))},n.removeHook=function(Ke){if(qe[Ke])return fA(qe[Ke])},n.removeHooks=function(Ke){qe[Ke]&&(qe[Ke]=[])},n.removeAllHooks=function(){qe={}},n}();const x3=It.each,wA=It.trim,C3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_3={ftp:21,http:80,https:443,mailto:25},Wb=["img","video"],__=(t,o,n)=>{const s=(i=>{try{return decodeURIComponent(i)}catch{return unescape(i)}})(o).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!t.allow_html_data_urls&&(/^data:image\//i.test(s)?(c=n,(ne(i=t.allow_svg_data_urls)?!i:!ne(c)||!Ie(Wb,c))&&/^data:image\/svg\+xml/i.test(s)):/^data:/i.test(s)));var i,c};class ru{static parseDataUri(o){let n;const s=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(s[0]);return i&&(n=i[1]),{type:n,data:s[1]}}static isDomSafe(o,n,s={}){if(s.allow_script_urls)return!0;{const i=Hi.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!__(s,i,n)}}static getDocumentBaseUrl(o){var n;let s;return s=0!==o.protocol.indexOf("http")&&"file:"!==o.protocol?null!==(n=o.href)&&void 0!==n?n:"":o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(o,n={}){this.path="",this.directory="",o=wA(o),this.settings=n;const s=n.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o))return void(i.source=o);const c=0===o.indexOf("//");if(0!==o.indexOf("/")||c||(o=(s&&s.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const u=s?s.path:new ru(document.location.href).directory;if(""===s?.protocol)o="//mce_host"+i.toAbsPath(u,o);else{const p=/([^#?]*)([#?]?.*)/.exec(o);p&&(o=(s&&s.protocol||"http")+"://mce_host"+i.toAbsPath(u,p[1])+p[2])}}o=o.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);d&&x3(C3,(u,p)=>{let v=d[p];v&&(v=v.replace(/\(mce_at\)/g,"@@")),i[u]=v}),s&&(i.protocol||(i.protocol=s.protocol),i.userInfo||(i.userInfo=s.userInfo),i.port||"mce_host"!==i.host||(i.port=s.port),i.host&&"mce_host"!==i.host||(i.host=s.host),i.source=""),c&&(i.protocol="")}setPath(o){const n=/^(.*?)\/?(\w+)?$/.exec(o);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(o){if("./"===o)return o;const n=new ru(o,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const s=this.getURI(),i=n.getURI();if(s===i||"/"===s.charAt(s.length-1)&&s.substr(0,s.length-1)===i)return s;let c=this.toRelPath(this.path,n.path);return n.query&&(c+="?"+n.query),n.anchor&&(c+="#"+n.anchor),c}toAbsolute(o,n){const s=new ru(o,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const n=this.protocol?_3[this.protocol]:null;if(n&&(this.port||n)==(o.port||n))return!0}return!1}toRelPath(o,n){let s,i,c=0,d="";const u=o.substring(0,o.lastIndexOf("/")).split("/"),p=n.split("/");if(u.length>=p.length)for(s=0,i=u.length;s<i;s++)if(s>=p.length||u[s]!==p[s]){c=s+1;break}if(u.length<p.length)for(s=0,i=p.length;s<i;s++)if(s>=u.length||u[s]!==p[s]){c=s+1;break}if(1===c)return n;for(s=0,i=u.length-(c-1);s<i;s++)d+="../";for(s=c-1,i=p.length;s<i;s++)d+=s!==c-1?"/"+p[s]:p[s];return d}toAbsPath(o,n){let s=0;const i=/\/$/.test(n)?"/":"",c=o.split("/"),d=n.split("/"),u=[];x3(c,C=>{C&&u.push(C)});const p=[];for(let C=d.length-1;C>=0;C--)0!==d[C].length&&"."!==d[C]&&(".."!==d[C]?s>0?s--:p.push(d[C]):s++);const v=u.length-s;let w;return w=v<=0?Cr(p).join("/"):u.slice(0,v).join("/")+"/"+Cr(p).join("/"),0!==w.indexOf("/")&&(w="/"+w),i&&w.lastIndexOf("/")!==w.length-1&&(w+=i),w}getURI(o=!1){let n;return this.source&&!o||(n="",o||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const S3=It.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),w2="data-mce-type";let S_=0;const k_=(t,o,n,s)=>{var i,c,d,u;const p=o.validate,v=n.getSpecialElements();8===t.nodeType&&!o.allow_conditional_comments&&/^\[if/i.test(null!==(i=t.nodeValue)&&void 0!==i?i:"")&&(t.nodeValue=" "+t.nodeValue);const w=null!==(c=s?.tagName)&&void 0!==c?c:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===w)return;const C=fe(t),O=Ce(C,w2),R=Y(C,"data-mce-bogus");if(!O&&uo(R))return void("all"===R?G(C):se(C));const A=n.getElementRule(w);if(!p||A){if(ne(s)&&(s.allowedTags[w]=!0),p&&A&&!O){if(Ue(null!==(d=A.attributesForced)&&void 0!==d?d:[],H=>{vr(C,H.name,"{$uid}"===H.value?"mce_"+S_++:H.value)}),Ue(null!==(u=A.attributesDefault)&&void 0!==u?u:[],H=>{Ce(C,H.name)||vr(C,H.name,"{$uid}"===H.value?"mce_"+S_++:H.value)}),A.attributesRequired&&!To(A.attributesRequired,H=>Ce(C,H))||A.removeEmptyAttrs&&(H=>{const M=H.dom.attributes;return null==M||0===M.length})(C))return void se(C);A.outputName&&A.outputName!==w&&ja(C,A.outputName)}}else Vo(v,w)?G(C):se(C)},E_=(t,o,n,s,i)=>!(s in S3&&__(t,i,n))&&(!t.validate||o.isValid(n,s)||Wt(s,"data-")||Wt(s,"aria-")),O_=(t,o)=>t.hasAttribute(w2)&&("id"===o||"class"===o||"style"===o),T_=(t,o)=>t in o.getBoolAttrs(),A_=(t,o,n)=>{const{attributes:s}=t;for(let i=s.length-1;i>=0;i--){const c=s[i],d=c.name,u=c.value;E_(o,n,t.tagName.toLowerCase(),d,u)||O_(t,d)?T_(d,n)&&t.setAttribute(d,d):t.removeAttribute(d)}},N_=It.makeMap,M_=It.extend,qb=(t,o,n)=>{const s=t.name,i=s in n&&"title"!==s&&"textarea"!==s,c=o.childNodes;for(let d=0,u=c.length;d<u;d++){const p=c[d],v=new dc(p.nodeName.toLowerCase(),p.nodeType);if(ve(p)){const w=p.attributes;for(let C=0,O=w.length;C<O;C++){const R=w[C];v.attr(R.name,R.value)}}else tt(p)?(v.value=p.data,i&&(v.raw=!0)):(Yn(p)||kn(p)||Or(p))&&(v.value=p.data);qb(v,p,n),t.append(v)}},F1=(t={},o=ku())=>{const n=c_(),s=c_(),i={validate:!0,root_name:"body",sanitize:!0,...t},c=new DOMParser,d=((H,M)=>{if(H.sanitize){const P=((t,o)=>{const n=w3();return n.addHook("uponSanitizeElement",(s,i)=>{k_(s,t,o,i)}),n.addHook("uponSanitizeAttribute",(s,i)=>{const c=s.tagName.toLowerCase(),{attrName:d,attrValue:u}=i;i.keepAttr=E_(t,o,c,d,u),i.keepAttr?(i.allowedAttributes[d]=!0,T_(d,o)&&(i.attrValue=d),t.allow_svg_data_urls&&Wt(u,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):O_(s,d)&&(i.forceKeepAttr=!0)}),n})(H,M);return(j,$)=>{P.sanitize(j,((oe,ie)=>{const be={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return be.PARSER_MEDIA_TYPE=ie,oe.allow_script_urls?be.ALLOWED_URI_REGEXP=/.*/:oe.allow_html_data_urls&&(be.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),be})(H,$)),P.removed=[]}}return(P,j)=>{const $=document.createNodeIterator(P,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let oe;for(;oe=$.nextNode();)k_(oe,H,M),ve(oe)&&A_(oe,H,M)}})(i,o),p=n.getFilters,C=s.getFilters,R=(H,M)=>{const P=uo(M.attr(w2)),j=1===M.type&&!Vo(H,M.name)&&!w0(o,M);return 3===M.type||j&&!P},A={schema:o,addAttributeFilter:s.addFilter,getAttributeFilters:C,removeAttributeFilter:s.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:p,removeNodeFilter:n.removeFilter,parse:(H,M={})=>{var P;const j=i.validate,$=null!==(P=M.context)&&void 0!==P?P:i.root_name,oe=((Me,qe,Qt="html")=>{const Ht="xhtml"===Qt?"application/xhtml+xml":"text/html",Lo=Vo(o.getSpecialElements(),qe.toLowerCase()),to=Lo?`<${qe}>${Me}</${qe}>`:Me,xn=c.parseFromString("xhtml"===Qt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${to}</body></html>`:`<body>${to}</body>`,Ht).body;return d(xn,Ht),Lo?xn.firstChild:xn})(H,$,M.format);nc(o,oe);const ie=new dc($,11);qb(ie,oe,o.getSpecialElements()),oe.innerHTML="";const[be,Se]=((Me,qe,Qt,Ht)=>{const Lo=Qt.validate,to=qe.getNonEmptyElements(),wn=qe.getWhitespaceElements(),xn=M_(N_("script,style,head,html,body,title,meta,param"),qe.getBlockElements()),ao=bo(qe),Mo=/[ \t\r\n]+/g,rn=/^[ \t\r\n]+/,Te=/[ \t\r\n]+$/,Re=bt=>{let vt=bt.parent;for(;ne(vt);){if(vt.name in wn)return!0;vt=vt.parent}return!1},st=bt=>bt.name in xn||w0(qe,bt),kt=(bt,vt)=>!ne(vt?bt.prev:bt.next)&&!eo(bt.parent)&&st(bt.parent)&&(bt.parent!==Me||!0===Ht.isRootContent);return[bt=>{var vt,Ro,fo;if(3===bt.type&&!Re(bt)){let qt=null!==(vt=bt.value)&&void 0!==vt?vt:"";qt=qt.replace(Mo," "),fo=st,(ne(Ro=bt.prev)&&(fo(Ro)||"br"===Ro.name)||kt(bt,!0))&&(qt=qt.replace(rn,"")),0===qt.length?bt.remove():bt.value=qt}},bt=>{var vt,fo,sn;if(1===bt.type){const qt=qe.getElementRule(bt.name);if(Lo&&qt){const Ro=Ip(qe,to,wn,bt);qt.paddInEmptyBlock&&Ro&&(fo=>{let sn=fo;for(;ne(sn);){if(sn.name in ao)return Ip(qe,to,wn,sn);sn=sn.parent}return!1})(bt)?Qy(Ht,st,bt):qt.removeEmpty&&Ro?st(bt)?bt.remove():bt.unwrap():qt.paddEmpty&&(Ro||_b(fo=bt,"#text")&&(null===(sn=fo?.firstChild)||void 0===sn?void 0:sn.value)===os)&&Qy(Ht,st,bt)}}else if(3===bt.type&&!Re(bt)){let qt=null!==(vt=bt.value)&&void 0!==vt?vt:"";(bt.next&&st(bt.next)||kt(bt,!1))&&(qt=qt.replace(Te,"")),0===qt.length?bt.remove():bt.value=qt}}]})(ie,o,i,M),ze=[],Je={nodes:{},attributes:{}},Ae=Me=>Jy(p(),C(),Me,Je);if(((Me,qe,Qt)=>{const Ht=[];for(let Lo=Me,to=Lo;Lo;to=Lo,Lo=Lo.walk()){const wn=Lo;Ue(qe,xn=>xn(wn)),eo(wn.parent)&&wn!==Me?Lo=to:Ht.push(wn)}for(let Lo=Ht.length-1;Lo>=0;Lo--){const to=Ht[Lo];Ue(Qt,wn=>wn(to))}})(ie,[be,Ae],[Se,j?Me=>{return Qt=ze,void(Hp(o,qe=Me)&&Qt.push(qe));var qe,Qt}:yo]),ze.reverse(),j&&ze.length>0)if(M.context){const{pass:Me,fail:qe}=en(ze,Qt=>Qt.parent===ie);e2(qe,o,ie,Ae),M.invalid=Me.length>0}else e2(ze,o,ie,Ae);const Pe=((Me,qe)=>{var Qt;const Ht=null!==(Qt=qe.forced_root_block)&&void 0!==Qt?Qt:Me.forced_root_block;return!1===Ht?"":!0===Ht?"p":Ht})(i,M);return Pe&&("body"===ie.name||M.isRootContent)&&((Me,qe)=>{const Qt=M_(N_("script,style,head,html,body,title,meta,param"),o.getBlockElements()),Ht=/^[ \t\r\n]+/,Lo=/[ \t\r\n]+$/;let to=Me.firstChild,wn=null;const xn=ao=>{var Mo,rn;ao&&(to=ao.firstChild,to&&3===to.type&&(to.value=null===(Mo=to.value)||void 0===Mo?void 0:Mo.replace(Ht,"")),to=ao.lastChild,to&&3===to.type&&(to.value=null===(rn=to.value)||void 0===rn?void 0:rn.replace(Lo,"")))};if(o.isValidChild(Me.name,qe.toLowerCase())){for(;to;){const ao=to.next;R(Qt,to)?(wn||(wn=new dc(qe,1),wn.attr(i.forced_root_block_attrs),Me.insert(wn,to)),wn.append(to)):(xn(wn),wn=null),to=ao}xn(wn)}})(ie,Pe),M.invalid||Cb(Je,M),ie}};return((t,o)=>{const n=t.schema;o.remove_trailing_brs&&L1(t,n),t.addAttributeFilter("href",i=>{let c=i.length;const d=u=>{const p=u?It.trim(u):"";return/\b(noopener)\b/g.test(p)?p:p.split(" ").filter(w=>w.length>0).concat(["noopener"]).sort().join(" ")};if(!o.allow_unsafe_link_target)for(;c--;){const u=i[c];"a"===u.name&&"_blank"===u.attr("target")&&u.attr("rel",d(u.attr("rel")))}}),o.allow_html_in_named_anchor||t.addAttributeFilter("id,name",i=>{let c,d,u,p,v=i.length;for(;v--;)if(p=i[v],"a"===p.name&&p.firstChild&&!p.attr("href"))for(u=p.parent,c=p.lastChild;c&&u;)d=c.prev,u.insert(c,p),c=d}),o.fix_list_elements&&t.addNodeFilter("ul,ol",i=>{let c,d,u=i.length;for(;u--;)if(c=i[u],d=c.parent,d&&("ul"===d.name||"ol"===d.name))if(c.prev&&"li"===c.prev.name)c.prev.append(c);else{const p=new dc("li",1);p.attr("style","list-style-type: none"),c.wrap(p)}});const s=n.getValidClasses();o.validate&&s&&t.addAttributeFilter("class",i=>{var c;let d=i.length;for(;d--;){const u=i[d],p=null!==(c=u.attr("class"))&&void 0!==c?c:"",v=It.explode(p," ");let w="";for(let C=0;C<v.length;C++){const O=v[C];let R=!1,A=s["*"];A&&A[O]&&(R=!0),A=s[u.name],!R&&A&&A[O]&&(R=!0),R&&(w&&(w+=" "),w+=O)}w.length||(w=null),u.attr("class",w)}}),((i,c)=>{const{blob_cache:d}=c;if(d){const u=p=>{const v=p.attr("src");var w;(w=p).attr("src")===er.transparentSrc||ne(w.attr("data-mce-placeholder"))||(w=>ne(w.attr("data-mce-bogus")))(p)||eo(v)||g3(d,v,!0).each(w=>{p.attr("src",w.blobUri())})};i.addAttributeFilter("src",p=>Ue(p,u))}})(t,o)})(A,i),(M=i).inline_styles&&((t,o,n)=>{var s;const i=Of();var c,d,u;o.convert_fonts_to_spans&&(c=t,d=i,u=It.explode(null!==(s=o.font_size_legacy_values)&&void 0!==s?s:""),c.addNodeFilter("font",p=>{Ue(p,v=>{const w=d.parse(v.attr("style")),C=v.attr("color"),O=v.attr("face"),R=v.attr("size");var A;C&&(w.color=C),O&&(w["font-family"]=O),R&&br(R).each(A=>{w["font-size"]=u[A-1]}),v.name="span",v.attr("style",d.serialize(w)),A=v,Ue(["color","face","size"],M=>{A.attr(M,null)})})})),((c,d,u)=>{c.addNodeFilter("strike",p=>{const v="html4"!==d.type;Ue(p,w=>{if(v)w.name="s";else{const C=u.parse(w.attr("style"));C["text-decoration"]="line-through",w.name="span",w.attr("style",u.serialize(C))}})})})(t,n,i)})(A,M,o),A;var M},k3=(t,o,n)=>{const s=nd(c=t)?vg({validate:!1}).serialize(c):c,i=o(s);var c;if(i.isDefaultPrevented())return i;if(nd(t)){if(i.content!==s){const c=F1({validate:!1,forced_root_block:!1,sanitize:n}).parse(i.content,{context:t.name});return{...i,content:c}}return{...i,content:t}}return i},_g=(t,o)=>{if(o.no_events)return Xs.value(o);{const n=t.dispatch("BeforeGetContent",o);return n.isDefaultPrevented()?Xs.error(lb(t,{content:"",...n}).content):Xs.value(n)}},x2=(t,o,n)=>n.no_events?o:k3(o,i=>lb(t,{...n,content:i}),mg(t)).content,C2=(t,o)=>{if(o.no_events)return Xs.value(o);{const n=k3(o.content,s=>{return i=t,c={...o,content:s},i.dispatch("BeforeSetContent",c);var i,c},mg(t));return n.isDefaultPrevented()?(w1(t,n),Xs.error(void 0)):Xs.value(n)}},Up=(t,o,n)=>{n.no_events||w1(t,{...n,content:o})},_2=(t,o,n)=>({element:t,width:o,rows:n}),S2=(t,o)=>({element:t,cells:o}),E3=(t,o)=>({x:t,y:o}),R_=(t,o)=>le(t,o).bind(br).getOr(1),D_=(t,o,n)=>{const s=t.rows;return!!(s[n]?s[n].cells:[])[o]},B_=t=>Jn(t,(o,n)=>n.cells.length>o?n.cells.length:o,0),O3=(t,o)=>{const n=t.rows;for(let s=0;s<n.length;s++){const i=n[s].cells;for(let c=0;c<i.length;c++)if(yr(i[c],o))return X.some(E3(c,s))}return X.none()},k2=(t,o,n,s,i)=>{const c=[],d=t.rows;for(let u=n;u<=i;u++){const p=d[u].cells,v=o<s?p.slice(o,s+1):p.slice(s,o+1);c.push(S2(d[u].element,v))}return c},Pl=t=>((o,n)=>{const s=Ou(o.element),i=vn("tbody");return V(i,n),Un(s,i),s})(t,Gt(t.rows,n=>{const s=Gt(n.cells,c=>{const d=sp(c);return Le(d,"colspan"),Le(d,"rowspan"),d}),i=Ou(n.element);return V(i,s),i})),Th=()=>vh([]),Im=(t,o)=>o>=0&&o<t.length&&Ee(t.charAt(o)),L_=t=>qc(t.innerText),I_=t=>ve(t)?t.outerHTML:tt(t)?Hi.encodeRaw(t.data,!1):Yn(t)?"\x3c!--"+t.data+"--\x3e":"",Gb=Pa(()=>document.implementation.createHTMLDocument("undo")),z1=t=>{const o=(n=t.getBody(),Yt(Gt(nr(n.childNodes),I_),c=>c.length>0));var n;const s=ks(o,c=>{const d=Ho(t.serializer,c);return d.length>0?[d]:[]}),i=s.join("");return-1!==i.indexOf("</iframe>")?{type:"fragmented",fragments:s,content:"",bookmark:null,beforeBookmark:null}:(c=>({type:"complete",fragments:null,content:c,bookmark:null,beforeBookmark:null}))(i)},O2=(t,o,n)=>{const s=n?o.beforeBookmark:o.bookmark;"fragmented"===o.type?((t,o)=>{((n,s)=>{let i=0;Ue(n,c=>{var d,u;0===c[0]?i++:1===c[0]?(((d,u,p)=>{const v=(w=>{let C;const O=document.createElement("div"),R=document.createDocumentFragment();for(w&&(O.innerHTML=w);C=O.firstChild;)R.appendChild(C);return R})(u);d.hasChildNodes()&&p<d.childNodes.length?d.insertBefore(v,d.childNodes[p]):d.appendChild(v)})(s,c[1],i),i++):2===c[0]&&(u=i,(d=s).hasChildNodes()&&u<d.childNodes.length&&d.removeChild(d.childNodes[u]))})})(((n,s)=>{const i=n.length+s.length+2,c=new Array(i),d=new Array(i),u=(C,O,R,A,H)=>{const M=v(C,O,R,A);if(null===M||M.start===O&&M.diag===O-A||M.end===C&&M.diag===C-R){let P=C,j=R;for(;P<O||j<A;)P<O&&j<A&&n[P]===s[j]?(H.push([0,n[P]]),++P,++j):O-C>A-R?(H.push([2,n[P]]),++P):(H.push([1,s[j]]),++j)}else{u(C,M.start,R,M.start-M.diag,H);for(let P=M.start;P<M.end;++P)H.push([0,n[P]]);u(M.end,O,M.end-M.diag,A,H)}},p=(C,O,R,A)=>{let H=C;for(;H-O<A&&H<R&&n[H]===s[H-O];)++H;return{start:C,end:H,diag:O}},v=(C,O,R,A)=>{const H=O-C,M=A-R;if(0===H||0===M)return null;const P=H-M,j=M+H,$=(j%2==0?j:j+1)/2;let oe,ie,be,Se,ze;for(c[1+$]=C,d[1+$]=O+1,oe=0;oe<=$;++oe){for(ie=-oe;ie<=oe;ie+=2){for(be=ie+$,c[be]=ie===-oe||ie!==oe&&c[be-1]<c[be+1]?c[be+1]:c[be-1]+1,Se=c[be],ze=Se-C+R-ie;Se<O&&ze<A&&n[Se]===s[ze];)c[be]=++Se,++ze;if(P%2!=0&&P-oe<=ie&&ie<=P+oe&&d[be-P]<=c[be])return p(d[be-P],ie+C-R,O,A)}for(ie=P-oe;ie<=P+oe;ie+=2){for(be=ie+$-P,d[be]=ie===P-oe||ie!==P+oe&&d[be+1]<=d[be-1]?d[be+1]-1:d[be-1],Se=d[be]-1,ze=Se-C+R-ie;Se>=C&&ze>=R&&n[Se]===s[ze];)d[be]=Se--,ze--;if(P%2==0&&-oe<=ie&&ie<=oe&&d[be]<=c[be+P])return p(d[be],ie+C-R,O,A)}}return null},w=[];return u(0,n.length,0,s.length,w),w})(Gt(nr(o.childNodes),I_),t),o)})(o.fragments,t.getBody()):t.setContent(o.content,{format:"raw",no_selection:!ne(s)||!g(s)||!s.isFakeCaret}),s&&(t.selection.moveToBookmark(s),t.selection.scrollIntoView())},H_=t=>"fragmented"===t.type?t.fragments.join(""):t.content,T2=t=>{const o=vn("body",Gb());return gt(o,H_(t)),Ue(W(o,"*[data-mce-bogus]"),se),Fe(o)},Kb=(t,o)=>{return!(!t||!o)&&(s=o,!(H_(t)!==H_(s))||((n,s)=>T2(n)===T2(s))(t,o));var s},A2=t=>0===t.get(),Xb=(t,o,n)=>{A2(n)&&(t.typing=o)},N3=(t,o)=>{t.typing&&(Xb(t,!1,o),t.add())},Ku=t=>({init:{bindEvents:yo},undoManager:{beforeChange:(o,n)=>{return s=t,c=n,void(A2(o)&&c.set(Vf(s.selection)));var s,c},add:(o,n,s,i,c,d)=>((u,p,v,w,C,O,R)=>{const A=z1(u),H=It.extend(O||{},A);if(!A2(w)||u.removed)return null;const M=p.data[v.get()];if(u.dispatch("BeforeAddUndo",{level:H,lastLevel:M,originalEvent:R}).isDefaultPrevented()||M&&Kb(M,H))return null;p.data[v.get()]&&C.get().each($=>{p.data[v.get()].beforeBookmark=$});const P=km(u);if(P&&p.data.length>P){for(let $=0;$<p.data.length-1;$++)p.data[$]=p.data[$+1];p.data.length--,v.set(p.data.length)}H.bookmark=Vf(u.selection),v.get()<p.data.length-1&&(p.data.length=v.get()+1),p.data.push(H),v.set(p.data.length-1);const j={level:H,lastLevel:M,originalEvent:R};return v.get()>0?(u.setDirty(!0),u.dispatch("AddUndo",j),u.dispatch("change",j)):u.dispatch("AddUndo",j),H})(t,o,n,s,i,c,d),undo:(o,n,s)=>((i,c,d,u)=>{let p;return c.typing&&(c.add(),c.typing=!1,Xb(c,!1,d)),u.get()>0&&(u.set(u.get()-1),p=c.data[u.get()],O2(i,p,!0),i.setDirty(!0),i.dispatch("Undo",{level:p})),p})(t,o,n,s),redo:(o,n)=>((s,i,c)=>{let d;return i.get()<c.length-1&&(i.set(i.get()+1),d=c[i.get()],O2(s,d,!1),s.setDirty(!0),s.dispatch("Redo",{level:d})),d})(t,o,n),clear:(o,n)=>{return s=t,c=n,(i=o).data=[],c.set(0),i.typing=!1,void s.dispatch("ClearUndos");var s,i,c},reset:o=>{return(n=o).clear(),void n.add();var n},hasUndo:(o,n)=>{return s=t,i=o,n.get()>0||i.typing&&i.data[0]&&!Kb(z1(s),i.data[0]);var s,i},hasRedo:(o,n)=>{return s=o,n.get()<s.data.length-1&&!s.typing;var s},transact:(o,n,s)=>{return d=s,N3(i=o,n),i.beforeChange(),i.ignore(d),i.add();var i,d},ignore:(o,n)=>((s,i)=>{try{s.set(s.get()+1),i()}finally{s.set(s.get()-1)}})(o,n),extra:(o,n,s,i)=>((c,d,u,p,v)=>{if(d.transact(p)){const w=d.data[u.get()].bookmark,C=d.data[u.get()-1];O2(c,C,!0),d.transact(v)&&(d.data[u.get()-1].beforeBookmark=w)}})(t,o,n,s,i)},formatter:{match:(o,n,s,i)=>r2(t,o,n,s,i),matchAll:(o,n)=>((s,i,c)=>{const d=[],u={},p=s.selection.getStart();return s.dom.getParent(p,v=>{for(let w=0;w<i.length;w++){const C=i[w];!u[C]&&Uu(s,v,C,c)&&(u[C]=!0,d.push(C))}},s.dom.getRoot()),d})(t,o,n),matchNode:(o,n,s,i)=>Uu(t,o,n,s,i),canApply:o=>((n,s)=>{const i=n.formatter.get(s),c=n.dom;if(i&&n.selection.isEditable()){const d=n.selection.getStart(),u=_y(c,d);for(let p=i.length-1;p>=0;p--){const v=i[p];if(!Qc(v))return!0;for(let w=u.length-1;w>=0;w--)if(c.is(u[w],v.selector))return!0}}return!1})(t,o),closest:o=>((n,s)=>{const i=c=>yr(c,fe(n.getBody()));return X.from(n.selection.getStart(!0)).bind(c=>$C(fe(c),d=>Di(s,u=>{return Uu(n,d.dom,v=u)?X.some(v):X.none();var v}),i)).getOrNull()})(t,o),apply:(o,n,s)=>Sd(t,o,n,s),remove:(o,n,s,i)=>Hb(t,o,n,s,i),toggle:(o,n,s)=>((i,c,d,u)=>{const p=i.formatter.get(c);p&&(!r2(i,c,d,u)||"toggle"in p[0]&&!p[0].toggle?Sd(i,c,d,u):Hb(i,c,d,u))})(t,o,n,s),formatChanged:(o,n,s,i,c)=>{return((O,R,A,H,M,P)=>{const j=R.get();Ue(A.split(","),$=>{const oe=Nn(j,$).getOrThunk(()=>{const be={withSimilar:{state:Za(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Za(!1),similar:!1,callbacks:[]},withVars:[]};return j[$]=be,be}),ie=()=>{const be=u2(O);return d2(O,be,$,M,P).isSome()};if(Ft(P)){const be=M?oe.withSimilar:oe.withoutSimilar;be.callbacks.push(H),1===be.callbacks.length&&be.state.set(ie())}else oe.withVars.push({state:Za(ie()),similar:M,vars:P,callback:H})}),R.set(j)})(t,u=o,p=n,v=s,i,c),{unbind:()=>((O,R,A)=>{const H=O.get();Ue(R.split(","),M=>Nn(H,M).each(P=>{H[M]={withSimilar:{...P.withSimilar,callbacks:Yt(P.withSimilar.callbacks,j=>j!==A)},withoutSimilar:{...P.withoutSimilar,callbacks:Yt(P.withoutSimilar.callbacks,j=>j!==A)},withVars:Yt(P.withVars,j=>j.callback!==A)}})),O.set(H)})(u,p,v)};var u,p,v}},editor:{getContent:o=>{return s=o,X.from((n=t).getBody()).fold(ot("tree"===s.format?new dc("body",11):""),i=>((t,o,n)=>{let s;return s="raw"===o.format?It.trim(V4(t.serializer,n.innerHTML)):"text"===o.format?((i,c)=>{const d=i.getDoc(),u=ds(fe(i.getBody())),p=vn("div",d);vr(p,"data-mce-bogus","all"),ec(p,{position:"fixed",left:"-9999999px",top:"0"}),gt(p,c.innerHTML),aC(p),Z4(p);const v=Ol(C=u)?C:fe(El(C).dom.body);var C;Un(v,p);const w=qc(p.dom.innerText);return G(p),w})(t,n):"tree"===o.format?t.serializer.serialize(n,o):((i,c)=>{const d=yl(i),u=new RegExp(`^(<${d}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${d}>[\r\n]*|<br \\/>[\r\n]*)$`);return c.replace(u,"")})(t,t.serializer.serialize(n,o)),"text"!==o.format&&!Io(fe(n))&&uo(s)?It.trim(s):s})(n,s,i));var n,s},setContent:(o,n)=>{return i=o,c=n,X.from((s=t).getBody()).map(d=>nd(i)?((u,p,v,w)=>{VC(u.parser.getNodeFilters(),u.parser.getAttributeFilters(),v);const C=vg({validate:!1},u.schema).serialize(v),O=Io(fe(p))?C:It.trim(C);return Tb(u,O,w.no_selection),{content:v,html:O}})(s,d,i,c):((u,p,v,w)=>{if(0===v.length||/^\s+$/.test(v)){const C='<br data-mce-bogus="1">';"TABLE"===p.nodeName?v="<tr><td>"+C+"</td></tr>":/^(UL|OL)$/.test(p.nodeName)&&(v="<li>"+C+"</li>");const O=yl(u);return u.schema.isValidChild(p.nodeName.toLowerCase(),O.toLowerCase())?(v=C,v=u.dom.createHTML(O,Ki(u),v)):v||(v=C),Tb(u,v,w.no_selection),{content:v,html:v}}{"raw"!==w.format&&(v=vg({validate:!1},u.schema).serialize(u.parser.parse(v,{isRootContent:!0,insert:!0})));const C=Io(fe(p))?v:It.trim(v);return Tb(u,C,w.no_selection),{content:C,html:C}}})(s,d,i,c)).getOr({content:i,html:nd(c.content)?"":c.content});var s,i,c},insertContent:(o,n)=>UC(t,o,n),addVisual:o=>((n,s)=>{const i=n.dom,c=ne(s)?s:n.getBody();Ue(i.select("table,a",c),d=>{switch(d.nodeName){case"TABLE":const u=o1(n),p=i.getAttrib(d,"border");p&&"0"!==p||!n.hasVisual?i.removeClass(d,u):i.addClass(d,u);break;case"A":if(!i.getAttrib(d,"href")){const v=i.getAttrib(d,"name")||d.id,w=dy(n);v&&n.hasVisual?i.addClass(d,w):i.removeClass(d,w)}}}),n.dispatch("VisualAid",{element:s,hasVisual:n.hasVisual})})(t,o)},selection:{getContent:(o,n)=>((s,i,c={})=>{const d=(u=c,p=i,{...u,format:p,get:!0,selection:!0,getInner:!0});var u,p;return _g(s,d).fold(mn,u=>{const p=((v,w)=>{if("text"===w.format)return X.from((C=v).selection.getRng()).map(O=>{var R;const A=X.from(C.dom.getParent(O.commonAncestorContainer,C.dom.isBlock)),H=C.getBody(),M=A.map(be=>be.nodeName).getOr("div").toLowerCase(),P=fe(O.cloneContents());aC(P),Z4(P);const j=C.dom.add(H,M,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},P.dom),$=L_(j),oe=qc(null!==(R=j.textContent)&&void 0!==R?R:"");if(C.dom.remove(j),Im(oe,0)||Im(oe,oe.length-1)){const ie=A.getOr(H),be=L_(ie),Se=be.indexOf($);return-1===Se?$:(Im(be,Se-1)?" ":"")+$+(Im(be,Se+$.length)?" ":"")}return $}).getOr("");var C;{const C=((O,R)=>{const A=O.selection.getRng(),H=O.dom.create("body"),M=O.selection.getSel(),P=sC(O,no(M)),j=R.contextual?((t,o)=>{const n=$o(o,t);return n.length>0?((t,o)=>{return(n=t,s=o[0],Al(s,"table",mt(yr,n))).bind(n=>{const s=o[0],i=o[o.length-1],c=(d=>{const u=_2(Ou(d),0,[]);return Ue(W(d,"tr"),(p,v)=>{Ue(W(p,"td,th"),(w,C)=>{((O,R,A,H,M)=>{const P=R_(M,"rowspan"),j=R_(M,"colspan"),$=O.rows;for(let oe=A;oe<A+P;oe++){$[oe]||($[oe]=S2(sp(H),[]));for(let ie=R;ie<R+j;ie++)$[oe].cells[ie]=oe===A&&ie===R?M:Ou(M)}})(u,((O,R,A)=>{for(;D_(O,R,A);)R++;return R})(u,C,v),v,p,w)})}),_2(u.element,B_(u.rows),u.rows)})(n);return(d=c,u=s,p=i,O3(d,u).bind(v=>O3(d,p).map(w=>((C,O,R)=>{const A=O.x,H=O.y,M=R.x,P=R.y,j=H<P?k2(C,A,H,M,P):k2(C,A,P,M,H);return _2(C.element,B_(j),j)})(d,v,w)))).map(d=>vh([Pl(d)]));var d,u,p}).getOrThunk(Th);var n,s})(t,n):(s=t,(i=o).length>0&&i[0].collapsed?Th():(c=s,((u,p)=>{const v=Jn(p,(w,C)=>(Un(C,w),C),u);return p.length>0?vh([v]):v})(fe((d=i[0]).cloneContents()),((t,o)=>{const n=fe(o.commonAncestorContainer),s=Bm(n,t),i=Yt(s,vu),c=(p=o,or(u=s,v=>"li"===Er(v)&&yn(v,p)).fold(ot([]),v=>{return(w=u,or(w,C=>"ul"===Er(C)||"ol"===Er(C))).map(w=>{const C=vn(Er(w)),O=bs(yc(w),(R,A)=>Wt(A,"list-style"));return ec(C,O),[vn("li"),C]}).getOr([]);var w})),d=i.concat(c.length?c:(u=>Gs(u)?Wi(u).filter(mi).fold(ot([]),p=>[u,p]):mi(u)?[u]:[])(n));var u,p;return Gt(d,Ou)})(c,d))));var s,i,c,d})(fe(O.getBody()),P).dom:A.cloneContents();return j&&H.appendChild(j),O.selection.serializer.serialize(H,R)})(v,w);return"tree"===w.format?C:v.selection.isCollapsed()?"":C}})(s,u);return x2(s,p,u)})})(t,o,n)},autocompleter:{addDecoration:o=>((t,o)=>{if(P4(fe(t.getBody())).isNone()){const s=bn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Un(s,fe(o.extractContents())),o.insertNode(s.dom),Wi(s).each(i=>i.dom.normalize()),(n=s,((i,c)=>{const d=u=>{const p=ss(u);for(let v=p.length-1;v>=0;v--){const w=p[v];if(c(w))return X.some(w);const C=d(w);if(C.isSome())return C}return X.none()};return d(i)})(n,I4)).map(i=>{var c;t.selection.setCursorLocation(i.dom,"img"===Er(c=i)?1:Pd(c).fold(()=>ss(c).length,d=>d.length))})}var n})(t,o),removeDecoration:()=>{return o=t,n=fe(t.getBody()),P4(n).each(s=>{const i=o.selection.getBookmark();se(s),o.selection.moveToBookmark(i)});var o,n}},raw:{getModel:()=>X.none()}}),su=t=>Vo(t.plugins,"rtc"),N2=t=>t.rtcInstance?t.rtcInstance:Ku(t),qa=t=>{const o=t.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},V1=t=>qa(t).init.bindEvents(),M3=t=>0===t.dom.length?(G(t),X.none()):X.some(t),R3=(t,o,n,s)=>{t.bind(i=>((s?zy:Fy)(i.dom,s?i.dom.length:0),o.filter(Kn).map(c=>((d,u,p,v)=>{const w=d.dom,C=u.dom,O=v?w.length:C.length;v?(bb(w,C,!1,!v),p.setStart(C,O)):(bb(C,w,!1,!v),p.setEnd(C,O))})(i,c,n,s)))).orThunk(()=>{return(c=o,d=s,c.filter(u=>Jd.isBookmarkNode(u.dom)).bind(d?jc:Ci)).or(o).filter(Kn).map(c=>((d,u)=>{Wi(d).each(p=>{const v=d.dom;u&&E1(p,rt(v,0))?Fy(v,0):!u&&Qi(p,rt(v,v.length))&&zy(v,v.length)})})(c,s));var c,d})},P_=(t,o,n)=>{if(Vo(t,o)){const s=Yt(t[o],i=>i!==n);0===s.length?delete t[o]:t[o]=s}},F_=t=>!(!t||!t.ownerDocument)&&hl(fe(t.ownerDocument),fe(t)),M2=(t,o,n,s)=>{let i,c;const{selectorChangedWithUnbind:d}=((M,P)=>{let j,$;const oe=(be,Se)=>or(Se,ze=>M.is(ze,be)),ie=be=>M.getParents(be,void 0,M.getRoot());return{selectorChangedWithUnbind:(be,Se)=>(j||(j={},$={},P.on("NodeChange",ze=>{const at=ze.element,Je=ie(at),Ae={};Ao(j,(Pe,Me)=>{oe(Me,Je).each(qe=>{$[Me]||(Ue(Pe,Qt=>{Qt(!0,{node:qe,selector:Me,parents:Je})}),$[Me]=Pe),Ae[Me]=Pe})}),Ao($,(Pe,Me)=>{Ae[Me]||(delete $[Me],Ue(Pe,qe=>{qe(!1,{node:at,selector:Me,parents:Je})}))})})),j[be]||(j[be]=[]),j[be].push(Se),oe(be,ie(P.selection.getStart())).each(()=>{$[be]=j[be]}),{unbind:()=>{P_(j,be,Se),P_($,be,Se)}})}})(t,s),u=(M,P)=>((j,$,oe={})=>{const ie=(be=oe,Se=$,{format:"html",...be,set:!0,selection:!0,content:Se});var be,Se;C2(j,ie).each(be=>{const Se=((at,Je)=>{if("raw"!==Je.format){const Ae=at.selection.getRng(),Pe=at.dom.getParent(Ae.commonAncestorContainer,at.dom.isBlock),Me=Pe?{context:Pe.nodeName.toLowerCase()}:{},qe=at.parser.parse(Je.content,{forced_root_block:!1,...Me,...Je});return vg({validate:!1},at.schema).serialize(qe)}return Je.content})(j,be),ze=j.selection.getRng();((at,Je)=>{const Ae=X.from(Je.firstChild).map(fe),Pe=X.from(Je.lastChild).map(fe);at.deleteContents(),at.insertNode(Je);const Me=Ae.bind(Ci).filter(Kn).bind(M3),qe=Pe.bind(jc).filter(Kn).bind(M3);R3(Me,Ae,at,!0),R3(qe,Pe,at,!1),at.collapse(!1)})(ze,ze.createContextualFragment(Se)),j.selection.setRng(ze),yh(j,ze),Up(j,Se,be)})})(s,M,P),p=M=>{const P=w();P.collapse(!!M),C(P)},v=()=>o.getSelection?o.getSelection():o.document.selection,w=()=>{let M;const P=($,oe,ie)=>{try{return oe.compareBoundaryPoints($,ie)}catch{return-1}},j=o.document;if(ne(s.bookmark)&&!Bp(s)){const $=Ly(s);if($.isSome())return $.map(oe=>sC(s,[oe])[0]).getOr(j.createRange())}try{const $=v();$&&!Ve($.anchorNode)&&(M=$.rangeCount>0?$.getRangeAt(0):j.createRange(),M=sC(s,[M])[0])}catch{}if(M||(M=j.createRange()),wr(M.startContainer)&&M.collapsed){const $=t.getRoot();M.setStart($,0),M.setEnd($,0)}return i&&c&&(0===P(M.START_TO_START,M,i)&&0===P(M.END_TO_END,M,i)?M=c:(i=null,c=null)),M},C=(M,P)=>{if(!(($=M)&&F_($.startContainer)&&F_($.endContainer)))return;var $;const j=v();if(M=s.dispatch("SetSelectionRange",{range:M,forward:P}).range,j){c=M;try{j.removeAllRanges(),j.addRange(M)}catch{}!1===P&&j.extend&&(j.collapse(M.endContainer,M.endOffset),j.extend(M.startContainer,M.startOffset)),i=j.rangeCount>0?j.getRangeAt(0):null}if(!M.collapsed&&M.startContainer===M.endContainer&&j?.setBaseAndExtent&&M.endOffset-M.startOffset<2&&M.startContainer.hasChildNodes()){const $=M.startContainer.childNodes[M.startOffset];$&&"IMG"===$.nodeName&&(j.setBaseAndExtent(M.startContainer,M.startOffset,M.endContainer,M.endOffset),j.anchorNode===M.startContainer&&j.focusNode===M.endContainer||j.setBaseAndExtent($,0,$,1))}s.dispatch("AfterSetSelectionRange",{range:M,forward:P})},O=()=>{const M=v(),P=M?.anchorNode,j=M?.focusNode;if(!M||!P||!j||Ve(P)||Ve(j))return!0;const $=t.createRng(),oe=t.createRng();try{$.setStart(P,M.anchorOffset),$.collapse(!0),oe.setStart(j,M.focusOffset),oe.collapse(!0)}catch{return!0}return $.compareBoundaryPoints($.START_TO_START,oe)<=0},R={dom:t,win:o,serializer:n,editor:s,expand:(M={type:"word"})=>C(Dm(t).expand(w(),M)),collapse:p,setCursorLocation:(M,P)=>{const j=t.createRng();ne(M)&&ne(P)?(j.setStart(M,P),j.setEnd(M,P),C(j),p(!1)):(Vr(t,j,s.getBody(),!0),C(j))},getContent:M=>((P,j={})=>{return oe=j.format?j.format:"html",ie=j,qa(P).selection.getContent(oe,ie);var oe,ie})(s,M),setContent:u,getBookmark:(M,P)=>A.getBookmark(M,P),moveToBookmark:M=>A.moveToBookmark(M),select:(M,P)=>{return(j=t,$=M,oe=P,X.from($).bind(ie=>X.from(ie.parentNode).map(be=>{const Se=j.nodeIndex(ie),ze=j.createRng();return ze.setStart(be,Se),ze.setEnd(be,Se+1),oe&&(Vr(j,ze,ie,!0),Vr(j,ze,ie,!1)),ze}))).each(C),M;var j,$,oe},isCollapsed:()=>{const M=w(),P=v();return!(!M||M.item)&&(M.compareEndPoints?0===M.compareEndPoints("StartToEnd",M):!P||M.collapsed)},isEditable:()=>{const M=w(),P=s.getBody().querySelectorAll('[data-mce-selected="1"]');return P.length>0?qr(P,j=>t.isEditable(j.parentElement)):M.startContainer===M.endContainer?t.isEditable(M.startContainer):t.isEditable(M.startContainer)&&t.isEditable(M.endContainer)},isForward:O,setNode:M=>(u(t.getOuterHTML(M)),M),getNode:()=>((M,P)=>{if(!P)return M;let j=P.startContainer,$=P.endContainer;const oe=P.startOffset,ie=P.endOffset;let be=P.commonAncestorContainer;P.collapsed||(j===$&&ie-oe<2&&j.hasChildNodes()&&(be=j.childNodes[oe]),tt(j)&&tt($)&&(j=j.length===oe?rC(j.nextSibling,!0):j.parentNode,$=0===ie?rC($.previousSibling,!1):$.parentNode,j&&j===$&&(be=j)));const Se=tt(be)?be.parentNode:be;return ve(Se)?Se:M})(s.getBody(),w()),getSel:v,setRng:C,getRng:w,getStart:M=>L4(s.getBody(),w(),M),getEnd:M=>nC(s.getBody(),w(),M),getSelectedBlocks:(M,P)=>((j,$,oe,ie)=>{const be=[],Se=j.getRoot(),ze=j.getParent(oe||L4(Se,$,$.collapsed),j.isBlock),at=j.getParent(ie||nC(Se,$,$.collapsed),j.isBlock);if(ze&&ze!==Se&&be.push(ze),ze&&at&&ze!==at){let Je;const Ae=new F(ze,Se);for(;(Je=Ae.next())&&Je!==at;)j.isBlock(Je)&&be.push(Je)}return at&&ze!==at&&at!==Se&&be.push(at),be})(t,w(),M,P),normalize:()=>{const M=w(),P=v();if(!(no(P).length>1)&&En(s)){const j=db(t,M);return j.each($=>{C($,O())}),j.getOr(M)}return M},selectorChanged:(M,P)=>(d(M,P),R),selectorChangedWithUnbind:d,getScrollContainer:()=>{let M,P=t.getRoot();for(;P&&"BODY"!==P.nodeName;){if(P.scrollHeight>P.clientHeight){M=P;break}P=P.parentNode}return M},scrollIntoView:(M,P)=>{var j;ne(M)?((j=s).inline?UT:N4)(j,M,P):yh(s,w(),P)},placeCaretAt:(M,P)=>C(Zx(M,P,s.getDoc())),getBoundingClientRect:()=>{const M=w();return M.collapsed?rt.fromRangeStart(M).getClientRects()[0]:M.getBoundingClientRect()},destroy:()=>{o=i=c=null,H.destroy()}},A=Jd(R),H=Qd(R,s);return R.bookmarkManager=A,R.controlSelection=H,R},D3=(t,o,n)=>{-1===It.inArray(o,n)&&(t.addAttributeFilter(n,(s,i)=>{let c=s.length;for(;c--;)s[c].attr(i,null)}),o.push(n))},R2=(t,o)=>{const n=((t,o)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,...t},i=o&&o.dom?o.dom:ws.DOM,c=o&&o.schema?o.schema:ku(s),d=F1(s,c);return p=s,v=i,(u=d).addAttributeFilter("data-mce-tabindex",(w,C)=>{let O=w.length;for(;O--;){const R=w[O];R.attr("tabindex",R.attr("data-mce-tabindex")),R.attr(C,null)}}),u.addAttributeFilter("src,href,style",(w,C)=>{const O="data-mce-"+C,R=p.url_converter,A=p.url_converter_scope;let H=w.length;for(;H--;){const M=w[H];let P=M.attr(O);void 0!==P?(M.attr(C,P.length>0?P:null),M.attr(O,null)):(P=M.attr(C),"style"===C?P=v.serializeStyle(v.parseStyle(P),M.name):R&&(P=R.call(A,P,C,M.name)),M.attr(C,P.length>0?P:null))}}),u.addAttributeFilter("class",w=>{let C=w.length;for(;C--;){const O=w[C];let R=O.attr("class");R&&(R=R.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),O.attr("class",R.length>0?R:null))}}),u.addAttributeFilter("data-mce-type",(w,C,O)=>{let R=w.length;for(;R--;){const A=w[R];"bookmark"===A.attr("data-mce-type")&&!O.cleanup&&(X.from(A.firstChild).exists(M=>{var P;return!sm(null!==(P=M.value)&&void 0!==P?P:"")})?A.unwrap():A.remove())}}),u.addNodeFilter("noscript",w=>{var C;let O=w.length;for(;O--;){const R=w[O].firstChild;R&&(R.value=Hi.decode(null!==(C=R.value)&&void 0!==C?C:""))}}),u.addNodeFilter("script,style",(w,C)=>{var O;const R=H=>H.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let A=w.length;for(;A--;){const H=w[A],M=H.firstChild,P=null!==(O=M?.value)&&void 0!==O?O:"";if("script"===C){const j=H.attr("type");j&&H.attr("type","mce-no/type"===j?null:j.replace(/^mce\-/,"")),"xhtml"===p.element_format&&M&&P.length>0&&(M.value="// <![CDATA[\n"+R(P)+"\n// ]]>")}else"xhtml"===p.element_format&&M&&P.length>0&&(M.value="\x3c!--\n"+R(P)+"\n--\x3e")}}),u.addNodeFilter("#comment",w=>{let C=w.length;for(;C--;){const O=w[C],R=O.value;p.preserve_cdata&&0===R?.indexOf("[CDATA[")?(O.name="#cdata",O.type=4,O.value=v.decode(R.replace(/^\[CDATA\[|\]\]$/g,""))):0===R?.indexOf("mce:protected ")&&(O.name="#text",O.type=3,O.raw=!0,O.value=unescape(R).substr(14))}}),u.addNodeFilter("xml:namespace,input",(w,C)=>{let O=w.length;for(;O--;){const R=w[O];7===R.type?R.remove():1===R.type&&("input"!==C||R.attr("type")||R.attr("type","text"))}}),u.addAttributeFilter("data-mce-type",w=>{Ue(w,C=>{"format-caret"===C.attr("data-mce-type")&&(C.isEmpty(u.schema.getNonEmptyElements())?C.remove():C.unwrap())})}),u.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(w,C)=>{let O=w.length;for(;O--;)w[O].attr(C,null)}),p.remove_trailing_brs&&L1(u,u.schema),{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(u,p={})=>{const v={format:"html",...p},w=(A=u,P=H=v,ne(M=R=o)&&M.hasEventListeners("PreProcess")&&!P.no_events?((M,P,j)=>{let $;const oe=M.dom;let ie=P.cloneNode(!0);const be=document.implementation;if(be.createHTMLDocument){const Se=be.createHTMLDocument("");It.each("BODY"===ie.nodeName?ie.childNodes:[ie],ze=>{Se.body.appendChild(Se.importNode(ze,!0))}),ie="BODY"!==ie.nodeName?Se.body.firstChild:Se.body,$=oe.doc,oe.doc=Se}return ze={...j,node:ie},M.dispatch("PreProcess",ze),$&&(oe.doc=$),ie;var ze})(R,A,H):A),C=((R,A,H)=>{const M=qc(H.getInner?A.innerHTML:R.getOuterHTML(A));return H.selection||Io(fe(A))?M:It.trim(M)})(i,w,v),O=((R,A,H)=>{const M=H.selection?{forced_root_block:!1,...H}:H,P=R.parse(A,M);return(j=>{const $=ie=>"br"===ie?.name,oe=j.lastChild;if($(oe)){const ie=oe.prev;$(ie)&&(oe.remove(),ie.remove())}})(P),P})(d,C,v);var R,A,H,M,P;return"tree"===v.format?O:((R,A,H,M,P)=>{var ie;return(($,oe,ie)=>{return!oe.no_events&&$?(Se=$,ze={...oe,content:ie},Se.dispatch("PostProcess",ze)).content:ie;var Se,ze})(R,P,(ie=M,vg(A,H).serialize(ie)))})(o,s,c,O,v)},addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:mt(D3,d,n),getTempAttrs:ot(n),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var u,p,v})(t,o);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},D2=(t,o,n={})=>{const s=(i=n,c=o,{format:"html",...i,set:!0,content:c});var i,c;return C2(t,s).map(i=>{const c=(u=i.content,p=i,N2(t).editor.setContent(u,p));var u,p;return Up(t,c.html,i),c.content}).getOr(o)},L3="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),I3="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),H3="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),B2=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],P3=(t,o)=>{const n=Yt(o,s=>Vo(t,s));return _r(n)},z_=(t,o)=>{const n=It.makeMap(t.plugins," "),s=Yt(o,i=>Vo(n,i));return _r(s)},z3=t=>or(B2,o=>o.name===t).fold(()=>t,o=>o.replacedWith?`${t}, replaced by ${o.replacedWith}`:t),I2=ws.DOM,Yb=t=>X.from(t).each(o=>o.destroy()),H2=(()=>{const t={};return{add:(o,n)=>{t[o]=n},get:o=>t[o]?t[o]:{icons:{}},has:o=>Vo(t,o)}})(),Z1=Ei.ModelManager,V3=(t,o)=>o.dom[t],pa=(t,o)=>parseInt(Nl(o,t),10),V_=mt(V3,"clientWidth"),_A=mt(V3,"clientHeight"),SA=mt(pa,"margin-top"),j1=mt(pa,"margin-left"),Sg=t=>{const o=[],n=()=>{const p=t.theme;return p&&p.getNotificationManagerImpl?p.getNotificationManagerImpl():(()=>{const v=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:v,close:v,getArgs:v}})()},s=()=>X.from(o[0]),i=()=>{Ue(o,p=>{p.reposition()})},c=p=>{Ps(o,v=>v===p).each(v=>{o.splice(v,1)})},d=(p,v=!0)=>{return t.removed||!(C=(w=t).inline?w.getBody():w.getContentAreaContainer(),X.from(C).map(fe)).map(md).getOr(!1)?{}:(v&&t.dispatch("BeforeOpenNotification",{notification:p}),or(o,w=>{return!((C=n().getArgs(w)).type!==(O=p).type||C.text!==O.text||C.progressBar||C.timeout||O.progressBar||O.timeout);var C,O}).getOrThunk(()=>{t.editorManager.setActive(t);const w=n().open(p,()=>{c(w),i(),s().fold(()=>t.focus(),C=>M4(fe(C.getEl())))});return(C=>{o.push(C)})(w),i(),t.dispatch("OpenNotification",{notification:{...w}}),w}));var w,C},u=ot(o);return(p=t).on("SkinLoaded",()=>{const v=gp(p);v&&d({text:v,type:"warning",timeout:0},!1),i()}),p.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),p.on("remove",()=>{Ue(o.slice(),v=>{n().close(v)})}),{open:d,close:()=>{s().each(p=>{n().close(p),c(p),i()})},getNotifications:u};var p},rd=Ei.PluginManager,Ah=Ei.ThemeManager,Z_=t=>{let o=[];const n=()=>{const d=t.theme;return d&&d.getWindowManagerImpl?d.getWindowManagerImpl():(()=>{const u=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:u,openUrl:u,alert:u,confirm:u,close:u}})()},s=(d,u)=>(...p)=>u?u.apply(d,p):void 0,i=d=>{t.dispatch("CloseWindow",{dialog:d}),o=Yt(o,u=>u!==d),0===o.length&&t.focus()},c=d=>{t.editorManager.setActive(t),By(t),t.ui.show();const u=d();return o.push(p=u),t.dispatch("OpenWindow",{dialog:p}),u;var p};return t.on("remove",()=>{Ue(o,d=>{n().close(d)})}),{open:(d,u)=>c(()=>n().open(d,u,i)),openUrl:d=>c(()=>n().openUrl(d,i)),alert:(d,u,p)=>{const v=n();v.alert(d,s(p||v,u))},confirm:(d,u,p)=>{const v=n();v.confirm(d,s(p||v,u))},close:()=>{X.from(o[o.length-1]).each(d=>{n().close(d),i(d)})}}},j_=(t,o)=>{t.notificationManager.open({type:"error",text:o})},Wp=(t,o)=>{t._skinLoaded?j_(t,o):t.on("SkinLoaded",()=>{j_(t,o)})},Jb=(t,o,n)=>{ab(t,o,{message:n}),console.error(n)},$p=(t,o,n)=>n?`Failed to load ${t}: ${n} from url ${o}`:`Failed to load ${t} url: ${o}`,Qb=(t,...o)=>{const n=window.console;n&&(n.error?n.error(t,...o):n.log(t,...o))},U_=(t,o)=>{const n=t.editorManager.baseURL+"/skins/content",s=`content${t.editorManager.suffix}.css`;return Gt(o,i=>/^[a-z0-9\-]+$/i.test(i)&&!t.inline?`${n}/${i}/${s}`:t.documentBaseURI.toAbsolute(i))},$_=()=>{let t={};const o=(s,i)=>({status:s,resultUri:i}),n=s=>s in t;return{hasBlobUri:n,getResultUri:s=>{const i=t[s];return i?i.resultUri:null},isPending:s=>!!n(s)&&1===t[s].status,isUploaded:s=>!!n(s)&&2===t[s].status,markPending:s=>{t[s]=o(1,null)},markUploaded:(s,i)=>{t[s]=o(2,i)},removeFailed:s=>{delete t[s]},destroy:()=>{t={}}}};let q_=0;const Z3=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),sd=(t,o)=>((t,o)=>{const n={},s=(p,v)=>new Promise((w,C)=>{const O=new XMLHttpRequest;O.open("POST",o.url),O.withCredentials=o.credentials,O.upload.onprogress=A=>{v(A.loaded/A.total*100)},O.onerror=()=>{C("Image upload failed due to a XHR Transport error. Code: "+O.status)},O.onload=()=>{if(O.status<200||O.status>=300)return void C("HTTP Error: "+O.status);const A=JSON.parse(O.responseText);var H,M;A&&uo(A.location)?w((M=A.location,(H=o.basePath)?H.replace(/\/$/,"")+"/"+M.replace(/^\//,""):M)):C("Invalid JSON: "+O.responseText)};const R=new FormData;R.append("file",p.blob(),p.filename()),O.send(R)}),i=it(o.handler)?o.handler:s,c=(p,v)=>({url:v,blobInfo:p,status:!0}),d=(p,v)=>({url:"",blobInfo:p,status:!1,error:v}),u=(p,v)=>{It.each(n[p],w=>{w(v)}),delete n[p]};return{upload:(p,v)=>{return o.url||i!==s?(C=v,w=It.grep(w=p,O=>!t.isUploaded(O.blobUri())),Promise.all(It.map(w,O=>{return t.isPending(O.blobUri())?(R=>{const A=R.blobUri();return new Promise(H=>{n[A]=n[A]||[],n[A].push(H)})})(O):(A=i,H=C,t.markPending((R=O).blobUri()),new Promise(M=>{let P,j;try{const $=()=>{P&&(P.close(),j=yo)},oe=be=>{$(),t.markUploaded(R.blobUri(),be),u(R.blobUri(),c(R,be)),M(c(R,be))},ie=be=>{$(),t.removeFailed(R.blobUri()),u(R.blobUri(),d(R,be)),M(d(R,be))};j=be=>{be<0||be>100||X.from(P).orThunk(()=>X.from(H).map(fr)).each(Se=>{P=Se,Se.progressBar.value(be)})},A(R,j).then(oe,be=>{ie(uo(be)?{message:be}:be)})}catch($){M(d(R,$))}}));var R,A,H}))):new Promise(w=>{w([])});var w,C}}})(o,{url:Gf(t),basePath:Kf(t),credentials:Xf(t),handler:H0(t)}),U3={remove_similar:!0,inherit:!1},U1={selector:"td,th",...U3},P2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...U1},tablecellverticalalign:{styles:{"vertical-align":"%value"},...U1},tablecellbordercolor:{styles:{borderColor:"%value"},...U1},tablecellclass:{classes:["%value"],...U1},tableclass:{selector:"table",classes:["%value"],...U3},tablecellborderstyle:{styles:{borderStyle:"%value"},...U1},tablecellborderwidth:{styles:{borderWidth:"%value"},...U1}},EA=ot(P2),F2=It.each,ad=ws.DOM,ev=t=>ne(t)&&ut(t),W3=(t,o)=>{const n=o&&o.schema||ku({}),s=d=>{const u=uo(d)?{name:d,classes:[],attrs:{}}:d,p=ad.create(u.name);return v=p,(w=u).classes.length>0&&ad.addClass(v,w.classes.join(" ")),ad.setAttribs(v,w.attrs),p;var v,w},i=(d,u,p)=>{let v;const w=u[0],C=ev(w)?w.name:void 0,O=((H,M)=>{const j=n.getElementRule(H.nodeName.toLowerCase())?.parentsRequired;return!(!j||!j.length)&&(M&&Ie(j,M)?M:j[0])})(d,C);if(O)C===O?(v=w,u=u.slice(1)):v=O;else if(w)v=w,u=u.slice(1);else if(!p)return d;const R=v?s(v):ad.create("div");R.appendChild(d),p&&It.each(p,H=>{const M=s(H);R.insertBefore(M,d)});const A=ev(v)?v.siblings:void 0;return i(R,u,A)},c=ad.create("div");if(t.length>0){const d=t[0],u=s(d),p=ev(d)?d.siblings:void 0;c.appendChild(i(u,t.slice(1),p))}return c},OA=t=>{let o="div";const n={name:o,classes:[],attrs:{},selector:t=It.trim(t)};return"*"!==t&&(o=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,i,c,d,u)=>{switch(i){case"#":n.attrs.id=c;break;case".":n.classes.push(c);break;case":":-1!==It.inArray("checked disabled enabled read-only required".split(" "),c)&&(n.attrs[c]=c)}if("["===d){const p=u.match(/([\w\-]+)(?:\=\"([^\"]+))?/);p&&(n.attrs[p[1]]=p[2])}return""})),n.name=o||"div",n},$3=(t,o)=>{let n="",s=hp(t);if(""===s)return"";const i=R=>uo(R)?R.replace(/%(\w+)/g,""):"",c=(R,A)=>ad.getStyle(A??t.getBody(),R,!0);if(uo(o)){const R=t.formatter.get(o);if(!R)return"";o=R[0]}if("preview"in o){const R=o.preview;if(!1===R)return"";s=R||s}let d,u=o.block||o.inline||"span";const p=uo(v=o.selector)?(v=(v=v.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),It.map(v.split(/(?:>|\s+(?![^\[\]]+\]))/),R=>{const A=It.map(R.split(/(?:~\+|~|\+)/),OA),H=A.pop();return A.length&&(H.siblings=A),H}).reverse()):[];var v;p.length>0?(p[0].name||(p[0].name=u),u=o.selector,d=W3(p,t)):d=W3([u],t);const w=ad.select(u,d)[0]||d.firstChild;F2(o.styles,(R,A)=>{const H=i(R);H&&ad.setStyle(w,A,H)}),F2(o.attributes,(R,A)=>{const H=i(R);H&&ad.setAttrib(w,A,H)}),F2(o.classes,R=>{const A=i(R);ad.hasClass(w,A)||ad.addClass(w,A)}),t.dispatch("PreviewFormats"),ad.setStyles(d,{position:"absolute",left:-65535}),t.getBody().appendChild(d);const C=c("fontSize"),O=/px$/.test(C)?parseInt(C,10):0;return F2(s.split(" "),R=>{let A=c(R,w);if(!("background-color"===R&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(A)&&(A=c(R),"#ffffff"===Xt(A).toLowerCase())||"color"===R&&"#000000"===Xt(A).toLowerCase())){if("font-size"===R&&/em|%$/.test(A)){if(0===O)return;A=parseFloat(A)/(/%$/.test(A)?100:1)*O+"px"}"border"===R&&A&&(n+="padding:0 2px;"),n+=R+":"+A+";"}}),t.dispatch("AfterPreviewFormats"),ad.remove(d),n},W1=t=>{const o=(s=>{const i={},c=(d,u)=>{d&&(uo(d)?(lo(u)||(u=[u]),Ue(u,p=>{Ft(p.deep)&&(p.deep=!Qc(p)),Ft(p.split)&&(p.split=!Qc(p)||bi(p)),Ft(p.remove)&&Qc(p)&&!bi(p)&&(p.remove="none"),Qc(p)&&bi(p)&&(p.mixed=!0,p.block_expand=!0),uo(p.classes)&&(p.classes=p.classes.split(/\s+/))}),i[d]=u):Ao(d,(p,v)=>{c(v,p)}))};return c((d=>{const u=d.dom,p=d.schema.type,v={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:w=>{u.setStyle(w,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:w=>{u.setStyle(w,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const w={inline:"span",styles:{textDecoration:"line-through"},exact:!0},C={inline:"strike",remove:"all",preserve_attributes:["class","style"]},O={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==p?[O,w,C]:[w,O,C]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(w,C,O)=>ve(w)&&w.hasAttribute("href"),onformat:(w,C,O)=>{It.each(O,(R,A)=>{u.setAttrib(w,A,R)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":w=>{var C;return null!==(C=w?.customValue)&&void 0!==C?C:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return It.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),w=>{v[w]={block:w,remove:"all"}}),v})(s)),c(EA()),c(j0(s)),{get:d=>ne(d)?i[d]:i,has:d=>Vo(i,d),register:c,unregister:d=>(d&&i[d]&&delete i[d],i)}})(t),n=Za({});return(s=>{s.addShortcut("meta+b","","Bold"),s.addShortcut("meta+i","","Italic"),s.addShortcut("meta+u","","Underline");for(let i=1;i<=6;i++)s.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(s=t).on("mouseup keydown",i=>{var c;((d,u,p)=>{const v=d.selection,w=d.getBody();KC(d,null,p),8!==u&&46!==u||!v.isCollapsed()||"\ufeff"!==v.getStart().innerHTML||KC(d,Nm(w,v.getStart())),37!==u&&39!==u||KC(d,Nm(w,v.getStart()))})(s,i.keyCode,(c=s.selection.getRng().endContainer,tt(c)&&jt(c.data,os)))}),su(t)||((s,i)=>{s.set({}),i.on("NodeChange",c=>{Eh(i,c.element,s.get())}),i.on("FormatApply FormatRemove",c=>{const d=X.from(c.node).map(u=>Ji(u)?u:u.startContainer).bind(u=>ve(u)?X.some(u):X.from(u.parentElement)).getOrThunk(()=>l_(i));Eh(i,d,s.get())})})(n,t),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(s,i,c)=>{var u,p,v;u=s,p=i,v=c,qa(t).formatter.apply(u,p,v)},remove:(s,i,c,d)=>{var p,v,w,C;p=s,v=i,w=c,C=d,qa(t).formatter.remove(p,v,w,C)},toggle:(s,i,c)=>{var u,p,v;u=s,p=i,v=c,qa(t).formatter.toggle(u,p,v)},match:(s,i,c,d)=>{return p=s,v=i,w=c,C=d,qa(t).formatter.match(p,v,w,C);var p,v,w,C},closest:s=>{return c=s,qa(t).formatter.closest(c);var c},matchAll:(s,i)=>{return d=s,u=i,qa(t).formatter.matchAll(d,u);var d,u},matchNode:(s,i,c,d)=>{return p=s,v=i,w=c,C=d,qa(t).formatter.matchNode(p,v,w,C);var p,v,w,C},canApply:s=>{return c=s,qa(t).formatter.canApply(c);var c},formatChanged:(s,i,c,d)=>{return p=n,v=s,w=i,C=c,O=d,qa(t).formatter.formatChanged(p,v,w,C,O);var p,v,w,C,O},getCssText:mt($3,t)};var s},tv=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$1=t=>{const o=Us(),n=Za(0),s=Za(0),i={data:[],typing:!1,beforeChange:()=>{var d,u;d=n,u=o,qa(t).undoManager.beforeChange(d,u)},add:(c,d)=>{return p=i,v=s,w=n,C=o,O=c,R=d,qa(t).undoManager.add(p,v,w,C,O,R);var p,v,w,C,O,R},dispatchChange:()=>{t.setDirty(!0);const c=z1(t);c.bookmark=Vf(t.selection),t.dispatch("change",{level:c,lastLevel:Zi(i.data,s.get()).getOrUndefined()})},undo:()=>{return d=i,u=n,p=s,qa(t).undoManager.undo(d,u,p);var d,u,p},redo:()=>{return d=s,u=i.data,qa(t).undoManager.redo(d,u);var d,u},clear:()=>{var d,u;d=i,u=s,qa(t).undoManager.clear(d,u)},reset:()=>{var d;d=i,qa(t).undoManager.reset(d)},hasUndo:()=>{return d=i,u=s,qa(t).undoManager.hasUndo(d,u);var d,u},hasRedo:()=>{return d=i,u=s,qa(t).undoManager.hasRedo(d,u);var d,u},transact:c=>{return u=i,p=n,v=c,qa(t).undoManager.transact(u,p,v);var u,p,v},ignore:c=>{var u,p;u=n,p=c,qa(t).undoManager.ignore(u,p)},extra:(c,d)=>{var p,v,w,C;p=i,v=s,w=c,C=d,qa(t).undoManager.extra(p,v,w,C)}};return su(t)||((c,d,u)=>{const p=Za(!1),v=w=>{Xb(d,!1,u),d.add({},w)};c.on("init",()=>{d.add()}),c.on("BeforeExecCommand",w=>{tv(w.command)||(N3(d,u),d.beforeChange())}),c.on("ExecCommand",w=>{tv(w.command)||v(w)}),c.on("ObjectResizeStart cut",()=>{d.beforeChange()}),c.on("SaveContent ObjectResized blur",v),c.on("dragend",v),c.on("keyup",w=>{const C=w.keyCode;if(w.isDefaultPrevented())return;const O=er.os.isMacOS()&&"Meta"===w.key;(C>=33&&C<=36||C>=37&&C<=40||45===C||w.ctrlKey||O)&&(v(),c.nodeChanged()),46!==C&&8!==C||c.nodeChanged(),p.get()&&d.typing&&!Kb(z1(c),d.data[0])&&(c.isDirty()||c.setDirty(!0),c.dispatch("TypingUndo"),p.set(!1),c.nodeChanged())}),c.on("keydown",w=>{const C=w.keyCode;if(!w.isDefaultPrevented()){if(!(C>=33&&C<=36||C>=37&&C<=40||45===C))return!(C<16||C>20)||224===C||91===C||d.typing||w.ctrlKey&&!w.altKey||w.metaKey?void((er.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&d.beforeChange()):(d.beforeChange(),Xb(d,!0,u),d.add({},w),void p.set(!0));d.typing&&v(w)}}),c.on("mousedown",w=>{d.typing&&v(w)}),c.on("input",w=>{var C,O;w.inputType&&("insertReplacementText"===w.inputType||"insertText"===(C=w).inputType&&null===C.data||"insertFromPaste"===(O=w).inputType||"insertFromDrop"===O.inputType)&&v(w)}),c.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||c.nodeChanged()})})(t,i,n),(c=t).addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo"),i;var c},q3=[9,27,vo.HOME,vo.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,vo.DOWN,vo.UP,vo.LEFT,vo.RIGHT].concat(er.browser.isFirefox()?[224]:[]),G_="data-mce-placeholder",G3=t=>"keydown"===t.type||"keyup"===t.type,K_=t=>{const o=t.keyCode;return o===vo.BACKSPACE||o===vo.DELETE},ov=(t,o)=>({from:t,to:o}),z2=(t,o)=>{const n=fe(t),s=fe(o.container());return A1(n,s).map(i=>({block:i,position:o}))},X_=(t,o)=>ma(o,n=>Fd(n)||xr(n.dom),n=>yr(n,t)).filter(ka).getOr(t),Y_=t=>{const o=(n=>{const s=ss(n);return Ps(s,Wr).fold(ot(s),i=>s.slice(0,i))})(t);return Ue(o,G),o},K3=(t,o)=>{const n=Bm(o,t);return or(n.reverse(),s=>ea(s)).each(G)},Xu=(t,o,n,s)=>{if(ea(n))return $c(n),dl(n.dom);0===Yt(Uc(s),c=>!ea(c)).length&&ea(o)&&ei(s,vn("br"));const i=Ni(n.dom,rt.before(s.dom));return Ue(Y_(o),c=>{ei(s,c)}),K3(t,o),i},J_=(t,o,n)=>{if(ea(n)){if(ea(o)){const c=ts((d=>{const u=(p,v)=>Id(p).fold(()=>v,w=>Ii(w)?u(w,v.concat(Ou(w))):v);return u(d,[])})(n),(d,u)=>(bu(d,u),u),tc());K(o),Un(o,c)}return G(n),dl(o.dom)}const s=Il(n.dom);return Ue(Y_(o),i=>{Un(n,i)}),K3(t,o),s},X3=(t,o)=>{Aa(t,o.dom).bind(n=>X.from(n.getNode())).map(fe).filter(Ra).each(G)},Y3=(t,o,n)=>{return X3(!0,o),X3(!1,n),(s=o,i=n,hl(i,s)?((c,d)=>{const u=Bm(d,c);return X.from(u[u.length-1])})(i,s):X.none()).fold(mt(J_,t,o,n),mt(Xu,t,o,n));var s,i},$r=(t,o,n,s)=>o?Y3(t,s,n):Y3(t,n,s),Q_=(t,o)=>{const n=fe(t.getBody());return(i=n.dom,c=o,d=t.selection.getRng(),d.collapsed?((u,p,v)=>{const w=z2(u,rt.fromRangeStart(v)),C=w.bind(O=>Ut(p,u,O.position).bind(R=>z2(u,R).map(A=>{return H=u,M=p,je((P=A).position.getNode())&&!ea(P.block)?Aa(!1,P.block.dom).bind(j=>j.isEqual(P.position)?Ut(M,H,j).bind($=>z2(H,$)):X.some(P)).getOr(P):P;var H,M,P})));return As(w,C,ov).filter(O=>{return!yr((R=O).from.block,R.to.block)&&((R,A)=>{const H=fe(R);return yr(X_(H,A.from.block),X_(H,A.to.block))})(u,O)&&(R=>!1===Oo(R.from.block.dom)&&!1===Oo(R.to.block.dom))(O)&&(R=>{const A=H=>zl(H)||cm(H.dom);return A(R.from.block)&&A(R.to.block)})(O);var R})})(i,c,d):X.none()).map(i=>()=>{$r(n,o,i.from.block,i.to.block).each(c=>{t.selection.setRng(c.toRange())})});var i,c,d},J3=(t,o)=>{const n=fe(o),s=mt(yr,t);return us(n,Fd,s).isSome()},eS=(t,o)=>t.selection.isCollapsed()?X.none():(t=>{const o=fe(t.getBody());return((n,s)=>{const i=Ni(n.dom,rt.fromRangeStart(s)).isNone(),c=fi(n.dom,rt.fromRangeEnd(s)).isNone();return!(J3(d=n,(u=s).startContainer)||J3(d,u.endContainer))&&i&&c;var d,u})(o,t.selection.getRng())?(n=t,X.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,s)=>{const i=s.getRng();return As(A1(n,fe(i.startContainer)),A1(n,fe(i.endContainer)),(c,d)=>yr(c,d)?X.none():X.some(()=>{i.deleteContents(),$r(n,!0,c,d).each(u=>{s.setRng(u.toRange())})})).getOr(X.none())})(o,t.selection);var n})(t),kd=(t,o,n,s,i)=>X.from(o._selectionOverrides.showCaret(t,n,s,i)),nv=(t,o)=>t.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?X.none():X.some((n=>{const s=n.ownerDocument.createRange();return s.selectNode(n),s})(o)),V2=(t,o,n)=>o.collapsed?((s,i,c)=>{const d=Ep(1,s.getBody(),i),u=rt.fromRangeStart(d),p=u.getNode();if(qd(p))return kd(1,s,p,!u.isAtEnd(),!1);const v=u.getNode(!0);if(qd(v))return kd(1,s,v,!1,!1);const w=_h(s.dom.getRoot(),u.getNode());return qd(w)?kd(1,s,w,!1,c):X.none()})(t,o,n).getOr(o):o,Nh=t=>Zu(t)||S1(t),Hc=t=>yg(t)||pb(t),q1=(t,o,n,s,i,c)=>{var d,u;kd(s,t,c.getNode(!i),i,!0).each(d=>{if(o.collapsed){const u=o.cloneRange();i?u.setEnd(d.startContainer,d.startOffset):u.setStart(d.endContainer,d.endOffset),u.deleteContents()}else o.deleteContents();t.selection.setRng(d)}),d=t.dom,tt(u=n)&&0===u.data.length&&d.remove(u)},kg=(t,o)=>((n,s)=>{const i=n.selection.getRng();if(!tt(i.commonAncestorContainer))return X.none();const c=s?La.Forwards:La.Backwards,d=wd(n.getBody()),u=mt(Fu,s?d.next:d.prev),p=s?Nh:Hc,v=ni(c,n.getBody(),i),w=u(v),C=w&&Hl(s,w);if(!C||!d1(v,C))return X.none();if(p(C))return X.some(()=>q1(n,i,v.getNode(),c,s,C));const O=u(C);return O&&p(O)&&d1(C,O)?X.some(()=>q1(n,i,v.getNode(),c,s,O)):X.none()})(t,o),au=(t,o)=>{const n=t.getBody();return o?dl(n).filter(Zu):Il(n).filter(yg)},qp=t=>{const o=t.selection.getRng();return!o.collapsed&&(au(t,!0).exists(n=>n.isEqual(rt.fromRangeStart(o)))||au(t,!1).exists(n=>n.isEqual(rt.fromRangeEnd(o))))},Pc=Ta([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Z2=(t,o,n)=>Ut(o,t,n).bind(s=>{return i=s.getNode(),ne(i)&&(Fd(fe(i))||Gs(fe(i)))||((c,d,u,p)=>{const v=w=>Ii(fe(w))&&!yd(u,p,c);return mr(!d,u).fold(()=>mr(d,p).fold(Do,v),v)})(t,o,n,s)?X.none():o&&Oo(s.getNode())||!o&&Oo(s.getNode(!0))?((c,d,u,p)=>{const v=p.getNode(!d);return A1(fe(c),fe(u.getNode())).map(w=>ea(w)?Pc.remove(w.dom):Pc.moveToElement(v)).orThunk(()=>X.some(Pc.moveToElement(v)))})(t,o,n,s):o&&yg(n)||!o&&Zu(n)?X.some(Pc.moveToPosition(s)):X.none();var i}),tS=(t,o)=>X.from(_h(t.getBody(),o)),eE=t=>{const o=t.dom,n=t.selection,s=_h(t.getBody(),n.getNode());if(xr(s)&&o.isBlock(s)&&o.isEmpty(s)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(s,""),s.appendChild(i),n.setRng(rt.before(i).toRange())}return!0},j2=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=t.selection.getNode();return tS(t,n).filter(Oo).fold(()=>((s,i,c)=>{const d=Ep(i?1:-1,s,c),u=rt.fromRangeStart(d),p=fe(s);return!i&&yg(u)?X.some(Pc.remove(u.getNode(!0))):i&&Zu(u)?X.some(Pc.remove(u.getNode())):!i&&Zu(u)&&yC(p,u)?nA(p,u).map(v=>Pc.remove(v.getNode())):i&&yg(u)&&vC(p,u)?rA(p,u).map(v=>Pc.remove(v.getNode())):(v=s,((O,R)=>{const A=R.getNode(!O),H=O?"after":"before";return ve(A)&&A.getAttribute("data-mce-caret")===H})(w=i,C=u)?(O=w,R=C.getNode(!w),eo(R)?X.none():O&&Oo(R.nextSibling)?X.some(Pc.moveToElement(R.nextSibling)):!O&&Oo(R.previousSibling)?X.some(Pc.moveToElement(R.previousSibling)):X.none()).orThunk(()=>Z2(v,w,C)):Z2(v,w,C).bind(O=>((R,A,H)=>H.fold(M=>X.some(Pc.remove(M)),M=>X.some(Pc.moveToElement(M)),M=>yd(A,M,R)?X.none():X.some(Pc.moveToPosition(M))))(v,C,O)));var v,w,C,O,R})(t.getBody(),o,t.selection.getRng()).map(s=>()=>{return s.fold((i=t,c=o,d=>(i._selectionOverrides.hideFakeCaret(),wg(i,c,fe(d)),!0)),((i,c)=>d=>{const u=c?rt.before(d):rt.after(d);return i.selection.setRng(u.toRange()),!0})(t,o),(i=>c=>(i.selection.setRng(c.toRange()),!0))(t));var i,c}),()=>X.some(yo))})(t,o):((n,s)=>{const i=n.selection.getNode();return Oo(i)&&!Ur(i)?tS(n,i.parentNode).filter(Oo).fold(()=>X.some(()=>{var c;c=fe(n.getBody()),Ue(W(c,".mce-offscreen-selection"),G),wg(n,s,fe(n.selection.getNode())),vb(n)}),()=>X.some(yo)):qp(n)?X.some(()=>{jy(n,n.selection.getRng(),fe(n.getBody()))}):X.none()})(t,o),U2=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=rt.fromRangeStart(n.selection.getRng());return Ut(s,n.getBody(),i).filter(c=>s?QT(c):eA(c)).bind(c=>l1(s?0:-1,c)).map(c=>()=>n.selection.select(c))})(t,o):X.none(),Gp=tt,oS=t=>Gp(t)&&t.data[0]===Da,W2=t=>Gp(t)&&t.data[t.data.length-1]===Da,tE=t=>{var o;return(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createTextNode(Da)},$2=(t,o)=>t?(n=>{var s;if(Gp(n.previousSibling))return W2(n.previousSibling)||n.previousSibling.appendData(Da),n.previousSibling;if(Gp(n))return oS(n)||n.insertData(0,Da),n;{const i=tE(n);return null===(s=n.parentNode)||void 0===s||s.insertBefore(i,n),i}})(o):(n=>{var s,i;if(Gp(n.nextSibling))return oS(n.nextSibling)||n.nextSibling.insertData(0,Da),n.nextSibling;if(Gp(n))return W2(n)||n.appendData(Da),n;{const c=tE(n);return n.nextSibling?null===(s=n.parentNode)||void 0===s||s.insertBefore(c,n.nextSibling):null===(i=n.parentNode)||void 0===i||i.appendChild(c),c}})(o),TA=mt($2,!0),Hm=mt($2,!1),G1=(t,o)=>tt(t.container())?$2(o,t.container()):$2(o,t.getNode()),nS=(t,o)=>{const n=o.get();return n&&t.container()===n&&Dl(n)},q2=(t,o)=>o.fold(n=>{$d(t.get());const s=TA(n);return t.set(s),X.some(rt(s,s.length-1))},n=>dl(n).map(s=>{if(nS(s,t)){const i=t.get();return rt(i,1)}{$d(t.get());const i=G1(s,!0);return t.set(i),rt(i,1)}}),n=>Il(n).map(s=>{if(nS(s,t)){const i=t.get();return rt(i,i.length-1)}{$d(t.get());const i=G1(s,!1);return t.set(i),rt(i,i.length-1)}}),n=>{$d(t.get());const s=Hm(n);return t.set(s),X.some(rt(s,1))}),rS=(t,o)=>{for(let n=0;n<t.length;n++){const s=t[n].apply(null,o);if(s.isSome())return s}return X.none()},ql=Ta([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Eg=(t,o)=>Hu(o,t)||t,AA=(t,o,n)=>{const s=xs(n),i=Eg(o,s.container());return Ch(t,i,s).fold(()=>fi(i,s).bind(mt(Ch,t,i)).map(c=>ql.before(c)),X.none)},NA=(t,o)=>null===Nm(t,o),oE=(t,o,n)=>Ch(t,o,n).filter(mt(NA,o)),MA=(t,o,n)=>{const s=T1(n);return oE(t,o,s).bind(i=>Ni(i,s).isNone()?X.some(ql.start(i)):X.none())},RA=(t,o,n)=>{const s=xs(n);return oE(t,o,s).bind(i=>fi(i,s).isNone()?X.some(ql.end(i)):X.none())},DA=(t,o,n)=>{const s=T1(n),i=Eg(o,s.container());return Ch(t,i,s).fold(()=>Ni(i,s).bind(mt(Ch,t,i)).map(c=>ql.after(c)),X.none)},nE=t=>!O1(Kp(t)),Pm=(t,o,n)=>rS([AA,MA,RA,DA],[t,o,n]).filter(nE),Kp=t=>t.fold(mn,mn,mn,mn),G2=t=>t.fold(ot("before"),ot("start"),ot("end"),ot("after")),Fm=t=>t.fold(ql.before,ql.before,ql.after,ql.after),Og=t=>t.fold(ql.start,ql.start,ql.end,ql.end),K2=(t,o,n,s,i,c)=>As(Ch(o,n,s),Ch(o,n,i),(d,u)=>d!==u&&((p,v,w)=>{const C=Hu(v,p),O=Hu(w,p);return ne(C)&&C===O})(n,d,u)?ql.after(t?d:u):c).getOr(c),X2=(t,o)=>t.fold(Jo,n=>{return i=o,!(G2(s=n)===G2(i)&&Kp(s)===Kp(i));var s,i}),Xp=(t,o)=>t?o.fold(Dr(X.some,ql.start),X.none,Dr(X.some,ql.after),X.none):o.fold(X.none,Dr(X.some,ql.before),X.none,Dr(X.some,ql.end)),Mh=(t,o,n)=>{const s=t?1:-1;return o.setRng(rt(n.container(),n.offset()+s).toRange()),o.getSel().modify("move",t?"forward":"backward","word"),!0};var Ed;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Ed||(Ed={}));const Yp=(t,o)=>t===La.Backwards?Cr(o):o,rE=(t,o,n)=>t===La.Forwards?o.next(n):o.prev(n),sS=(t,o,n,s)=>je(s.getNode(o===La.Forwards))?Ed.Br:!1===yd(n,s)?Ed.Block:Ed.Wrap,Y2=(t,o,n,s)=>{const i=wd(n);let c=s;const d=[];for(;c;){const u=rE(o,i,c);if(!u)break;if(je(u.getNode(!1)))return o===La.Forwards?{positions:Yp(o,d).concat([u]),breakType:Ed.Br,breakAt:X.some(u)}:{positions:Yp(o,d),breakType:Ed.Br,breakAt:X.some(u)};if(u.isVisible()){if(t(c,u)){const p=sS(0,o,c,u);return{positions:Yp(o,d),breakType:p,breakAt:X.some(u)}}d.push(u),c=u}else c=u}return{positions:Yp(o,d),breakType:Ed.Eol,breakAt:X.none()}},aS=(t,o,n,s)=>o(n,s).breakAt.map(i=>{const c=o(n,i).positions;return t===La.Backwards?c.concat(i):[i].concat(c)}).getOr([]),J2=(t,o)=>Jn(t,(n,s)=>n.fold(()=>X.some(s),i=>As(Pn(i.getClientRects()),Pn(s.getClientRects()),(c,d)=>{const u=Math.abs(o-c.left);return Math.abs(o-d.left)<=u?s:i}).or(n)),X.none()),Tg=(t,o)=>Pn(o.getClientRects()).bind(n=>J2(t,n.left)),K1=mt(Y2,rt.isAbove,-1),X1=mt(Y2,rt.isBelow,1),iS=mt(aS,-1,K1),rv=mt(aS,1,X1),sE=(t,o)=>Tg(iS(t,o),o),aE=(t,o)=>Tg(rv(t,o),o),iE=Oo,lS=(t,o)=>Math.abs(t.left-o),zm=(t,o)=>Math.abs(t.right-o),Ag=(t,o)=>ai(t,(n,s)=>{const i=Math.min(lS(n,o),zm(n,o)),c=Math.min(lS(s,o),zm(s,o));return c===i&&Vs(s,"node")&&iE(s.node)||c<i?s:n}),iu=t=>{const o=n=>Gt(n,s=>{const i=pm(s);return i.node=t,i});if(ve(t))return o(t.getClientRects());if(tt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),o(n.getClientRects())}return[]},Q2=t=>ks(t,iu);var Jp;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Jp||(Jp={}));const cS=(t,o,n,s,i,c)=>{let d=0;const u=[],p=C=>{let O=Q2([C]);-1===t&&(O=O.reverse());for(let R=0;R<O.length;R++){const A=O[R];if(!n(A,v)){if(u.length>0&&o(A,ya(u))&&d++,A.line=d,i(A))return!0;u.push(A)}}return!1},v=ya(c.getClientRects());if(!v)return u;const w=c.getNode();return w&&(p(w),((C,O,R,A)=>{let H=A;for(;H=Am(H,C,sa,O);)if(R(H))return})(t,s,p,w)),u},lE=mt(cS,Jp.Up,Mc,fm),cE=mt(cS,Jp.Down,fm,Mc),ew=t=>ya(t.getClientRects()),dS=t=>o=>o.line>t,tw=t=>o=>o.line===t,Yu=(t,o)=>{t.selection.setRng(o),yh(t,t.selection.getRng())},lu=(t,o,n)=>X.some(V2(t,o,n)),Od=(t,o,n,s,i,c)=>{const d=o===La.Forwards,u=wd(t.getBody()),p=mt(Fu,d?u.next:u.prev),v=d?s:i;if(!n.collapsed){const A=Bl(n);if(c(A))return kd(o,t,A,o===La.Backwards,!1);if(qp(t)){const H=n.cloneRange();return H.collapse(o===La.Backwards),X.from(H)}}const w=ni(o,t.getBody(),n);if(v(w))return nv(t,w.getNode(!d));let C=p(w);const O=_c(n);if(!C)return O?X.some(n):X.none();if(C=Hl(d,C),v(C))return kd(o,t,C.getNode(!d),d,!1);const R=p(C);return R&&v(R)&&d1(C,R)?kd(o,t,R.getNode(!d),d,!1):O?lu(t,C.toRange(),!1):X.none()},sv=(t,o,n,s,i,c)=>{const d=ni(o,t.getBody(),n),u=ya(d.getClientRects()),p=o===Jp.Down,v=t.getBody();if(!u)return X.none();if(qp(t)){const H=p?rt.fromRangeEnd(n):rt.fromRangeStart(n);return(p?aE:sE)(v,H).orThunk(()=>X.from(H)).map(M=>M.toRange())}const w=(p?cE:lE)(v,dS(1),d),C=Yt(w,tw(1)),O=u.left,R=Ag(C,O);if(R&&c(R.node)){const H=Math.abs(O-R.left),M=Math.abs(O-R.right);return kd(o,t,R.node,H<M,!1)}let A;if(A=s(d)?d.getNode():i(d)?d.getNode(!0):Bl(n),A){const H=((P,j,$,oe)=>{const ie=wd(j);let be,Se,ze,at;const Je=[];let Ae=0;1===P?(be=ie.next,Se=fm,ze=Mc,at=rt.after(oe)):(be=ie.prev,Se=Mc,ze=fm,at=rt.before(oe));const Pe=ew(at);do{if(!at.isVisible())continue;const Me=ew(at);if(ze(Me,Pe))continue;Je.length>0&&Se(Me,ya(Je))&&Ae++;const qe=pm(Me);if(qe.position=at,qe.line=Ae,$(qe))return Je;Je.push(qe)}while(at=be(at));return Je})(o,v,dS(1),A);let M=Ag(Yt(H,tw(1)),O);if(M||(M=ya(Yt(H,tw(0))),M))return lu(t,M.position.toRange(),!1)}return 0===C.length?ow(t,p).filter(p?i:s).map(H=>V2(t,H.toRange(),!1)):X.none()},ow=(t,o)=>{const n=t.selection.getRng(),s=o?rt.fromRangeEnd(n):rt.fromRangeStart(n),i=(c=s.container(),d=t.getBody(),us(fe(c),u=>ob(u.dom),u=>u.dom===d).map(u=>u.dom).getOr(d));var c,d;if(o){const u=X1(i,s);return Gn(u.positions)}{const u=K1(i,s);return Pn(u.positions)}},av=(t,o,n)=>ow(t,o).filter(n).exists(s=>(t.selection.setRng(s.toRange()),!0)),iv=(t,o)=>{const n=t.dom.createRng();n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),t.selection.setRng(n)},uS=(t,o)=>{t?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},mS=(t,o,n)=>q2(o,n).map(s=>(iv(t,s),n)),gS=(t,o,n)=>!!ig(t)&&((t,o,n)=>{const s=t.getBody(),i=((c,d,u)=>{const p=rt.fromRangeStart(c);if(c.collapsed)return p;{const v=rt.fromRangeEnd(c);return u?Ni(d,v).getOr(v):fi(d,p).getOr(p)}})(t.selection.getRng(),s,n);return((c,d,u,p)=>{const v=Hl(c,p),w=Pm(d,u,v);return Pm(d,u,v).bind(mt(Xp,c)).orThunk(()=>((C,O,R,A,H)=>{const M=Hl(C,H);return Ut(C,R,M).map(mt(Hl,C)).fold(()=>A.map(Fm),P=>Pm(O,R,P).map(mt(K2,C,O,R,M,P)).filter(mt(X2,A))).filter(nE)})(c,d,u,w,p))})(n,mt(ju,t),s,i).bind(c=>mS(t,o,c))})(t,o,n).isSome(),hS=(t,o,n)=>!!ig(o)&&((s,i)=>{const c=i.selection.getRng(),d=s?rt.fromRangeEnd(c):rt.fromRangeStart(c);return!!it(i.selection.getSel().modify)&&(s&&ti(d)?Mh(!0,i.selection,d):!(s||!xc(d))&&Mh(!1,i.selection,d))})(t,o),pS=mt(hS,!0),uE=mt(hS,!1),Y1=(t,o,n)=>{if(ig(t)){const s=ow(t,o).getOrThunk(()=>{const i=t.selection.getRng();return o?rt.fromRangeEnd(i):rt.fromRangeStart(i)});return Pm(mt(ju,t),t.getBody(),s).exists(i=>{const c=Fm(i);return q2(n,c).exists(d=>(iv(t,d),!0))})}return!1},mE=(t,o)=>n=>q2(o,n).map(s=>()=>iv(t,s)),gE=(t,o,n,s)=>{const i=t.getBody(),c=mt(ju,t);t.undoManager.ignore(()=>{t.selection.setRng(((d,u)=>{const p=document.createRange();return p.setStart(d.container(),d.offset()),p.setEnd(u.container(),u.offset()),p})(n,s)),Vy(t),Pm(c,i,rt.fromRangeStart(t.selection.getRng())).map(Og).bind(mE(t,o)).each(Nt)}),t.nodeChanged()},fS=(t,o,n)=>{if(t.selection.isCollapsed()&&ig(t)){const s=rt.fromRangeStart(t.selection.getRng());return((i,c,d,u)=>{const p=(C=i.getBody(),O=u.container(),Hu(O,C)||C),v=mt(ju,i),w=Pm(v,p,u);var C,O;return w.bind(C=>d?C.fold(ot(X.some(Og(C))),X.none,ot(X.some(Fm(C))),X.none):C.fold(X.none,ot(X.some(Fm(C))),X.none,ot(X.some(Og(C))))).map(mE(i,c)).getOrThunk(()=>{const C=xa(d,p,u),O=C.bind(R=>Pm(v,p,R));return As(w,O,()=>Ch(v,p,u).bind(R=>{return As(dl(A=R),Il(A),(H,M)=>{const P=Hl(!0,H),j=Hl(!1,M);return fi(A,P).forall($=>$.isEqual(j))}).getOr(!0)?X.some(()=>{wg(i,d,fe(R))}):X.none();var A})).getOrThunk(()=>O.bind(()=>C.map(R=>()=>{d?gE(i,c,u,R):gE(i,c,R,u)})))})})(t,o,n,s)}return X.none()},hE=(t,o)=>{const n=fe(t.getBody()),s=fe(t.selection.getStart()),i=Bm(s,n);return Ps(i,o).fold(ot(i),c=>i.slice(0,c))},BA=t=>1===vc(t),pE=(t,o)=>{const n=mt(Sh,t);return ks(o,s=>n(s)?[s.dom]:[])},lv=t=>{const o=hE(t,Wr);return pE(t,o)},vS=(t,o)=>{const n=t.selection.getStart(),s=((i,c)=>{const d=c.parentElement;return je(c)&&!jn(d)&&i.dom.isEmpty(d)})(t,n)||JC(fe(n))?YC(n,o):((i,c)=>{const{caretContainer:d,caretPosition:u}=a3(c);return i.insertNode(d.dom),u})(t.selection.getRng(),o);t.selection.setRng(s.toRange())},rw=t=>tt(t.startContainer),yS=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=Yt(hE(t,i=>Wr(i)||vc(i)>1),BA);return Gn(n).bind(s=>{const i=rt.fromRangeStart(t.selection.getRng());return Zy(o,i,s.dom)&&!JC(s)?X.some(()=>((c,d,u,p)=>{const v=pE(d,p);if(0===v.length)wg(d,c,u);else{const w=YC(u.dom,v);d.selection.setRng(w.toRange())}})(o,t,s,n)):X.none()})})(t,o):(n=>{if((t=>{const o=t.selection.getRng();return 0===(n=o).startOffset&&rw(n)&&((n,s)=>{const i=s.startContainer.parentElement;return!jn(i)&&Sh(n,fe(i))})(t,o)&&(n=>{return(i=>{const c=i.startContainer.parentNode,d=i.endContainer.parentNode;return!jn(c)&&!jn(d)&&c.isEqualNode(d)})(s=n)&&(i=>{const c=i.endContainer;return i.endOffset===(tt(c)?c.length:c.childNodes.length)})(s)||(s=>!s.endContainer.isEqualNode(s.commonAncestorContainer))(n);var s})(o);var n})(n)){const s=lv(n);return X.some(()=>{Vy(n),((i,c)=>{const d=_a(c,lv(i));d.length>0&&vS(i,d)})(n,s)})}return X.none()})(t),cv=t=>((o=>{const n=o.selection.getRng();return n.collapsed&&(rw(n)||o.dom.isEmpty(n.startContainer))&&!(t=>us(t,i=>Dc(i.dom),Wr).isSome())(fe(o.selection.getStart()))})(t)&&vS(t,[]),!0),wS=(t,o,n)=>ne(n)?X.some(()=>{t._selectionOverrides.hideFakeCaret(),wg(t,o,fe(n))}):X.none(),xS=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=s?S1:pb,d=ni(s?La.Forwards:La.Backwards,n.getBody(),n.selection.getRng());return i(d)?wS(n,s,d.getNode(!s)):X.from(Hl(s,d)).filter(u=>i(u)&&d1(d,u)).bind(u=>wS(n,s,u.getNode(!s)))})(t,o):((n,s)=>{const i=n.selection.getNode();return Yr(i)?wS(n,s,i):X.none()})(t,o),J1=t=>br(t??"").getOr(0),dv=(t,o)=>(t||"table"===Er(o)?"margin":"padding")+("rtl"===Nl(o,"direction")?"-right":"-left"),uv=t=>{const o=bE(t);return!t.mode.isReadOnly()&&(o.length>1||(n=t,qr(o,i=>{const c=dv(Jf(n),i),d=di(i,c).map(J1).getOr(0);return"false"!==n.dom.getContentEditable(i.dom)&&d>0})));var n},fE=t=>mi(t)||Gs(t),bE=t=>Yt(He(t.selection.getSelectedBlocks()),o=>!fE(o)&&!Wi(o).exists(fE)&&ma(o,n=>xr(n.dom)||Oo(n.dom)).exists(n=>xr(n.dom))),vE=(t,o)=>{var n,s;const{dom:i}=t,c=up(t),d=null!==(s=null===(n=/[a-z%]+$/i.exec(c))||void 0===n?void 0:n[0])&&void 0!==s?s:"px",u=J1(c),p=Jf(t);Ue(bE(t),v=>{((w,C,O,R,A,H)=>{const M=dv(O,fe(H)),P=J1(w.getStyle(H,M));if("outdent"===C){const j=Math.max(0,P-R);w.setStyle(H,M,j?j+A:"")}else w.setStyle(H,M,P+R+A)})(i,o,p,u,d,v.dom)})},yE=t=>vE(t,"outdent"),wE=t=>{if(t.selection.isCollapsed()&&uv(t)){const o=t.dom,n=t.selection.getRng(),s=rt.fromRangeStart(n),i=o.getParent(n.startContainer,o.isBlock);if(null!==i&&fC(fe(i),s))return X.some(()=>yE(t))}return X.none()},xE=(t,o,n)=>Di([wE,j2,kg,(s,i)=>fS(s,o,i),Q_,Xy,U2,xS,eS,yS],s=>s(t,n)).filter(s=>t.selection.isEditable()),sw=t=>void 0===t.touches||1!==t.touches.length?X.none():X.some(t.touches[0]),aw=(t,o)=>Vo(t,o.nodeName),CE=(t,o)=>!!tt(o)||!!ve(o)&&!aw(t.getBlockElements(),o)&&!ye(o)&&!zd(t,o),_E=(t,o)=>!(!tt(o)||0!==o.data.length&&(!/^\s+$/.test(o.data)||o.nextSibling&&!aw(t,o.nextSibling))),SE=t=>t.dom.create(yl(t),Ki(t)),kE=t=>{const o=t.dom,n=t.selection,s=t.schema,i=s.getBlockElements(),c=n.getStart(),d=t.getBody();let u,p,v=!1;const w=yl(t);if(!c||!ve(c))return;const C=d.nodeName.toLowerCase();if(!s.isValidChild(C,w.toLowerCase())||($=i,oe=d,To(gC(fe(c),fe(oe)),be=>aw($,be.dom))))return;var $,oe;const O=n.getRng(),{startContainer:R,startOffset:A,endContainer:H,endOffset:M}=O,P=Bp(t);let j=d.firstChild;for(;j;)if(ve(j)&&Qm(s,j),CE(s,j)){if(_E(i,j)){p=j,j=j.nextSibling,o.remove(p);continue}u||(u=SE(t),d.insertBefore(u,j),v=!0),p=j,j=j.nextSibling,u.appendChild(p)}else u=null,j=j.nextSibling;v&&P&&(O.setStart(R,A),O.setEnd(H,M),n.setRng(O),t.nodeChanged())},EE=(t,o,n)=>{const s=fe(SE(t)),i=tc();Un(s,i),n(o,s);const c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c},Qp=t=>o=>-1!==(" "+o.attr("class")+" ").indexOf(t),OE=(t,o,n)=>function(s){const i=arguments,c=i[i.length-2],d=c>0?o.charAt(c-1):"";if('"'===d)return s;if(">"===d){const u=o.lastIndexOf("<",c);if(-1!==u&&-1!==o.substring(u,c).indexOf('contenteditable="false"'))return s}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(i[0])+'">'+t.dom.encode("string"==typeof i[1]?i[1]:i[0])+"</span>"},CS=(t,o)=>{o.hasAttribute("data-mce-caret")&&(Cc(o),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(o))},TE=(t,o)=>{const n=Ea(fe(t.getBody()),"*[data-mce-caret]").map(i=>i.dom).getOrNull();if(n)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void CS(t,n)):void(yu(n)&&(CS(t,n),t.undoManager.add()))},iw=Oo,AE=(t,o,n)=>{const s=wd(t.getBody()),i=mt(Fu,1===o?s.next:s.prev);if(n.collapsed){const c=t.dom.getParent(n.startContainer,"PRE");if(!c)return;if(!i(rt.fromRangeStart(n))){const d=fe((u=>{const p=u.dom.create(yl(u));return p.innerHTML='<br data-mce-bogus="1">',p})(t));1===o?qi(fe(c),d):ei(fe(c),d),t.selection.select(d.dom,!0),t.selection.collapse()}}},NE=(t,o)=>((n,s)=>{const i=s?La.Forwards:La.Backwards,c=n.selection.getRng();return(d=i,u=n,p=c,Od(u,d,p,Zu,yg,iw)).orThunk(()=>(AE(n,i,c),X.none()));var d,u,p})(t,((n,s)=>{const i=s?n.getEnd(!0):n.getStart(!0);return O1(i)?!s:s})(t.selection,o)).exists(n=>(Yu(t,n),!0)),Ng=(t,o)=>((n,s)=>{const i=s?1:-1,c=n.selection.getRng();return(d=i,u=n,p=c,sv(u,d,p,v=>Zu(v)||Ln(v),v=>yg(v)||mC(v),iw)).orThunk(()=>(AE(n,i,c),X.none()));var d,u,p})(t,o).exists(n=>(Yu(t,n),!0)),lw=(t,o)=>av(t,o,o?yg:Zu),cw=(t,o)=>au(t,!o).map(n=>{const s=n.toRange(),i=t.selection.getRng();return o?s.setStart(i.startContainer,i.startOffset):s.setEnd(i.endContainer,i.endOffset),s}).exists(n=>(Yu(t,n),!0)),ME=t=>Ie(["figcaption"],Er(t)),DE=(t,o)=>!!t.selection.isCollapsed()&&((t,o)=>{const n=fe(t.getBody()),s=rt.fromRangeStart(t.selection.getRng());return((i,c)=>{const d=mt(yr,c);return ma(fe(i.container()),Wr,d).filter(ME)})(s,n).exists(()=>{if(i=n,d=s,o?X1(i.dom,d).breakAt.isNone():K1(i.dom,d).breakAt.isNone()){const i=EE(t,n,o?Un:Ml);return t.selection.setRng(i),!0}var i,d;return!1})})(t,o),BE={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ef=(t,o)=>o.keyCode===t.keyCode&&o.shiftKey===t.shiftKey&&o.altKey===t.altKey&&o.ctrlKey===t.ctrlKey&&o.metaKey===t.metaKey,Tn=(t,...o)=>()=>t.apply(null,o),mv=(t,o)=>{return or((s=o,ks(Gt(t,c=>({...BE,...c})),i=>ef(i,s)?[i]:[])),n=>n.action());var s},LE=(t,o)=>{return Di((s=o,ks(Gt(t,c=>({...BE,...c})),i=>ef(i,s)?[i]:[])),n=>n.action());var s},Vm=(t,o)=>{const n=o?La.Forwards:La.Backwards,s=t.selection.getRng();return Od(t,n,s,S1,pb,Yr).exists(i=>(Yu(t,i),!0))},dw=(t,o)=>{const n=o?1:-1,s=t.selection.getRng();return sv(t,n,s,S1,pb,Yr).exists(i=>(Yu(t,i),!0))},uw=(t,o)=>av(t,o,o?pb:S1),_S=Ta([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Q1={..._S,none:t=>_S.none(t)},SS=(t,o,n)=>ks(ss(t),s=>li(s,o)?n(s)?[s]:[]:SS(s,o,n)),IE=(t,o)=>$s(t,"table",o),tf=(t,o,n,s,i=Jo)=>{const c=1===s;if(!c&&n<=0)return Q1.first(t[0]);if(c&&n>=t.length-1)return Q1.last(t[t.length-1]);{const d=n+s,u=t[d];return i(u)?Q1.middle(o,u):tf(t,o,d,s,i)}},kS=(t,o)=>IE(t,o).bind(n=>{const s=SS(n,"th,td",Jo);return Ps(s,i=>yr(t,i)).map(i=>({index:i,all:s}))}),Rh=(t,o,n,s,i)=>{const c=W(fe(n),"td,th,caption").map(u=>u.dom);var u;return((u,p,v)=>Jn(u,(w,C)=>w.fold(()=>X.some(C),O=>{const R=Math.sqrt(Math.abs(O.x-p)+Math.abs(O.y-v)),A=Math.sqrt(Math.abs(C.x-p)+Math.abs(C.y-v));return X.some(A<R?C:O)}),X.none()))(Yt((u=t,ks(c,v=>{const w={left:(C=pm(v.getBoundingClientRect())).left- -1,top:C.top- -1,right:C.right+-2,bottom:C.bottom+-2,width:C.width+-1,height:C.height+-1};var C;return[{x:w.left,y:u(w),cell:v},{x:w.right,y:u(w),cell:v}]})),u=>o(u,i)),s,i).map(u=>u.cell)},HE=mt(Rh,t=>t.bottom,(t,o)=>t.y<o),ES=mt(Rh,t=>t.top,(t,o)=>t.y>o),OS=(t,o,n)=>{const s=t(o,n);return(i=s).breakType===Ed.Wrap&&0===i.positions.length||!je(n.getNode())&&(i=>i.breakType===Ed.Br&&1===i.positions.length)(s)?!((i,c,d)=>d.breakAt.exists(u=>i(c,u).breakAt.isSome()))(t,o,s):s.breakAt.isNone();var i},TS=mt(OS,K1),Dh=mt(OS,X1),PE=(t,o,n,s)=>{const i=t.selection.getRng(),c=o?1:-1;return!(!uh()||!((d,u,p)=>{const v=rt.fromRangeStart(u);return Aa(!d,p).exists(w=>w.isEqual(v))})(o,i,n)||(kd(c,t,n,!o,!1).each(d=>{Yu(t,d)}),0))},id=(t,o,n)=>{const s=((c,d)=>{const u=d.getNode(c);return oo(u)?X.some(u):X.none()})(!!o,n),i=!1===o;s.fold(()=>Yu(t,n.toRange()),c=>Aa(i,t.getBody()).filter(d=>d.isEqual(n)).fold(()=>Yu(t,n.toRange()),d=>{return u=o,v=c,void(p=t).undoManager.transact(()=>{const w=u?qi:ei,C=EE(p,fe(v),w);Yu(p,C)});var u,p,v}))},of=(t,o,n,s)=>{const i=t.selection.getRng(),c=rt.fromRangeStart(i),d=t.getBody();if(!o&&TS(s,c)){const u=(p=d,(C=v=n,O=w=c,Pn(O.getClientRects()).bind(R=>HE(C,R.left,R.top)).bind(R=>{return Tg(Il(A=R).map(H=>K1(A,H).positions.concat(H)).getOr([]),O);var A})).orThunk(()=>Pn(w.getClientRects()).bind(C=>J2(iS(p,rt.before(v)),C.left))).getOr(rt.before(v)));return id(t,o,u),!0}var p,v,w,C,O;if(o&&Dh(s,c)){const u=((p,v,w)=>((C,O)=>Gn(O.getClientRects()).bind(R=>ES(C,R.left,R.top)).bind(R=>{return Tg(dl(A=R).map(H=>[H].concat(X1(A,H).positions)).getOr([]),O);var A}))(v,w).orThunk(()=>Pn(w.getClientRects()).bind(C=>J2(rv(p,rt.after(v)),C.left))).getOr(rt.after(v)))(d,n,c);return id(t,o,u),!0}return!1},mw=(t,o,n)=>X.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(s=>X.from(t.dom.getParent(s,"table")).map(i=>n(t,o,i,s))).getOr(!1),AS=(t,o)=>mw(t,o,PE),FE=(t,o)=>mw(t,o,of),NS=(t,o,n)=>n.fold(X.none,X.none,(s,i)=>{return(c=i,((d,u)=>{const p=v=>{for(let w=0;w<v.childNodes.length;w++){const C=fe(v.childNodes[w]);if(u(C))return X.some(C);const O=p(v.childNodes[w]);if(O.isSome())return O}return X.none()};return p(d.dom)})(c,I4)).map(d=>{return(t=>{const o=Dp.getWin(t).dom,n=(i,c,d,u)=>Px(o,i,c,d,u),s=t.match({domRange:c=>{const d=fe(c.startContainer),u=fe(c.endContainer);return x1(d,c.startOffset,u,c.endOffset)},relative:zT,exact:x1});return((i,c)=>{var u;return((u,p)=>{const v=p.ltr();return v.collapsed?p.rtl().filter(w=>!1===w.collapsed).map(w=>bg.rtl(fe(w.endContainer),w.endOffset,fe(w.startContainer),w.startOffset)).getOrThunk(()=>Rr(0,bg.ltr,v)):Rr(0,bg.ltr,v)})(0,(u=i,c.match({domRange:v=>({ltr:ot(v),rtl:X.none}),relative:(v,w)=>({ltr:Pa(()=>Rp(u,v,w)),rtl:Pa(()=>X.some(Rp(u,w,v)))}),exact:(v,w,C,O)=>({ltr:Pa(()=>Px(u,v,w,C,O)),rtl:Pa(()=>X.some(Px(u,C,O,v,w)))})})))})(o,s).match({ltr:n,rtl:n})})(Dp.exact(u=d,0,u,0));var u});var c},s=>(t.execCommand("mceTableInsertRowAfter"),nf(t,o,s))),nf=(t,o,n)=>{return NS(t,o,(i=Li,kS(s=n,void 0).fold(()=>Q1.none(s),c=>tf(c.all,s,c.index,1,i))));var s,i},MS=(t,o,n)=>{return NS(t,o,(i=Li,kS(s=n,void 0).fold(()=>Q1.none(),c=>tf(c.all,s,c.index,-1,i))));var s,i},RS=(t,o)=>{const n=["table","li","dl"],s=fe(t.getBody()),i=d=>{const u=Er(d);return yr(d,s)||Ie(n,u)},c=t.selection.getRng();return(d=fe(o?c.endContainer:c.startContainer),u=i,((p,v,w=Do)=>w(v)?X.none():Ie(p,Er(v))?X.some(v):Al(v,p.join(","),C=>li(C,"table")||w(C)))(["td","th"],d,u)).map(d=>(IE(d,i).each(u=>{t.model.table.clearSelectedCells(u.dom)}),t.selection.collapse(!o),(o?nf:MS)(t,i,d).each(u=>{t.selection.setRng(u)}),!0)).getOr(!1);var d,u},du=(t,o)=>({container:t,offset:o}),e0=ws.DOM,gw=t=>o=>t===o?-1:0,DS=(t,o,n)=>{if(tt(t)&&o>=0)return X.some(du(t,o));{const s=Tu(e0);return X.from(s.backwards(t,o,gw(t),n)).map(i=>du(i.container,i.container.data.length))}},hw=(t,o,n)=>{if(!tt(t))return X.none();if(o>=0&&o<=t.data.length)return X.some(du(t,o));{const i=Tu(e0);return X.from(i.backwards(t,o,gw(t),n)).bind(c=>hw(c.container,o+c.container.data.length,n))}},zE=(t,o,n)=>{if(!tt(t))return X.none();const s=t.data;if(o<=s.length)return X.some(du(t,o));{const i=Tu(e0);return X.from(i.forwards(t,o,gw(t),n)).bind(c=>zE(c.container,o-s.length,n))}},uc=(t,o,n,s,i)=>{const c=Tu(t,(d=t,u=>d.isBlock(u)||Ie(["BR","IMG","HR","INPUT"],u.nodeName)||"false"===d.getContentEditable(u)));var d;return X.from(c.backwards(o,n,s,i))},pw=t=>qc(t.toString().replace(/\u00A0/g," ")),BS=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),gv=(t,o)=>t.substring(o.length),LS=(t,o,n,s=0)=>{return(i=fe(o.startContainer),$s(i,H4)).fold(()=>((c,d,u,p=0)=>{if(!(v=d).collapsed||!tt(v.startContainer))return X.none();var v;const w={text:"",offset:0},C=c.getParent(d.startContainer,c.isBlock)||c.getRoot();return uc(c,d.startContainer,d.startOffset,(O,R,A)=>(w.text=A+w.text,w.offset+=R,((H,M,P)=>{let j;const $=P.charAt(0);for(j=M-1;j>=0;j--){const oe=H.charAt(j);if(BS(oe))return X.none();if($===oe&&Bt(H,P,j,M))break}return X.some(j)})(w.text,w.offset,u).getOr(R)),C).bind(O=>{const R=d.cloneRange();if(R.setStart(O.container,O.offset),R.setEnd(d.endContainer,d.endOffset),R.collapsed)return X.none();const A=pw(R);return 0!==A.lastIndexOf(u)||gv(A,u).length<p?X.none():X.some({text:gv(A,u),range:R,trigger:u})})})(t,o,n,s),c=>{const d=t.createRng();d.selectNode(c.dom);const u=pw(d);return X.some({range:d,text:gv(u,n),trigger:n})});var i},t0=t=>{if(3===t.nodeType)return du(t,t.data.length);{const o=t.childNodes;return o.length>0?t0(o[o.length-1]):du(t,o.length)}},Zm=(t,o)=>{const n=t.childNodes;return n.length>0&&o<n.length?Zm(n[o],0):n.length>0&&1===t.nodeType&&n.length===o?t0(n[n.length-1]):du(t,o)},Bh=(t,o,n,s={})=>{var i;const c=o(),d=null!==(i=t.selection.getRng().startContainer.nodeValue)&&void 0!==i?i:"",u=Yt(c.lookupByTrigger(n.trigger),v=>n.text.length>=v.minChars&&v.matches.getOrThunk(()=>{return w=t.dom,C=>{const O=Zm(C.startContainer,C.startOffset);return!((R,A)=>{var H;const M=null!==(H=R.getParent(A.container,R.isBlock))&&void 0!==H?H:R.getRoot();return uc(R,A.container,A.offset,(P,j)=>0===j?-1:j,M).filter(P=>{const j=P.container.data.charAt(P.offset-1);return!BS(j)}).isSome()})(w,O)};var w})(n.range,d,n.text));if(0===u.length)return X.none();const p=Promise.all(Gt(u,v=>v.fetch(n.text,v.maxResults,s).then(w=>({matchText:n.text,items:w,columns:v.columns,onAction:v.onAction,highlightOn:v.highlightOn}))));return X.some({lookupData:p,context:n})};var Td;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Td||(Td={}));const hv=(t,o,n)=>t.stype===Td.Error?o(t.serror):n(t.svalue),Lh=t=>({stype:Td.Value,svalue:t}),o0=t=>({stype:Td.Error,serror:t}),HA=hv,fw=t=>ut(t)&&Sr(t).length>100?" removed due to size":JSON.stringify(t,null,2),pv=(t,o)=>o0([{path:t,getErrorInfo:o}]),IS=t=>(...o)=>{if(0===o.length)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<o.length;s++){const i=o[s];for(const c in i)Vo(i,c)&&(n[c]=t(n[c],i[c]))}return n},HS=IS((t,o)=>pt(t)&&pt(o)?HS(t,o):o),ZE=(IS((t,o)=>o),t=>({tag:"defaultedThunk",process:ot(t)})),mc=(t,o,n)=>{switch(t.tag){case"field":return o(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},bw=t=>({extract:(o,n)=>{return(s=t(n)).stype===Td.Error?pv(o,ot(s.serror)):s;var s},toString:ot("val")}),fv=bw(Lh),jE=(t,o,n,s)=>s(Nn(t,o).getOrThunk(()=>n(t))),UE=(t,o,n,s,i)=>{const c=u=>i.extract(o.concat([s]),u),d=u=>u.fold(()=>Lh(X.none()),p=>{return(w=i.extract(o.concat([s]),p)).stype===Td.Value?{stype:Td.Value,svalue:(0,X.some)(w.svalue)}:w;var w});switch(t.tag){case"required":return u=o,w=c,Nn(p=n,v=s).fold(()=>{return O=v,R=p,pv(u,()=>'Could not find valid *required* value for "'+O+'" in '+fw(R));var O,R},w);case"defaultedThunk":return jE(n,s,t.process,c);case"option":return((u,p,v)=>v(Nn(u,p)))(n,s,d);case"defaultedOptionThunk":return((u,p,v,w)=>w(Nn(u,p).map(C=>!0===C?v(u):C)))(n,s,t.process,d);case"mergeWithThunk":return jE(n,s,ot({}),u=>{const p=HS(t.process(n),u);return c(p)})}var u,p,v,w},vw=t=>({extract:(o,n)=>((s,i,c)=>{const d={},u=[];for(const p of c)mc(p,(v,w,C,O)=>{const R=UE(C,s,i,v,O);HA(R,A=>{u.push(...A)},A=>{d[w]=A})},(v,w)=>{d[v]=w(i)});return u.length>0?o0(u):Lh(d)})(o,n,t),toString:()=>"obj{\n"+Gt(t,n=>mc(n,(s,i,c,d)=>s+" -> "+d.toString(),(s,i)=>"state("+s+")")).join("\n")+"}"}),yw=t=>({extract:(o,n)=>(t=>{const o=(s=>{const i=[],c=[];return Ue(s,d=>{hv(d,u=>c.push(u),u=>i.push(u))}),{values:i,errors:c}})(t);return o.errors.length>0?(n=o.errors,Dr(o0,Ha)(n)):Lh(o.values);var n})(Gt(n,(i,c)=>t.extract(o.concat(["["+c+"]"]),i))),toString:()=>"array("+t.toString()+")"}),$E=(t,o)=>((t,o)=>({extract:(n,s)=>Nn(s,t).fold(()=>{return c=t,pv(n,()=>'Choice schema did not contain choice key: "'+c+'"');var c},i=>{return c=n,d=s,Nn(u=o,p=i).fold(()=>{return w=u,C=p,pv(c,()=>'The chosen schema: "'+C+'" did not exist in branches: '+fw(w));var w,C},v=>v.extract(c.concat(["branch: "+p]),d));var c,d,u,p}),toString:()=>"chooseOn("+t+"). Possible values: "+Sr(o)}))(t,Nr(o,vw)),FA=ot(fv),ww=(t,o)=>bw(n=>{const s=typeof n;return t(n)?Lh(n):o0(`Expected type: ${o} but got: ${s}`)}),PS=ww(Oe,"number"),xw=ww(uo,"string"),zA=ww(At,"boolean"),bv=ww(it,"function"),n0=(t,o,n,s)=>({tag:"field",key:t,newKey:o,presence:n,prop:s}),qE=(t,o)=>({tag:"custom",newKey:t,instantiator:o}),GE=(t,o)=>n0(t,t,{tag:"required",process:{}},o),Cw=t=>GE(t,xw),vv=t=>GE(t,bv),_w=(t,o)=>n0(t,t,{tag:"option",process:{}},o),yv=t=>_w(t,xw),Ih=(t,o,n)=>n0(t,t,ZE(o),n),KE=(t,o)=>Ih(t,o,PS),XE=(t,o,n)=>{return Ih(t,o,(s=n,i=c=>Ie(s,c)?Xs.value(c):Xs.error(`Unsupported value: "${c}", choose one of "${s.join(", ")}".`),bw(c=>i(c).fold(o0,Lh))));var s,i},FS=(t,o)=>Ih(t,o,zA),Mg=(t,o)=>Ih(t,o,bv),VA=Cw("type"),Sw=vv("fetch"),zS=vv("onAction"),VS=Mg("onSetup",()=>yo),YE=yv("text"),JE=yv("icon"),QE=yv("tooltip"),kw=yv("label"),ZA=FS("active",!1),jA=FS("enabled",!0),Ew=FS("primary",!1),r0=t=>Ih("type",t,xw),UA=vw([VA,Cw("trigger"),KE("minChars",1),((t,o)=>n0(t,t,ZE(1),FA()))("columns"),KE("maxResults",10),_w("matches",bv),Sw,zS,(eO=xw,Ih("highlightOn",[],yw(eO)))]);var eO;const ZS=[jA,QE,JE,YE,VS],tO=[ZA].concat(ZS),jS=[Mg("predicate",Do),XE("scope","node",["node","editor"]),XE("position","selection",["node","selection","line"])],oO=ZS.concat([r0("contextformbutton"),Ew,zS,qE("original",mn)]),WA=tO.concat([r0("contextformbutton"),Ew,zS,qE("original",mn)]),$A=ZS.concat([r0("contextformbutton")]),yi=tO.concat([r0("contextformtogglebutton")]),qA=$E("type",{contextformbutton:oO,contextformtogglebutton:WA});vw([r0("contextform"),Mg("initValue",ot("")),kw,((t,o)=>n0(t,t,{tag:"required",process:{}},yw(o)))("commands",qA),_w("launch",$E("type",{contextformbutton:$A,contextformtogglebutton:yi}))].concat(jS));const nO=t=>{const o=Us(),n=Za(!1),s=o.isSet,i=()=>{s()&&(qa(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),o.clear())},c=Pa(()=>(t=>{const o=t.ui.registry.getAll().popups,n=Nr(o,c=>{return(d=c,((t,o,n)=>{return s=(u=o.extract([t],d=n)).stype===Td.Error?{stype:Td.Error,serror:(u=>({input:d,errors:u}))(u.serror)}:u,hv(s,Xs.error,Xs.value);var d,u,s})("Autocompleter",UA,{trigger:d.ch,...d})).fold(u=>{throw new Error("Errors: \n"+(v=>{const w=v.length>10?v.slice(0,10).concat([{path:[],getErrorInfo:ot("... (only showing first ten failures)")}]):v;return Gt(w,C=>"Failed path: ("+C.path.join(" > ")+")\n"+C.getErrorInfo())})((p=u).errors).join("\n")+"\n\nInput object: "+fw(p.input));var p},mn);var d}),s=ar(cs(n,c=>c.trigger)),i=Dt(n);return{dataset:n,triggers:s,lookupByTrigger:c=>Yt(i,d=>d.trigger===c)}})(t)),d=u=>{var p;(p=u,o.get().map(v=>LS(t.dom,t.selection.getRng(),v.trigger).bind(w=>Bh(t,c,w,p))).getOrThunk(()=>((v,w)=>{const C=w(),O=v.selection.getRng();return(R=v.dom,A=O,H=C,Di(H.triggers,M=>LS(R,A,M))).bind(R=>Bh(v,w,R));var R,A,H})(t,c))).fold(i,p=>{var v,C;v=p.context,s()||(C=v.range,qa(t).autocompleter.addDecoration(C),o.set({trigger:v.trigger,matchLength:v.text.length})),p.lookupData.then(v=>{o.get().map(w=>{const C=p.context;w.trigger===C.trigger&&(C.text.length-w.matchLength>=10?i():(o.set({...w,matchLength:C.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:v}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:v}))))})})})};t.addCommand("mceAutocompleterReload",(u,p)=>{const v=ut(p)?p.fetchOptions:{};d(v)}),t.addCommand("mceAutocompleterClose",i),((u,p)=>{const v=Gi(p.load,50);u.on("keypress compositionend",w=>{27!==w.which&&v.throttle()}),u.on("keydown",w=>{const C=w.which;8===C?v.throttle():27===C&&p.cancelIfNecessary()}),u.on("remove",v.cancel)})(t,{cancelIfNecessary:i,load:d})},Ow=t=>(o,n,s={})=>{const i=o.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:yo,inputType:n},d=Tf(new InputEvent(t));return o.dispatch(t,{...d,...c,...s})},wv=Ow("input"),Ju=Ow("beforeinput"),Hh=(t,o)=>{const n=t.dom,s=t.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const c=(d=>{for(;d;){if(ve(d)||tt(d)&&d.data&&/[\r\n\s]/.test(d.data))return d;d=d.nextSibling}return null})(o.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&o.insertBefore(n.doc.createTextNode(os),o.firstChild)}const i=n.createRng();if(o.normalize(),o.hasChildNodes()){const c=new F(o,o);let d,u=o;for(;d=c.current();){if(tt(d)){i.setStart(d,0),i.setEnd(d,0);break}if(s[d.nodeName.toLowerCase()]){i.setStartBefore(d),i.setEndBefore(d);break}u=d,d=c.next()}d||(i.setStart(u,0),i.setEnd(u,0))}else je(o)?o.nextSibling&&n.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));t.selection.setRng(i),yh(t,i)},xv=(t,o)=>{const n=t.getRoot();let s,i=o;for(;i!==n&&i&&"false"!==t.getContentEditable(i);)"true"===t.getContentEditable(i)&&(s=i),i=i.parentNode;return i!==n?s:n},Cv=t=>X.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Tw=(t,o)=>{const n=t?.parentNode;return ne(n)&&n.nodeName===o},Aw=t=>ne(t)&&/^(OL|UL|LI)$/.test(t.nodeName),_v=t=>{const o=t.parentNode;return ne(n=o)&&/^(LI|DT|DD)$/.test(n.nodeName)?o:t;var n},rf=(t,o,n)=>{let s=t[n?"firstChild":"lastChild"];for(;s&&!ve(s);)s=s[n?"nextSibling":"previousSibling"];return s===o},Nw=(t,o)=>o&&"A"===o.nodeName&&t.isEmpty(o),sf=t=>{t.innerHTML='<br data-mce-bogus="1">'},af=(t,o)=>t.nodeName===o||t.previousSibling&&t.previousSibling.nodeName===o,uu=(t,o)=>ne(o)&&t.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&t.isEditable(o.parentNode)&&"false"!==t.getContentEditable(o),lf=(t,o,n)=>tt(o)?t?1===n&&o.data.charAt(n-1)===Da?0:n:n===o.data.length-1&&o.data.charAt(n)===Da?o.data.length:n:n,s0=(t,o)=>{yl(t).toLowerCase()===o.tagName.toLowerCase()&&((n,s,i)=>{const c=n.dom;X.from(i.style).map(c.parseStyle).each(w=>{const C={...yc(fe(s)),...w};c.setStyles(s,C)});const d=X.from(i.class).map(w=>w.split(/\s+/)),u=X.from(s.className).map(w=>Yt(w.split(/\s+/),C=>""!==C));As(d,u,(w,C)=>{const O=Yt(C,A=>!Ie(w,A)),R=[...w,...O];c.setAttrib(s,"class",R.join(" "))});const p=["style","class"],v=bs(i,(w,C)=>!Ie(p,C));c.setAttribs(s,v)})(t,o,Ki(t))},US={insert:(t,o)=>{let n,s,i,c,d=!1;const u=t.dom,p=t.schema,v=p.getNonEmptyElements(),w=t.selection.getRng(),C=yl(t),O=w.collapsed&&w.startContainer===t.dom.getRoot(),R=fe(w.startContainer),A=bc(R,w.startOffset),H=A.exists(Ae=>Ui(Ae)&&!Li(Ae)),M=O&&H,P=Ae=>{let Pe=n;const Me=p.getTextInlineElements();let qe;qe=Ae||"TABLE"===i||"HR"===i?u.create(Ae||C):Se.cloneNode(!1);let Qt=qe;if(!1===th(t))u.setAttrib(qe,"style",null),u.setAttrib(qe,"class",null);else do{if(Me[Pe.nodeName]){if(Dc(Pe)||ye(Pe))continue;const Ht=Pe.cloneNode(!1);u.setAttrib(Ht,"id",""),qe.hasChildNodes()?(Ht.appendChild(qe.firstChild),qe.appendChild(Ht)):(Qt=Ht,qe.appendChild(Ht))}}while((Pe=Pe.parentNode)&&Pe!==be);return s0(t,qe),sf(Qt),qe},j=Ae=>{const Pe=lf(Ae,n,s);if(tt(n)&&(Ae?Pe>0:Pe<n.data.length))return!1;if(n.parentNode===Se&&d&&!Ae||Ae&&ve(n)&&n===Se.firstChild)return!0;if(af(n,"TABLE")||af(n,"HR"))return d&&!Ae||!d&&Ae;const Me=new F(n,Se);let qe;for(tt(n)&&(Ae&&0===Pe?Me.prev():Ae||Pe!==n.data.length||Me.next());qe=Me.current();){if(ve(qe)){if(!qe.getAttribute("data-mce-bogus")){const Qt=qe.nodeName.toLowerCase();if(v[Qt]&&"br"!==Qt)return!1}}else if(tt(qe)&&!oc(qe.data))return!1;Ae?Me.prev():Me.next()}return!0},$=()=>{let Ae;return Ae=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==ze?P(C):P(),((Pe,Me)=>{const qe=Ud(Pe);return!eo(Me)&&(uo(qe)?Ie(It.explode(qe),Me.nodeName.toLowerCase()):qe)})(t,c)&&uu(u,c)&&u.isEmpty(Se,void 0,{includeZwsp:!0})?Ae=u.split(c,Se):u.insertAfter(Ae,Se),Hh(t,Ae),Ae};db(u,w).each(Ae=>{w.setStart(Ae.startContainer,Ae.startOffset),w.setEnd(Ae.endContainer,Ae.endOffset)}),n=w.startContainer,s=w.startOffset;const oe=!(!o||!o.shiftKey),ie=!(!o||!o.ctrlKey);ve(n)&&n.hasChildNodes()&&!M&&(d=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,s=d&&tt(n)?n.data.length:0);const be=xv(u,n);if(!be||((Ae,Pe)=>{const Me=Ae.dom.getParent(Pe,"ol,ul,dl");return null!==Me&&"false"===Ae.dom.getContentEditableParent(Me)})(t,n))return;oe||(n=((Ae,Pe,Me,qe,Qt)=>{var Ht,Lo;const to=Ae.dom,wn=null!==(Ht=xv(to,qe))&&void 0!==Ht?Ht:to.getRoot();let xn=to.getParent(qe,to.isBlock);if(!xn||!uu(to,xn)){if(xn=xn||wn,!xn.hasChildNodes()){const Te=to.create(Pe);return s0(Ae,Te),xn.appendChild(Te),Me.setStart(Te,0),Me.setEnd(Te,0),Te}let ao,Mo=qe;for(;Mo&&Mo.parentNode!==xn;)Mo=Mo.parentNode;for(;Mo&&!to.isBlock(Mo);)ao=Mo,Mo=Mo.previousSibling;const rn=null===(Lo=ao?.parentElement)||void 0===Lo?void 0:Lo.nodeName;if(ao&&rn&&Ae.schema.isValidChild(rn,Pe.toLowerCase())){const Te=ao.parentNode,Re=to.create(Pe);for(s0(Ae,Re),Te.insertBefore(Re,ao),Mo=ao;Mo&&!to.isBlock(Mo);){const st=Mo.nextSibling;Re.appendChild(Mo),Mo=st}Me.setStart(qe,Qt),Me.setEnd(qe,Qt)}}return qe})(t,C,w,n,s));let Se=u.getParent(n,u.isBlock)||u.getRoot();c=ne(Se?.parentNode)?u.getParent(Se.parentNode,u.isBlock):null,i=Se?Se.nodeName.toUpperCase():"";const ze=c?c.nodeName.toUpperCase():"";if("LI"!==ze||ie||(Se=c,c=c.parentNode,i=ze),ve(c)&&(Ae=t,Me=Se,!oe&&Me.nodeName.toLowerCase()===yl(Ae)&&Ae.dom.isEmpty(Me)&&((qe,Qt,Ht)=>{let Lo=Qt;for(;Lo&&Lo!==qe&&jn(Lo.nextSibling);){const wn=Lo.parentElement;if(!wn||(to=wn,!Vo(Ae.schema.getTextBlockElements(),to.nodeName.toLowerCase())))return qs(wn);Lo=wn}var to;return!1})(Ae.getBody(),Me)))return((Ae,Pe,Me)=>{var qe,Qt,Ht;const Lo=Pe(yl(Ae)),to=Ae.dom.getParent(Me,qs);to&&(Ae.dom.insertAfter(Lo,to),Hh(Ae,Lo),(null!==(Ht=null===(Qt=null===(qe=Me.parentElement)||void 0===qe?void 0:qe.childNodes)||void 0===Qt?void 0:Qt.length)&&void 0!==Ht?Ht:0)>1&&Ae.dom.remove(Me))})(t,P,Se);var Ae,Me;if(/^(LI|DT|DD)$/.test(i)&&ve(c)&&u.isEmpty(Se))return void((Ae,Pe,Me,qe,Qt)=>{const Ht=Ae.dom,Lo=Ae.selection.getRng(),to=Me.parentNode;if(Me===Ae.getBody()||!to)return;var wn;Aw(wn=Me)&&Aw(wn.parentNode)&&(Qt="LI");let xn=Pe(Qt);if(rf(Me,qe,!0)&&rf(Me,qe,!1))if(Tw(Me,"LI")){const ao=_v(Me);Ht.insertAfter(xn,ao),(null===(rn=(Mo=Me).parentNode)||void 0===rn?void 0:rn.firstChild)===Mo?Ht.remove(ao):Ht.remove(Me)}else Ht.replace(xn,Me);else if(rf(Me,qe,!0))Tw(Me,"LI")?(Ht.insertAfter(xn,_v(Me)),xn.appendChild(Ht.doc.createTextNode(" ")),xn.appendChild(Me)):to.insertBefore(xn,Me),Ht.remove(qe);else if(rf(Me,qe,!1))Ht.insertAfter(xn,_v(Me)),Ht.remove(qe);else{Me=_v(Me);const ao=Lo.cloneRange();ao.setStartAfter(qe),ao.setEndAfter(Me);const Mo=ao.extractContents();"LI"===Qt&&((rn,Te)=>rn.firstChild&&"LI"===rn.firstChild.nodeName)(Mo)?(xn=Mo.firstChild,Ht.insertAfter(Mo,Me)):(Ht.insertAfter(Mo,Me),Ht.insertAfter(xn,Me)),Ht.remove(qe)}var Mo,rn;Hh(Ae,xn)})(t,P,c,Se,C);if(!(M||Se!==t.getBody()&&uu(u,Se)))return;const at=Se.parentNode;let Je;if(M)Je=P(C),A.fold(()=>{Un(R,fe(Je))},Ae=>{ei(Ae,fe(Je))}),t.selection.setCursorLocation(Je,0);else if(sl(Se))Je=Cc(Se),u.isEmpty(Se)&&sf(Se),s0(t,Je),Hh(t,Je);else if(j(!1))Je=$();else if(j(!0)&&at){Je=at.insertBefore(P(),Se);const Ae=fe(w.startContainer).dom.hasChildNodes()&&w.collapsed;Hh(t,af(Se,"HR")||Ae?Je:Se)}else{const Ae=(Me=>{const qe=Me.cloneRange();return qe.setStart(Me.startContainer,lf(!0,Me.startContainer,Me.startOffset)),qe.setEnd(Me.endContainer,lf(!1,Me.endContainer,Me.endOffset)),qe})(w).cloneRange();Ae.setEndAfter(Se);const Pe=Ae.extractContents();(Me=>{Ue(gn(fe(Me),Kn),qe=>{const Qt=qe.dom;Qt.nodeValue=qc(Qt.data)})})(Pe),(Me=>{let qe=Me;do{tt(qe)&&(qe.data=qe.data.replace(/^[\r\n]+/,"")),qe=qe.firstChild}while(qe)})(Pe),Je=Pe.firstChild,u.insertAfter(Pe,Se),((Me,qe,Qt)=>{var Ht;const Lo=[];if(!Qt)return;let to=Qt;for(;to=to.firstChild;){if(Me.isBlock(to))return;ve(to)&&!qe[to.nodeName.toLowerCase()]&&Lo.push(to)}let wn=Lo.length;for(;wn--;)to=Lo[wn],(!to.hasChildNodes()||to.firstChild===to.lastChild&&""===(null===(Ht=to.firstChild)||void 0===Ht?void 0:Ht.nodeValue)||Nw(Me,to))&&Me.remove(to)})(u,v,Je),((Me,qe)=>{qe.normalize();const Qt=qe.lastChild;(!Qt||ve(Qt)&&/^(left|right)$/gi.test(Me.getStyle(Qt,"float",!0)))&&Me.add(qe,"br")})(u,Se),u.isEmpty(Se)&&sf(Se),Je.normalize(),u.isEmpty(Je)?(u.remove(Je),$()):(s0(t,Je),Hh(t,Je))}u.setAttrib(Je,"id",""),t.dispatch("NewBlock",{newBlock:Je})},fakeEventName:"insertParagraph"},rO=(t,o,n)=>{const s=t.dom.createRng();n?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),t.selection.setRng(s),yh(t,s)},sO=(t,o)=>{const n=vn("br");ei(fe(o),n),t.undoManager.add()},KA=(t,o)=>{XA(t.getBody(),o)||qi(fe(o),vn("br"));const n=vn("br");qi(fe(o),n),rO(t,n.dom,!1),t.undoManager.add()},XA=(t,o)=>{return n=rt.after(o),!!je(n.getNode())||fi(t,rt.after(o)).map(s=>je(s.getNode())).getOr(!1);var n},WS=t=>t&&"A"===t.nodeName&&"href"in t,YA=t=>t.fold(Do,WS,WS,Do),JA=(t,o)=>{o.fold(yo,mt(sO,t),mt(KA,t),yo)},aO={insert:(t,o)=>{const n=(s=>{const i=mt(ju,s),c=rt.fromRangeStart(s.selection.getRng());return Pm(i,s.getBody(),c).filter(YA)})(t);n.isSome()?n.each(mt(JA,t)):((s,i)=>{const d=s.dom,u=s.selection.getRng();let p,v=!1;db(d,u).each(M=>{u.setStart(M.startContainer,M.startOffset),u.setEnd(M.endContainer,M.endOffset)});let w=u.startOffset,C=u.startContainer;if(ve(C)&&C.hasChildNodes()){const M=w>C.childNodes.length-1;C=C.childNodes[Math.min(w,C.childNodes.length-1)]||C,w=M&&tt(C)?C.data.length:0}let O=d.getParent(C,d.isBlock);const R=O&&O.parentNode?d.getParent(O.parentNode,d.isBlock):null;"LI"!==(R?R.nodeName.toUpperCase():"")||!(!i||!i.ctrlKey)||(O=R),tt(C)&&w>=C.data.length&&(((M,P,j)=>{const $=new F(P,j);let oe;const ie=M.getNonEmptyElements();for(;oe=$.next();)if(ie[oe.nodeName.toLowerCase()]||tt(oe)&&oe.length>0)return!0;return!1})(s.schema,C,O||d.getRoot())||(p=d.create("br"),u.insertNode(p),u.setStartAfter(p),u.setEndAfter(p),v=!0)),p=d.create("br"),gi(d,u,p),rO(s,p,v),s.undoManager.add()})(t,o)},fakeEventName:"insertLineBreak"},iO=(t,o)=>Cv(t).filter(n=>o.length>0&&li(fe(n),o)).isSome(),ld=Ta([{br:[]},{block:[]},{none:[]}]),QA=(t,o)=>{return iO(n=t,dp(n));var n},lO=t=>(o,n)=>Cv(o).filter(i=>Gs(fe(i))).isSome()===t,cO=(t,o)=>(n,s)=>Cv(n).fold(ot(""),d=>d.nodeName.toUpperCase())===t.toUpperCase()===o,e5=t=>{const o=xv(t.dom,t.selection.getStart());return eo(o)},Sv=t=>cO("pre",t),kv=t=>(o,n)=>I0(o)===t,dO=(t,o)=>{return iO(n=t,Ll(n));var n},Ev=(t,o)=>o,uO=t=>{const o=yl(t),n=xv(t.dom,t.selection.getStart());return ne(n)&&t.schema.isValidChild(n.nodeName,o)},mO=t=>{const o=t.selection.getRng(),n=o.collapsed&&o.startContainer===t.dom.getRoot(),s=fe(o.startContainer),i=bc(s,o.startOffset).map(c=>Ui(c)&&!Li(c));return n&&i.getOr(!0)},cd=(t,o)=>(n,s)=>Jn(t,(i,c)=>i&&c(n,s),!0)?X.some(o):X.none(),Ov=(t,o,n)=>{o.selection.isCollapsed()||o.execCommand("delete"),ne(n)&&Ju(o,t.fakeEventName).isDefaultPrevented()||(t.insert(o,n),ne(n)&&wv(o,t.fakeEventName))},gO=(t,o)=>{const n=()=>Ov(aO,t,o),s=()=>Ov(US,t,o),i=(c=t,d=o,rS([cd([QA],ld.none()),cd([Sv(!0),e5],ld.none()),cd([cO("summary",!0)],ld.br()),cd([Sv(!0),kv(!1),Ev],ld.br()),cd([Sv(!0),kv(!1)],ld.block()),cd([Sv(!0),kv(!0),Ev],ld.block()),cd([Sv(!0),kv(!0)],ld.br()),cd([lO(!0),Ev],ld.br()),cd([lO(!0)],ld.block()),cd([dO],ld.br()),cd([Ev],ld.br()),cd([uO],ld.block()),cd([mO],ld.block())],[c,!(!d||!d.shiftKey)]).getOr(ld.none()));var c,d;switch(Wf(t)){case"linebreak":i.fold(n,n,yo);break;case"block":i.fold(s,s,yo);break;case"invert":i.fold(s,n,yo);break;default:i.fold(n,s,yo)}},$S=za(),t5=$S.os.isiOS()&&$S.browser.isSafari(),hO=(t,o)=>{var n;o.isDefaultPrevented()||(o.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{gO(t,o)}))},pO=za(),qS=t=>t.stopImmediatePropagation(),fO=t=>t.keyCode===vo.PAGE_UP||t.keyCode===vo.PAGE_DOWN,GS=(t,o,n)=>{n&&!t.get()?o.on("NodeChange",qS,!0):!n&&t.get()&&o.off("NodeChange",qS),t.set(n)},KS=(t,o)=>{const n=o.container(),s=o.offset();return tt(n)?(n.insertData(s,t),X.some(rt(n,s+t.length))):$l(o).map(i=>{const c=ir(t);return o.isAtEnd()?qi(i,c):ei(i,c),rt(c.dom,t.length)})},bO=mt(KS,os),vO=mt(KS," "),yO=t=>o=>{t.selection.setRng(o.toRange()),t.nodeChanged()},o5=t=>{const o=rt.fromRangeStart(t.selection.getRng()),n=fe(t.getBody());if(t.selection.isCollapsed()){const s=mt(ju,t),i=rt.fromRangeStart(t.selection.getRng());return Pm(s,t.getBody(),i).bind((c=n,d=>d.fold(u=>Ni(c.dom,rt.before(u)),u=>dl(u),u=>Il(u),u=>fi(c.dom,rt.after(u))))).map(c=>()=>{return(d=n,u=o,p=>SC(d,p)?bO(u):vO(u))(c).each(yO(t));var d,u})}var c;return X.none()},n5=t=>{return Br(er.browser.isFirefox()&&t.selection.isEditable()&&(o=t.dom,n=t.selection.getRng().startContainer,o.isEditable(o.getParent(n,"summary"))),()=>{const s=fe(t.getBody());var i,c;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(i=s,c=rt.fromRangeStart(t.selection.getRng()),SC(i,c)?bO(c):vO(c)).each(yO(t))});var o,n},Mw=t=>Q0(t)?[{keyCode:vo.TAB,action:Tn(RS,t,!0)},{keyCode:vo.TAB,shiftKey:!0,action:Tn(RS,t,!1)}]:[],wO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),nO(t),su(t))return Za(null);{const o=(t=>{const o=Za(null),n=mt(ju,t);return t.on("NodeChange",s=>{ig(t)&&(((i,c,d)=>{const u=Gt(W(fe(c.getRoot()),'*[data-mce-selected="inline-boundary"]'),w=>w.dom),p=Yt(u,i),v=Yt(d,i);Ue(_a(p,v),mt(uS,!1)),Ue(_a(v,p),mt(uS,!0))})(n,t.dom,s.parents),((i,c)=>{const d=c.get();if(i.selection.isCollapsed()&&!i.composing&&d){const u=rt.fromRangeStart(i.selection.getRng());rt.isTextPosition(u)&&!ti(p=u)&&!xc(p)&&(iv(i,((t,o)=>{return rt.isTextPosition(o)?(s=o,Em(n=t)&&s.container()===n?((i,c)=>{const d=ch(i.data.substr(0,c.offset())),u=ch(i.data.substr(c.offset()));return(d.text+u.text).length>0?(Om(i),rt(i,c.offset()-d.count)):c})(n,s):by(n,s)):((n,s)=>s.container()===n.parentNode?((i,c)=>{const d=c.container(),u=((p,v)=>{const w=Po(p,v);return-1===w?X.none():X.some(w)})(nr(d.childNodes),i).map(p=>p<c.offset()?rt(d,c.offset()-1):c).getOr(c);return $d(i),u})(n,s):by(n,s))(t,o);var n,s})(d,u)),c.set(null))}var p})(t,o),((i,c,d,u)=>{if(c.selection.isCollapsed()){const p=Yt(u,i);Ue(p,v=>{const w=rt.fromRangeStart(c.selection.getRng());Pm(i,c.getBody(),w).bind(C=>mS(c,d,C))})}})(n,t,o,s.parents))}),o})(t);return(n=t).on("keyup compositionstart",mt(TE,n)),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const p=er.os.isMacOS()||er.os.isiOS();mv([{keyCode:vo.RIGHT,action:Tn(NE,c,!0)},{keyCode:vo.LEFT,action:Tn(NE,c,!1)},{keyCode:vo.UP,action:Tn(Ng,c,!1)},{keyCode:vo.DOWN,action:Tn(Ng,c,!0)},...p?[{keyCode:vo.UP,action:Tn(cw,c,!1),metaKey:!0,shiftKey:!0},{keyCode:vo.DOWN,action:Tn(cw,c,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:vo.RIGHT,action:Tn(AS,c,!0)},{keyCode:vo.LEFT,action:Tn(AS,c,!1)},{keyCode:vo.UP,action:Tn(FE,c,!1)},{keyCode:vo.DOWN,action:Tn(FE,c,!0)},{keyCode:vo.RIGHT,action:Tn(Vm,c,!0)},{keyCode:vo.LEFT,action:Tn(Vm,c,!1)},{keyCode:vo.UP,action:Tn(dw,c,!1)},{keyCode:vo.DOWN,action:Tn(dw,c,!0)},{keyCode:vo.RIGHT,action:Tn(gS,c,d,!0)},{keyCode:vo.LEFT,action:Tn(gS,c,d,!1)},{keyCode:vo.RIGHT,ctrlKey:!p,altKey:p,action:Tn(pS,c,d)},{keyCode:vo.LEFT,ctrlKey:!p,altKey:p,action:Tn(uE,c,d)},{keyCode:vo.UP,action:Tn(DE,c,!1)},{keyCode:vo.DOWN,action:Tn(DE,c,!0)}],u).each(v=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{let i=!1;n.on("keydown",c=>{i=c.keyCode===vo.BACKSPACE,c.isDefaultPrevented()||((d,u,p)=>{const v=p.keyCode===vo.BACKSPACE?"deleteContentBackward":"deleteContentForward";LE([{keyCode:vo.BACKSPACE,action:Tn(wE,d)},{keyCode:vo.BACKSPACE,action:Tn(j2,d,!1)},{keyCode:vo.DELETE,action:Tn(j2,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(kg,d,!1)},{keyCode:vo.DELETE,action:Tn(kg,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(fS,d,u,!1)},{keyCode:vo.DELETE,action:Tn(fS,d,u,!0)},{keyCode:vo.BACKSPACE,action:Tn(Xy,d,!1)},{keyCode:vo.DELETE,action:Tn(Xy,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(U2,d,!1)},{keyCode:vo.DELETE,action:Tn(U2,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(xS,d,!1)},{keyCode:vo.DELETE,action:Tn(xS,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(eS,d,!1)},{keyCode:vo.DELETE,action:Tn(eS,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(Q_,d,!1)},{keyCode:vo.DELETE,action:Tn(Q_,d,!0)},{keyCode:vo.BACKSPACE,action:Tn(yS,d,!1)},{keyCode:vo.DELETE,action:Tn(yS,d,!0)}],p).filter(w=>d.selection.isEditable()).each(w=>{p.preventDefault(),Ju(d,v).isDefaultPrevented()||(w(),wv(d,v))})})(n,s,c)}),n.on("keyup",c=>{c.isDefaultPrevented()||((d,u,p)=>{const v=za(),w=v.os,C=v.browser,O=w.isMacOS()?[{keyCode:vo.BACKSPACE,altKey:!0,action:Tn(cv,d)},{keyCode:vo.DELETE,altKey:!0,action:Tn(cv,d)}]:[{keyCode:vo.BACKSPACE,ctrlKey:!0,action:Tn(cv,d)},{keyCode:vo.DELETE,ctrlKey:!0,action:Tn(cv,d)}];w.isMacOS()&&p&&O.push({keyCode:C.isFirefox()?224:91,action:Tn(cv,d)}),mv([{keyCode:vo.BACKSPACE,action:Tn(eE,d)},{keyCode:vo.DELETE,action:Tn(eE,d)},...O],u)})(n,c,i),i=!1})})(t,o),(n=>{let s=X.none();n.on("keydown",i=>{var c;i.keyCode===vo.ENTER&&(t5&&(c=>{if(!c.collapsed)return!1;const d=c.startContainer;if(tt(d)){const u=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,p=d.data.charAt(c.startOffset-1);return u.test(p)}return!1})(n.selection.getRng())?(s=X.some((c=n).selection.getBookmark()),c.undoManager.add()):hO(n,i))}),n.on("keyup",i=>{i.keyCode===vo.ENTER&&s.each(()=>{return d=i,(c=n).undoManager.undo(),s.fold(yo,u=>c.selection.moveToBookmark(u)),hO(c,d),void(s=X.none());var c,d})})})(t),(n=>{n.on("keydown",s=>{var i,c;s.isDefaultPrevented()||(c=s,LE([{keyCode:vo.SPACEBAR,action:Tn(o5,i=n)},{keyCode:vo.SPACEBAR,action:Tn(n5,i)}],c).each(d=>{c.preventDefault(),Ju(i,"insertText",{data:" "}).isDefaultPrevented()||(d(),wv(i,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",s=>{s.isComposing||(i=>{const c=fe(i.getBody());i.selection.isCollapsed()&&((t,o)=>{const n=o.container();if(!tt(n))return X.none();if((s=>{const i=s.container();return tt(i)&&Bt(i.data,os)})(o)){const s=fb(t,n,!1)||(i=>{const c=i.data,d=(u=>{const p=u.split("");return Gt(p,(v,w)=>he(v)&&w>0&&w<p.length-1&&$e(p[w-1])&&$e(p[w+1])?" ":v).join("")})(c);return d!==c&&(i.data=d,!0)})(n)||Fi(t,n,!1);return Br(s,o)}if(kC(t,o)){const s=fb(t,n,!0)||Fi(t,n,!0);return Br(s,o)}return X.none()})(c,rt.fromRangeStart(i.selection.getRng())).each(d=>{i.selection.setRng(d.toRange())})})(n)})})(t),(n=>{n.on("keydown",s=>{var c;s.isDefaultPrevented()||(c=s,mv([...Mw(n)],c).each(d=>{c.preventDefault()}))})})(t),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const p=er.os.isMacOS()||er.os.isiOS();mv([{keyCode:vo.END,action:Tn(lw,c,!0)},{keyCode:vo.HOME,action:Tn(lw,c,!1)},...p?[]:[{keyCode:vo.HOME,action:Tn(cw,c,!1),ctrlKey:!0,shiftKey:!0},{keyCode:vo.END,action:Tn(cw,c,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:vo.END,action:Tn(uw,c,!0)},{keyCode:vo.HOME,action:Tn(uw,c,!1)},{keyCode:vo.END,action:Tn(Y1,c,!0,d)},{keyCode:vo.HOME,action:Tn(Y1,c,!1,d)}],u).each(v=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{if(pO.os.isMacOS())return;const i=Za(!1);n.on("keydown",c=>{fO(c)&&GS(i,n,!0)}),n.on("keyup",c=>{var d,u,p;c.isDefaultPrevented()||(p=c,mv([{keyCode:vo.PAGE_UP,action:Tn(Y1,d=n,!1,u=s)},{keyCode:vo.PAGE_DOWN,action:Tn(Y1,d,!0,u)}],p)),fO(c)&&i.get()&&(GS(i,n,!1),n.nodeChanged())})})(t,o),o}var n};class xO{constructor(o){let n;this.lastPath=[],this.editor=o;const s=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const c=o.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};"nodechange"!==i.type&&jx(d,n)||o.dispatch("SelectionChange"),n=d}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&En(o)&&!s.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&En(o)&&("IMG"===o.selection.getNode().nodeName?td.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!bp(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();s=n.getStart(!0)||i,s.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(s,i)||(s=i);const c=[];this.editor.dom.getParent(s,d=>d===i||(c.push(d),!1)),this.editor.dispatch("NodeChange",{...o,element:s,parents:c})}}isSameElementPath(o){let n;const s=this.editor,i=Cr(s.dom.getParents(o,Jo,s.getBody()));if(i.length===this.lastPath.length){for(n=i.length;n>=0&&i[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=i,!0}return this.lastPath=i,!1}}const XS=Ks("image"),YS=Ks("event"),Rw=t=>o=>{o[YS]=t},JS=Rw(0),r5=Rw(2),QS=Rw(1),ek=Ks("mode"),Ga=t=>o=>{o[ek]=t},Qu=(t,o)=>Ga(o)(t),_O=Ga(0),tk=Ga(2),s5=Ga(1),ok=t=>o=>X.from(o[ek]).exists(s=>s===t),em=ok(0),SO=ok(1),tm=["none","copy","link","move"],a5=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],nk=()=>{const t=new window.DataTransfer;let o="move",n="all";const s={get dropEffect(){return o},set dropEffect(i){Ie(tm,i)&&(o=i)},get effectAllowed(){return n},set effectAllowed(i){(t=>X.from(t[YS]).exists(n=>0===n))(s)&&Ie(a5,i)&&(n=i)},get items(){return i=s,c=t.items,{...c,get length(){return c.length},add:(d,u)=>{if(em(i)){if(!uo(d))return c.add(d);if(!Ft(u))return c.add(d,u)}return null},remove:d=>{em(i)&&c.remove(d)},clear:()=>{em(i)&&c.clear()}};var i,c},get files(){return SO(s)?Object.freeze({length:0,item:i=>null}):t.files},get types(){return t.types},setDragImage:(i,c,d)=>{em(s)&&(s[XS]={image:i,x:c,y:d},t.setDragImage(i,c,d))},getData:i=>SO(s)?"":t.getData(i),setData:(i,c)=>{em(s)&&t.setData(i,c)},clearData:i=>{em(s)&&t.clearData(i)}};return _O(s),s},rk=(t,o)=>t.setData("text/html",o),sk="x-tinymce/html",Dw=ot(sk),Tv="\x3c!-- "+sk+" --\x3e",kO=t=>Tv+t,EO=t=>-1!==t.indexOf(Tv),OO="%MCEPASTEBIN%",Bw=t=>t.dom.get("mcepastebin"),TO=t=>ne(t)&&"mcepastebin"===t.id,Lw=t=>t===OO,Iw=(t,o)=>(It.each(o,n=>{t=_n(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Hw=t=>Iw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,n,s)=>n||s?os:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Pw=(t,o)=>({content:t,cancelled:o}),Fw=(t,o)=>(t.insertContent(o,{merge:r1(t),paste:!0}),!0),zw=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),ak=(t,o,n)=>{return!(t.selection.isCollapsed()||!zw(o)||(s=t,i=o,c=n,s.undoManager.extra(()=>{c(s,i)},()=>{s.execCommand("mceInsertLink",!1,i)}),0));var s,i,c},i5=(t,o,n)=>{return s=t,!(!zw(i=o)||!To(lh(s),c=>jt(i.toLowerCase(),`.${c.toLowerCase()}`)))&&((s,i,c)=>(s.undoManager.extra(()=>{c(s,i)},()=>{s.insertContent('<img src="'+i+'">')}),!0))(t,o,n);var s,i},AO=(t=>{let o=0;return()=>"mceclip"+o++})(),ik=t=>{const o=nk();return rk(o,t),tk(o),o},lk=(t,o,n,s,i)=>{const c=((v,w,C)=>{const O=v.dispatch("PastePreProcess",{content:w,internal:C}),R=((A,H)=>{const M=F1({sanitize:mg(A)},A.schema);M.addNodeFilter("meta",j=>{It.each(j,$=>{$.remove()})});const P=M.parse(H,{forced_root_block:!1,isRootContent:!0});return vg({validate:!0},A.schema).serialize(P)})(v,O.content);return v.hasEventListeners("PastePostProcess")&&!O.isDefaultPrevented()?((A,H,M)=>{const P=A.dom.create("div",{style:"display:none"},H),j=A.dispatch("PastePostProcess",{node:P,internal:M});return Pw(j.node.innerHTML,j.isDefaultPrevented())})(v,R,C):Pw(R,O.isDefaultPrevented())})(t,o,n);if(!c.cancelled){const d=c.content,u=()=>{return p=t,v=d,void(s||!K0(p)?Fw(p,v):(C=p,O=v,It.each([ak,i5,Fw],R=>!R(C,O,Fw))));var p,v,C,O};i?Ju(t,"insertFromPaste",{dataTransfer:ik(d)}).isDefaultPrevented()||(u(),wv(t,"insertFromPaste")):u()}},Av=(t,o,n,s)=>{const i=n||EO(o);lk(t,o.replace(Tv,""),i,!1,s)},a0=(t,o,n)=>{const s=t.dom.encode(o).replace(/\r\n/g,"\n"),i=((c,d,u)=>{const p=c.split(/\n\n/),v=((O,R)=>{let A="<"+O;const H=cs(R,(M,P)=>P+'="'+Hi.encodeAllRaw(M)+'"');return H.length&&(A+=" "+H.join(" ")),A+">"})(d,u),w="</"+d+">",C=Gt(p,O=>O.split(/\n/).join("<br />"));return 1===C.length?C[0]:Gt(C,O=>v+O+w).join("")})(_u(s,gy(t)),yl(t),Ki(t));lk(t,i,!1,!0,n)},ck=t=>{const o={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const s=t.types[n];try{o[s]=t.getData(s)}catch{o[s]=""}}return o},Rg=(t,o)=>o in t&&t[o].length>0,NO=t=>Rg(t,"text/html")||Rg(t,"text/plain"),MO=(t,o,n)=>{const s="paste"===o.type?o.clipboardData:o.dataTransfer;var i;if(Du(t)&&s){const c=((d,u)=>{const p=u.items?ks(nr(u.items),w=>"file"===w.kind?[w.getAsFile()]:[]):[],v=u.files?nr(u.files):[];return Yt(p.length>0?p:v,(w=>{const C=lh(w);return O=>Wt(O.type,"image/")&&To(C,R=>(A=>{const H=A.toLowerCase(),M={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return It.hasOwn(M,H)?"image/"+M[H]:"image/"+H})(R)===O.type)})(d))})(t,s);if(c.length>0)return o.preventDefault(),(i=c,Promise.all(Gt(i,d=>g2(d).then(u=>({file:d,uri:u}))))).then(d=>{n&&t.selection.setRng(n),Ue(d,u=>{var p,v;p=t,d_((v=u).uri).each(({data:w,type:C,base64Encoded:O})=>{const R=O?w:btoa(w),A=v.file,H=p.editorUpload.blobCache,P=H.getByData(R,C)??((j,$,oe,ie)=>{const be=AO(),Se=$f(j)&&ne(oe.name),ze=Se?((Ae,Pe)=>{const Me=Pe.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ne(Me)?Ae.dom.encode(Me[1]):void 0})(j,oe.name):be,Je=$.create(be,oe,ie,ze,Se?oe.name:void 0);return $.add(Je),Je})(p,H,A,R);Av(p,`<img src="${P.blobUri()}">`,!1,!0)})})}),!0}return!1},dk=(t,o,n,s,i)=>{let c=Hw(n);const d=Rg(o,Dw())||EO(n),u=!d&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c),p=zw(c);(Lw(c)||!c.length||u&&!p)&&(s=!0),(s||p)&&(c=Rg(o,"text/plain")&&u?o["text/plain"]:(v=>{const w=ku(),C=F1({},w);let O="";const R=w.getVoidElements(),A=It.makeMap("script noscript style textarea video audio iframe object"," "),H=w.getBlockElements(),M=P=>{const j=P.name,$=P;if("br"!==j){if("wbr"!==j)if(R[j]&&(O+=" "),A[j])O+=" ";else{if(3===P.type&&(O+=P.value),!(P.name in w.getVoidElements())){let oe=P.firstChild;if(oe)do{M(oe)}while(oe=oe.next)}H[j]&&$.next&&(O+="\n","p"===j&&(O+="\n"))}}else O+="\n"};return v=Iw(v,[/<!\[[^\]]+\]>/g]),M(C.parse(v)),O})(c)),Lw(c)||(s?a0(t,c,i):Av(t,c,d,i))},RO=(t,o,n,s)=>{((i,c,d)=>{if(!i)return!1;try{return i.clearData(),i.setData("text/html",c),i.setData("text/plain",d),i.setData(Dw(),c),!0}catch{return!1}})(t.clipboardData,o.html,o.text)?(t.preventDefault(),s()):n(o.html,s)},Ka=t=>(o,n)=>{const{dom:s,selection:i}=t,c=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=s.create("div",{contenteditable:"true"},o);s.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),s.add(t.getBody(),c);const u=i.getRng();d.focus();const p=s.createRng();p.selectNodeContents(d),i.setRng(p),td.setEditorTimeout(t,()=>{i.setRng(u),s.remove(c),n()},0)},Vw=t=>({html:kO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),om=t=>{return!t.selection.isCollapsed()||!!(o=t).dom.getParent(o.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",o.getBody());var o},uk=(t,o)=>{var n,s;return Dm.getCaretRangeFromPoint(null!==(n=o.clientX)&&void 0!==n?n:0,null!==(s=o.clientY)&&void 0!==s?s:0,t.getDoc())},mk=(t,o)=>{t.focus(),o&&t.selection.setRng(o)},Zw=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,jw=t=>It.trim(t).replace(Zw,Xt).toLowerCase(),DO=(t,o,n)=>{const s=ih(t);if(n||"all"===s||!my(t))return o;const i=s?s.split(/[, ]/):[];if(i&&"none"!==s){const c=t.dom,d=t.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(u,p,v,w)=>{const C=c.parseStyle(c.decode(v)),O={};for(let A=0;A<i.length;A++){const H=C[i[A]];let M=H,P=c.getStyle(d,i[A],!0);/color/.test(i[A])&&(M=jw(M),P=jw(P)),P!==M&&(O[i[A]]=H)}const R=c.serializeStyle(O,"span");return R?p+' style="'+R+'"'+w:p+w})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,u,p)=>d+' style="'+u+'"'+p)},gk=t=>$c(fe(t)),LO=(t,o)=>{const n=o.getNode();Ft(n)||t.selection.setCursorLocation(n,o.offset())},IO=(t,o)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=o.textContent)||void 0===n?void 0:n.length)},HO=za(),hk=HO.os,c5=HO.browser.isSafari(),Uw=hk.isMacOS()||hk.isiOS(),Ww=(t,o)=>ne(t.getParent(o.container(),"details")),FO=(t,o)=>{const n=t.dom.getParent(o.container(),"details");if(n&&!n.open){const s=t.dom.select("summary",n)[0];s&&Il(s).each(i=>LO(t,i))}else LO(t,o)},u5=je,ml=tt,m5=t=>Oo(t.dom),VO=t=>o=>yr(fe(t),o),ZO=(t,o)=>ma(fe(t),m5,VO(o)),jO=(t,o,n)=>{const s=new F(t,o),i=n?s.next.bind(s):s.prev.bind(s);let c=t;for(let d=n?t:i();d&&!u5(d);d=i())kc(d)&&(c=d);return c};var i0;!function(t){t.Before="before",t.After="after"}(i0||(i0={}));const pk=(t,o)=>Math.abs(t.left-o),fk=(t,o)=>Math.abs(t.right-o),h5=(t,o,n)=>o>t.left&&o<t.right?0:Math.min(Math.abs(t.left-o),Math.abs(t.right-o)),nm=(t,o,n)=>{const s=v=>kc(v.node)?X.some(v):ve(v.node)?nm(nr(v.node.childNodes),o,n):X.none(),i=(v,w)=>{const C=_r(v,(O,R)=>w(O,o,n)-w(R,o,n));return((O,R)=>{if(O.length>=2){const A=s(O[0]).getOr(O[0]),H=s(O[1]).getOr(O[1]);if(Math.abs(R(A,o,n)-R(H,o,n))<2){if(tt(A.node))return X.some(A);if(tt(H.node))return X.some(H)}}return X.none()})(C,w).orThunk(()=>Di(C,s))},[c,d]=((t,o)=>{return(n=Yt(t,n=>{return(s=o)>=(i=n).top&&s<=i.bottom;var s,i}),Jn(n,(s,i)=>s.fold(()=>X.some(i),c=>{const d=Math.min(i.left,c.left),u=Math.min(i.top,c.top),p=Math.max(i.right,c.right),v=Math.max(i.bottom,c.bottom);return X.some({top:u,right:p,bottom:v,left:d,width:p-d,height:v-u})}),X.none())).fold(()=>[[],t],n=>{const{pass:s,fail:i}=en(t,c=>((d,u)=>{const p=(v=d,w=u,Math.max(0,Math.min(v.bottom,w.bottom)-Math.max(v.top,w.top))/Math.min(d.height,u.height));var v,w;return((v,w)=>v.top<w.bottom&&v.bottom>w.top)(d,u)&&p>.5})(c,n));return[s,i]});var n})(Q2(t),n),{pass:u,fail:p}=en(d,v=>v.top<n);return i(c,h5).orThunk(()=>i(p,Oa)).orThunk(()=>i(u,Oa))},Dg=(t,o,n)=>((s,i,c)=>{const d=fe(s),p=((t,o,n)=>X.from(t.dom.elementFromPoint(o,n)).map(zn))(El(d),i,c).filter(v=>hl(d,v)).getOr(d);return((v,w,C,O)=>{const R=(A,H)=>{const M=Yt(A.dom.childNodes,Ma(P=>ve(P)&&P.classList.contains("mce-drag-container")));return H.fold(()=>nm(M,C,O),P=>{const j=Yt(M,$=>$!==P.dom);return nm(j,C,O)}).orThunk(()=>(yr(A,v)?X.none():hu(A)).bind(P=>R(P,X.some(A))))};return R(w,X.none())})(d,p,i,c)})(t,o,n).filter(s=>Gd(s.node)).map(s=>{return{node:(i=s).node,position:pk(i,c=o)<fk(i,c)?i0.Before:i0.After};var i,c}),bk=t=>{var o,n;const s=t.getBoundingClientRect(),i=t.ownerDocument,c=i.documentElement,d=i.defaultView;return{top:s.top+(null!==(o=d?.scrollY)&&void 0!==o?o:0)-c.clientTop,left:s.left+(null!==(n=d?.scrollX)&&void 0!==n?n:0)-c.clientLeft}},UO=t=>({target:t,srcElement:t}),yk=Oo,qw=((...t)=>o=>{for(let n=0;n<t.length;n++)if(t[n](o))return!0;return!1})(yk,xr),WO=(t,o,n,s)=>{const i=t.dom,c=o.cloneNode(!0);i.setStyles(c,{width:n,height:s}),i.setAttrib(c,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),i.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},Nv=(t,o)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+o,behavior:"smooth"})},wk=Nv("left",-32),$O=Nv("left",32),qO=Nv("top",-32),Gw=Nv("top",32),GO=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Mv=(t,o,n,s,i)=>{"dragstart"===o&&rk(s,t.dom.getOuterHTML(n));const c=((t,o,n,s)=>{const i=((c,d)=>{const u=(p=>{const v=nk(),w=X.from(p[ek]);return tk(p),JS(v),v.dropEffect=p.dropEffect,v.effectAllowed=p.effectAllowed,(C=p,X.from(C[XS])).each(C=>v.setDragImage(C.image,C.x,C.y)),Ue(p.types,C=>{"Files"!==C&&v.setData(C,p.getData(C))}),Ue(p.files,C=>v.items.add(C)),(C=>X.from(C[YS]))(p).each(C=>{var O;O=v,Rw(C)(O)}),w.each(C=>{Qu(p,C),Qu(v,C)}),v;var C})(c);return"dragstart"===d?(JS(u),_O(u)):"drop"===d?(r5(u),tk(u)):(QS(u),s5(u)),u})(n,t);return Ft(s)?((c,d,u)=>{const p=qn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:c,composedPath:p,initEvent:p,preventDefault:yo,stopImmediatePropagation:yo,stopPropagation:yo,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:p,initMouseEvent:p,getModifierState:p,dataTransfer:u,...UO(d)}})(t,o,i):(c=t,d=s,u=o,p=i,{...d,dataTransfer:p,type:c,...UO(u)});var c,d,u,p})(o,n,s,i);return t.dispatch(o,c)},Xw=(t,o,n)=>{t.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Mv(o,"dragend",s.element,s.dataTransfer),i=>Mv(o,"dragend",s.element,s.dataTransfer,i))}),Yw(t)},Yw=t=>{t.on(o=>{o.intervalId.clear(),GO(o.ghost)}),t.clear()},mu=Oo,XO=(t,o)=>_h(t.getBody(),o),p5=t=>{const o=t.selection,n=t.dom,s=t.getBody(),i=((t,o,n,s)=>{const i=Us();let c,d;const u=yl(t),p=t.dom,v=()=>{(w=>{var C,O;const R=W(fe(w),"*[contentEditable=false],video,audio,embed,object");for(let A=0;A<R.length;A++){const H=R[A].dom;let M=H.previousSibling;if(xu(M)){const P=M.data;1===P.length?null===(C=M.parentNode)||void 0===C||C.removeChild(M):M.deleteData(P.length-1,1)}M=H.nextSibling,wu(M)&&(1===M.data.length?null===(O=M.parentNode)||void 0===O||O.removeChild(M):M.deleteData(0,1))}})(o),d&&($d(d),d=null),i.on(w=>{p.remove(w.caret),i.clear()}),c&&(clearInterval(c),c=void 0)};return{show:(w,C)=>{let O;if(v(),Cp(C))return null;if(!n(C))return d=((R,A)=>{var H;const M=(null!==(H=R.ownerDocument)&&void 0!==H?H:document).createTextNode(Da),P=R.parentNode;if(A){const j=R.previousSibling;if(js(j)){if(Ba(j))return j;if(xu(j))return j.splitText(j.data.length-1)}P?.insertBefore(M,R)}else{const j=R.nextSibling;if(js(j)){if(Ba(j))return j;if(wu(j))return j.splitText(1),j}R.nextSibling?P?.insertBefore(M,R.nextSibling):P?.appendChild(M)}return M})(C,w),O=C.ownerDocument.createRange(),qd(d.nextSibling)?(O.setStart(d,0),O.setEnd(d,0)):(O.setStart(d,1),O.setEnd(d,1)),O;{const R=((M,P,j)=>{var $;const oe=(null!==($=P.ownerDocument)&&void 0!==$?$:document).createElement(M);oe.setAttribute("data-mce-caret",j?"before":"after"),oe.setAttribute("data-mce-bogus","all"),oe.appendChild(tc().dom);const ie=P.parentNode;return j?ie?.insertBefore(oe,P):P.nextSibling?ie?.insertBefore(oe,P.nextSibling):ie?.appendChild(oe),oe})(u,C,w),A=_p(o,C,w);p.setStyle(R,"top",A.top),d=R;const H=p.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});p.setStyles(H,{...A}),p.add(o,H),i.set({caret:H,element:C,before:w}),w&&p.addClass(H,"mce-visual-caret-before"),c=setInterval(()=>{i.on(M=>{s()?p.toggleClass(M.caret,"mce-visual-caret-hidden"):p.addClass(M.caret,"mce-visual-caret-hidden")})},500),O=C.ownerDocument.createRange(),O.setStart(R,0),O.setEnd(R,0)}return O},hide:v,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(w=>{const C=_p(o,w.element,w.before);p.setStyles(w.caret,{...C})})},destroy:()=>clearInterval(c)}})(t,s,n.isBlock,()=>Bp(t)),c="sel-"+n.uniqueId(),d="data-mce-selected";let u;const p=M=>M!==s&&(mu(M)||Yr(M))&&n.isChildOf(M,s)&&n.isEditable(M.parentNode),v=(M,P,j,$=!0)=>t.dispatch("ShowCaret",{target:P,direction:M,before:j}).isDefaultPrevented()?null:($&&o.scrollIntoView(P,-1===M),i.show(j,P)),w=M=>Ba(M)||wu(M)||xu(M),C=M=>w(M.startContainer)||w(M.endContainer),R=(M,P)=>{if(!M)return null;if(M.collapsed){if(!C(M)){const ie=P?1:-1,be=ni(ie,s,M),Se=be.getNode(!P);if(ne(Se)){if(Gd(Se))return v(ie,Se,!!P&&!be.isAtEnd(),!1);if(Dl(Se)&&Oo(Se.nextSibling)){const at=n.createRng();return at.setStart(Se,0),at.setEnd(Se,0),at}}const ze=be.getNode(P);if(ne(ze)){if(Gd(ze))return v(ie,ze,!P&&!be.isAtEnd(),!1);if(Dl(ze)&&Oo(ze.previousSibling)){const at=n.createRng();return at.setStart(ze,1),at.setEnd(ze,1),at}}}return null}let j=M.startContainer,$=M.startOffset;const oe=M.endOffset;if(tt(j)&&0===$&&mu(j.parentNode)&&(j=j.parentNode,$=n.nodeIndex(j),j=j.parentNode),!ve(j))return null;if(oe===$+1&&j===M.endContainer){const ie=j.childNodes[$];if(p(ie))return(be=>{const Se=be.cloneNode(!0),ze=t.dispatch("ObjectSelected",{target:be,targetClone:Se});if(ze.isDefaultPrevented())return null;const at=((Ae,Pe)=>{const Me=fe(t.getBody()),qe=t.getDoc(),Qt=Ea(Me,"#"+c).getOrThunk(()=>{const to=bn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',qe);return vr(to,"id",c),Un(Me,to),to}),Ht=n.createRng();K(Qt),V(Qt,[ir(os,qe),fe(Pe),ir(os,qe)]),Ht.setStart(Qt.dom.firstChild,1),Ht.setEnd(Qt.dom.lastChild,0),ec(Qt,{top:n.getPos(Ae,t.getBody()).y+"px"}),M4(Qt);const Lo=o.getSel();return Lo&&(Lo.removeAllRanges(),Lo.addRange(Ht)),Ht})(be,ze.targetClone),Je=fe(be);return Ue(W(fe(t.getBody()),`*[${d}]`),Ae=>{yr(Je,Ae)||Le(Ae,d)}),n.getAttrib(be,d)||be.setAttribute(d,"1"),u=be,H(),at})(ie)}return null},A=()=>{u&&u.removeAttribute(d),Ea(fe(t.getBody()),"#"+c).each(G),u=null},H=()=>{i.hide()};return su(t)||(t.on("click",M=>{n.isEditable(M.target)||(M.preventDefault(),t.focus())}),t.on("blur NewBlock",A),t.on("ResizeWindow FullscreenStateChanged",i.reposition),t.on("tap",M=>{const P=M.target,j=XO(t,P);mu(j)?(M.preventDefault(),nv(t,j).each(R)):p(P)&&nv(t,P).each(R)},!0),t.on("mousedown",M=>{const P=M.target;if(P!==s&&"HTML"!==P.nodeName&&!n.isChildOf(P,s)||!(($,oe,ie)=>{const be=fe($.getBody()),Se=$.inline?be:fe(El(be).dom.documentElement),ze=((at,Je,Ae,Pe)=>{const Me=Je.dom.getBoundingClientRect();return{x:Ae-(at?Me.left+Je.dom.clientLeft+j1(Je):0),y:Pe-(at?Me.top+Je.dom.clientTop+SA(Je):0)}})($.inline,Se,oe,ie);return((at,Je,Ae)=>{const Pe=V_(at),Me=_A(at);return Je>=0&&Ae>=0&&Je<=Pe&&Ae<=Me})(Se,ze.x,ze.y)})(t,M.clientX,M.clientY))return;A(),H();const j=XO(t,P);mu(j)?(M.preventDefault(),nv(t,j).each(R)):Dg(s,M.clientX,M.clientY).each($=>{var oe;M.preventDefault(),(oe=v(1,$.node,$.position===i0.Before,!1))&&o.setRng(oe),ve(j)?j.focus():t.getBody().focus()})}),t.on("keypress",M=>{vo.modifierPressed(M)||mu(o.getNode())&&M.preventDefault()}),t.on("GetSelectionRange",M=>{let P=M.range;if(u){if(!u.parentNode)return void(u=null);P=P.cloneRange(),P.selectNode(u),M.range=P}}),t.on("SetSelectionRange",M=>{M.range=(M=>{const P=t.schema.getVoidElements(),j=n.createRng(),$=M.startContainer,oe=M.startOffset,ie=M.endContainer,be=M.endOffset;return Vo(P,$.nodeName.toLowerCase())?0===oe?j.setStartBefore($):j.setStartAfter($):j.setStart($,oe),Vo(P,ie.nodeName.toLowerCase())?0===be?j.setEndBefore(ie):j.setEndAfter(ie):j.setEnd(ie,be),j})(M.range);const P=R(M.range,M.forward);P&&(M.range=P)}),t.on("AfterSetSelectionRange",M=>{const P=M.range,j=P.startContainer.parentElement;var $,oe;C(P)||ve($=j)&&"mcepastebin"===$.id||H(),ne(oe=j)&&n.hasClass(oe,"mce-offscreen-selection")||A()}),(t=>{const o=Us(),n=ws.DOM,s=document,i=(p=o,v=t,w=>{if(0===w.button){const C=or(v.dom.getParents(w.target),qw).getOr(null);if(ne(C)&&(O=v.dom,R=v.getBody(),yk(A=C)&&A!==R&&O.isEditable(A.parentElement))){const O=v.dom.getPos(C),R=v.getBody(),A=v.getDoc().documentElement;p.set({element:C,dataTransfer:nk(),dragging:!1,screenX:w.screenX,screenY:w.screenY,maxX:(v.inline?R.scrollWidth:A.offsetWidth)-2,maxY:(v.inline?R.scrollHeight:A.offsetHeight)-2,relX:w.pageX-O.x,relY:w.pageY-O.y,width:C.offsetWidth,height:C.offsetHeight,ghost:WO(v,C,C.offsetWidth,C.offsetHeight),intervalId:Qg(100)})}}var O,R,A}),c=((t,o)=>{const n=Ws((i,c)=>{return u=i,p=c,(d=o)._selectionOverrides.hideFakeCaret(),void Dg(d.getBody(),u,p).fold(()=>d.selection.placeCaretAt(u,p),v=>{const w=d._selectionOverrides.showCaret(1,v.node,v.position===i0.Before,!1);w?d.selection.setRng(w):d.selection.placeCaretAt(u,p)});var d,u,p},0);o.on("remove",n.cancel);const s=t;return i=>t.on(c=>{const d=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&d>10){const v=Mv(o,"dragstart",c.element,c.dataTransfer,i);if(ne(v.dataTransfer)&&(c.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;c.dragging=!0,o.focus()}if(c.dragging){const v=i.currentTarget===o.getDoc().documentElement,w=((C,O)=>({pageX:O.pageX-C.relX,pageY:O.pageY+5}))(c,(O=i,R=(M=C=o).inline?bk(M.getBody()):{left:0,top:0},A=(M=>{const P=M.getBody();return M.inline?{left:P.scrollLeft,top:P.scrollTop}:{left:0,top:0}})(C),H=((M,P)=>{if(P.target.ownerDocument!==M.getDoc()){const j=bk(M.getContentAreaContainer()),$=(oe=>{const ie=oe.getBody(),be=oe.getDoc().documentElement;return oe.inline?{left:ie.scrollLeft,top:ie.scrollTop}:{left:ie.scrollLeft||be.scrollLeft,top:ie.scrollTop||be.scrollTop}})(M);return{left:P.pageX-j.left+$.left,top:P.pageY-j.top+$.top}}return{left:P.pageX,top:P.pageY}})(C,O),{pageX:H.left-R.left+A.left,pageY:H.top-R.top+A.top}));u=c.ghost,p=o.getBody(),u.parentNode!==p&&p.appendChild(u),((C,O,R,A,H,M,P,j,$,oe,ie,be)=>{let Se=0,ze=0;C.style.left=O.pageX+"px",C.style.top=O.pageY+"px",O.pageX+R>H&&(Se=O.pageX+R-H),O.pageY+A>M&&(ze=O.pageY+A-M),C.style.width=R-Se+"px",C.style.height=A-ze+"px";const at=$.clientHeight,Je=$.clientWidth,Ae=P+$.getBoundingClientRect().top,Pe=j+$.getBoundingClientRect().left;ie.on(Me=>{Me.intervalId.clear(),Me.dragging&&be&&(P+8>=at?Me.intervalId.set(Gw(oe)):P-8<=0?Me.intervalId.set(qO(oe)):j+8>=Je?Me.intervalId.set($O(oe)):j-8<=0?Me.intervalId.set(wk(oe)):Ae+16>=window.innerHeight?Me.intervalId.set(Gw(window)):Ae-16<=0?Me.intervalId.set(qO(window)):Pe+16>=window.innerWidth?Me.intervalId.set($O(window)):Pe-16<=0&&Me.intervalId.set(wk(window)))})})(c.ghost,w,c.width,c.height,c.maxX,c.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),s,v),n.throttle(i.clientX,i.clientY)}var C,O,M,R,A,H,u,p})})(o,t),d=((p,v)=>w=>{p.on(C=>{var O,R,A,H;if(C.intervalId.clear(),C.dragging){if(R=v,A=(R=>{const A=R.getSel();if(ne(A)){const H=A.getRangeAt(0).startContainer;return tt(H)?H.parentNode:H}return null})(v.selection),H=C.element,!eo(A)&&A!==H&&!R.dom.isChildOf(A,H)&&R.dom.isEditable(A)){const R=null!==(O=v.getDoc().elementFromPoint(w.clientX,w.clientY))&&void 0!==O?O:v.getBody();Mv(v,"drop",R,C.dataTransfer,w).isDefaultPrevented()||v.undoManager.transact(()=>{((A,H)=>{const M=A.getParent(H.parentNode,A.isBlock);GO(H),M&&M!==A.getRoot()&&A.isEmpty(M)&&$c(fe(M))})(v.dom,C.element),(A=>{const H=A.getData("text/html");return""===H?X.none():X.some(H)})(C.dataTransfer).each(A=>v.insertContent(A)),v._selectionOverrides.hideFakeCaret()})}Mv(v,"dragend",v.getBody(),C.dataTransfer,w)}}),Yw(p)})(o,t),u=((p,v)=>w=>Xw(p,v,X.some(w)))(o,t);var p,v;t.on("mousedown",i),t.on("mousemove",c),t.on("mouseup",d),n.bind(s,"mousemove",c),n.bind(s,"mouseup",u),t.on("remove",()=>{n.unbind(s,"mousemove",c),n.unbind(s,"mouseup",u)}),t.on("keydown",p=>{p.keyCode===vo.ESC&&Xw(o,t,X.none())})})(M=t),W0(M)&&(P=>{const j=ie=>{if(!ie.isDefaultPrevented()){const be=ie.dataTransfer;be&&(Ie(be.types,"Files")||be.files.length>0)&&(ie.preventDefault(),"drop"===ie.type&&Wp(P,"Dropped file type is not supported"))}},$=ie=>{gb(P,ie.target)&&j(ie)},oe=()=>{const ie=ws.DOM,be=P.dom,Se=document,ze=P.inline?P.getBody():P.getDoc(),at=["drop","dragover"];Ue(at,Je=>{ie.bind(Se,Je,$),be.bind(ze,Je,j)}),P.on("remove",()=>{Ue(at,Je=>{ie.unbind(Se,Je,$),be.unbind(ze,Je,j)})})};P.on("init",()=>{td.setEditorTimeout(P,oe,0)})})(M),(M=>{const P=Ws(()=>{if(!M.removed&&M.getBody().contains(document.activeElement)){const j=M.selection.getRng();if(j.collapsed){const $=V2(M,j,!1);M.selection.setRng($)}}},0);M.on("focus",()=>{P.throttle()}),M.on("blur",()=>{P.cancel()})})(t),(M=>{M.on("init",()=>{M.on("focusin",P=>{const j=P.target;if(Yr(j)){const $=_h(M.getBody(),j),oe=Oo($)?$:j;M.selection.getNode()!==oe&&nv(M,oe).each(ie=>M.selection.setRng(ie))}})})})(t)),{showCaret:v,showBlockCaretContainer:M=>{M.hasAttribute("data-mce-caret")&&(Cc(M),o.scrollIntoView(M))},hideFakeCaret:H,destroy:()=>{i.destroy(),u=null}};var M},Jw=(t,o)=>{let n=o;for(let s=t.previousSibling;tt(s);s=s.previousSibling)n+=s.data.length;return n},xk=(t,o,n,s,i)=>{if(tt(n)&&(s<0||s>n.data.length))return[];const c=i&&tt(n)?[Jw(n,s)]:[s];let d=n;for(;d!==o&&d.parentNode;)c.push(t.nodeIndex(d,i)),d=d.parentNode;return d===o?c.reverse():[]},Qw=(t,o,n,s,i,c,d=!1)=>({start:xk(t,o,n,s,d),end:xk(t,o,i,c,d)}),Ck=(t,o)=>{const n=o.slice(),s=n.pop();return Oe(s)?Jn(n,(i,c)=>i.bind(d=>X.from(d.childNodes[c])),X.some(t)).bind(i=>tt(i)&&(s<0||s>i.data.length)?X.none():X.some({node:i,offset:s})):X.none()},YO=(t,o)=>Ck(t,o.start).bind(({node:n,offset:s})=>Ck(t,o.end).map(({node:i,offset:c})=>{const d=document.createRange();return d.setStart(n,s),d.setEnd(i,c),d})),l0=(t,o,n)=>{if(o&&t.isEmpty(o)&&!n(o)){const s=o.parentNode;t.remove(o),l0(t,s,n)}},Rv=(t,o,n,s=!0)=>{const i=o.startContainer.parentNode,c=o.endContainer.parentNode;o.deleteContents(),s&&!n(o.startContainer)&&(tt(o.startContainer)&&0===o.startContainer.data.length&&t.remove(o.startContainer),tt(o.endContainer)&&0===o.endContainer.data.length&&t.remove(o.endContainer),l0(t,i,n),i!==c&&l0(t,c,n))},Dv=(t,o)=>X.from(t.dom.getParent(o.startContainer,t.dom.isBlock)),ex=(t,o,n)=>{const s=t.dynamicPatternsLookup({text:n,block:o});return{...t,blockPatterns:Ua(s).concat(t.blockPatterns),inlinePatterns:R0(s).concat(t.inlinePatterns)}},_k=(t,o,n,s)=>{const i=t.createRng();return i.setStart(o,0),i.setEnd(n,s),i.toString()},Bv=(t,o,n)=>{((s,i,c)=>{if(tt(s)&&0>=s.length)return X.some(du(s,0));{const d=Tu(e0);return X.from(d.forwards(s,0,gw(s),c)).map(u=>du(u.container,0))}})(o,0,o).each(s=>{const i=s.container;zE(i,n.start.length,o).each(u=>{const p=t.createRng();p.setStart(i,0),p.setEnd(u.container,u.offset),Rv(t,p,v=>v===o)});const c=fe(i),d=ui(c);var u,p;/^\s[^\s]/.test(d)&&(u=c,p=d.slice(1),fl.set(u,p))})},Sk=(t,o)=>t.create("span",{"data-mce-type":"bookmark",id:o}),Lv=(t,o)=>{const n=t.createRng();return n.setStartAfter(o.start),n.setEndBefore(o.end),n},JO=(t,o,n)=>{const s=YO(t.getRoot(),n).getOrDie("Unable to resolve path range"),i=s.startContainer,c=s.endContainer,d=0===s.endOffset?c:c.splitText(s.endOffset),u=0===s.startOffset?i:i.splitText(s.startOffset),p=u.parentNode;return{prefix:o,end:d.parentNode.insertBefore(Sk(t,o+"-end"),d),start:p.insertBefore(Sk(t,o+"-start"),u)}},QO=(t,o,n)=>{l0(t,t.get(o.prefix+"-end"),n),l0(t,t.get(o.prefix+"-start"),n)},Iv=t=>0===t.start.length,kk=(t,o,n,s)=>{const i=o.start;var c;return uc(t,s.container,s.offset,(c=i,(d,u)=>{const p=d.data.substring(0,u),v=p.lastIndexOf(c.charAt(c.length-1)),w=p.lastIndexOf(c);return-1!==w?w+c.length:-1!==v?v+1:-1}),n).bind(d=>{var u,p;const v=null!==(p=null===(u=n.textContent)||void 0===u?void 0:u.indexOf(i))&&void 0!==p?p:-1;if(-1!==v&&d.offset>=v+i.length){const w=t.createRng();return w.setStart(d.container,d.offset-i.length),w.setEnd(d.container,d.offset),X.some(w)}return hw(d.container,d.offset-i.length,n).map(C=>{const O=t.createRng();return O.setStart(C.container,C.offset),O.setEnd(d.container,d.offset),O}).filter(C=>C.toString()===i).orThunk(()=>kk(t,o,n,du(d.container,0)))})},eT=(t,o,n,s)=>{const i=t.dom,c=i.getRoot(),d=n.pattern,u=n.position.container,p=n.position.offset;return hw(u,p-n.pattern.end.length,o).bind(v=>{const w=Qw(i,c,v.container,v.offset,u,p,s);if(Iv(d))return X.some({matches:[{pattern:d,startRng:w,endRng:w}],position:v});{const C=tx(t,n.remainingPatterns,v.container,v.offset,o,s),O=C.getOr({matches:[],position:v}),R=O.position;return((H,M,P,j,$,oe=!1)=>{if(0===M.start.length&&!oe){const ie=H.createRng();return ie.setStart(P,j),ie.setEnd(P,j),X.some(ie)}return DS(P,j,$).bind(ie=>kk(H,M,$,ie).bind(be=>{var Se;return oe&&(be.endContainer===ie.container&&be.endOffset===ie.offset||0===ie.offset&&(null===(Se=be.endContainer.textContent)||void 0===Se?void 0:Se.length)===be.endOffset)?X.none():X.some(be)}))})(i,d,R.container,R.offset,o,C.isNone()).map(H=>{const M=((P,j,$,oe=!1)=>Qw(P,j,$.startContainer,$.startOffset,$.endContainer,$.endOffset,oe))(i,c,H,s);return{matches:O.matches.concat([{pattern:d,startRng:M,endRng:w}]),position:du(H.startContainer,H.startOffset)}})}})},tx=(t,o,n,s,i,c)=>{const d=t.dom;return DS(n,s,d.getRoot()).bind(u=>{const p=_k(d,i,n,s);for(let v=0;v<o.length;v++){const w=o[v];if(!jt(p,w.end))continue;const C=o.slice();C.splice(v,1);const O=eT(t,i,{pattern:w,remainingPatterns:C,position:u},c);if(O.isNone()&&s>0)return tx(t,o,n,s-1,i,c);if(O.isSome())return O}return X.none()})},tT=(t,o,n)=>{t.selection.setRng(n),"inline-format"===o.type?Ue(o.format,s=>{t.formatter.apply(s)}):t.execCommand(o.cmd,!1,o.value)},oT=(t,o,n,s,i,c)=>{var d;return((u,p)=>{const v=qr(u,w=>To(p,C=>w.pattern.start===C.pattern.start&&w.pattern.end===C.pattern.end));return u.length===p.length?v?u:p:u.length>p.length?u:p})(tx(t,i.inlinePatterns,n,s,o,c).fold(()=>[],u=>u.matches),tx(t,(d=i.inlinePatterns,_r(d,(u,p)=>p.end.length-u.end.length)),n,s,o,c).fold(()=>[],u=>u.matches))},Ek=(t,o)=>{if(0===o.length)return;const n=t.dom,s=t.selection.getBookmark(),i=((c,d)=>{const u=Ks("mce_textpattern"),p=ts(d,(v,w)=>{const C=JO(c,u+`_end${v.length}`,w.endRng);return v.concat([{...w,endMarker:C}])},[]);return ts(p,(v,w)=>{const C=p.length-v.length-1,O=Iv(w.pattern)?w.endMarker:JO(c,u+`_start${C}`,w.startRng);return v.concat([{...w,startMarker:O}])},[])})(n,o);Ue(i,c=>{const d=n.getParent(c.startMarker.start,n.isBlock),u=p=>p===d;Iv(c.pattern)?((p,v,w,C)=>{const O=Lv(p.dom,w);Rv(p.dom,O,C),tT(p,v,O)})(t,c.pattern,c.endMarker,u):((p,v,w,C,O)=>{const R=p.dom,A=Lv(R,C),H=Lv(R,w);Rv(R,H,O),Rv(R,A,O);const P=Lv(R,{prefix:w.prefix,start:w.end,end:C.start});tT(p,v,P)})(t,c.pattern,c.startMarker,c.endMarker,u),QO(n,c.endMarker,u),QO(n,c.startMarker,u)}),t.selection.moveToBookmark(s)},rT=(t,o,n)=>{for(let s=0;s<t.length;s++)if(n(t[s],o))return!0;return!1},Ph=ws.DOM,b5=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Ok=t=>bs(t,o=>!1===Ft(o)),Tk=t=>{const o=t.options.get,n=t.editorUpload.blobCache;return Ok({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:b5(t),sanitize:o("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},Ak=t=>{const o=t.options.get;return Ok({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},Hv=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,sT=t=>{const o=Hv(t),n=sg(t),s=t.contentCSS,i=()=>{o.unloadAll(s),t.inline||t.ui.styleSheetLoader.unloadAll(n)},c=()=>{t.removed?i():t.on("remove",i)};if(t.contentStyles.length>0){let p="";It.each(t.contentStyles,v=>{p+=v+"\r\n"}),t.dom.addStyle(p)}const d=Promise.all(((p,v,w)=>{const C=[Hv(p).loadAll(v)];return p.inline?C:C.concat([p.ui.styleSheetLoader.loadAll(w)])})(t,s,n)).then(c).catch(c),u=mp(t);return u&&((p,v)=>{const w=fe(p.getBody()),C=$i(ds(w)),O=vn("style");vr(O,"type","text/css"),Un(O,ir(v)),Un(C,O),p.on("remove",()=>{G(O)})})(t,u),d},Nk=t=>{var o;!0!==t.removed&&(su(o=t)||o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),(o=>{o.bindPendingEventDelegates(),o.initialized=!0,o.dispatch("Init"),o.focus(!0),(s=>{const i=s.dom.getRoot();s.inline||En(s)&&s.selection.getStart(!0)!==i||dl(i).each(c=>{const d=c.getNode(),u=oo(d)?dl(d).getOr(c):c;s.selection.setRng(u.toRange())})})(o),o.nodeChanged({initial:!0});const n=n1(o);it(n)&&n.call(o,o),(s=>{const i=sh(s);i&&td.setEditorTimeout(s,()=>{let c;c=!0===i?s:s.editorManager.get(i),c&&!c.destroyed&&(c.focus(),c.selection.scrollIntoView())},100)})(o)})(t))},aT=t=>{const o=t.getElement();let n=t.getDoc();t.inline&&(Ph.addClass(o,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=o,t.contentAreaContainer=o);const s=t.getBody();var d;s.disabled=!0,t.readonly=Qf(t),t._editableRoot=cy(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===Ph.getStyle(s,"position",!0)&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,t.editorUpload=(t=>{const o=(()=>{let H=[];const M=$=>{if(!$.blob||!$.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const oe=$.id||"blobid"+q_+++(()=>{const ze=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+ze()+ze()+ze()})(),ie=$.name||oe,be=$.blob;var Se;return{id:ot(oe),name:ot(ie),filename:ot($.filename||ie+"."+(Se=be.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[Se.toLowerCase()]||"dat")),blob:ot(be),base64:ot($.base64),blobUri:ot($.blobUri||URL.createObjectURL(be)),uri:ot($.uri)}},P=$=>or(H,$).getOrUndefined(),j=$=>P(oe=>oe.id()===$);return{create:($,oe,ie,be,Se)=>{if(uo($))return M({id:$,name:be,filename:Se,blob:oe,base64:ie});if(ut($))return M($);throw new Error("Unknown input type")},add:$=>{j($.id())||H.push($)},get:j,getByUri:$=>P(oe=>oe.blobUri()===$),getByData:($,oe)=>P(ie=>ie.base64()===$&&ie.blob().type===oe),findFirst:P,removeByUri:$=>{H=Yt(H,oe=>oe.blobUri()!==$||(URL.revokeObjectURL(oe.blobUri()),!1))},destroy:()=>{Ue(H,$=>{URL.revokeObjectURL($.blobUri())}),H=[]}}})();let n,s;const i=$_(),c=[],d=H=>M=>t.selection?H(M):[],u=(H,M,P)=>{let j=0;do{j=H.indexOf(M,j),-1!==j&&(H=H.substring(0,j)+P+H.substr(j+M.length),j+=P.length-M.length+1)}while(-1!==j);return H},p=(H,M,P)=>(H=u(H,`src="${M}"`,`src="${P}"${P===er.transparentSrc?' data-mce-placeholder="1"':""}`),u(H,'data-mce-src="'+M+'"','data-mce-src="'+P+'"')),v=(H,M)=>{Ue(t.undoManager.data,P=>{"fragmented"===P.type?P.fragments=Gt(P.fragments,j=>p(j,H,M)):P.content=p(P.content,H,M)})},w=()=>(n||(n=sd(t,i)),R().then(d(H=>{const M=Gt(H,P=>P.blobInfo);return n.upload(M,Z3(t)).then(d(P=>{const j=[];let $=!1;const oe=Gt(P,(ie,be)=>{const{blobInfo:Se,image:ze}=H[be];let at=!1;return ie.status&&Yc(t)?(ie.url&&!Bt(ze.src,ie.url)&&($=!0),o.removeByUri(ze.src),su(t)||((Je,Ae)=>{const Pe=t.convertURL(Ae,"src");var Me;v(Je.src,Ae),wa(fe(Je),{src:$f(t)?(Me=Ae,Me+(-1===Me.indexOf("?")?"?":"&")+(new Date).getTime()):Ae,"data-mce-src":Pe})})(ze,ie.url)):ie.error&&(ie.error.remove&&(v(ze.src,er.transparentSrc),j.push(ze),at=!0),Wp(t,Ac.translate(["Failed to upload image: {0}",ie.error.message]))),{element:ze,status:ie.status,uploadUri:ie.url,blobInfo:Se,removed:at}});return j.length>0&&!su(t)?t.undoManager.transact(()=>{Ue(He(j),ie=>{const be=Wi(ie);var Se;G(ie),be.each((Se=t,ze=>{var at,Je;(at=Se).dom.isEmpty((Je=ze).dom)&&ne(at.schema.getTextBlockElements()[Er(Je)])&&Un(ze,bn('<br data-mce-bogus="1" />'))})),o.removeByUri(ie.dom.src)})}):$&&t.undoManager.dispatchChange(),oe}))}))),C=()=>Rc(t)?w():Promise.resolve([]),O=H=>qr(c,M=>M(H)),R=()=>(s||(s=((t,o)=>{const n={};return{findAll:(s,i=Jo)=>{const c=Yt((u=s)?nr(u.getElementsByTagName("img")):[],u=>{const p=u.src;return!u.hasAttribute("data-mce-bogus")&&!u.hasAttribute("data-mce-placeholder")&&!(!p||p===er.transparentSrc)&&(Wt(p,"blob:")?!t.isUploaded(p)&&i(u):!!Wt(p,"data:")&&i(u))}),d=Gt(c,u=>{const p=u.src;if(Vo(n,p))return n[p].then(v=>uo(v)?v:{image:u,blobInfo:v.blobInfo});{const v=((w,C)=>{const O=()=>Promise.reject("Invalid data URI");if(Wt(C,"blob:")){const H=w.getByUri(C);return ne(H)?Promise.resolve(H):(R=C,Wt(R,"blob:")?(M=R,fetch(M).then(P=>P.ok?P.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${M} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Wt(R,"data:")?(A=R,new Promise((M,P)=>{d_(A).bind(({type:j,data:$,base64Encoded:oe})=>u_(j,$,oe)).fold(()=>P("Invalid data URI"),M)})):Promise.reject("Unknown URI format")).then(M=>g2(M).then(P=>m_(P,!1,j=>X.some(g_(w,M,j))).getOrThunk(O)))}var M,R,A;return Wt(C,"data:")?g3(w,C).fold(O,H=>Promise.resolve(H)):Promise.reject("Unknown image data format")})(o,p).then(w=>(delete n[p],{image:u,blobInfo:w})).catch(w=>(delete n[p],w));return n[p]=v,v}});var u;return Promise.all(d)}}})(i,o)),s.findAll(t.getBody(),O).then(d(H=>{const M=Yt(H,P=>uo(P)?(Wp(t,P),!1):"blob"!==P.uriType);return su(t)||Ue(M,P=>{v(P.image.src,P.blobInfo.blobUri()),P.image.src=P.blobInfo.blobUri(),P.image.removeAttribute("data-mce-src")}),M}))),A=H=>H.replace(/src="(blob:[^"]+)"/g,(M,P)=>{const j=i.getResultUri(P);if(j)return'src="'+j+'"';let $=o.getByUri(P);return $||($=Jn(t.editorManager.get(),(oe,ie)=>oe||ie.editorUpload&&ie.editorUpload.blobCache.getByUri(P),void 0)),$?'src="data:'+$.blob().type+";base64,"+$.base64()+'"':M});return t.on("SetContent",()=>{Rc(t)?C():R()}),t.on("RawSaveContent",H=>{H.content=A(H.content)}),t.on("GetContent",H=>{H.source_view||"raw"===H.format||"tree"===H.format||(H.content=A(H.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",H=>{Ue(H,M=>{const P=M.attr("src");if(!P||o.getByUri(P))return;const j=i.getResultUri(P);j&&M.attr("src",j)})})}),{blobCache:o,addFilter:H=>{c.push(H)},uploadImages:w,uploadImagesAuto:C,scanForImages:R,destroy:()=>{o.destroy(),i.destroy(),s=n=null}}})(t),t.schema=ku(Ak(t)),t.dom=ws(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:P0(t),referrerPolicy:Yf(t),onSetAttrib:d=>{t.dispatch("SetAttrib",d)}}),t.parser=(d=>{const u=F1(Tk(d),d.schema);return u.addAttributeFilter("src,href,style,tabindex",(p,v)=>{const w=d.dom,C="data-mce-"+v;let O=p.length;for(;O--;){const R=p[O];let A=R.attr(v);if(A&&!R.attr(C)){if(0===A.indexOf("data:")||0===A.indexOf("blob:"))continue;"style"===v?(A=w.serializeStyle(w.parseStyle(A),R.name),A.length||(A=null),R.attr(C,A),R.attr(v,A)):"tabindex"===v?(R.attr(C,A),R.attr(v,null)):R.attr(C,d.convertURL(A,v,R.name))}}}),u.addNodeFilter("script",p=>{let v=p.length;for(;v--;){const w=p[v],C=w.attr("type")||"no/type";0!==C.indexOf("mce-")&&w.attr("type","mce-"+C)}}),py(d)&&u.addNodeFilter("#cdata",p=>{var v;let w=p.length;for(;w--;){const C=p[w];C.type=8,C.name="#comment",C.value="[CDATA["+d.dom.encode(null!==(v=C.value)&&void 0!==v?v:"")+"]]"}}),u.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",p=>{let v=p.length;const w=d.schema.getNonEmptyElements();for(;v--;){const C=p[v];C.isEmpty(w)&&0===C.getAll("br").length&&C.append(new dc("br",1))}}),u})(t),t.serializer=R2((d=>{const u=d.options.get;return{...Tk(d),...Ak(d),...Ok({remove_trailing_brs:u("remove_trailing_brs"),url_converter:u("url_converter"),url_converter_scope:u("url_converter_scope"),element_format:u("element_format"),entities:u("entities"),entity_encoding:u("entity_encoding"),indent:u("indent"),indent_after:u("indent_after"),indent_before:u("indent_before")})}})(t),t),t.selection=M2(t.dom,t.getWin(),t.serializer,t),t.annotator=v4(t),t.formatter=W1(t),t.undoManager=$1(t),t._nodeChangeDispatcher=new xO(t),t._selectionOverrides=p5(t),(d=>{const u=Us(),p=Za(!1),v=Gi(w=>{d.dispatch("longpress",{...w,type:"longpress"}),p.set(!0)},400);d.on("touchstart",w=>{sw(w).each(C=>{v.cancel();const O={x:C.clientX,y:C.clientY,target:w.target};v.throttle(w),p.set(!1),u.set(O)})},!0),d.on("touchmove",w=>{v.cancel(),sw(w).each(C=>{u.on(O=>{((R,A)=>{const H=Math.abs(R.clientX-A.x),M=Math.abs(R.clientY-A.y);return H>5||M>5})(C,O)&&(u.clear(),p.set(!1),d.dispatch("longpresscancel"))})})},!0),d.on("touchend touchcancel",w=>{v.cancel(),"touchcancel"!==w.type&&u.get().filter(C=>C.target.isEqualNode(w.target)).each(()=>{p.get()?w.preventDefault():d.dispatch("tap",{...w,type:"tap"})})},!0)})(t),(t=>{var o;(o=t).on("click",n=>{o.dom.getParent(n.target,"details")&&n.preventDefault()}),(o=>{o.parser.addNodeFilter("details",n=>{const s=fy(o);Ue(n,i=>{"expanded"===s?i.attr("open","open"):"collapsed"===s&&i.attr("open",null)})}),o.serializer.addNodeFilter("details",n=>{const s=eb(o);Ue(n,i=>{"expanded"===s?i.attr("open","open"):"collapsed"===s&&i.attr("open",null)})})})(t),(o=>{o.on("keydown",n=>{n.keyCode!==vo.BACKSPACE&&n.keyCode!==vo.DELETE||((s,i)=>{const c=X.from(s.getParent(i.startContainer,"details")),d=X.from(s.getParent(i.endContainer,"details"));if(c.isSome()||d.isSome()){const u=c.bind(p=>X.from(s.select("summary",p)[0]));return X.some({startSummary:u,startDetails:c,endDetails:d})}return X.none()})(o.dom,o.selection.getRng()).fold(()=>{((s,i)=>{const{dom:c,selection:d}=s,u=s.getBody();if(s.selection.isCollapsed()){const p=rt.fromRangeStart(d.getRng()),v=c.getParent(p.container(),c.isBlock);if(v&&c.isEmpty(v))if(jn(v.nextSibling)){const w=Ni(u,p).filter(C=>Ww(c,C));if(w.isSome())return w.each(C=>{i||FO(s,C)}),!0}else if(jn(v.previousSibling)&&fi(u,p).filter(w=>Ww(c,w)))return!0;return xa(i,u,p).fold(Do,w=>!!Ww(c,w)&&(v&&c.isEmpty(v)&&s.dom.remove(v),i||FO(s,w),!0))}return!1})(o,n.keyCode===vo.DELETE)&&n.preventDefault()},s=>{((t,o,n)=>{const s=t.selection,i=s.getNode(),c=s.getRng(),d=n.keyCode===vo.BACKSPACE,u=n.keyCode===vo.DELETE,p=t.selection.isCollapsed(),v=rt.fromRangeStart(c),w=t.getBody();return!((p||!((C,O)=>{const R=O.startSummary.exists(M=>M.contains(C.startContainer)),A=O.startSummary.exists(M=>M.contains(C.endContainer)),H=O.startDetails.forall(M=>O.endDetails.forall(P=>M!==P));return(R||A)&&!(R&&A)||H})(c,o))&&!(p&&d&&(C=v,O=o,O.startSummary.exists(R=>{return A=C,dl(R).exists(M=>M.isEqual(A));var A})))&&!(p&&u&&((C,O)=>O.startSummary.exists(R=>{return A=C,Il(H=R).exists(M=>je(M.getNode())&&Ni(H,M).exists(P=>P.isEqual(A))||M.isEqual(A));var A,H}))(v,o))&&!(p&&d&&((C,O)=>O.startDetails.exists(R=>Ni(R,C).forall(A=>O.startSummary.exists(H=>!H.contains(C.container())&&H.contains(A.container())))))(v,o))&&!(p&&u&&((C,O,R)=>R.startDetails.exists(A=>fi(C,O).forall(H=>!A.contains(H.container()))))(w,v,o))&&(!c5||!Zn(i)||(!p&&IO(c,i)||Zy(u,v,i)?gk(i):t.undoManager.transact(()=>{const C=s.getSel();let{anchorNode:O,anchorOffset:R,focusNode:A,focusOffset:H}=C??{};const M=()=>{ne(O)&&ne(R)&&ne(A)&&ne(H)&&C?.setBaseAndExtent(O,R,A,H)},P=($,oe)=>{Ue($.childNodes,ie=>{Ji(ie)&&oe.appendChild(ie)})},j=t.dom.create("span",{"data-mce-bogus":"all"});P(i,j),i.appendChild(j),M(),p&&(Uw&&(n.altKey||d&&n.metaKey)||!Uw&&n.ctrlKey)&&C?.modify("extend",d?"left":"right",n.metaKey?"line":"word"),!s.isCollapsed()&&IO(s.getRng(),j)?gk(i):(t.execCommand(d?"Delete":"ForwardDelete"),O=C?.anchorNode,R=C?.anchorOffset,A=C?.focusNode,H=C?.focusOffset,P(j,i),M()),t.dom.remove(j)}),0)));var C,O})(o,s,n)&&n.preventDefault()})})})(t)})(t),(d=>{const u="contenteditable",p=" "+It.trim(J0(d))+" ",v=" "+It.trim(wp(d))+" ",w=Qp(p),C=Qp(v),O=s1(d);O.length>0&&d.on("BeforeSetContent",R=>{((A,H,M)=>{let P=H.length,j=M.content;if("raw"!==M.format){for(;P--;)j=j.replace(H[P],OE(A,j,wp(A)));M.content=j}})(d,O,R)}),d.parser.addAttributeFilter("class",R=>{let A=R.length;for(;A--;){const H=R[A];w(H)?H.attr(u,"true"):C(H)&&H.attr(u,"false")}}),d.serializer.addAttributeFilter(u,R=>{let A=R.length;for(;A--;){const H=R[A];(w(H)||C(H))&&(O.length>0&&H.attr("data-mce-content")?(H.name="#text",H.type=3,H.raw=!0,H.value=H.attr("data-mce-content")):H.attr(u,null))}})})(t),su(t)||((d=t).on("mousedown",u=>{u.detail>=3&&(u.preventDefault(),(t=>{const o=((n,s)=>{const i=rt.fromRangeStart(n).getNode(),c=(w=s,ma(fe(i),C=>xr(C.dom)||Wr(C),VO(w)).getOr(fe(w)).dom),d=jO(i,c,!1),u=jO(i,c,!0),p=document.createRange();var w;return ZO(d,c).fold(()=>{ml(d)?p.setStart(d,0):p.setStartBefore(d)},v=>p.setStartBefore(v.dom)),ZO(u,c).fold(()=>{ml(u)?p.setEnd(u,u.data.length):p.setEndAfter(u)},v=>p.setEndAfter(v.dom)),p})(t.selection.getRng(),t.getBody());t.selection.setRng(Eb(o))})(d))}),(d=>{(u=>{const p=[",",".",";",":","!","?"],v=[32],w=()=>{return R=Y0(u),A=hy(u),{inlinePatterns:R0(R),blockPatterns:Ua(R),dynamicPatternsLookup:A};var R,A},C=()=>u.options.isSet("text_patterns_lookup");u.on("keydown",R=>{if(13===R.keyCode&&!vo.modifierPressed(R)&&u.selection.isCollapsed()){const A=w();(A.inlinePatterns.length>0||A.blockPatterns.length>0||C())&&((t,o)=>{const n=t.selection.getRng();return Dv(t,n).map(s=>{var i;const c=Math.max(0,n.startOffset),d=ex(o,s,null!==(i=s.textContent)&&void 0!==i?i:""),u=oT(t,s,n.startContainer,c,d,!0),p=((v,w,C,O)=>{var R;const A=v.dom,H=yl(v);if(!A.is(w,H))return[];const M=null!==(R=w.textContent)&&void 0!==R?R:"";return((P,j)=>{const $=_r(P,(be,Se)=>Se.start.length-be.start.length),oe=j.replace(os," ");return or($,ie=>0===j.indexOf(ie.start)||0===oe.indexOf(ie.start))})(C.blockPatterns,M).map(P=>It.trim(M).length===P.start.length?[]:[{pattern:P,range:Qw(A,A.getRoot(),w,0,w,0,!0)}]).getOr([])})(t,s,d);return(p.length>0||u.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Ek(t,u),((C,O)=>{if(0===O.length)return;const R=C.selection.getBookmark();Ue(O,A=>((H,M)=>{const j=M.pattern,$=YO(H.dom.getRoot(),M.range).getOrDie("Unable to resolve path range");return Dv(H,$).each(oe=>{"block-format"===j.type?((ie,be)=>{const Se=be.get(ie);return lo(Se)&&Pn(Se).exists(ze=>Vo(ze,"block"))})(j.format,H.formatter)&&H.undoManager.transact(()=>{Bv(H.dom,oe,j),H.formatter.apply(j.format)}):"block-command"===j.type&&H.undoManager.transact(()=>{Bv(H.dom,oe,j),H.execCommand(j.cmd,!1,j.value)})}),!0})(C,A)),C.selection.moveToBookmark(R)})(t,p);const v=t.selection.getRng(),w=DS(v.startContainer,v.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),w.each(C=>{const O=C.container;"\ufeff"===O.data.charAt(C.offset-1)&&(O.deleteData(C.offset-1,1),l0(t.dom,O.parentNode,R=>R===t.dom.getRoot()))})}),!0)}).getOr(!1)})(u,A)&&R.preventDefault()}},!0);const O=()=>{if(u.selection.isCollapsed()){const R=w();(R.inlinePatterns.length>0||C())&&((A,H)=>{const M=A.selection.getRng();Dv(A,M).map(P=>{const j=Math.max(0,M.startOffset-1),$=_k(A.dom,P,M.startContainer,j),oe=ex(H,P,$),ie=oT(A,P,M.startContainer,j,oe,!1);ie.length>0&&A.undoManager.transact(()=>{Ek(A,ie)})})})(u,R)}};u.on("keyup",R=>{rT(v,R,(A,H)=>A===H.keyCode&&!vo.modifierPressed(H))&&O()}),u.on("keypress",R=>{rT(p,R,(A,H)=>A.charCodeAt(0)===H.charCode)&&td.setEditorTimeout(u,O)})})(d)})(t));const i=wO(t);((t,o)=>{t.addCommand("delete",()=>{var n;xE(n=t,o,!1).fold(()=>{Vy(n),vb(n)},Nt)}),t.addCommand("forwardDelete",()=>{var n;xE(n=t,o,!0).fold(()=>MC(n,"ForwardDelete"),Nt)})})(t,i),(d=>{d.on("NodeChange",mt(kE,d))})(t),(d=>{var u;const p=d.dom,v=yl(d),w=null!==(u=iy(d))&&void 0!==u?u:"",C=(O,R)=>{if((M=>{if(G3(M)){const P=M.keyCode;return!K_(M)&&(vo.metaKeyPressed(M)||M.altKey||P>=112&&P<=123||Ie(q3,P))}return!1})(O))return;const A=d.getBody(),H=!(G3(M=O)&&!(K_(M)||"keyup"===M.type&&229===M.keyCode))&&((M,P,j)=>{if(ea(fe(P),!1)){const $=P.firstElementChild;return!$||!M.getStyle(P.firstElementChild,"padding-left")&&!M.getStyle(P.firstElementChild,"padding-right")&&j===$.nodeName.toLowerCase()}return!1})(p,A,v);var M;(""!==p.getAttrib(A,G_)!==H||R)&&(p.setAttrib(A,G_,H?w:null),p.setAttrib(A,"aria-placeholder",H?w:null),((M,P)=>{M.dispatch("PlaceholderToggle",{state:P})})(d,H),d.on(H?"keydown":"keyup",C),d.off(H?"keyup":"keydown",C))};Rn(w)&&d.on("init",O=>{C(O,!0),d.on("change SetContent ExecCommand",C),d.on("paste",R=>td.setEditorTimeout(d,()=>C(R)))})})(t),(t=>{const o=Za(!1),n=Za(Xi(t)?"text":"html"),s=(i=>{const c=Za(null);return{create:()=>((d,u)=>{const{dom:p,selection:v}=d,w=d.getBody();u.set(v.getRng());const C=p.add(d.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},OO);er.browser.isFirefox()&&p.setStyle(C,"left","rtl"===p.getStyle(w,"direction",!0)?65535:-65535),p.bind(C,"beforedeactivate focusin focusout",O=>{O.stopPropagation()}),C.focus(),v.select(C,!0)})(i,c),remove:()=>((d,u)=>{const p=d.dom;if(Bw(d)){let v;const w=u.get();for(;v=Bw(d);)p.remove(v),p.unbind(v);w&&d.selection.setRng(w)}u.set(null)})(i,c),getEl:()=>Bw(i),getHtml:()=>(d=>{const u=d.dom,p=(O,R)=>{O.appendChild(R),u.remove(R,!0)},[v,...w]=Yt(d.getBody().childNodes,TO);Ue(w,O=>{p(v,O)});const C=u.select("div[id=mcepastebin]",v);for(let O=C.length-1;O>=0;O--){const R=u.create("div");v.insertBefore(R,C[O]),p(R,C[O])}return v?v.innerHTML:""})(i),getLastRng:c.get}})(t);var i,c,d;i=t,(er.browser.isChromium()||er.browser.isSafari())&&(d=DO,(c=i).on("PastePreProcess",u=>{u.content=d(c,u.content,u.internal)})),((i,c)=>{i.addCommand("mceTogglePlainTextPaste",()=>{((d,u)=>{"text"===u.get()?(u.set("html"),Np(d,!1)):(u.set("text"),Np(d,!0)),d.focus()})(i,c)}),i.addCommand("mceInsertClipboardContent",(d,u)=>{u.html&&Av(i,u.html,u.internal,!1),u.text&&a0(i,u.text,!1)})})(t,n),(i=>{const c=p=>v=>{p(i,v)},d=q0(i);it(d)&&i.on("PastePreProcess",c(d));const u=G0(i);it(u)&&i.on("PastePostProcess",c(u))})(t),t.on("PreInit",()=>{(i=>{i.on("cut",(c=>d=>{!d.isDefaultPrevented()&&om(c)&&RO(d,Vw(c),Ka(c),()=>{if(er.browser.isChromium()||er.browser.isFirefox()){const u=c.selection.getRng();td.setEditorTimeout(c,()=>{c.selection.setRng(u),c.execCommand("Delete")},0)}else c.execCommand("Delete")})})(i)),i.on("copy",(c=>d=>{!d.isDefaultPrevented()&&om(c)&&RO(d,Vw(c),Ka(c),yo)})(i))})(t),((i,c)=>{ug(i)&&i.on("dragend dragover draggesture dragdrop drop drag",d=>{d.preventDefault(),d.stopPropagation()}),Du(i)||i.on("drop",d=>{const u=d.dataTransfer;u&&To(u.files,v=>/^image\//.test(v.type))&&d.preventDefault()}),i.on("drop",d=>{if(d.isDefaultPrevented())return;const u=uk(i,d);if(eo(u))return;const p=ck(d.dataTransfer),v=Rg(p,Dw());if((!NO(p)||(R=>{const A=R["text/plain"];return!!A&&0===A.indexOf("file://")})(p))&&MO(i,d,u))return;const w=p[Dw()],C=w||p["text/html"]||p["text/plain"],O=((R,A,H,M)=>{const P=R.getParent(H,j=>zd(A,j));if(P&&Vo(M,"text/html")){const j=(new DOMParser).parseFromString(M["text/html"],"text/html").body;return!jn(j.querySelector(P.nodeName.toLowerCase()))}return!1})(i.dom,i.schema,u.startContainer,p);c.get()&&!O||C&&(d.preventDefault(),td.setEditorTimeout(i,()=>{i.undoManager.transact(()=>{w&&i.execCommand("Delete"),mk(i,u);const R=Hw(C);p["text/html"]?Av(i,R,v,!0):a0(i,R,!0)})}))}),i.on("dragstart",d=>{c.set(!0)}),i.on("dragover dragend",d=>{Du(i)&&!c.get()&&(d.preventDefault(),mk(i,uk(i,d))),"dragend"===d.type&&c.set(!1)})})(t,o),((t,o,n)=>{((s,i,c)=>{let d;s.on("keydown",u=>{var p;(vo.metaKeyPressed(p=u)&&86===p.keyCode||p.shiftKey&&45===p.keyCode)&&!u.isDefaultPrevented()&&(d=u.shiftKey&&86===u.keyCode)}),s.on("paste",u=>{if(u.isDefaultPrevented()||(w=u,er.os.isAndroid()&&0===(null===(O=null===(C=w.clipboardData)||void 0===C?void 0:C.items)||void 0===O?void 0:O.length)))return;var w,C,O;const p="text"===c.get()||d;d=!1;const v=ck(u.clipboardData);!NO(v)&&MO(s,u,i.getLastRng()||s.selection.getRng())||(Rg(v,"text/html")?(u.preventDefault(),dk(s,v,v["text/html"],p,!0)):Rg(v,"text/plain")&&Rg(v,"text/uri-list")?(u.preventDefault(),dk(s,v,v["text/plain"],p,!0)):(i.create(),td.setEditorTimeout(s,()=>{const w=i.getHtml();i.remove(),dk(s,v,w,p,!1)},0)))})})(t,o,n),(s=>{const i=d=>Wt(d,"webkit-fake-url"),c=d=>Wt(d,"data:");s.parser.addNodeFilter("img",(d,u,p)=>{if(!Du(s)&&!0===(null===(w=p.data)||void 0===w?void 0:w.paste))for(const v of d){const w=v.attr("src");uo(w)&&!v.attr("data-mce-object")&&w!==er.transparentSrc&&(i(w)||!X0(s)&&c(w))&&v.remove()}var w})})(t)})(t,s,n)})})(t);const c=(d=>{const u=d;return(p=d,Nn(p.plugins,"rtc").bind(v=>X.from(v.setup))).fold(()=>(u.rtcInstance=Ku(d),X.none()),p=>(u.rtcInstance=(()=>{const v=ot(null),w=ot("");return{init:{bindEvents:yo},undoManager:{beforeChange:yo,add:v,undo:v,redo:v,clear:yo,reset:yo,hasUndo:Do,hasRedo:Do,transact:v,ignore:yo,extra:yo},formatter:{match:Do,matchAll:ot([]),matchNode:ot(void 0),canApply:Do,closest:w,apply:yo,remove:yo,toggle:yo,formatChanged:ot({unbind:yo})},editor:{getContent:w,setContent:ot({content:"",html:""}),insertContent:ot(""),addVisual:yo},selection:{getContent:w},autocompleter:{addDecoration:yo,removeDecoration:yo},raw:{getModel:ot(X.none())}}})(),X.some(()=>p().then(v=>(u.rtcInstance=(w=>{const C=$=>ut($)?$:{},{init:O,undoManager:R,formatter:A,editor:H,selection:M,autocompleter:P,raw:j}=w;return{init:{bindEvents:O.bindEvents},undoManager:{beforeChange:R.beforeChange,add:R.add,undo:R.undo,redo:R.redo,clear:R.clear,reset:R.reset,hasUndo:R.hasUndo,hasRedo:R.hasRedo,transact:($,oe,ie)=>R.transact(ie),ignore:($,oe)=>R.ignore(oe),extra:($,oe,ie,be)=>R.extra(ie,be)},formatter:{match:($,oe,ie,be)=>A.match($,C(oe),be),matchAll:A.matchAll,matchNode:A.matchNode,canApply:$=>A.canApply($),closest:$=>A.closest($),apply:($,oe,ie)=>A.apply($,C(oe)),remove:($,oe,ie,be)=>A.remove($,C(oe)),toggle:($,oe,ie)=>A.toggle($,C(oe)),formatChanged:($,oe,ie,be,Se)=>A.formatChanged(oe,ie,be,Se)},editor:{getContent:$=>H.getContent($),setContent:($,oe)=>({content:H.setContent($,oe),html:""}),insertContent:($,oe)=>(H.insertContent($),""),addVisual:H.addVisual},selection:{getContent:($,oe)=>M.getContent(oe)},autocompleter:{addDecoration:P.addDecoration,removeDecoration:P.removeDecoration},raw:{getModel:()=>X.some(j.getRawModel())}}})(v),v.rtc.isRemote)))));var p})(t);(d=>{const u=d.getDoc(),p=d.getBody();d.dispatch("PreInit"),ah(d)||(u.body.spellcheck=!1,Ph.setAttrib(p,"spellcheck","false")),d.quirks=(t=>{const o=It.each,n=vo.BACKSPACE,s=vo.DELETE,i=t.dom,c=t.selection,d=t.parser,u=er.browser,p=u.isFirefox(),v=u.isChromium()||u.isSafari(),w=er.deviceType.isiPhone()||er.deviceType.isiPad(),C=er.os.isMacOS()||er.os.isiOS(),O=(Ae,Pe)=>{try{t.getDoc().execCommand(Ae,!1,String(Pe))}catch{}},R=Ae=>Ae.isDefaultPrevented(),A=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},H=()=>{t.inline||i.bind(t.getDoc(),"mousedown mouseup",Ae=>{let Pe;if(Ae.target===t.getDoc().documentElement)if(Pe=c.getRng(),t.getBody().focus(),"mousedown"===Ae.type){if(Ba(Pe.startContainer))return;c.placeCaretAt(Ae.clientX,Ae.clientY)}else c.setRng(Pe)})},M=()=>{Range.prototype.getClientRects||t.on("mousedown",Ae=>{if(!R(Ae)&&"HTML"===Ae.target.nodeName){const Pe=t.getBody();Pe.blur(),td.setEditorTimeout(t,()=>{Pe.focus()})}})},P=()=>{const Ae=dy(t);t.on("click",Pe=>{const Me=Pe.target;/^(IMG|HR)$/.test(Me.nodeName)&&i.isEditable(Me.parentNode)&&(Pe.preventDefault(),t.selection.select(Me),t.nodeChanged()),"A"===Me.nodeName&&i.hasClass(Me,Ae)&&0===Me.childNodes.length&&i.isEditable(Me.parentNode)&&(Pe.preventDefault(),c.select(Me))})},j=()=>{t.on("keydown",Ae=>{if(!R(Ae)&&Ae.keyCode===n&&c.isCollapsed()&&0===c.getRng().startOffset){const Pe=c.getNode().previousSibling;if(Pe&&Pe.nodeName&&"table"===Pe.nodeName.toLowerCase())return Ae.preventDefault(),!1}return!0})},$=()=>{Qf(t)||t.on("BeforeExecCommand mousedown",()=>{O("StyleWithCSS",!1),O("enableInlineTableEditing",!1),oi(t)||O("enableObjectResizing",!1)})},oe=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ie=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},be=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",Ae=>{let Pe;"HTML"===Ae.target.nodeName&&(Pe=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(Pe),t.selection.normalize(),t.nodeChanged())}))},Se=()=>{C&&t.on("keydown",Ae=>{!vo.metaKeyPressed(Ae)||Ae.shiftKey||37!==Ae.keyCode&&39!==Ae.keyCode||(Ae.preventDefault(),t.selection.getSel().modify("move",37===Ae.keyCode?"backward":"forward","lineboundary"))})},ze=()=>{t.on("click",Ae=>{let Pe=Ae.target;do{if("A"===Pe.tagName)return void Ae.preventDefault()}while(Pe=Pe.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},at=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",Ae=>{Ae.preventDefault()})})},Je=yo;return su(t)?(v&&(H(),P(),at(),A(),w&&(ie(),be(),ze())),p&&(M(),$(),oe(),Se())):(t.on("keydown",Ae=>{if(R(Ae)||Ae.keyCode!==vo.BACKSPACE)return;let Pe=c.getRng();const Me=Pe.startContainer,qe=Pe.startOffset,Qt=i.getRoot();let Ht=Me;if(Pe.collapsed&&0===qe){for(;Ht.parentNode&&Ht.parentNode.firstChild===Ht&&Ht.parentNode!==Qt;)Ht=Ht.parentNode;"BLOCKQUOTE"===Ht.nodeName&&(t.formatter.toggle("blockquote",void 0,Ht),Pe=i.createRng(),Pe.setStart(Me,0),Pe.setEnd(Me,0),c.setRng(Pe))}}),(()=>{const Ae=Pe=>{const Me=i.create("body"),qe=Pe.cloneContents();return Me.appendChild(qe),c.serializer.serialize(Me,{format:"html"})};t.on("keydown",Pe=>{const Me=Pe.keyCode;if(!R(Pe)&&(Me===s||Me===n)&&t.selection.isEditable()){const qe=t.selection.isCollapsed(),Qt=t.getBody();if(qe&&!i.isEmpty(Qt)||!qe&&!(Ht=>{const Lo=Ae(Ht),to=i.createRng();return to.selectNode(t.getBody()),Lo===Ae(to)})(t.selection.getRng()))return;Pe.preventDefault(),t.setContent(""),Qt.firstChild&&i.isBlock(Qt.firstChild)?t.selection.setCursorLocation(Qt.firstChild,0):t.selection.setCursorLocation(Qt,0),t.nodeChanged()}})})(),er.windowsPhone||t.on("keyup focusin mouseup",Ae=>{vo.modifierPressed(Ae)||(Pe=>{const Me=Pe.getBody(),qe=Pe.selection.getRng();return qe.startContainer===qe.endContainer&&qe.startContainer===Me&&0===qe.startOffset&&qe.endOffset===Me.childNodes.length})(t)||c.normalize()},!0),v&&(H(),P(),t.on("init",()=>{O("DefaultParagraphSeparator",yl(t))}),at(),j(),d.addNodeFilter("br",Ae=>{let Pe=Ae.length;for(;Pe--;)"Apple-interchange-newline"===Ae[Pe].attr("class")&&Ae[Pe].remove()}),w?(ie(),be(),ze()):A()),p&&(t.on("keydown",Ae=>{if(!R(Ae)&&Ae.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){const Pe=c.getNode(),Me=Pe.previousSibling;if("HR"===Pe.nodeName)return i.remove(Pe),void Ae.preventDefault();Me&&Me.nodeName&&"hr"===Me.nodeName.toLowerCase()&&(i.remove(Me),Ae.preventDefault())}}}),M(),(()=>{const Ae=()=>{const Me=i.getAttribs(c.getStart().cloneNode(!1));return()=>{const qe=c.getStart();qe!==t.getBody()&&(i.setAttrib(qe,"style",null),o(Me,Qt=>{qe.setAttributeNode(Qt.cloneNode(!0))}))}},Pe=()=>!c.isCollapsed()&&i.getParent(c.getStart(),i.isBlock)!==i.getParent(c.getEnd(),i.isBlock);t.on("keypress",Me=>{let qe;return!(!(R(Me)||8!==Me.keyCode&&46!==Me.keyCode)&&Pe()&&(qe=Ae(),t.getDoc().execCommand("delete",!1),qe(),Me.preventDefault(),1))}),i.bind(t.getDoc(),"cut",Me=>{if(!R(Me)&&Pe()){const qe=Ae();td.setEditorTimeout(t,()=>{qe()})}})})(),$(),t.on("SetContent ExecCommand",Ae=>{"setcontent"!==Ae.type&&"mceInsertLink"!==Ae.command||o(i.select("a:not([data-mce-block])"),Pe=>{var Me;let qe=Pe.parentNode;const Qt=i.getRoot();if(qe?.lastChild===Pe){for(;qe&&!i.isBlock(qe);){if((null===(Me=qe.parentNode)||void 0===Me?void 0:Me.lastChild)!==qe||qe===Qt)return;qe=qe.parentNode}i.add(qe,"br",{"data-mce-bogus":1})}})}),oe(),Se(),j(),t.on("drop",Ae=>{var Pe;const Me=null===(Pe=Ae.dataTransfer)||void 0===Pe?void 0:Pe.getData("text/html");uo(Me)&&/^<img[^>]*>$/.test(Me)&&t.dispatch("dragend",new window.DragEvent("dragend",Ae))}))),{refreshContentEditable:Je,isHidden:()=>{if(!p||t.removed)return!1;const Ae=t.selection.getSel();return!Ae||!Ae.rangeCount||0===Ae.rangeCount}}})(d),d.dispatch("PostRender");const v=Ds(d);void 0!==v&&(p.dir=v);const w=uy(d);w&&d.on("BeforeSetContent",C=>{It.each(w,O=>{C.content=C.content.replace(O,R=>"\x3c!--mce:protected "+escape(R)+"--\x3e")})}),d.on("SetContent",()=>{d.addVisual(d.getBody())}),d.on("compositionstart compositionend",C=>{d.composing="compositionstart"===C.type})})(t),c.fold(()=>{sT(t).then(()=>Nk(t))},d=>{t.setProgressState(!0),sT(t).then(()=>{d().then(u=>{t.setProgressState(!1),Nk(t),V1(t)},u=>{t.notificationManager.open({type:"error",text:String(u)}),Nk(t),V1(t)})})})},v5=Jo,Mk=ws.DOM,iT=ws.DOM,lT=(t,o)=>({editorContainer:t,iframeContainer:o,api:{}}),cT=t=>{const o=t.getElement();return t.inline?lT(null):(n=>{const s=iT.create("div");return iT.insertAfter(s,n),lT(s,s)})(o)},y5=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const s=It.trim(oh(n)),i=n.ui.registry.getAll().icons,c={...H2.get("default").icons,...H2.get(s).icons};Ao(c,(d,u)=>{Vo(i,u)||n.ui.registry.addIcon(u,d)})})(t),(n=>{const s=_m(n);if(uo(s)){const i=Ah.get(s);n.theme=i(n,Ah.urls[s])||{},it(n.theme.init)&&n.theme.init(n,Ah.urls[s]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const s=ag(n),i=Z1.get(s);n.model=i(n,Z1.urls[s])})(t),(n=>{const s=[];Ue(vp(n),i=>{((c,d,u)=>{const p=rd.get(u),v=rd.urls[u]||c.documentBaseUrl.replace(/\/$/,"");if(u=It.trim(u),p&&-1===It.inArray(d,u)){if(c.plugins[u])return;try{const w=p(c,v)||{};c.plugins[u]=w,it(w.init)&&(w.init(c,v),d.push(u))}catch(w){((C,O,R)=>{const A=Ac.translate(["Failed to initialize plugin: {0}",O]);ab(C,"PluginLoadError",{message:A}),Qb(A,R),Wp(C,A)})(c,u,w)}}})(n,s,i.replace(/^\-/,""))})})(t);const o=await(n=>{const s=n.getElement();return n.orgDisplay=s.style.display,uo(_m(n))?(i=>{const c=i.theme.renderUI;return c?c():cT(i)})(n):it(_m(n))?(i=>{const c=i.getElement(),d=_m(i)(i,c);return d.editorContainer.nodeType&&(d.editorContainer.id=d.editorContainer.id||i.id+"_parent"),d.iframeContainer&&d.iframeContainer.nodeType&&(d.iframeContainer.id=d.iframeContainer.id||i.id+"_iframecontainer"),d.height=d.iframeHeight?d.iframeHeight:c.offsetHeight,d})(n):cT(n)})(t);var n,s;((n,s)=>{const i={show:X.from(s.show).getOr(yo),hide:X.from(s.hide).getOr(yo),isEnabled:X.from(s.isEnabled).getOr(Jo),setEnabled:c=>{n.mode.isReadOnly()||X.from(s.setEnabled).each(d=>d(c))}};n.ui={...n.ui,...i}})(t,X.from(o.api).getOr({})),t.editorContainer=o.editorContainer,(n=t).contentCSS=n.contentCSS.concat(U_(s=n,Ox(s)),(s=>U_(s,sg(s)))(n)),t.inline?aT(t):((n,s)=>{((i,c)=>{const d=i.translate("Rich Text Area"),u=le(fe(i.getElement()),"tabindex").bind(br),p=((v,w,C,O)=>{const R=vn("iframe");return O.each(A=>vr(R,"tabindex",A)),wa(R,C),wa(R,{id:v+"_ifr",frameBorder:"0",allowTransparency:"true",title:w}),ko(R,"tox-edit-area__iframe"),R})(i.id,d,B0(i),u).dom;p.onload=()=>{p.onload=null,i.dispatch("load")},i.contentAreaContainer=c.iframeContainer,i.iframeElement=p,i.iframeHTML=(v=>{let w=ay(v)+"<html><head>";Vt(v)!==v.documentBaseUrl&&(w+='<base href="'+v.documentBaseURI.getURI()+'" />'),w+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const C=Ex(v),O=pi(v),R=v.translate(dg(v));return L0(v)&&(w+='<meta http-equiv="Content-Security-Policy" content="'+L0(v)+'" />'),w+=`</head><body id="${C}" class="mce-content-body ${O}" data-id="${v.id}" aria-label="${R}"><br></body></html>`,w})(i),Mk.add(c.iframeContainer,p)})(n,s),s.editorContainer&&(s.editorContainer.style.display=n.orgDisplay,n.hidden=Mk.isHidden(s.editorContainer)),n.getElement().style.display="none",Mk.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(i=>{const c=i.iframeElement,d=()=>{i.contentDocument=c.contentDocument,aT(i)};if(a1(i)||er.browser.isFirefox()){const p=i.getDoc();p.open(),p.write(i.iframeHTML),p.close(),d()}else{const p=((t,o,n,s)=>((i,c,d,u,p)=>{const v=(w=d,C=u,O=>{w(O)&&C((R=>{const A=fe(Hd(R).getOr(R.target)),H=()=>R.stopPropagation(),M=()=>R.preventDefault(),P=Dr(M,H);return{target:A,x:R.clientX,y:R.clientY,stop:H,prevent:M,kill:P,raw:R}})(O))});var w,C;return i.dom.addEventListener(c,v,!1),{unbind:mt(Pt,i,c,v,!1)}})(t,"load",n,()=>{p.unbind(),d()}))(fe(c),0,v5);c.srcdoc=i.iframeHTML}})(n)})(t,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},cf=ws.DOM,gs=t=>"-"===t.charAt(0),Rk=(t,o,n)=>X.from(o).filter(s=>Rn(s)&&!H2.has(s)).map(s=>({url:`${t.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:X.some(s)})),Bk=za().deviceType,Lk=Bk.isPhone(),dT=Bk.isTablet(),Pv=t=>{if(eo(t))return[];{const o=lo(t)?t:t.split(/[ ,]/),n=Gt(o,ho);return Yt(n,Rn)}},ox=(t,o)=>Vo(t.sections(),o),x5=(t,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Nn(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),C5=(t,o)=>{var n;const s=null!==(n=o.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?It.extend({},t.external_plugins,s):s},Fv=(t,o)=>{const n=t.selection,s=t.dom;return/^ | $/.test(o)?((i,c,d)=>{const u=fe(i.getRoot());return d=E1(u,rt.fromRangeStart(c))?d.replace(/^ /,"&nbsp;"):d.replace(/^&nbsp;/," "),Qi(u,rt.fromRangeEnd(c))?d.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):d.replace(/&nbsp;(<br( \/)?>)?$/," ")})(s,n.getRng(),o):o},Bg=(t,o)=>{if(t.selection.isEditable()){const{content:n,details:s}=(i=>{if("string"!=typeof i){const c=It.extend({paste:i.paste,data:{paste:i.paste}},i);return{content:i.content,details:c}}return{content:i,details:{}}})(o);C2(t,{...s,content:Fv(t,n),format:"html",set:!1,selection:!0}).each(i=>{const c=(u=i.content,p=s,N2(t).editor.insertContent(u,p));var u,p;Up(t,c,i),t.addVisual()})}},Ik={"font-size":"size","font-family":"face"},Hk=kl("font"),Pk=t=>(o,n)=>X.from(n).map(fe).filter(ka).bind(s=>{return(i=t,c=o,d=s.dom,$C(fe(d),u=>{return di(p=u,i).orThunk(()=>Hk(p)?Nn(Ik,i).bind(v=>le(p,v)):X.none());var p},u=>yr(fe(c),u))).or(((i,c)=>X.from(ws.DOM.getStyle(c,i,!0)))(t,s.dom));var i,c,d}).getOr(""),uT=Pk("font-size"),mT=Dr(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Pk("font-family")),S5=t=>dl(t.getBody()).bind(o=>{const n=o.container();return X.from(tt(n)?n.parentNode:n)}),nx=(t,o)=>{return n=t,s=lr(X.some,o),(i=n,X.from(i.selection.getRng()).bind(c=>{const d=i.getBody();return c.startContainer===d&&0===c.startOffset?X.none():X.from(i.selection.getStart(!0))})).orThunk(mt(S5,n)).map(fe).filter(ka).bind(s);var n,s,i},Fk=(t,o)=>{if(/^[0-9.]+$/.test(o)){const n=parseInt(o,10);if(n>=1&&n<=7){const s=It.explode(t.options.get("font_size_style_values")),i=It.explode(t.options.get("font_size_classes"));return i.length>0?i[n-1]||o:s[n-1]||o}return o}return o},k5=t=>{const o=t.split(/\s*,\s*/);return Gt(o,n=>-1===n.indexOf(" ")||Wt(n,'"')||Wt(n,"'")?n:`'${n}'`).join(",")},rx=["toggleview"],zk=t=>Ie(rx,t.toLowerCase());class gT{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,n=!1,s,i){const c=this.editor,d=o.toLowerCase(),u=i?.skip_focus;if(c.removed||("mcefocus"!==d&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)||u?Ly(v=c).each(w=>v.selection.setRng(w)):c.focus()),c.dispatch("BeforeExecCommand",{command:o,ui:n,value:s}).isDefaultPrevented()))return!1;var v;const p=this.commands.exec[d];return!!it(p)&&(p(d,n,s),c.dispatch("ExecCommand",{command:o,ui:n,value:s}),!0)}queryCommandState(o){if(!zk(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=o.toLowerCase(),s=this.commands.state[n];return!!it(s)&&s(n)}queryCommandValue(o){if(!zk(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=o.toLowerCase(),s=this.commands.value[n];return it(s)?s(n):""}addCommands(o,n="exec"){const s=this.commands;Ao(o,(i,c)=>{Ue(c.toLowerCase().split(","),d=>{s[n][d]=i})})}addCommand(o,n,s){const i=o.toLowerCase();this.commands.exec[i]=(c,d,u)=>n.call(s??this.editor,d,u)}queryCommandSupported(o){const n=o.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(o,n,s){this.commands.state[o.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(o,n,s){this.commands.value[o.toLowerCase()]=()=>n.call(s??this.editor)}}const df="data-mce-contenteditable",Vk=(t,o,n)=>{try{t.getDoc().execCommand(o,!1,String(n))}catch{}},sx=(t,o)=>{t.dom.contentEditable=o?"true":"false"},Fh=t=>t.readonly,pT=t=>{t.parser.addAttributeFilter("contenteditable",o=>{Fh(t)&&Ue(o,n=>{n.attr(df,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(df,o=>{Fh(t)&&Ue(o,n=>{n.attr("contenteditable",n.attr(df))})}),t.serializer.addTempAttr(df)},O5=["copy"],T5=It.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Zk{static isNative(o){return!!T5[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Do}fire(o,n){return this.dispatch(o,n)}dispatch(o,n){const s=o.toLowerCase(),i=eg(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const c=this.bindings[s];if(c)for(let d=0,u=c.length;d<u;d++){const p=c[d];if(!p.removed){if(p.once&&this.off(s,p.func),i.isImmediatePropagationStopped())return i;if(!1===p.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(o,n,s,i){if(!1===n&&(n=Do),n){const c={func:n,removed:!1};i&&It.extend(c,i);const d=o.toLowerCase().split(" ");let u=d.length;for(;u--;){const p=d[u];let v=this.bindings[p];v||(v=[],this.toggleEvent(p,!0)),v=s?[c,...v]:[...v,c],this.bindings[p]=v}}return this}off(o,n){if(o){const s=o.toLowerCase().split(" ");let i=s.length;for(;i--;){const c=s[i];let d=this.bindings[c];if(!c)return Ao(this.bindings,(u,p)=>{this.toggleEvent(p,!1),delete this.bindings[p]}),this;if(d){if(n){const u=en(d,p=>p.func===n);d=u.fail,this.bindings[c]=d,Ue(u.pass,p=>{p.removed=!0})}else d.length=0;d.length||(this.toggleEvent(o,!1),delete this.bindings[c])}}}else Ao(this.bindings,(s,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,n,s){return this.on(o,n,s,{once:!0})}has(o){o=o.toLowerCase();const n=this.bindings[o];return!(!n||0===n.length)}}const zh=t=>(t._eventDispatcher||(t._eventDispatcher=new Zk({scope:t,toggleEvent:(o,n)=>{Zk.isNative(o)&&t.toggleNativeEvent&&t.toggleNativeEvent(o,n)}})),t._eventDispatcher),ax={fire(t,o,n){return this.dispatch(t,o,n)},dispatch(t,o,n){const s=this;if(s.removed&&"remove"!==t&&"detach"!==t)return eg(t.toLowerCase(),o??{},s);const i=zh(s).dispatch(t,o);if(!1!==n&&s.parent){let c=s.parent();for(;c&&!i.isPropagationStopped();)c.dispatch(t,i,!1),c=c.parent?c.parent():void 0}return i},on(t,o,n){return zh(this).on(t,o,n)},off(t,o){return zh(this).off(t,o)},once(t,o){return zh(this).once(t,o)},hasEventListeners(t){return zh(this).has(t)}},ix=ws.DOM;let Vh;const zv=(t,o)=>{if("selectionchange"===o)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return t.getDoc().documentElement;const n=Z0(t);return n?(t.eventRoot||(t.eventRoot=ix.select(n)[0]),t.eventRoot):t.getBody()},lx=(t,o,n)=>{var s;(s=t).hidden||Fh(s)?Fh(t)&&((s,i)=>{if("click"!==i.type||vo.metaKeyPressed(i))Ie(O5,i.type)&&s.dispatch(i.type,i);else{const c=fe(i.target);(d=s,u=c,$s(u,"a",p=>yr(p,fe(d.getBody()))).bind(p=>le(p,"href"))).each(d=>{if(i.preventDefault(),/^#/.test(d)){const u=s.dom.select(`${d},[name="${Qe(d,"#")}"]`);u.length&&s.selection.scrollIntoView(u[0],!0)}else window.open(d,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var d,u})(t,n):t.dispatch(o,n)},jk=(t,o)=>{if(t.delegates||(t.delegates={}),t.delegates[o]||t.removed)return;const n=zv(t,o);if(Z0(t)){if(Vh||(Vh={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Vh&&(Ao(Vh,(i,c)=>{t.dom.unbind(zv(t,c))}),Vh=null)})),Vh[o])return;const s=i=>{const c=i.target,d=t.editorManager.get();let u=d.length;for(;u--;){const p=d[u].getBody();(p===c||ix.isChildOf(c,p))&&lx(d[u],o,i)}};Vh[o]=s,ix.bind(n,o,s)}else{const s=i=>{lx(t,o,i)};ix.bind(n,o,s),t.delegates[o]=s}},Uk={...ax,bindPendingEventDelegates(){const t=this;It.each(t._pendingNativeEvents,o=>{jk(t,o)})},toggleNativeEvent(t,o){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(o?n.initialized?jk(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(zv(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,o=t.getBody(),n=t.dom;t.delegates&&(Ao(t.delegates,(s,i)=>{t.dom.unbind(zv(t,i),i,s)}),delete t.delegates),!t.inline&&o&&n&&(o.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(o),n.unbind(t.getContainer()))}},fT=t=>uo(t)?{value:t.split(/[ ,]/),valid:!0}:$n(t,uo)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},bT=(t,o)=>t+(fn(o.message)?"":`. ${o.message}`),vT=t=>t.valid,uf=(t,o,n="")=>{const s=o(t);return At(s)?s?{value:t,valid:!0}:{valid:!1,message:n}:s},A5=["design","readonly"],Wk=(t,o,n,s)=>{const i=n[o.get()],c=n[s];try{c.activate()}catch(d){return void console.error(`problem while activating editor mode ${s}:`,d)}var d;i.deactivate(),i.editorReadOnly!==c.editorReadOnly&&((t,o)=>{const n=fe(t.getBody());var s,i,c;c=o,Xn(s=n,i="mce-content-readonly")&&!c?cn(s,i):c&&ko(s,i),o?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(s=>{X.from(s.selection.getNode()).each(i=>{i.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,sx(n,!1),Ue(W(n,'*[contenteditable="true"]'),s=>{vr(s,df,"true"),sx(s,!1)})):(t.readonly=!1,t.hasEditableRoot()&&sx(n,!0),Ue(W(n,`*[${df}="true"]`),s=>{Le(s,df),sx(s,!0)}),Vk(t,"StyleWithCSS",!1),Vk(t,"enableInlineTableEditing",!1),Vk(t,"enableObjectResizing",!1),(s=>Bp(s)||(i=>{const c=ds(fe(i.getElement()));return Kx(c).filter(d=>!_1(d.dom)&&gb(i,d.dom)).isSome()})(s))(t)&&t.focus(),(s=>{s.selection.setRng(s.selection.getRng())})(t),t.nodeChanged())})(t,c.editorReadOnly),o.set(s),(d=t).dispatch("SwitchMode",{mode:s})},d0=It.each,cx=It.explode,yT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},wT=It.makeMap("alt,ctrl,shift,meta,access"),N5=t=>{const o={},n=er.os.isMacOS()||er.os.isiOS();d0(cx(t.toLowerCase(),"+"),c=>{c in wT?o[c]=!0:/^[0-9]{2,}$/.test(c)?o.keyCode=parseInt(c,10):(o.charCode=c.charCodeAt(0),o.keyCode=yT[c]||c.toUpperCase().charCodeAt(0))});const s=[o.keyCode];let i;for(i in wT)o[i]?s.push(i):o[i]=!1;return o.id=s.join(","),o.access&&(o.alt=!0,n?o.ctrl=!0:o.shift=!0),o.meta&&(n?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class dx{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const n=this;o.on("keyup keypress keydown",s=>{!n.hasModifier(s)&&!n.isFunctionKey(s)||s.isDefaultPrevented()||(d0(n.shortcuts,i=>{n.matchShortcut(s,i)&&(n.pendingPatterns=i.subpatterns.slice(0),"keydown"===s.type&&n.executeShortcutAction(i))}),n.matchShortcut(s,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===s.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(o,n,s,i){const c=this,d=c.normalizeCommandFunc(s);return d0(cx(It.trim(o)),u=>{const p=c.createShortcut(u,n,d,i);c.shortcuts[p.id]=p}),!0}remove(o){const n=this.createShortcut(o);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(o){const n=this,s=o;return"string"==typeof s?()=>{n.editor.execCommand(s,!1,null)}:It.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(o,n,s,i){const c=It.map(cx(o,">"),N5);return c[c.length-1]=It.extend(c[c.length-1],{func:s,scope:i||this.editor}),It.extend(c[0],{desc:this.editor.translate(n),subpatterns:c.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return"keydown"===o.type&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,n){return!!n&&n.ctrl===o.ctrlKey&&n.meta===o.metaKey&&n.alt===o.altKey&&n.shift===o.shiftKey&&!!(o.keyCode===n.keyCode||o.charCode&&o.charCode===n.charCode)&&(o.preventDefault(),!0)}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const $k=()=>{const t=(()=>{const o={},n={},s={},i={},c={},d={},u={},p={},v=(w,C)=>(O,R)=>{w[O.toLowerCase()]={...R,type:C}};return{addButton:v(o,"button"),addGroupToolbarButton:v(o,"grouptoolbarbutton"),addToggleButton:v(o,"togglebutton"),addMenuButton:v(o,"menubutton"),addSplitButton:v(o,"splitbutton"),addMenuItem:v(n,"menuitem"),addNestedMenuItem:v(n,"nestedmenuitem"),addToggleMenuItem:v(n,"togglemenuitem"),addAutocompleter:v(s,"autocompleter"),addContextMenu:v(c,"contextmenu"),addContextToolbar:v(d,"contexttoolbar"),addContextForm:v(d,"contextform"),addSidebar:v(u,"sidebar"),addView:v(p,"views"),addIcon:(w,C)=>i[w.toLowerCase()]=C,getAll:()=>({buttons:o,menuItems:n,icons:i,popups:s,contextMenus:c,contextToolbars:d,sidebars:u,views:p})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},jm=ws.DOM,qk=It.extend,Gk=It.each;class Vv{constructor(o,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,qk(this,Uk);const i=this;this.id=o,this.hidden=!1;const c=((t,o,n,s,i)=>{var c;const d=t?{mobile:x5(null!==(c=i.mobile)&&void 0!==c?c:{},o)}:{},u=((t,o)=>{const n=((c,d)=>{const u={},p={};return Wo(c,(v,w)=>Ie(t,w),Kt(u),Kt(p)),{t:u,f:p}})(o);return i=n.f,{sections:ot(n.t),options:ot(i)};var i})(["mobile"],HS(d,i)),p=It.extend(n,s,u.options(),t&&ox(u,"mobile")?((v,w,C={})=>{const O=v.sections(),R=Nn(O,w).getOr({});return It.extend({},C,R)})(u,"mobile"):{},{external_plugins:C5(s,u.options())});return((v,w,C,O)=>{const R=Pv(C.forced_plugins),A=Pv(O.plugins),H=ox(j=w,"mobile")?j.sections().mobile:{},M=((j,$,oe,ie)=>j&&ox($,"mobile")?ie:oe)(v,w,A,H.plugins?Pv(H.plugins):A),P=((j,$)=>[...Pv(j),...Pv($)])(R,M);var j;return It.extend(O,{forced_plugins:R,plugins:P})})(t,u,s,p)})(Lk||dT,Lk,A=n,s.defaultOptions,A);var A;this.options=((R,A)=>{const H={},M={},P=($,oe,ie)=>{const be=uf(oe,ie);return vT(be)?(M[$]=be.value,!0):(console.warn(bT(`Invalid value passed for the ${$} option`,be)),!1)},j=$=>Vo(H,$);return{register:($,oe)=>{const ie=uo(oe.processor)?(Se=>{const ze=(()=>{switch(Se){case"array":return lo;case"boolean":return At;case"function":return it;case"number":return Oe;case"object":return ut;case"string":return uo;case"string[]":return fT;case"object[]":return at=>$n(at,ut);case"regexp":return at=>_n(at,RegExp);default:return Jo}})();return at=>uf(at,ze,`The value must be a ${Se}.`)})(oe.processor):oe.processor,be=((Se,ze,at)=>{if(!Ft(ze)){const Je=uf(ze,at);if(vT(Je))return Je.value;console.error(bT(`Invalid default value passed for the "${Se}" option`,Je))}})($,oe.default,ie);H[$]={...oe,default:be,processor:ie},Nn(M,$).orThunk(()=>Nn(A,$)).each(Se=>P($,Se,ie))},isRegistered:j,get:$=>Nn(M,$).orThunk(()=>Nn(H,$).map(oe=>oe.default)).getOrUndefined(),set:($,oe)=>{if(j($)){const ie=H[$];return ie.immutable?(console.error(`"${$}" is an immutable option and cannot be updated`),!1):P($,oe,ie.processor)}return console.warn(`"${$}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:$=>{const oe=j($);return oe&&delete M[$],oe},isSet:$=>Vo(M,$)}})(0,c),(R=>{const A=R.options.register;A("id",{processor:"string",default:R.id}),A("selector",{processor:"string"}),A("target",{processor:"object"}),A("suffix",{processor:"string"}),A("cache_suffix",{processor:"string"}),A("base_url",{processor:"string"}),A("referrer_policy",{processor:"string",default:""}),A("language_load",{processor:"boolean",default:!0}),A("inline",{processor:"boolean",default:!1}),A("iframe_attrs",{processor:"object",default:{}}),A("doctype",{processor:"string",default:"<!DOCTYPE html>"}),A("document_base_url",{processor:"string",default:R.documentBaseUrl}),A("body_id",{processor:cp(R,"tinymce"),default:"tinymce"}),A("body_class",{processor:cp(R),default:""}),A("content_security_policy",{processor:"string",default:""}),A("br_in_pre",{processor:"boolean",default:!0}),A("forced_root_block",{processor:H=>{const M=uo(H)&&Rn(H);return M?{value:H,valid:M}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),A("forced_root_block_attrs",{processor:"object",default:{}}),A("newline_behavior",{processor:H=>{const M=Ie(["block","linebreak","invert","default"],H);return M?{value:H,valid:M}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),A("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),A("no_newline_selector",{processor:"string",default:""}),A("keep_styles",{processor:"boolean",default:!0}),A("end_container_on_empty_block",{processor:H=>At(H)||uo(H)?{valid:!0,value:H}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),A("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),A("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),A("font_size_classes",{processor:"string",default:""}),A("automatic_uploads",{processor:"boolean",default:!0}),A("images_reuse_filename",{processor:"boolean",default:!1}),A("images_replace_blob_uris",{processor:"boolean",default:!0}),A("icons",{processor:"string",default:""}),A("icons_url",{processor:"string",default:""}),A("images_upload_url",{processor:"string",default:""}),A("images_upload_base_path",{processor:"string",default:""}),A("images_upload_credentials",{processor:"boolean",default:!1}),A("images_upload_handler",{processor:"function"}),A("language",{processor:"string",default:"en"}),A("language_url",{processor:"string",default:""}),A("entity_encoding",{processor:"string",default:"named"}),A("indent",{processor:"boolean",default:!0}),A("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),A("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),A("indent_use_margin",{processor:"boolean",default:!1}),A("indentation",{processor:"string",default:"40px"}),A("content_css",{processor:H=>{const M=!1===H||uo(H)||$n(H,uo);return M?uo(H)?{value:Gt(H.split(","),ho),valid:M}:lo(H)?{value:H,valid:M}:!1===H?{value:[],valid:M}:{value:H,valid:M}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:rh(R)?[]:["default"]}),A("content_style",{processor:"string"}),A("content_css_cors",{processor:"boolean",default:!1}),A("font_css",{processor:H=>{const M=uo(H)||$n(H,uo);return M?{value:lo(H)?H:Gt(H.split(","),ho),valid:M}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),A("inline_boundaries",{processor:"boolean",default:!0}),A("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),A("object_resizing",{processor:H=>{const M=At(H)||uo(H);return M?!1===H||jf.isiPhone()||jf.isiPad()?{value:"",valid:M}:{value:!0===H?"table,img,figure.image,div,video,iframe":H,valid:M}:{valid:!1,message:"Must be boolean or a string"}},default:!D0}),A("resize_img_proportional",{processor:"boolean",default:!0}),A("event_root",{processor:"object"}),A("service_message",{processor:"string"}),A("theme",{processor:H=>!1===H||uo(H)||it(H),default:"silver"}),A("theme_url",{processor:"string"}),A("formats",{processor:"object"}),A("format_empty_lines",{processor:"boolean",default:!1}),A("format_noneditable_selector",{processor:"string",default:""}),A("preview_styles",{processor:H=>{const M=!1===H||uo(H);return M?{value:!1===H?"":H,valid:M}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),A("custom_ui_selector",{processor:"string",default:""}),A("hidden_input",{processor:"boolean",default:!0}),A("submit_patch",{processor:"boolean",default:!0}),A("encoding",{processor:"string"}),A("add_form_submit_trigger",{processor:"boolean",default:!0}),A("add_unload_trigger",{processor:"boolean",default:!0}),A("custom_undo_redo_levels",{processor:"number",default:0}),A("disable_nodechange",{processor:"boolean",default:!1}),A("readonly",{processor:"boolean",default:!1}),A("editable_root",{processor:"boolean",default:!0}),A("plugins",{processor:"string[]",default:[]}),A("external_plugins",{processor:"object"}),A("forced_plugins",{processor:"string[]"}),A("model",{processor:"string",default:R.hasPlugin("rtc")?"plugin":"dom"}),A("model_url",{processor:"string"}),A("block_unsupported_drop",{processor:"boolean",default:!0}),A("visual",{processor:"boolean",default:!0}),A("visual_table_class",{processor:"string",default:"mce-item-table"}),A("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),A("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),A("setup",{processor:"function"}),A("init_instance_callback",{processor:"function"}),A("url_converter",{processor:"function",default:R.convertURL}),A("url_converter_scope",{processor:"object",default:R}),A("urlconverter_callback",{processor:"function"}),A("allow_conditional_comments",{processor:"boolean",default:!1}),A("allow_html_data_urls",{processor:"boolean",default:!1}),A("allow_svg_data_urls",{processor:"boolean"}),A("allow_html_in_named_anchor",{processor:"boolean",default:!1}),A("allow_script_urls",{processor:"boolean",default:!1}),A("allow_unsafe_link_target",{processor:"boolean",default:!1}),A("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),A("fix_list_elements",{processor:"boolean",default:!1}),A("preserve_cdata",{processor:"boolean",default:!1}),A("remove_trailing_brs",{processor:"boolean",default:!0}),A("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),A("element_format",{processor:"string",default:"html"}),A("entities",{processor:"string"}),A("schema",{processor:"string",default:"html5"}),A("convert_urls",{processor:"boolean",default:!0}),A("relative_urls",{processor:"boolean",default:!0}),A("remove_script_host",{processor:"boolean",default:!0}),A("custom_elements",{processor:"string"}),A("extended_valid_elements",{processor:"string"}),A("invalid_elements",{processor:"string"}),A("invalid_styles",{processor:Ru}),A("valid_children",{processor:"string"}),A("valid_classes",{processor:Ru}),A("valid_elements",{processor:"string"}),A("valid_styles",{processor:Ru}),A("verify_html",{processor:"boolean",default:!0}),A("auto_focus",{processor:H=>uo(H)||!0===H}),A("browser_spellcheck",{processor:"boolean",default:!1}),A("protect",{processor:"array"}),A("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),A("deprecation_warnings",{processor:"boolean",default:!0}),A("a11y_advanced_options",{processor:"boolean",default:!1}),A("api_key",{processor:"string"}),A("paste_block_drop",{processor:"boolean",default:!1}),A("paste_data_images",{processor:"boolean",default:!0}),A("paste_preprocess",{processor:"function"}),A("paste_postprocess",{processor:"function"}),A("paste_webkit_styles",{processor:"string",default:"none"}),A("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),A("paste_merge_formats",{processor:"boolean",default:!0}),A("smart_paste",{processor:"boolean",default:!0}),A("paste_as_text",{processor:"boolean",default:!1}),A("paste_tab_spaces",{processor:"number",default:4}),A("text_patterns",{processor:H=>$n(H,ut)||!1===H?{value:Zf(!1===H?[]:H),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),A("text_patterns_lookup",{processor:H=>{return it(H)?{value:(M=H,P=>{const j=M(P);return Zf(j)}),valid:!0}:{valid:!1,message:"Must be a single function"};var M},default:H=>[]}),A("noneditable_class",{processor:"string",default:"mceNonEditable"}),A("editable_class",{processor:"string",default:"mceEditable"}),A("noneditable_regexp",{processor:H=>$n(H,Cm)?{value:H,valid:!0}:Cm(H)?{value:[H],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),A("table_tab_navigation",{processor:"boolean",default:!0}),A("highlight_on_focus",{processor:"boolean",default:!1}),A("xss_sanitization",{processor:"boolean",default:!0}),A("details_initial_state",{processor:H=>{const M=Ie(["inherited","collapsed","expanded"],H);return M?{value:H,valid:M}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),A("details_serialized_state",{processor:H=>{const M=Ie(["inherited","collapsed","expanded"],H);return M?{value:H,valid:M}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),A("init_content_sync",{processor:"boolean",default:!1}),A("newdocument_content",{processor:"string",default:""}),R.on("ScriptsLoaded",()=>{A("directionality",{processor:"string",default:Ac.isRtl()?"rtl":void 0}),A("placeholder",{processor:"string",default:Uf.getAttrib(R.getElement(),"placeholder")})})})(i);const d=this.options.get;d("deprecation_warnings")&&((R,A)=>{((H,M)=>{const P=(t=>{const o=P3(t,L3),n=t.forced_root_block;return!1!==n&&""!==n||o.push("forced_root_block (false only)"),_r(o)})(H),j=(t=>z_(t,H3))(M),$=j.length>0,oe=P.length>0,ie="mobile"===M.theme;if($||oe||ie){const be="\n- ",Se=ie?`\n\nThemes:${be}mobile`:"",ze=$?`\n\nPlugins:${be}${j.join(be)}`:"",at=oe?`\n\nOptions:${be}${P.join(be)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+Se+ze+at)}})(R,A),((H,M)=>{const P=(t=>P3(t,I3))(H),j=(t=>z_(t,B2.map(o=>o.name)))(M),$=j.length>0,oe=P.length>0;if($||oe){const ie="\n- ",be=$?`\n\nPlugins:${ie}${j.map(z3).join(ie)}`:"",Se=oe?`\n\nOptions:${ie}${P.join(ie)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+be+Se)}})(R,A)})(n,c);const u=d("suffix");u&&(s.suffix=u),this.suffix=s.suffix;const p=d("base_url");p&&s._setBaseUrl(p),this.baseUri=s.baseURI;const v=Yf(i);v&&(Zd.ScriptLoader._setReferrerPolicy(v),ws.DOM.styleSheetLoader._setReferrerPolicy(v));const w=e1(i);ne(w)&&ws.DOM.styleSheetLoader._setContentCssCors(w),Ei.languageLoad=d("language_load"),Ei.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new ru(Vt(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=rh(i),this.hasVisual=$0(i),this.shortcuts=new dx(this),this.editorCommands=new gT(this),(t=>{var o;(t=>{(o=>{const n=s=>()=>{Ue("left,center,right,justify".split(","),i=>{s!==i&&o.formatter.remove("align"+i)}),"none"!==s&&(o.formatter.toggle("align"+s,void 0),o.nodeChanged())};o.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(o=>{const n=s=>()=>{const i=o.selection,c=i.isCollapsed()?[o.dom.getParent(i.getNode(),o.dom.isBlock)]:i.getSelectedBlocks();return To(c,d=>ne(o.formatter.matchNode(d,s)))};o.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(o=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=o.getDoc();let i;try{s.execCommand(n)}catch{i=!0}if("paste"!==n||s.queryCommandEnabled(n)||(i=!0),i||!s.queryCommandSupported(n)){let c=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(er.os.isMacOS()||er.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:c,type:"error"})}}}),(o=>{o.editorCommands.addCommands({mceAddUndoLevel:()=>{o.undoManager.add()},mceEndUndoLevel:()=>{o.undoManager.add()},Undo:()=>{o.undoManager.undo()},Redo:()=>{o.undoManager.redo()}})})(t),(o=>{o.editorCommands.addCommands({mceSelectNodeDepth:(n,s,i)=>{let c=0;o.dom.getParent(o.selection.getNode(),d=>!ve(d)||c++!==i||(o.selection.select(d),!1),o.getBody())},mceSelectNode:(n,s,i)=>{o.selection.select(i)},selectAll:()=>{const n=o.dom.getParent(o.selection.getStart(),xr);if(n){const s=o.dom.createRng();s.selectNodeContents(n),o.selection.setRng(s)}}})})(t),(o=>{o.editorCommands.addCommands({mceCleanup:()=>{const n=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(n)},insertImage:(n,s,i)=>{Bg(o,o.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{o.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,i)=>{Bg(o,o.dom.encode(i))},insertHTML:(n,s,i)=>{Bg(o,i)},mceInsertContent:(n,s,i)=>{Bg(o,i)},mceSetContent:(n,s,i)=>{o.setContent(i)},mceReplaceContent:(n,s,i)=>{o.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceNewDocument:()=>{o.setContent(Bu(o))}})})(t),(o=>{const n=(s,i,c)=>{const d=uo(c)?{href:c}:c,u=o.dom.getParent(o.selection.getNode(),"a");ut(d)&&uo(d.href)&&(d.href=d.href.replace(/ /g,"%20"),u&&d.href||o.formatter.remove("link"),d.href&&o.formatter.apply("link",d,u))};o.editorCommands.addCommands({unlink:()=>{if(o.selection.isEditable()){if(o.selection.isCollapsed()){const s=o.dom.getParent(o.selection.getStart(),"a");return void(s&&o.dom.remove(s,!0))}o.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(o=>{o.editorCommands.addCommands({Indent:()=>{vE(o,"indent")},Outdent:()=>{yE(o)}}),o.editorCommands.addCommands({Outdent:()=>uv(o)},"state")})(t),(o=>{o.editorCommands.addCommands({insertParagraph:()=>{Ov(US,o)},mceInsertNewLine:(n,s,i)=>{gO(o,i)},InsertLineBreak:(n,s,i)=>{Ov(aO,o)}})})(t),(o=>{var n;(n=o).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{n.getDoc().execCommand(s);const i=n.dom.getParent(n.selection.getNode(),"ol,ul");if(i){const c=i.parentNode;if(c&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){const d=n.selection.getBookmark();n.dom.split(c,i),n.selection.moveToBookmark(d)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{const i=n.dom.getParent(n.selection.getNode(),"ul,ol");return i&&("insertunorderedlist"===s&&"UL"===i.tagName||"insertorderedlist"===s&&"OL"===i.tagName)}},"state")})(o)})(t),(o=>{(n=>{const s=(i,c)=>{n.formatter.toggle(i,c),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>{s(i)},"ForeColor,HiliteColor":(i,c,d)=>{s(i,{value:d})},BackColor:(i,c,d)=>{s("hilitecolor",{value:d})},FontName:(i,c,d)=>{((u,p)=>{const v=Fk(u,p);u.formatter.toggle("fontname",{value:k5(v)}),u.nodeChanged()})(n,d)},FontSize:(i,c,d)=>{var u;(u=n).formatter.toggle("fontsize",{value:Fk(u,d)}),u.nodeChanged()},LineHeight:(i,c,d)=>{var u;(u=n).formatter.toggle("lineheight",{value:String(d)}),u.nodeChanged()},Lang:(i,c,d)=>{var u;s(i,{value:d.code,customValue:null!==(u=d.customCode)&&void 0!==u?u:null})},RemoveFormat:i=>{n.formatter.remove(i)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(i,c,d)=>{s(uo(d)?d:"p")},mceToggleFormat:(i,c,d)=>{s(d)}})})(o),(n=>{const s=i=>n.formatter.match(i);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>s(i),mceBlockQuote:()=>s("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return nx(i=n,c=>mT(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return nx(i=n,c=>uT(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return nx(i=n,c=>{const d=fe(i.getBody());return $C(c,p=>di(p,"line-height"),mt(yr,d)).getOrThunk(()=>{const p=parseFloat(Nl(c,"line-height")),v=parseFloat(Nl(c,"font-size"));return String(p/v)})}).getOr("");var i})})(o)})(t),(o=>{o.editorCommands.addCommands({mceRemoveNode:(n,s,i)=>{const c=i??o.selection.getNode();if(c!==o.getBody()){const d=o.selection.getBookmark();o.dom.remove(c,!0),o.selection.moveToBookmark(d)}},mcePrint:()=>{o.getWin().print()},mceFocus:(n,s,i)=>{var c;(c=o).removed||(!0===i?tC(c):(u=>{const p=u.selection,v=u.getBody();let w=p.getRng();u.quirks.refreshContentEditable(),ne(u.bookmark)&&!Bp(u)&&Ly(u).each(O=>{u.selection.setRng(O),w=O});const C=(O=u,R=p.getNode(),O.dom.getParent(R,A=>"true"===O.dom.getContentEditable(A)));var O,R;if(C&&u.dom.isChildOf(C,v))return eC(C),B4(u,w),void tC(u);u.inline||(er.browser.isOpera()||eC(v),u.getWin().focus()),(er.browser.isFirefox()||u.inline)&&(eC(v),B4(u,w)),tC(u)})(c))},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})})(t)})(this);const C=d("cache_suffix");C&&(er.cacheSuffix=C.replace(/^[\?\&]+/,"")),this.ui={registry:$k(),styleSheetLoader:void 0,show:yo,hide:yo,setEnabled:yo,isEnabled:Jo},this.mode=(R=>{const A=Za("design"),H=Za({design:{activate:yo,deactivate:yo,editorReadOnly:!1},readonly:{activate:yo,deactivate:yo,editorReadOnly:!0}});return(M=R).serializer?pT(M):M.on("PreInit",()=>{pT(M)}),(M=>{M.on("ShowCaret",P=>{Fh(M)&&P.preventDefault()}),M.on("ObjectSelected",P=>{Fh(M)&&P.preventDefault()})})(R),{isReadOnly:()=>Fh(R),set:M=>((P,j,$,oe)=>{if(oe!==$.get()){if(!Vo(j,oe))throw new Error(`Editor mode '${oe}' is invalid`);P.initialized?Wk(P,$,j,oe):P.on("init",()=>Wk(P,$,j,oe))}})(R,H.get(),A,M),get:()=>A.get(),register:(M,P)=>{H.set(((j,$,oe)=>{if(Ie(A5,$))throw new Error(`Cannot override default mode ${$}`);return{...j,[$]:{...oe,deactivate:()=>{try{oe.deactivate()}catch(ie){console.error(`problem while deactivating editor mode ${$}:`,ie)}}}}})(H.get(),M,P))}};var M})(i),s.dispatch("SetupEditor",{editor:this});const O=yp(i);it(O)&&O.call(i,i)}render(){(o=>{const n=o.id;Ac.setCode(F0(o));const s=()=>{cf.unbind(window,"ready",s),o.render()};if(!Eu.Event.domLoaded)return void cf.bind(window,"ready",s);if(!o.getElement())return;const i=fe(o.getElement()),c=ke(i);var p;o.on("remove",()=>{Hs(i.dom.attributes,u=>Le(i,u.name)),wa(i,c)}),o.ui.styleSheetLoader=Co.forElement(i,{contentCssCors:e1(p=o),referrerPolicy:Yf(p)}),rh(o)?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden");const d=o.getElement().form||cf.getParent(n,"form");d&&(o.formElement=d,U0(o)&&!dn(o.getElement())&&(cf.insertAfter(cf.create("input",{type:"hidden",name:n}),n),o.hasHiddenInput=!0),o.formEventDelegate=u=>{o.dispatch(u.type,u)},cf.bind(d,"submit reset",o.formEventDelegate),o.on("reset",()=>{o.resetContent()}),!Wd(o)||d.submit.nodeType||d.submit.length||d._mceOldSubmit||(d._mceOldSubmit=d.submit,d.submit=()=>(o.editorManager.triggerSave(),o.setDirty(!1),d._mceOldSubmit(d)))),o.windowManager=Z_(o),o.notificationManager=Sg(o),"xml"===o.options.get("encoding")&&o.on("GetContent",u=>{u.save&&(u.content=cf.encode(u.content))}),Sm(o)&&o.on("submit",()=>{o.initialized&&o.save()}),fp(o)&&(o._beforeUnload=()=>{!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),((t,o)=>{const n=Zd.ScriptLoader,s=()=>{!t.removed&&(i=>{const c=_m(i);return!uo(c)||ne(Ah.get(c))})(t)&&(i=>{const c=ag(i);return ne(Z1.get(c))})(t)&&y5(t)};((i,c)=>{const d=_m(i);if(uo(d)&&!gs(d)&&!Vo(Ah.urls,d)){const u=ly(i),p=u?i.documentBaseURI.toAbsolute(u):`themes/${d}/theme${c}.js`;Ah.load(d,p).catch(()=>{Jb(i,"ThemeLoadError",$p("theme",p,d))})}})(t,o),((i,c)=>{const d=ag(i);if("plugin"!==d&&!Vo(Z1.urls,d)){const u=nh(i),p=uo(u)?i.documentBaseURI.toAbsolute(u):`models/${d}/model${c}.js`;Z1.load(d,p).catch(()=>{Jb(i,"ModelLoadError",$p("model",p,d))})}})(t,o),((i,c)=>{const d=F0(c),u=z0(c);if(!Ac.hasCode(d)&&"en"!==d){const p=Rn(u)?u:`${c.editorManager.baseURL}/langs/${d}.js`;i.add(p).catch(()=>{Jb(c,"LanguageLoadError",$p("language",p,d))})}})(n,t),((i,c,d)=>{const u=Rk(c,"default",d),p=(v=c,X.from(qf(v)).filter(Rn).map(w=>({url:w,name:X.none()}))).orThunk(()=>Rk(c,oh(c),""));var v;Ue((v=>{const w=[],C=O=>{w.push(O)};for(let O=0;O<v.length;O++)v[O].each(C);return w})([u,p]),v=>{i.add(v.url).catch(()=>{var w,C,O;w=c,C=v.url,O=v.name.getOrUndefined(),Jb(w,"IconsLoadError",$p("icons",C,O))})})})(n,t,o),((i,c)=>{const d=(u,p)=>{rd.load(u,p).catch(()=>{Jb(i,"PluginLoadError",$p("plugin",p,u))})};Ao(t1(i),(u,p)=>{d(p,u),i.options.set("plugins",vp(i).concat(p))}),Ue(vp(i),u=>{!(u=It.trim(u))||rd.urls[u]||gs(u)||d(u,`plugins/${u}/plugin${c}.js`)})})(t,o),n.loadQueue().then(s,s)})(o,o.suffix)})(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return Bp(this)}translate(o){return Ac.translate(o)}getParam(o,n,s){const i=this.options;return i.isRegistered(o)||(ne(s)?i.register(o,{processor:s,default:n}):i.register(o,{processor:Jo,default:n})),i.isSet(o)||Ft(n)?i.get(o):n}hasPlugin(o,n){return!(!Ie(vp(this),o)||n&&void 0===rd.get(o))}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,n,s){this.editorCommands.addCommand(o,n,s)}addQueryStateHandler(o,n,s){this.editorCommands.addQueryStateHandler(o,n,s)}addQueryValueHandler(o,n,s){this.editorCommands.addQueryValueHandler(o,n,s)}addShortcut(o,n,s,i){this.shortcuts.add(o,n,s,i)}execCommand(o,n,s,i){return this.editorCommands.execCommand(o,n,s,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":(jm.show(o.getContainer()),jm.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):(jm.hide(o.getContainer()),jm.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,n){this.dispatch("ProgressState",{state:o,time:n})}load(o={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const i={...o,load:!0},c=dn(s)?s.value:s.innerHTML,d=n.setContent(c,i);return i.no_events||n.dispatch("LoadContent",{...i,element:s}),d}return""}save(o={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const i={...o,save:!0,element:s};let c=n.getContent(i);const d={...i,content:c};if(d.no_events||n.dispatch("SaveContent",d),"raw"===d.format&&n.dispatch("RawSaveContent",d),c=d.content,dn(s))s.value=c;else{!o.is_removing&&n.inline||(s.innerHTML=c);const u=jm.getParent(n.id,"form");u&&Gk(u.elements,p=>p.name!==n.id||(p.value=c,!1))}return d.element=i.element=s=null,!1!==d.set_dirty&&n.setDirty(!1),c}setContent(o,n){return D2(this,o,n)}getContent(o){return((n,s={})=>{const i=(c=s,d=s.format?s.format:"html",{...c,format:d,get:!0,getInner:!0});var c,d;return _g(n,i).fold(mn,c=>{const d=(p=c,N2(n).editor.getContent(p));var p;return x2(n,d,c)})})(this,o)}insertContent(o,n){n&&(o=qk({content:o},n)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){void 0===o?D2(this,this.startContent,{format:"raw"}):D2(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const n=!this.isNotDirty;this.isNotDirty=!o,o&&o!==n&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||jm.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=jm.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const n=o.iframeElement;n&&(o.contentWindow=n.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const n=o.getWin();n&&(o.contentDocument=n.document)}return o.contentDocument}getBody(){var o,n;const s=this.getDoc();return null!==(n=null!==(o=this.bodyElement)&&void 0!==o?o:s?.body)&&void 0!==n?n:null}convertURL(o,n,s){const i=this,c=i.options.get,d=Tx(i);return it(d)?d.call(i,o,s,!0,n):!c("convert_urls")||"link"===s||ut(s)&&"LINK"===s.nodeName||0===o.indexOf("file:")||0===o.length?o:c("relative_urls")?i.documentBaseURI.toRelative(o):o=i.documentBaseURI.toAbsolute(o,c("remove_script_host"))}addVisual(o){((n,s)=>{var c;c=s,qa(this).editor.addVisual(c)})(0,o)}setEditableRoot(o){var n,s;(n=this)._editableRoot!==(s=o)&&(n._editableRoot=s,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:s}))}hasEditableRoot(){return this._editableRoot}remove(){(o=>{if(!o.removed){const{_selectionOverrides:n,editorUpload:s}=o,i=o.getBody(),c=o.getElement();i&&o.save({is_removing:!0}),o.removed=!0,o.unbindAllNativeEvents(),o.hasHiddenInput&&ne(c?.nextSibling)&&I2.remove(c.nextSibling),o.dispatch("remove"),o.editorManager.remove(o),!o.inline&&i&&I2.setStyle((d=o).id,"display",d.orgDisplay),(d=>{d.dispatch("detach")})(o),I2.remove(o.getContainer()),Yb(n),Yb(s),o.destroy()}var d})(this)}destroy(o){((n,s)=>{const{selection:i,dom:c}=n;n.destroyed||(s||n.removed?(s||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Yb(i),Yb(c)),(d=>{const u=d.formElement;u&&(u._mceOldSubmit&&(u.submit=u._mceOldSubmit,delete u._mceOldSubmit),I2.unbind(u,"submit reset",d.formEventDelegate))})(n),(d=>{const u=d;u.contentAreaContainer=u.formElement=u.container=u.editorContainer=null,u.bodyElement=u.contentDocument=u.contentWindow=null,u.iframeElement=u.targetElm=null;const p=d.selection;p&&(u.selection=p.win=p.dom=p.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const u0=ws.DOM,Zv=It.each;let ux,Kk=!1,Gl=[];const mx=t=>{const o=t.type;Zv(Lg.get(),n=>{switch(o){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Xk=t=>{if(t!==Kk){const o=ws.DOM;t?(o.bind(window,"resize",mx),o.bind(window,"scroll",mx)):(o.unbind(window,"resize",mx),o.unbind(window,"scroll",mx)),Kk=t}},gx=t=>{const o=Gl;return Gl=Yt(Gl,n=>t!==n),Lg.activeEditor===t&&(Lg.activeEditor=Gl.length>0?Gl[0]:null),Lg.focusedEditor===t&&(Lg.focusedEditor=null),o.length!==Gl.length},xT="CSS1Compat"!==document.compatMode,Lg={...ax,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"5.1",releaseDate:"2023-06-19",i18n:Ac,activeEditor:null,focusedEditor:null,setup(){const t=this;let o="",n="",s=ru.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,n=i.suffix;else{const d=document.getElementsByTagName("script");for(let u=0;u<d.length;u++){const p=d[u].src||"";if(""===p)continue;const v=p.substring(p.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(p)){-1!==v.indexOf(".min")&&(n=".min"),o=p.substring(0,p.lastIndexOf("/"));break}}if(!o&&document.currentScript){const u=document.currentScript.src;-1!==u.indexOf(".min")&&(n=".min"),o=u.substring(0,u.lastIndexOf("/"))}}var c;t.baseURL=new ru(s).toAbsolute(o),t.documentBaseURL=s,t.baseURI=new ru(t.baseURL),t.suffix=n,(c=t).on("AddEditor",mt($T,c)),c.on("RemoveEditor",mt(qT,c))},overrideDefaults(t){const o=t.base_url;o&&this._setBaseUrl(o);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const s=t.plugin_base_urls;void 0!==s&&Ao(s,(i,c)=>{Ei.PluginManager.urls[c]=i})},init(t){const o=this;let n;const s=It.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let i=d=>{n=d};const c=()=>{let d=0;const u=[];let p;var v;u0.unbind(window,"ready",c),(v=>{const w=t.onpageload;w&&w.apply(o,[])})(),p=((v,w)=>{const C=[],O=it(w)?R=>To(C,A=>w(A,R)):R=>Ie(C,R);for(let R=0,A=v.length;R<A;R++){const H=v[R];O(H)||C.push(H)}return C})((v=t,er.browser.isIE()||er.browser.isEdge()?(Qb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):xT?(Qb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):uo(v.selector)?u0.select(v.selector):ne(v.target)?[v.target]:[])),It.each(p,v=>{var w;(w=o.get(v.id))&&w.initialized&&!(w.getContainer()||w.getBody()).parentNode&&(gx(w),w.unbindAllNativeEvents(),w.destroy(!0),w.removed=!0)}),p=It.grep(p,v=>!o.get(v.id)),0===p.length?i([]):Zv(p,v=>{t.inline&&v.tagName.toLowerCase()in s?Qb("Could not initialize inline editor on invalid inline target element",v):((w,C,O)=>{const R=new Vv(w,C,o);u.push(R),R.on("init",()=>{++d===p.length&&i(u)}),R.targetElm=R.targetElm||O,R.render()})((w=>{let C=w.id;return C||(C=Nn(w,"name").filter(O=>!u0.get(O)).getOrThunk(u0.uniqueId),w.setAttribute("id",C)),C})(v),t,v)})};return u0.bind(window,"ready",c),new Promise(d=>{n?d(n):i=u=>{d(u)}})},get(t){return 0===arguments.length?Gl.slice(0):uo(t)?or(Gl,o=>o.id===t).getOr(null):Oe(t)&&Gl[t]?Gl[t]:null},add(t){const o=this,n=o.get(t.id);return n===t||(null===n&&Gl.push(t),Xk(!0),o.activeEditor=t,o.dispatch("AddEditor",{editor:t}),ux||(ux=s=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return s.preventDefault(),s.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",ux))),t},createEditor(t,o){return this.add(new Vv(t,o,this))},remove(t){const o=this;let n;if(t){if(!uo(t))return n=t,jn(o.get(n.id))?null:(gx(n)&&o.dispatch("RemoveEditor",{editor:n}),0===Gl.length&&window.removeEventListener("beforeunload",ux),n.remove(),Xk(Gl.length>0),n);Zv(u0.select(t),s=>{n=o.get(s.id),n&&o.remove(n)})}else for(let s=Gl.length-1;s>=0;s--)o.remove(Gl[s])},execCommand(t,o,n){var s;const i=this,c=ut(n)?null!==(s=n.id)&&void 0!==s?s:n.index:n;switch(t){case"mceAddEditor":return i.get(c)||new Vv(c,n.options,i).render(),!0;case"mceRemoveEditor":{const d=i.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}}return!!i.activeEditor&&i.activeEditor.execCommand(t,o,n)},triggerSave:()=>{Zv(Gl,t=>{t.save()})},addI18n:(t,o)=>{Ac.add(t,o)},translate:t=>Ac.translate(t),setActive(t){const o=this.activeEditor;this.activeEditor!==t&&(o&&o.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:o})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new ru(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new ru(this.baseURL)}};Lg.setup();const CT=(()=>{const t=Us();return{FakeClipboardItem:o=>({items:o,types:Sr(o),getType:n=>Nn(o,n).getOrUndefined()}),write:o=>{t.set(o)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Yk=Math.min,m0=Math.max,hx=Math.round,px=(t,o,n)=>{let s=o.x,i=o.y;const c=t.w,d=t.h,u=o.w,p=o.h,v=(n||"").split("");return"b"===v[0]&&(i+=p),"r"===v[1]&&(s+=u),"c"===v[0]&&(i+=hx(p/2)),"c"===v[1]&&(s+=hx(u/2)),"b"===v[3]&&(i-=d),"r"===v[4]&&(s-=c),"c"===v[3]&&(i-=hx(d/2)),"c"===v[4]&&(s-=hx(c/2)),g0(s,i,c,d)},g0=(t,o,n,s)=>({x:t,y:o,w:n,h:s}),_T={inflate:(t,o,n)=>g0(t.x-o,t.y-n,t.w+2*o,t.h+2*n),relativePosition:px,findBestRelativePosition:(t,o,n,s)=>{for(let i=0;i<s.length;i++){const c=px(t,o,s[i]);if(c.x>=n.x&&c.x+c.w<=n.w+n.x&&c.y>=n.y&&c.y+c.h<=n.h+n.y)return s[i]}return null},intersect:(t,o)=>{const n=m0(t.x,o.x),s=m0(t.y,o.y),i=Yk(t.x+t.w,o.x+o.w),c=Yk(t.y+t.h,o.y+o.h);return i-n<0||c-s<0?null:g0(n,s,i-n,c-s)},clamp:(t,o,n)=>{let s=t.x,i=t.y,c=t.x+t.w,d=t.y+t.h;const u=o.x+o.w,p=o.y+o.h,v=m0(0,o.x-s),w=m0(0,o.y-i),C=m0(0,c-u),O=m0(0,d-p);return s+=v,i+=w,n&&(c+=v,d+=w,s-=C,i-=O),c-=C,d-=O,g0(s,i,c-s,d-i)},create:g0,fromClientRect:t=>g0(t.left,t.top,t.width,t.height)},ST=(()=>{const t={},o={};return{load:(n,s)=>{const i=`Script at URL "${s}" failed to load`,c=`Script at URL "${s}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const d=new Promise((u,p)=>{const v=((w,C,O=1e3)=>{let R=!1,A=null;const H=j=>(...$)=>{R||(R=!0,null!==A&&(clearTimeout(A),A=null),j.apply(null,$))},M=H(w),P=H(C);return{start:(...j)=>{R||null!==A||(A=setTimeout(()=>P.apply(null,j),O))},resolve:M,reject:P}})(u,p);o[n]=v.resolve,Zd.ScriptLoader.loadScript(s).then(()=>v.start(c),()=>v.reject(i))});return t[n]=d,d}},add:(n,s)=>{void 0!==o[n]&&(o[n](s),delete o[n]),t[n]=Promise.resolve(s)},unload:n=>{delete t[n]}}})();let mf;try{const t="__storage_test__";mf=window.localStorage,mf.setItem(t,t),mf.removeItem(t)}catch{mf=(()=>{let o={},n=[];const s={getItem:i=>o[i]||null,setItem:(i,c)=>{n.push(i),o[i]=String(c)},key:i=>n[i],removeItem:i=>{n=n.filter(c=>c===i),delete o[i]},clear:()=>{n=[],o={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})()}const Jk={geom:{Rect:_T},util:{Delay:td,Tools:It,VK:vo,URI:ru,EventDispatcher:Zk,Observable:ax,I18n:Ac,LocalStorage:mf,ImageUploader:t=>{const o=$_(),n=sd(t,o);return{upload:(s,i=!0)=>n.upload(s,i?Z3(t):void 0)}}},dom:{EventUtils:Eu,TreeWalker:F,TextSeeker:Tu,DOMUtils:ws,ScriptLoader:Zd,RangeUtils:Dm,Serializer:R2,StyleSheetLoader:Fr,ControlSelection:Qd,BookmarkManager:Jd,Selection:M2,Event:Eu.Event},html:{Styles:Of,Entities:Hi,Node:dc,Schema:ku,DomParser:F1,Writer:hb,Serializer:vg},Env:er,AddOnManager:Ei,Annotator:v4,Formatter:W1,UndoManager:$1,EditorCommands:gT,WindowManager:Z_,NotificationManager:Sg,EditorObservable:Uk,Shortcuts:dx,Editor:Vv,FocusManager:Jx,EditorManager:Lg,DOM:ws.DOM,ScriptLoader:Zd.ScriptLoader,PluginManager:rd,ThemeManager:Ah,ModelManager:Z1,IconManager:H2,Resource:ST,FakeClipboard:CT,trim:It.trim,isArray:It.isArray,is:It.is,toArray:It.toArray,makeMap:It.makeMap,each:It.each,map:It.map,grep:It.grep,inArray:It.inArray,extend:It.extend,walk:It.walk,resolve:It.resolve,explode:It.explode,_addCacheSuffix:It._addCacheSuffix},fx=It.extend(Lg,Jk);(t=>{window.tinymce=t,window.tinyMCE=t})(fx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(fx)}(),function(){"use strict";var Ss=tinymce.util.Tools.resolve("tinymce.PluginManager"),ns=tinymce.util.Tools.resolve("tinymce.Env");const No=eo=>ne=>ne.options.get(eo),as=No("min_height"),Ar=No("max_height"),Ya=No("autoresize_overflow_padding"),Is=No("autoresize_bottom_margin"),uo=(eo,ne)=>{const it=eo.getBody();it&&(it.style.overflowY=ne?"":"hidden",ne||(it.scrollTop=0))},ut=(eo,ne,it,Oe)=>{var $n;const yo=parseInt(null!==($n=eo.getStyle(ne,it,Oe))&&void 0!==$n?$n:"",10);return isNaN(yo)?0:yo},lo=(eo,ne,it,Oe)=>{var $n;const yo=eo.dom,Dr=eo.getDoc();if(!Dr)return;if((eo=>eo.plugins.fullscreen&&eo.plugins.fullscreen.isFullscreen())(eo))return void uo(eo,!0);const lr=Dr.documentElement,ot=Oe?Oe():Ya(eo),mn=null!==($n=as(eo))&&void 0!==$n?$n:eo.getElement().offsetHeight;let D=mn;const mt=ut(yo,lr,"margin-top",!0),Ma=ut(yo,lr,"margin-bottom",!0);let qn=lr.offsetHeight+mt+Ma+ot;qn<0&&(qn=0);const Do=eo.getContainer().offsetHeight-eo.getContentAreaContainer().offsetHeight;qn+Do>mn&&(D=qn+Do);const Jo=Ar(eo);if(Jo&&D>Jo?(D=Jo,uo(eo,!0)):uo(eo,!1),D!==ne.get()){const X=D-ne.get();if(yo.setStyle(eo.getContainer(),"height",D+"px"),ne.set(D),(eo=>{eo.dispatch("ResizeEditor")})(eo),ns.browser.isSafari()&&(ns.os.isMacOS()||ns.os.isiOS())){const sr=eo.getWin();sr.scrollTo(sr.pageXOffset,sr.pageYOffset)}eo.hasFocus()&&(eo=>{if("setcontent"===eo?.type.toLowerCase()){const ne=eo;return!0===ne.selection||!0===ne.paste}return!1})(it)&&eo.selection.scrollIntoView(),(ns.browser.isSafari()||ns.browser.isChromium())&&X<0&&lo(eo,ne,it,Oe)}};Ss.add("autoresize",eo=>{if((eo=>{const ne=eo.options.register;ne("autoresize_overflow_padding",{processor:"number",default:1}),ne("autoresize_bottom_margin",{processor:"number",default:50})})(eo),eo.options.isSet("resize")||eo.options.set("resize",!1),!eo.inline){const ne=(eo=>{let ne=0;return{get:()=>ne,set:$n=>{ne=$n}}})();((eo,ne)=>{eo.addCommand("mceAutoResize",()=>{lo(eo,ne)})})(eo,ne),((eo,ne)=>{let Oe,$n,it=()=>Is(eo);eo.on("init",yo=>{Oe=0;const Dr=Ya(eo),lr=eo.dom;lr.setStyles(eo.getDoc().documentElement,{height:"auto"}),ns.browser.isEdge()||ns.browser.isIE()?lr.setStyles(eo.getBody(),{paddingLeft:Dr,paddingRight:Dr,"min-height":0}):lr.setStyles(eo.getBody(),{paddingLeft:Dr,paddingRight:Dr}),lo(eo,ne,yo,it),Oe+=1}),eo.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",yo=>{if(1===Oe)$n=eo.getContainer().offsetHeight,lo(eo,ne,yo,it),Oe+=1;else if(2===Oe){const Dr=$n<eo.getContainer().offsetHeight;if(Dr){const lr=eo.dom,ot=eo.getDoc();lr.setStyles(ot.documentElement,{"min-height":0}),lr.setStyles(eo.getBody(),{"min-height":"inherit"})}it=Dr?()=>0:it,Oe+=1}else lo(eo,ne,yo,it)})})(eo,ne)}})}(),function(){"use strict";const Ca=Object.getPrototypeOf,Ss=(e,r,a)=>{var l;return!!a(e,r.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===r.name},va=e=>r=>(a=>{const l=typeof a;return null===a?"null":"object"===l&&Array.isArray(a)?"array":"object"===l&&Ss(a,String,(m,h)=>h.isPrototypeOf(m))?"string":l})(r)===e,ns=e=>r=>typeof r===e,Qs=e=>r=>e===r,No=va("string"),ps=va("object"),as=e=>{return r=e,a=Object,ps(r)&&Ss(r,a,(l,m)=>Ca(l)===m);var r,a},Ar=va("array"),Ya=Qs(null),Is=ns("boolean"),_n=Qs(void 0),uo=e=>null==e,ut=e=>!uo(e),pt=ns("function"),lo=ns("number"),jn=(e,r)=>{if(Ar(e)){for(let a=0,l=e.length;a<l;++a)if(!r(e[a]))return!1;return!0}return!1},At=()=>{},Ft=e=>()=>e(),eo=(e,r)=>(...a)=>e(r.apply(null,a)),ne=e=>()=>e,it=e=>e,Oe=(e,r)=>e===r;function $n(e,...r){return(...a)=>{const l=r.concat(a);return e.apply(null,l)}}const yo=e=>r=>!e(r),Dr=e=>()=>{throw new Error(e)},lr=e=>e(),ot=ne(!1),mn=ne(!0);class D{constructor(r,a){this.tag=r,this.value=a}static some(r){return new D(!0,r)}static none(){return D.singletonNone}fold(r,a){return this.tag?a(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?D.some(r(this.value)):D.none()}bind(r){return this.tag?r(this.value):D.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:D.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return ut(r)?D.some(r):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const mt=Array.prototype.slice,Ma=Array.prototype.indexOf,qn=Array.prototype.push,fr=(e,r)=>Ma.call(e,r),Nt=(e,r)=>{const a=fr(e,r);return-1===a?D.none():D.some(a)},Do=(e,r)=>fr(e,r)>-1,Jo=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return!0;return!1},X=(e,r)=>{const a=[];for(let l=0;l<e;l++)a.push(r(l));return a},sr=(e,r)=>{const a=[];for(let l=0;l<e.length;l+=r){const m=mt.call(e,l,l+r);a.push(m)}return a},Xe=(e,r)=>{const a=e.length,l=new Array(a);for(let m=0;m<a;m++)l[m]=r(e[m],m);return l},Tt=(e,r)=>{for(let a=0,l=e.length;a<l;a++)r(e[a],a)},Po=(e,r)=>{const a=[],l=[];for(let m=0,h=e.length;m<h;m++){const b=e[m];(r(b,m)?a:l).push(b)}return{pass:a,fail:l}},Ie=(e,r)=>{const a=[];for(let l=0,m=e.length;l<m;l++){const h=e[l];r(h,l)&&a.push(h)}return a},To=(e,r,a)=>(((l,m)=>{for(let h=l.length-1;h>=0;h--)m(l[h],h)})(e,(l,m)=>{a=r(a,l,m)}),a),Gt=(e,r,a)=>(Tt(e,(l,m)=>{a=r(a,l,m)}),a),Ue=(e,r)=>((a,l,m)=>{for(let h=0,b=a.length;h<b;h++){const y=a[h];if(l(y,h))return D.some(y);if(m(y,h))break}return D.none()})(e,r,ot),Hs=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return D.some(a);return D.none()},en=e=>{const r=[];for(let a=0,l=e.length;a<l;++a){if(!Ar(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);qn.apply(r,e[a])}return r},Yt=(e,r)=>en(Xe(e,r)),ts=(e,r)=>{for(let a=0,l=e.length;a<l;++a)if(!0!==r(e[a],a))return!1;return!0},Jn=e=>{const r=mt.call(e,0);return r.reverse(),r},fs=(e,r)=>Ie(e,a=>!Do(r,a)),or=(e,r)=>{const a={};for(let l=0,m=e.length;l<m;l++){const h=e[l];a[String(h)]=r(h,l)}return a},Ps=e=>[e],Ha=(e,r)=>{const a=mt.call(e,0);return a.sort(r),a},ks=(e,r)=>r>=0&&r<e.length?D.some(e[r]):D.none(),qr=e=>ks(e,0),Cr=e=>ks(e,e.length-1),_a=pt(Array.from)?Array.from:e=>mt.call(e),is=(e,r)=>{for(let a=0;a<e.length;a++){const l=r(e[a],a);if(l.isSome())return l}return D.none()},_r=Object.keys,Zi=Object.hasOwnProperty,Pn=(e,r)=>{const a=_r(e);for(let l=0,m=a.length;l<m;l++){const h=a[l];r(e[h],h)}},Gn=(e,r)=>nr(e,(a,l)=>({k:l,v:r(a,l)})),nr=(e,r)=>{const a={};return Pn(e,(l,m)=>{const h=r(l,m);a[h.k]=h.v}),a},Di=e=>(r,a)=>{e[a]=r},Sr=(e,r,a,l)=>{Pn(e,(m,h)=>{(r(m,h)?a:l)(m,h)})},zs=(e,r)=>{const a={};return Sr(e,r,Di(a),At),a},Ao=(e,r)=>{const a=[];return Pn(e,(l,m)=>{a.push(r(l,m))}),a},Nr=(e,r)=>{const a=_r(e);for(let l=0,m=a.length;l<m;l++){const h=a[l],b=e[h];if(r(b,h,e))return D.some(b)}return D.none()},ls=e=>Ao(e,it),Kt=(e,r)=>Wo(e,r)?D.from(e[r]):D.none(),Wo=(e,r)=>Zi.call(e,r),bs=(e,r)=>Wo(e,r)&&null!=e[r],cs=(e,r,a=Oe)=>e.exists(l=>a(l,r)),Dt=e=>{const r=[],a=l=>{r.push(l)};for(let l=0;l<e.length;l++)e[l].each(a);return r},Nn=(e,r,a)=>e.isSome()&&r.isSome()?D.some(a(e.getOrDie(),r.getOrDie())):D.none(),Vo=(e,r)=>null!=e?D.some(r(e)):D.none(),Vs=(e,r)=>e?D.some(r):D.none(),ar=(e,r,a)=>""===r||e.length>=r.length&&e.substr(a,a+r.length)===r,Bi=(e,r)=>Ja(e,r)?e.substring(r.length):e,Es=(e,r,a=0,l)=>{const m=e.indexOf(r,a);return-1!==m&&(!!_n(l)||m+r.length<=l)},Ja=(e,r)=>ar(e,r,0),si=(e,r)=>ar(e,r,e.length-r.length),Sa=(hu=/^\s+|\s+$/g,e=>e.replace(hu,"")),ai=e=>e.length>0,ta=e=>void 0!==e.style&&pt(e.style.getPropertyValue),ya=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Os=(e,r)=>{const a=(r||document).createElement(e);return ya(a)},Fa=(e,r)=>{const a=(r||document).createTextNode(e);return ya(a)},pe=ya,Be=typeof window<"u"?window:Function("return this;")(),nt=(e,r)=>((a,l)=>{let m=l??Be;for(let h=0;h<a.length&&null!=m;++h)m=m[a[h]];return m})(e.split("."),r),Qe=Object.getPrototypeOf,Wt=e=>e.dom.nodeName.toLowerCase(),jt=e=>r=>r.dom.nodeType===e,Eo=e=>ho(e)&&(e=>{const r=nt("ownerDocument.defaultView",e);return ps(e)&&((a=r,((l,m)=>{const h=nt("HTMLElement",m);if(null==h)throw new Error("HTMLElement not available on this browser");return h})(0,a)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Qe(e).constructor.name));var a})(e.dom),ho=jt(1),Fn=jt(3),Qn=jt(9),Rn=jt(11),fn=e=>r=>ho(r)&&Wt(r)===e,br=(e,r)=>{const a=e.dom;if(1!==a.nodeType)return!1;{const l=a;if(void 0!==l.matches)return l.matches(r);if(void 0!==l.msMatchesSelector)return l.msMatchesSelector(r);if(void 0!==l.webkitMatchesSelector)return l.webkitMatchesSelector(r);if(void 0!==l.mozMatchesSelector)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},Zs=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Zo=(e,r)=>e.dom===r.dom,ue=(e,r)=>{const a=e.dom,l=r.dom;return a!==l&&a.contains(l)},_e=e=>pe(e.dom.ownerDocument),We=e=>Qn(e)?e:_e(e),yt=e=>pe(We(e).dom.documentElement),ft=e=>pe(We(e).dom.defaultView),Lt=e=>D.from(e.dom.parentNode).map(pe),Fo=e=>D.from(e.dom.parentElement).map(pe),So=e=>D.from(e.dom.offsetParent).map(pe),tn=e=>Xe(e.dom.childNodes,pe),Dn=(e,r)=>D.from(e.dom.childNodes[r]).map(pe),rr=e=>Dn(e,0),ln=(e,r)=>({element:e,offset:r}),kr=(e,r)=>{const a=tn(e);return a.length>0&&r<a.length?ln(a[r],0):ln(e,r)},oa=e=>Rn(e)&&ut(e.dom.host),ca=pt(Element.prototype.attachShadow)&&pt(Node.prototype.getRootNode),ii=ne(ca),Gr=ca?e=>pe(e.dom.getRootNode()):We,rs=e=>oa(e)?e:pe(We(e).dom.body),Fs=e=>{const r=Gr(e);return oa(r)?D.some(r):D.none()},Kr=e=>pe(e.dom.host),na=e=>{const r=Fn(e)?e.dom.parentNode:e.dom;if(null==r||null===r.ownerDocument)return!1;const a=r.ownerDocument;return Fs(pe(r)).fold(()=>a.body.contains(r),(l=na,m=Kr,h=>l(m(h))));var l,m},da=()=>nl(pe(document)),nl=e=>{const r=e.dom.body;if(null==r)throw new Error("Body is not available yet");return pe(r)},za=(e,r,a)=>{if(!(No(a)||Is(a)||lo(a)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(r,a+"")},Bo=(e,r,a)=>{za(e.dom,r,a)},rl=(e,r)=>{const a=e.dom;Pn(r,(l,m)=>{za(a,m,l)})},Xr=(e,r)=>{const a=e.dom.getAttribute(r);return null===a?void 0:a},vs=(e,r)=>D.from(Xr(e,r)),ji=(e,r)=>{const a=e.dom;return!(!a||!a.hasAttribute)&&a.hasAttribute(r)},jr=(e,r)=>{e.dom.removeAttribute(r)},er=(e,r,a)=>{if(!No(a))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);ta(e)&&e.style.setProperty(r,a)},ra=(e,r)=>{ta(e)&&e.style.removeProperty(r)},qo=(e,r,a)=>{er(e.dom,r,a)},xi=(e,r)=>{const a=e.dom;Pn(r,(l,m)=>{er(a,m,l)})},It=(e,r)=>{const a=e.dom;Pn(r,(l,m)=>{l.fold(()=>{ra(a,m)},h=>{er(a,m,h)})})},Ts=(e,r)=>{const a=e.dom,l=window.getComputedStyle(a).getPropertyValue(r);return""!==l||na(e)?l:As(a,r)},As=(e,r)=>ta(e)?e.style.getPropertyValue(r):"",Br=(e,r)=>{const l=As(e.dom,r);return D.from(l).filter(m=>m.length>0)},zc=e=>{const r={},a=e.dom;if(ta(a))for(let l=0;l<a.style.length;l++){const m=a.style.item(l);r[m]=a.style[m]}return r},Xl=(e,r,a)=>{const l=Os(e);return qo(l,r,a),Br(l,r).isSome()},Lr=(e,r)=>{ra(e.dom,r),cs(vs(e,"style").map(Sa),"")&&jr(e,"style")},Sl=e=>e.dom.offsetWidth,Er=(e,r)=>{const a=m=>{const h=r(m);if(h<=0||null===h){const b=Ts(m,e);return parseFloat(b)||0}return h},l=(m,h)=>Gt(h,(b,y)=>{const x=Ts(m,y),k=void 0===x?0:parseInt(x,10);return isNaN(k)?b:b+k},0);return{set:(m,h)=>{if(!lo(h)&&!h.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+h);const b=m.dom;ta(b)&&(b.style[e]=h+"px")},get:a,getOuter:a,aggregate:l,max:(m,h,b)=>{const y=l(m,b);return h>y?h-y:0}}},fc=Er("height",e=>{const r=e.dom;return na(e)?r.getBoundingClientRect().height:r.offsetHeight}),Ns=e=>fc.get(e),Ui=e=>fc.getOuter(e),ka=(e,r)=>({left:e,top:r,translate:(a,l)=>ka(e+a,r+l)}),Kn=ka,Yl=(e,r)=>void 0!==e?e:void 0!==r?r:0,Ms=e=>{const r=e.dom.ownerDocument,a=r.body,l=r.defaultView,m=r.documentElement;if(a===e.dom)return Kn(a.offsetLeft,a.offsetTop);const h=Yl(l?.pageYOffset,m.scrollTop),b=Yl(l?.pageXOffset,m.scrollLeft),y=Yl(m.clientTop,a.clientTop),x=Yl(m.clientLeft,a.clientLeft);return kl(e).translate(b-x,h-y)},kl=e=>{const r=e.dom,a=r.ownerDocument.body;return a===r?Kn(a.offsetLeft,a.offsetTop):na(e)?(l=>{const m=l.getBoundingClientRect();return Kn(m.left,m.top)})(r):Kn(0,0)},Fl=Er("width",e=>e.dom.offsetWidth),vr=e=>Fl.get(e),wa=e=>Fl.getOuter(e),Y=e=>{let r,a=!1;return(...l)=>(a||(a=!0,r=e.apply(null,l)),r)},le=()=>Ce(0,0),Ce=(e,r)=>({major:e,minor:r}),Le={nu:Ce,detect:(e,r)=>{const a=String(r).toLowerCase();return 0===e.length?le():((l,m)=>{const h=((y,x)=>{for(let k=0;k<y.length;k++){const T=y[k];if(T.test(x))return T}})(l,m);if(!h)return{major:0,minor:0};const b=y=>Number(m.replace(h,"$"+y));return Ce(b(1),b(2))})(e,a)},unknown:le},ke=(e,r)=>{const a=String(r).toLowerCase();return Ue(e,l=>l.search(a))},lt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ct=e=>r=>Es(r,e),Rt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Es(e,"edge/")&&Es(e,"chrome")&&Es(e,"safari")&&Es(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,lt],search:e=>Es(e,"chrome")&&!Es(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Es(e,"msie")||Es(e,"trident")},{name:"Opera",versionRegexes:[lt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ct("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ct("firefox")},{name:"Safari",versionRegexes:[lt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Es(e,"safari")||Es(e,"mobile/"))&&Es(e,"applewebkit")}],wo=[{name:"Windows",search:ct("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Es(e,"iphone")||Es(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ct("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ct("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ct("linux"),versionRegexes:[]},{name:"Solaris",search:ct("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ct("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ct("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Jt={browsers:ne(Rt),oses:ne(wo)},Sn="Chromium",Xn="Firefox",bn=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isEdge:l("Edge"),isChromium:l(Sn),isIE:l("IE"),isOpera:l("Opera"),isFirefox:l(Xn),isSafari:l("Safari")}},vn=()=>bn({current:void 0,version:Le.unknown()}),ir=bn,fe=(ne("Edge"),ne(Sn),ne("IE"),ne("Opera"),ne(Xn),ne("Safari"),"Windows"),Qa="Android",Vc="Solaris",yr="FreeBSD",hl="ChromeOS",Ld=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isWindows:l(fe),isiOS:l("iOS"),isAndroid:l(Qa),isMacOS:l("macOS"),isLinux:l("Linux"),isSolaris:l(Vc),isFreeBSD:l(yr),isChromeOS:l(hl)}},El=()=>Ld({current:void 0,version:Le.unknown()}),Zc=Ld,Wi=(ne(fe),ne("iOS"),ne(Qa),ne("Linux"),ne("macOS"),ne(Vc),ne(yr),ne(hl),e=>window.matchMedia(e).matches);var hu;let qm=Y(()=>((e,r,a)=>{const l=Jt.browsers(),m=Jt.oses(),h=r.bind(x=>{return k=l,is(x.brands,N=>{const L=N.brand.toLowerCase();return Ue(k,z=>{var U;return L===(null===(U=z.brand)||void 0===U?void 0:U.toLowerCase())}).map(z=>({current:z.name,version:Le.nu(parseInt(N.version,10),0)}))});var k}).orThunk(()=>{return ke(l,k=e).map(T=>{const N=Le.detect(T.versionRegexes,k);return{current:T.name,version:N}});var k}).fold(vn,ir),b=(x=m,k=e,ke(x,k).map(T=>{const N=Le.detect(T.versionRegexes,k);return{current:T.name,version:N}})).fold(El,Zc),y=((x,k,T,N)=>{const L=x.isiOS()&&!0===/ipad/i.test(T),z=x.isiOS()&&!L,U=x.isiOS()||x.isAndroid(),J=U||N("(pointer:coarse)"),Q=L||!z&&U&&N("(min-device-width:768px)"),re=z||U&&!Q,ce=k.isSafari()&&x.isiOS()&&!1===/safari/i.test(T),ee=!re&&!Q&&!ce;return{isiPad:ne(L),isiPhone:ne(z),isTablet:ne(Q),isPhone:ne(re),isTouch:ne(J),isAndroid:x.isAndroid,isiOS:x.isiOS,isWebView:ne(ce),isDesktop:ne(ee)}})(b,h,e,a);var x,k;return{browser:h,os:b,deviceType:y}})(navigator.userAgent,D.from(navigator.userAgentData),Wi));const Ci=()=>qm(),jc=e=>{const r=pe((h=>{if(ii()&&ut(h.target)){const b=pe(h.target);if(ho(b)&&ut(b.dom.shadowRoot)&&h.composed&&h.composedPath){const y=h.composedPath();if(y)return qr(y)}}return D.from(h.target)})(e).getOr(e.target)),a=()=>e.stopPropagation(),l=()=>e.preventDefault(),m=eo(l,a);return{target:r,x:e.clientX,y:e.clientY,stop:a,prevent:l,kill:m,raw:e}},Uc=(e,r,a,l,m)=>{const h=(b=a,y=l,x=>{b(x)&&y(jc(x))});var b,y;return e.dom.addEventListener(r,h,m),{unbind:$n(Jl,e,r,h,m)}},Jl=(e,r,a,l)=>{e.dom.removeEventListener(r,a,l)},ss=(e,r)=>{Lt(e).each(a=>{a.dom.insertBefore(r.dom,e.dom)})},bc=(e,r)=>{var l;(l=e,D.from(l.dom.nextSibling).map(pe)).fold(()=>{Lt(e).each(l=>{_i(l,r)})},l=>{ss(l,r)})},Id=(e,r)=>{rr(e).fold(()=>{_i(e,r)},a=>{e.dom.insertBefore(r.dom,a.dom)})},_i=(e,r)=>{e.dom.appendChild(r.dom)},vc=(e,r)=>{Tt(r,a=>{_i(e,a)})},Ol=e=>{e.dom.textContent="",Tt(tn(e),r=>{Tl(r)})},Tl=e=>{const r=e.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},ua=e=>{const r=void 0!==e?e.dom:document;return Kn(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},ds=(e,r,a)=>{const l=(void 0!==a?a.dom:document).defaultView;l&&l.scrollTo(e,r)},$i=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),Va=e=>{const r=void 0===e?window:e,l=ua(pe(r.document));return(m=>{const h=void 0===m?window:m;return Ci().browser.isFirefox()?D.none():D.from(h.visualViewport)})(r).fold(()=>{const m=r.document.documentElement;return $i(l.left,l.top,m.clientWidth,m.clientHeight)},m=>$i(Math.max(m.pageLeft,l.left),Math.max(m.pageTop,l.top),m.width,m.height))},Hd=()=>pe(document),pu=(e,r)=>e.view(r).fold(ne([]),a=>{const l=e.owner(a),m=pu(e,l);return[a].concat(m)});var md=Object.freeze({__proto__:null,view:e=>{var r;return(e.dom===document?D.none():D.from(null===(r=e.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(pe)},owner:e=>_e(e)});const Ql=e=>{const r=Hd(),a=ua(r);return((m,h)=>{const b=h.owner(m),y=pu(h,b);return D.some(y)})(e,md).fold($n(Ms,e),m=>{const h=kl(e),b=To(m,(y,x)=>{const k=kl(x);return{left:y.left+k.left,top:y.top+k.top}},{left:0,top:0});return Kn(b.left+h.left+a.left,b.top+h.top+a.top)})},us=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),ma=e=>{const r=Ms(e),a=wa(e),l=Ui(e);return us(r.left,r.top,a,l)},Al=e=>{const r=Ql(e),a=wa(e),l=Ui(e);return us(r.left,r.top,a,l)},Ea=(e,r)=>{const a=Math.max(e.x,r.x),l=Math.max(e.y,r.y),m=Math.min(e.right,r.right),h=Math.min(e.bottom,r.bottom);return us(a,l,m-a,h-l)},$s=()=>Va(window);var Li=tinymce.util.Tools.resolve("tinymce.ThemeManager");const gd=e=>{const r=h=>h(e),a=ne(e),l=()=>m,m={tag:!0,inner:e,fold:(h,b)=>b(e),isValue:mn,isError:ot,map:h=>Mn.value(h(e)),mapError:l,bind:r,exists:r,forall:r,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:h=>{h(e)},toOptional:()=>D.some(e)};return m},Wc=e=>{const r=()=>a,a={tag:!1,inner:e,fold:(l,m)=>l(e),isValue:ot,isError:mn,map:r,mapError:l=>Mn.error(l(e)),bind:r,exists:ot,forall:mn,getOr:it,or:it,getOrThunk:lr,orThunk:lr,getOrDie:Dr(String(e)),each:At,toOptional:D.none};return a},Mn={value:gd,error:Wc,fromOption:(e,r)=>e.fold(()=>Wc(r),gd)};var ci,e;(e=ci||(ci={}))[e.Error=0]="Error",e[e.Value=1]="Value";const ec=(e,r,a)=>e.stype===ci.Error?r(e.serror):a(e.svalue),Nl=e=>({stype:ci.Value,svalue:e}),fu=e=>({stype:ci.Error,serror:e}),di=Nl,yc=fu,Gm=ec,ei=(e,r,a,l)=>({tag:"field",key:e,newKey:r,presence:a,prop:l}),qi=(e,r,a)=>{switch(e.tag){case"field":return r(e.key,e.newKey,e.presence,e.prop);case"custom":return a(e.newKey,e.instantiator)}},Ml=e=>(...r)=>{if(0===r.length)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<r.length;l++){const m=r[l];for(const h in m)Wo(m,h)&&(a[h]=e(a[h],m[h]))}return a},Un=Ml((e,r)=>as(e)&&as(r)?Un(e,r):r),bu=Ml((e,r)=>r),V=e=>({tag:"defaultedThunk",process:e}),K=e=>V(ne(e)),G=e=>({tag:"mergeWithThunk",process:e}),se=e=>{const r=(l=>{const m=[],h=[];return Tt(l,b=>{ec(b,y=>h.push(y),y=>m.push(y))}),{values:m,errors:h}})(e);return r.errors.length>0?(a=r.errors,eo(yc,en)(a)):di(r.values);var a},He=e=>ps(e)&&_r(e).length>100?" removed due to size":JSON.stringify(e,null,2),Fe=(e,r)=>yc([{path:e,getErrorInfo:r}]),gt=e=>({extract:(r,a)=>{return(l=e(a)).stype===ci.Error?(l=>Fe(r,ne(l)))(l.serror):l;var l},toString:ne("val")}),Zt=gt(di),Pt=(e,r,a,l)=>l(Kt(e,r).getOrThunk(()=>a(e))),zt=(e,r,a,l,m)=>{const h=y=>m.extract(r.concat([l]),y),b=y=>y.fold(()=>di(D.none()),x=>{return(k=m.extract(r.concat([l]),x)).stype===ci.Value?{stype:ci.Value,svalue:(0,D.some)(k.svalue)}:k;var k});switch(e.tag){case"required":return y=r,T=h,Kt(x=a,k=l).fold(()=>{return L=k,z=x,Fe(y,()=>'Could not find valid *required* value for "'+L+'" in '+He(z));var L,z},T);case"defaultedThunk":return Pt(a,l,e.process,h);case"option":return((y,x,k)=>k(Kt(y,x)))(a,l,b);case"defaultedOptionThunk":return((y,x,k,T)=>T(Kt(y,x).map(N=>!0===N?k(y):N)))(a,l,e.process,b);case"mergeWithThunk":return Pt(a,l,ne({}),y=>{const x=Un(e.process(a),y);return h(x)})}var y,x,k,T},ro=e=>({extract:(r,a)=>e().extract(r,a),toString:()=>e().toString()}),Wn=e=>{const r=xt(e),a=To(e,(l,m)=>qi(m,h=>Un(l,{[h]:!0}),ne(l)),{});return{extract:(l,m)=>{const h=Is(m)?[]:(e=>_r(zs(e,ut)))(m),b=Ie(h,y=>!bs(a,y));return 0===b.length?r.extract(l,m):(x=b,Fe(l,()=>"There are unsupported fields: ["+x.join(", ")+"] specified"));var x},toString:r.toString}},xt=e=>({extract:(r,a)=>((l,m,h)=>{const b={},y=[];for(const x of h)qi(x,(k,T,N,L)=>{const z=zt(N,l,m,k,L);Gm(z,U=>{y.push(...U)},U=>{b[T]=U})},(k,T)=>{b[k]=T(m)});return y.length>0?yc(y):di(b)})(r,a,e),toString:()=>"obj{\n"+Xe(e,a=>qi(a,(l,m,h,b)=>l+" -> "+b.toString(),(l,m)=>"state("+l+")")).join("\n")+"}"}),on=e=>({extract:(r,a)=>{const l=Xe(a,(m,h)=>e.extract(r.concat(["["+h+"]"]),m));return se(l)},toString:()=>"array("+e.toString()+")"}),ur=(e,r)=>{const a=void 0!==r?r:it;return{extract:(l,m)=>{const h=[];for(const b of e){const y=b.extract(l,m);if(y.stype===ci.Value)return{stype:ci.Value,svalue:a(y.svalue)};h.push(y)}return se(h)},toString:()=>"oneOf("+Xe(e,l=>l.toString()).join(", ")+")"}},gn=eo(on,xt),W=ne(Zt),S=(e,r)=>gt(a=>{const l=typeof a;return e(a)?di(a):yc(`Expected type: ${r} but got: ${l}`)}),F=S(lo,"number"),ae=S(No,"string"),Ve=S(Is,"boolean"),ve=S(pt,"function"),ht=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(r=>ht(e[r]));default:return!1}},Mt=gt(e=>ht(e)?di(e):yc("Expected value to be acceptable for sending via postMessage")),mo=(e,r)=>({extract:(a,l)=>Kt(l,e).fold(()=>{return h=e,Fe(a,()=>'Choice schema did not contain choice key: "'+h+'"');var h},m=>{return h=a,b=l,Kt(y=r,x=m).fold(()=>{return T=y,N=x,Fe(h,()=>'The chosen schema: "'+N+'" did not exist in branches: '+He(T));var T,N},k=>k.extract(h.concat(["branch: "+x]),b));var h,b,y,x}),toString:()=>"chooseOn("+e+"). Possible values: "+_r(r)}),Go=e=>gt(r=>e(r).fold(yc,di)),zo=(e,r)=>((e,r)=>({extract:(a,l)=>{const m=_r(l);var b,y;return((b,y)=>b.stype===ci.Value?(b=>{const y=Xe(b,x=>ei(x,x,{tag:"required",process:{}},r));return xt(y).extract(a,l)})(b.svalue):b)((b=a,y=m,on(gt(e)).extract(b,y)))},toString:()=>"setOf("+r.toString()+")"}))(a=>e(a).fold(fu,Nl),r),oo=(e,r,a)=>{return l=(y=r.extract([e],b=a)).stype===ci.Error?{stype:ci.Error,serror:(y=>({input:b,errors:y}))(y.serror)}:y,ec(l,Mn.error,Mn.value);var b,y,l},tr=e=>e.fold(r=>{throw new Error(tt(r))},it),dn=(e,r,a)=>tr(oo(e,r,a)),tt=e=>"Errors: \n"+(r=>{const a=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:ne("... (only showing first ten failures)")}]):r;return Xe(a,l=>"Failed path: ("+l.path.join(" > ")+")\n"+l.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+He(e.input),kn=(e,r)=>mo(e,Gn(r,xt)),Or=(e,r)=>((a,l)=>{const m=Y(l);return{extract:(h,b)=>m().extract(h,b),toString:()=>m().toString()}})(0,r),Yn=ei,wr=(e,r)=>({tag:"custom",newKey:e,instantiator:r}),Hr=e=>Go(r=>Do(e,r)?Mn.value(r):Mn.error(`Unsupported value: "${r}", choose one of "${e.join(", ")}".`)),je=e=>Yn(e,e,{tag:"required",process:{}},W()),Vn=(e,r)=>Yn(e,e,{tag:"required",process:{}},r),xr=e=>Vn(e,F),Oo=e=>Vn(e,ae),Ur=(e,r)=>Yn(e,e,{tag:"required",process:{}},Hr(r)),Ir=e=>Vn(e,ve),Yr=(e,r)=>Yn(e,e,{tag:"required",process:{}},xt(r)),pl=(e,r)=>Yn(e,e,{tag:"required",process:{}},gn(r)),qs=(e,r)=>Yn(e,e,{tag:"required",process:{}},on(r)),Zn=e=>Yn(e,e,{tag:"option",process:{}},W()),ga=(e,r)=>Yn(e,e,{tag:"option",process:{}},r),os=e=>ga(e,F),Pr=e=>ga(e,ae),fl=(e,r)=>ga(e,Hr(r)),ui=e=>ga(e,ve),Pd=(e,r)=>ga(e,on(r)),Jr=(e,r)=>ga(e,xt(r)),De=(e,r)=>Yn(e,e,K(r),W()),Wr=(e,r,a)=>Yn(e,e,K(r),a),Ii=(e,r)=>Wr(e,r,F),Ra=(e,r)=>Wr(e,r,ae),zl=(e,r,a)=>Wr(e,r,Hr(a)),mi=(e,r)=>Wr(e,r,Ve),Gs=(e,r)=>Wr(e,r,ve),wc=(e,r,a)=>Wr(e,r,on(a)),Fd=(e,r,a)=>Wr(e,r,xt(a)),Io=e=>{let r=e;return{get:()=>r,set:a=>{r=a}}},Rl=e=>{if(!Ar(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const r=[],a={};return Tt(e,(l,m)=>{const h=_r(l);if(1!==h.length)throw new Error("one and only one name per case");const b=h[0],y=l[b];if(void 0!==a[b])throw new Error("duplicate key detected:"+b);if("cata"===b)throw new Error("cannot have a case named cata (sorry)");if(!Ar(y))throw new Error("case arguments must be an array");r.push(b),a[b]=(...x)=>{const k=x.length;if(k!==y.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+y.length+" ("+y+"), got "+k);return{fold:(...T)=>{if(T.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+T.length);return T[m].apply(null,x)},match:T=>{const N=_r(T);if(r.length!==N.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+N.join(","));if(!ts(r,L=>Do(N,L)))throw new Error("Not all branches were specified when using match. Specified: "+N.join(", ")+"\nRequired: "+r.join(", "));return T[b].apply(null,x)},log:T=>{console.log(T,{constructors:r,constructor:b,params:x})}}}}),a};Rl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const vu=(e,r)=>({[e]:r}),tc=e=>(r=>{const a={};return Tt(r,l=>{a[l.key]=l.value}),a})(e),$c=e=>pt(e)?e:ot,hd=(e,r,a)=>{let l=e.dom;const m=$c(a);for(;l.parentNode;){l=l.parentNode;const h=pe(l),b=r(h);if(b.isSome())return b;if(m(h))break}return D.none()},Da=(e,r,a)=>{const l=r(e),m=$c(a);return l.orThunk(()=>m(e)?D.none():hd(e,r,m))},sm=(e,r)=>Zo(e.element,r.event.target),qc={can:mn,abort:ot,run:At},Vl=e=>{if(!bs(e,"can")&&!bs(e,"abort")&&!bs(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...qc,...e}},js=ne,sl=js("touchstart"),Dl=js("touchmove"),Ba=js("touchend"),yu=js("touchcancel"),ti=js("mousedown"),xc=js("mousemove"),wu=js("mouseout"),xu=js("mouseup"),Cc=js("mouseover"),_c=js("focusin"),jg=js("focusout"),Gc=js("keydown"),Wh=js("keyup"),am=js("input"),Cu=js("change"),Sc=js("click"),Km=js("transitioncancel"),im=js("transitionend"),kc=js("transitionstart"),vf=js("selectstart"),sa=e=>ne("alloy."+e),Sx={tap:sa("tap")},oc=sa("focus"),yf=sa("blur.post"),$h=sa("paste.post"),_u=sa("receive"),bl=sa("execute"),Xm=sa("focus.item"),lm=Sx.tap,kx=sa("longpress"),ea=sa("sandbox.close"),Ym=sa("typeahead.cancel"),Ug=sa("system.init"),y0=sa("system.touchmove"),wf=sa("system.touchend"),Wg=sa("system.scroll"),Jm=sa("system.resize"),nc=sa("system.attached"),Qm=sa("system.detached"),cm=sa("system.dismissRequested"),$g=sa("system.repositionRequested"),xf=sa("focusmanager.shifted"),zd=sa("slotcontainer.visibility"),ey=sa("system.external.element.scroll"),w0=sa("change.tab"),qh=sa("dismiss.tab"),Gh=sa("highlight"),qg=sa("dehighlight"),Fr=(e,r)=>{Xh(e,e.element,r,{})},Co=(e,r,a)=>{Xh(e,e.element,r,a)},pd=e=>{Fr(e,bl())},Kh=(e,r,a)=>{Xh(e,r,a,{})},Xh=(e,r,a,l)=>{const m={target:r,...l};e.getSystem().triggerEvent(a,r,m)},Cf=(e,r,a,l)=>{e.getSystem().triggerEvent(a,r,l.event)},Mr=e=>tc(e),Yh=(e,r)=>({key:e,value:Vl({abort:r})}),Gg=e=>({key:e,value:Vl({run:(r,a)=>{a.event.prevent()}})}),Ct=(e,r)=>({key:e,value:Vl({run:r})}),_f=(e,r,a)=>({key:e,value:Vl({run:(l,m)=>{r.apply(void 0,[l,m].concat(a))}})}),fd=e=>r=>({key:e,value:Vl({run:(a,l)=>{sm(a,l)&&r(a,l)}})}),Kg=(e,r,a)=>{return m=r.partUids[a],Ct(l=e,(h,b)=>{h.getSystem().getByUid(m).each(y=>{Cf(y,y.element,l,b)})});var l,m},Sf=(e,r)=>Ct(e,(a,l)=>{const m=l.event,h=a.getSystem().getByDom(m.target).getOrThunk(()=>Da(m.target,b=>a.getSystem().getByDom(b).toOptional(),ot).getOr(a));r(a,h,l)}),Su=e=>Ct(e,(r,a)=>{a.cut()}),Jh=e=>Ct(e,(r,a)=>{a.stop()}),dm=(e,r)=>fd(e)(r),ys=fd(nc()),Hi=fd(Qm()),kf=fd(Ug()),Ec=(x0=bl(),e=>Ct(x0,e)),Qh=e=>e.dom.innerHTML,Oc=(e,r)=>{const a=_e(e).dom,l=pe(a.createDocumentFragment()),m=((h,b)=>{const y=(b||document).createElement("div");return y.innerHTML=h,tn(pe(y))})(r,a);vc(l,m),Ol(e),_i(e,l)},Tc=e=>(e=>oa(e)?"#shadow-root":(r=>{const a=Os("div"),l=pe(r.dom.cloneNode(!0));return _i(a,l),Qh(a)})(pe(e.dom.cloneNode(!1))))(e),ty=Mr([((e,r)=>({key:e,value:Vl({can:(a,l)=>{const m=l.event,h=m.originator,b=m.target;return k=b,!(Zo(x=h,a.element)&&!Zo(x,k)&&(console.warn(oc()+" did not get interpreted by the desired target. \nOriginator: "+Tc(h)+"\nTarget: "+Tc(b)+"\nCheck the "+oc()+" event handlers"),1));var x,k}})}))(oc())]);var x0,ki=Object.freeze({__proto__:null,events:ty});let ep=0;const bo=e=>{const r=(new Date).getTime(),a=Math.floor(1e9*Math.random());return ep++,e+"_"+a+ep+String(r)},Ef=ne("alloy-id-"),ku=ne("data-alloy-id"),Of=Ef(),oy=ku(),Tf=(e,r)=>{Object.defineProperty(e.dom,oy,{value:r,writable:!0})},eg=e=>{const r=ho(e)?e.dom[oy]:null;return D.from(r)},Xg=e=>bo(e),tg=it,um=e=>{const r=m=>`The component must be in a context to execute: ${m}`+(e?"\n"+Tc(e().element)+" is not in context.":""),a=m=>()=>{throw new Error(r(m))},l=m=>()=>{console.warn(r(m))};return{debugInfo:ne("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:ot}},tp=um(),Af=e=>Xe(e,r=>si(r,"/*")?r.substring(0,r.length-2):r),Eu=(e,r)=>{const a=e.toString(),l=a.indexOf(")")+1,m=a.indexOf("("),h=a.substring(m+1,l-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:r,parameters:Af(h)}),e},Vd=bo("alloy-premade"),op=e=>(Object.defineProperty(e.element.dom,Vd,{value:e.uid,writable:!0}),vu(Vd,e)),Yg=e=>Kt(e,Vd),Jg=e=>((r,a)=>{const l=a.toString(),m=l.indexOf(")")+1,h=l.indexOf("("),b=l.substring(h+1,m-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Af(b.slice(1))}),r})((r,...a)=>e(r.getApis(),r,...a),e),Rs={init:()=>vl({readState:ne("No State required")})},vl=e=>e,Zl=(e,r)=>{const a={};return Pn(e,(l,m)=>{Pn(l,(h,b)=>{const y=Kt(a,b).getOr([]);a[b]=y.concat([r(m,h)])})}),a},Pi=e=>({classes:_n(e.classes)?[]:e.classes,attributes:_n(e.attributes)?{}:e.attributes,styles:_n(e.styles)?{}:e.styles}),np=e=>e.cHandler,ws=(e,r)=>({name:e,handler:r}),ny=(e,r)=>{const a={};return Tt(e,l=>{a[l.name()]=l.handlers(r)}),a},Kc="alloy.base.behaviour",Nf=xt([Yn("dom","dom",{tag:"required",process:{}},xt([je("tag"),De("styles",{}),De("classes",[]),De("attributes",{}),Zn("value"),Zn("innerHtml")])),je("components"),je("uid"),De("events",{}),De("apis",{}),Yn("eventOrder","eventOrder",(Tu={[bl()]:["disabling",Kc,"toggling","typeaheadevents"],[oc()]:[Kc,"focusing","keying"],[Ug()]:[Kc,"disabling","toggling","representing"],[am()]:[Kc,"representing","streaming","invalidating"],[Qm()]:[Kc,"representing","item-events","tooltipping"],[ti()]:["focusing",Kc,"item-type-events"],[sl()]:["focusing",Kc,"item-type-events"],[Cc()]:["item-type-events","tooltipping"],[_u()]:["receiving","reflecting","tooltipping"]},G(ne(Tu))),W()),Zn("domModification")]),Mf=e=>e.events,Ac=(e,r)=>{const a=Xr(e,r);return void 0===a||""===a?[]:a.split(" ")},Ei=e=>void 0!==e.dom.classList,Qg=e=>Ac(e,"class"),Us=(e,r)=>{Ei(e)?e.dom.classList.add(r):((m,h,b)=>{const y=Ac(m,h).concat([b]);Bo(m,h,y.join(" "))})(e,"class",r)},Ws=(e,r)=>{var a;Ei(e)?e.dom.classList.remove(r):((m,h,b)=>{const y=Ie(Ac(m,h),x=>x!==b);y.length>0?Bo(m,h,y.join(" ")):jr(m,h)})(e,"class",r),0===(Ei(a=e)?a.dom.classList:Qg(a)).length&&jr(a,"class")},Gi=(e,r)=>Ei(e)&&e.dom.classList.contains(r),jl=(e,r)=>{Tt(r,a=>{Us(e,a)})},Oi=(e,r)=>{Tt(r,a=>{Ws(e,a)})},mm=(e,r)=>ts(r,a=>Gi(e,a)),rc=e=>e.dom.value,Xc=(e,r)=>{if(void 0===r)throw new Error("Value.set was undefined");e.dom.value=r},og=(e,r,a)=>{a.fold(()=>_i(e,r),l=>{Zo(l,r)||(ss(l,r),Tl(l))})},rp=(e,r,a)=>{const l=Xe(r,a),m=tn(e);return Tt(m.slice(l.length),Tl),l},Rf=(e,r,a,l)=>{const m=Dn(e,r),h=l(a,m),b=(k=m,Dn(e,r).map(T=>{if(k.exists(N=>!Zo(N,T))){const N=k.map(Wt).getOr("span"),L=Os(N);return ss(T,L),L}return T}));var k;return og(e,h.element,b),h},Df=(e,r)=>{const a=_r(e),l=_r(r);return{toRemove:fs(l,a),toSet:((b,y)=>{const x={},k={};return Sr(b,(T,N)=>!Wo(r,N)||T!==r[N],Di(x),Di(k)),{t:x,f:k}})(e).t}},ng=(e,r)=>{const a=()=>L,l=Io(tp),m=tr(oo("custom.definition",Nf,e)),h=(e=>{const r=(a=>{const l=Kt(a,"behaviours").getOr({});return Yt(_r(l),m=>{const h=l[m];return ut(h)?[h.me]:[]})})(e);return((m,h)=>{const b=Xe(h,x=>Jr(x.name(),[je("config"),De("state",Rs)])),y=oo("component.behaviours",xt(b),m.behaviours).fold(x=>{throw new Error(tt(x)+"\nComplete spec:\n"+JSON.stringify(m,null,2))},it);return{list:h,data:Gn(y,x=>{const k=x.map(T=>({config:T.config,state:T.state.init(T.config)}));return ne(k)})}})(e,r)})(e),b=h.list,y=(z=>z.data)(h),x=((z,U,J)=>{const Q={...(re=z).dom,uid:re.uid,domChildren:Xe(re.components,Ne=>Ne.element)};var re;const ce=z.domModification.fold(()=>Pi({}),Pi);var me,xe;return me=Q,xe=U.length>0?((Ne,Ge,Et,_t)=>{const Ot={...Ge};Tt(Et,Yo=>{Ot[Yo.name()]=Yo.exhibit(Ne,_t)});const so=Zl(Ot,(Yo,zr)=>({name:Yo,modification:zr})),_o=Yo=>To(Yo,(zr,hs)=>({...hs.modification,...zr}),{}),go=To(so.classes,(Yo,zr)=>zr.modification.concat(Yo),[]),Uo=_o(so.attributes),Xo=_o(so.styles);return Pi({classes:go,attributes:Uo,styles:Xo})})(J,{"alloy.base.modification":ce},U,Q):ce,{...me,attributes:{...me.attributes,...xe.attributes},styles:{...me.styles,...xe.styles},classes:me.classes.concat(xe.classes)}})(m,b,y),k=((z,U)=>{const J=U.filter(Q=>{return!(Wt(Q)!==z.tag||(re=z,re.innerHtml.isSome()&&re.domChildren.length>0)||(re=>Wo(re.dom,Vd))(Q));var re}).bind(Q=>((re,ce)=>{try{const ee=((e,r)=>{const{class:a,style:l,...m}=Gt(r.dom.attributes,(U,J)=>(U[J.name]=J.value,U),{}),{toSet:h,toRemove:b}=Df(e.attributes,m),y=zc(r),{toSet:x,toRemove:k}=Df(e.styles,y),T=(z=>Ei(z)?(U=>{const J=U.dom.classList,Q=new Array(J.length);for(let re=0;re<J.length;re++){const ce=J.item(re);null!==ce&&(Q[re]=ce)}return Q})(z):Qg(z))(r),N=fs(T,e.classes),L=fs(e.classes,T);return Tt(b,z=>jr(r,z)),rl(r,h),jl(r,L),Oi(r,N),Tt(k,z=>Lr(r,z)),xi(r,x),e.innerHtml.fold(()=>{var U;rp(U=r,e.domChildren,(Q,re)=>{const ce=Dn(U,re);return og(U,Q,ce),Q})},z=>{Oc(r,z)}),(()=>{const z=r,U=e.value.getOrUndefined();U!==rc(z)&&Xc(z,U??"")})(),r})(re,ce);return D.some(ee)}catch{return D.none()}})(z,Q)).getOrThunk(()=>(Q=>{const re=Os(Q.tag);return rl(re,Q.attributes),jl(re,Q.classes),xi(re,Q.styles),Q.innerHtml.each(ee=>Oc(re,ee)),vc(re,Q.domChildren),Q.value.each(ee=>{Xc(re,ee)}),re})(z));return Tf(J,z.uid),J})(x,r),T=((z,U,J)=>{const Q={"alloy.base.behaviour":Mf(z)};return(re=J,ce=z.eventOrder,ee=U,de=Q,((e,r)=>((a,l)=>{const m=(b=>{const y=[],x=[];return Tt(b,k=>{k.fold(T=>{y.push(T)},T=>{x.push(T)})}),{errors:y,values:x}})(a);return m.errors.length>0?Mn.error(en(m.errors)):(y={},Mn.value(0===(b=m.values).length?y:Un(y,bu.apply(void 0,b))));var b,y})(Ao(e,(a,l)=>(1===a.length?Mn.value(a[0].handler):((e,r,a)=>{const l=r[a];return l?((m,h,b,y)=>{try{const x=Ha(b,(k,T)=>{const N=k[h],L=T[h],z=y.indexOf(N),U=y.indexOf(L);if(-1===z)throw new Error("The ordering for "+m+" does not have an entry for "+N+".\nOrder specified: "+JSON.stringify(y,null,2));if(-1===U)throw new Error("The ordering for "+m+" does not have an entry for "+L+".\nOrder specified: "+JSON.stringify(y,null,2));return z<U?-1:U<z?1:0});return Mn.value(x)}catch(x){return Mn.error([x])}})("Event: "+a,"name",e,l).map(m=>(h=>{const b=(x=h,(...T)=>Gt(x,(N,L)=>{return N&&(z=L,z.can).apply(void 0,T);var z},!0)),y=((x,k)=>(...T)=>Gt(x,(N,L)=>{return N||(z=L,z.abort).apply(void 0,T);var z},!1))(h);var x;return{can:b,abort:y,run:(...x)=>{Tt(h,k=>{k.run.apply(void 0,x)})}}})(Xe(m,h=>h.handler))):Mn.error(["The event ("+a+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Xe(e,b=>b.name),null,2)])})(a,r,l)).map(m=>{const h=(y=>{const x=pt(k=y)?{can:mn,abort:ot,run:k}:k;var k;return(k,T,...N)=>{const L=[k,T].concat(N);x.abort.apply(void 0,L)?T.stop():x.can.apply(void 0,L)&&x.run.apply(void 0,L)}})(m),b=a.length>1?Ie(r[l],y=>Jo(a,x=>x.name===y)).join(" > "):a[0].name;return vu(l,{handler:h,purpose:b})}))))(((xe,Ne,Ge)=>{const Et={...Ge,...ny(Ne,xe)};return Zl(Et,ws)})(re,ee,de),ce)).getOrDie();var re,ce,ee,de})(m,b,y),N=Io(m.components),L={uid:e.uid,getSystem:l.get,config:z=>{const U=y;return(pt(U[z.name()])?U[z.name()]:()=>{throw new Error("Could not find "+z.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:z=>pt(y[z.name()]),spec:e,readState:z=>y[z]().map(U=>U.state.readState()).getOr("not enabled"),getApis:()=>m.apis,connect:z=>{l.set(z)},disconnect:()=>{l.set(um(a))},element:k,syncComponents:()=>{const z=tn(k),U=Yt(z,J=>l.get().getByDom(J).fold(()=>[],Ps));N.set(U)},components:N.get,events:T};return L},Ks=e=>{const r=Fa(e);return _0({element:r})},_0=e=>{const r=dn("external.component",Wn([je("element"),Zn("uid")]),e),a=Io(um()),l=r.uid.getOrThunk(()=>Xg("external"));Tf(r.element,l);const m={uid:l,getSystem:a.get,config:D.none,hasConfigured:ot,connect:h=>{a.set(h)},disconnect:()=>{a.set(um(()=>m))},getApis:()=>({}),element:r.element,spec:e,readState:ne("No state"),syncComponents:At,components:ne([]),events:{}};return op(m)},Ou=Xg,sp=(e,r)=>Yg(e).getOrThunk(()=>{return((a,l)=>{const{events:m,...h}=tg(a),b=((x,k)=>{const T=Kt(x,"components").getOr([]);return k.fold(()=>Xe(T,ja),N=>Xe(T,(L,z)=>sp(L,Dn(N,z))))})(h,l),y={...h,events:{...ki,...m},components:b};return Mn.value(ng(y,l))})((a=e,Wo(a,"uid")?e:{uid:Ou(""),...e}),r).getOrDie();var a}),ja=e=>sp(e,D.none()),sc=op;var Tu,hm=(e,r,a,l,m)=>e(a,l)?D.some(a):pt(m)&&m(a)?D.none():r(a,l,m);const pm=(e,r,a)=>{let l=e.dom;const m=pt(a)?a:ot;for(;l.parentNode;){l=l.parentNode;const h=pe(l);if(r(h))return D.some(h);if(m(h))break}return D.none()},Bf=(e,r,a)=>hm((l,m)=>m(l),pm,e,r,a),Nc=(e,r,a)=>Bf(e,r,a).isSome(),Mc=(e,r,a)=>pm(e,l=>br(l,r),a),fm=(e,r)=>Ue(e.dom.childNodes,m=>{return h=pe(m),br(h,r);var h}).map(pe),Oa=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return Zs(m)?D.none():D.from(m.querySelector(a)).map(pe)})(r,e),Bl=(e,r,a)=>hm((l,m)=>br(l,m),Mc,e,r,a),ac="aria-controls",ry=()=>{const e=bo(ac);return{id:e,link:r=>{Bo(r,ac,e)},unlink:r=>{jr(r,ac)}}},bm=(e,r)=>{return Nc(r,a=>Zo(a,e.element),ot)||(a=e,(m=r,Bf(m,h=>{if(!ho(h))return!1;const b=Xr(h,"id");return void 0!==b&&b.indexOf(ac)>-1}).bind(h=>{const b=Xr(h,"id"),y=Gr(h);return Oa(y,`[${ac}="${b}"]`)})).exists(m=>bm(a,m)));var a,m};var vm;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(vm||(vm={}));const Lf=Io({}),ap=["alloy/data/Fields","alloy/debugging/Debugging"],al=(e,r,a)=>((l,m,h)=>{switch(Kt(Lf.get(),l).orThunk(()=>{const b=_r(Lf.get());return is(b,y=>l.indexOf(y)>-1?D.some(Lf.get()[y]):D.none())}).getOr(vm.NORMAL)){case vm.NORMAL:return h(ym());case vm.LOGGING:{const b=((x,k)=>{const T=[],N=(new Date).getTime();return{logEventCut:(L,z,U)=>{T.push({outcome:"cut",target:z,purpose:U})},logEventStopped:(L,z,U)=>{T.push({outcome:"stopped",target:z,purpose:U})},logNoParent:(L,z,U)=>{T.push({outcome:"no-parent",target:z,purpose:U})},logEventNoHandlers:(L,z)=>{T.push({outcome:"no-handlers-left",target:z})},logEventResponse:(L,z,U)=>{T.push({outcome:"response",purpose:U,target:z})},write:()=>{const L=(new Date).getTime();Do(["mousemove","mouseover","mouseout",Ug()],x)||console.log(x,{event:x,time:L-N,target:k.dom,sequence:Xe(T,z=>Do(["cut","stopped","response"],z.outcome)?"{"+z.purpose+"} "+z.outcome+" at ("+Tc(z.target)+")":z.outcome)})}}})(l,m),y=h(b);return b.write(),y}case vm.STOP:return!0}})(e,r,a),ym=ne({logEventCut:At,logEventStopped:At,logNoParent:At,logEventNoHandlers:At,logEventResponse:At,write:At}),If=ne([je("menu"),je("selectedMenu")]),rg=ne([je("item"),je("selectedItem")]);ne(xt(rg().concat(If())));const S0=ne(xt(rg())),sy=Yr("initSize",[je("numColumns"),je("numRows")]),jd=()=>Yr("markers",[je("backgroundMenu")].concat(If()).concat(rg())),bd=e=>Yr("markers",Xe(e,je)),wm=(e,r,a)=>((()=>{const l=new Error;if(void 0!==l.stack){const m=l.stack.split("\n");Ue(m,h=>h.indexOf("alloy")>0&&!Jo(ap,b=>h.indexOf(b)>-1)).getOr("unknown")}})(),Yn(r,r,a,Go(l=>Mn.value((...m)=>l.apply(void 0,m))))),cr=e=>wm(0,e,K(At)),il=e=>wm(0,e,K(D.none)),Au=e=>wm(0,e,{tag:"required",process:{}}),vd=e=>wm(0,e,{tag:"required",process:{}}),Qr=(e,r)=>wr(e,ne(r)),rt=e=>wr(e,it),xm=ne(sy),gi=(e,r,a,l,m,h,b,y=!1)=>({x:e,y:r,bubble:a,direction:l,placement:m,restriction:h,label:`${b}-${m}`,alwaysFit:y}),ll=Rl([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ip=ll.southeast,Hf=ll.southwest,Pf=ll.northeast,lp=ll.northwest,k0=ll.south,E0=ll.north,O0=ll.east,T0=ll.west,Nu=(e,r,a,l)=>{const m=e+r;return m>l?a:m<a?l:m},Ul=(e,r,a)=>Math.min(Math.max(e,r),a),hi=(e,r)=>or(["left","right","top","bottom"],a=>Kt(r,a).map(l=>((m,h)=>{switch(h){case 1:return m.x;case 0:return m.x+m.width;case 2:return m.y;case 3:return m.y+m.height}})(e,l))),Mu="layout",A0=e=>e.x,N0=(e,r)=>e.x+e.width/2-r.width/2,M0=(e,r)=>e.x+e.width-r.width,Ff=(e,r)=>e.y-r.height,zf=e=>e.y+e.height,Vf=(e,r)=>e.y+e.height/2-r.height/2,Ti=(e,r,a)=>gi(A0(e),zf(e),a.southeast(),ip(),"southeast",hi(e,{left:1,top:3}),Mu),Ai=(e,r,a)=>gi(M0(e,r),zf(e),a.southwest(),Hf(),"southwest",hi(e,{right:0,top:3}),Mu),Xs=(e,r,a)=>gi(A0(e),Ff(e,r),a.northeast(),Pf(),"northeast",hi(e,{left:1,bottom:2}),Mu),Ta=(e,r,a)=>gi(M0(e,r),Ff(e,r),a.northwest(),lp(),"northwest",hi(e,{right:0,bottom:2}),Mu),Wl=(e,r,a)=>gi(N0(e,r),Ff(e,r),a.north(),E0(),"north",hi(e,{bottom:2}),Mu),ha=(e,r,a)=>gi(N0(e,r),zf(e),a.south(),k0(),"south",hi(e,{top:3}),Mu),eh=(e,r,a)=>{return gi((l=e).x+l.width,Vf(e,r),a.east(),O0(),"east",hi(e,{left:0}),Mu);var l},Ua=(e,r,a)=>gi(e.x-r.width,Vf(e,r),a.west(),T0(),"west",hi(e,{right:1}),Mu),R0=()=>[Ti,Ai,Xs,Ta,ha,Wl,eh,Ua],Zf=()=>[Ai,Ti,Ta,Xs,ha,Wl,eh,Ua],jf=()=>[Xs,Ta,Ti,Ai,Wl,ha],D0=()=>[Ta,Xs,Ai,Ti,Wl,ha],Uf=()=>[Ti,Ai,Xs,Ta,ha,Wl],Cm=()=>[Ai,Ti,Ta,Xs,ha,Wl];var po=Object.freeze({__proto__:null,events:e=>Mr([Ct(_u(),(r,a)=>{const l=e.channels,m=_r(l),h=a,b=(y=m,(x=h).universal?y:Ie(y,k=>Do(x.channels,k)));var y,x;Tt(b,y=>{const x=l[y],k=x.schema,T=dn("channel["+y+"] data\nReceiver: "+Tc(r.element),k,h.data);x.onReceive(r,T)})})])}),Ru=[Vn("channels",zo(Mn.value,Wn([Au("onReceive"),De("schema",W())])))];const cp=(e,r,a)=>kf((l,m)=>{a(l,e,r)}),B0=e=>({key:e,value:void 0}),ay=(e,r,a,l,m,h,b)=>{const y=T=>bs(T,a)?T[a]():D.none(),x=Gn(m,(T,N)=>{return L=a,((J,Q,re)=>{const ce=re.toString(),ee=ce.indexOf(")")+1,de=ce.indexOf("("),me=ce.substring(de+1,ee-1).split(/,\s*/);return J.toFunctionAnnotation=()=>({name:Q,parameters:Af(me.slice(0,1).concat(me.slice(3)))}),J})((J,...Q)=>{const re=[J].concat(Q);return J.config({name:ne(L)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+L+". Using API: "+U)},ce=>{const ee=Array.prototype.slice.call(re,1);return z.apply(void 0,[J,ce.config,ce.state].concat(ee))})},U=N,z=T);var L,z,U}),k={...Gn(h,(T,N)=>Eu(T,N)),...x,revoke:$n(B0,a),config:T=>{const N=dn(a+"-config",e,T);return{key:a,value:{config:N,me:k,configAsRaw:Y(()=>dn(a+"-config",e,T)),initialConfig:T,state:b}}},schema:ne(r),exhibit:(T,N)=>Nn(y(T),Kt(l,"exhibit"),(L,z)=>z(N,L.config,L.state)).getOrThunk(()=>Pi({})),name:ne(a),handlers:T=>y(T).map(N=>Kt(l,"events").getOr(()=>({}))(N.config,N.state)).getOr({})};return k},Vt=e=>tc(e),Ex=Wn([je("fields"),je("name"),De("active",{}),De("apis",{}),De("state",Rs),De("extra",{})]),pi=e=>{const r=dn("Creating behaviour: "+e.name,Ex,e);return((a,l,m,h,b,y)=>{const x=Wn(a),k=Jr(l,[(T=a,ga("config",Wn(T)))]);var T;return ay(x,k,l,m,h,b,y)})(r.fields,r.name,r.active,r.apis,r.extra,r.state)},L0=Wn([je("branchKey"),je("branches"),je("name"),De("active",{}),De("apis",{}),De("state",Rs),De("extra",{})]),I0=e=>{const r=dn("Creating behaviour: "+e.name,L0,e);return((a,l,m,h,b,y)=>{const x=a,k=Jr(l,[ga("config",a)]);return ay(x,k,l,m,h,b,y)})(kn(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},yl=ne(void 0),Ki=pi({fields:Ru,name:"receiving",active:po});var Wf=Object.freeze({__proto__:null,exhibit:(e,r)=>Pi({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Ll=e=>e.dom.focus(),dp=e=>e.dom.blur(),th=e=>{const r=Gr(e).dom;return e.dom===r.activeElement},Ud=(e=Hd())=>D.from(e.dom.activeElement).map(pe),Rc=e=>Ud(Gr(e)).filter(r=>e.dom.contains(r.dom)),$f=(e,r)=>{const a=Gr(r),l=Ud(a).bind(h=>{const b=y=>Zo(h,y);return b(r)?D.some(r):((y,x)=>{const k=T=>{for(let N=0;N<T.childNodes.length;N++){const L=pe(T.childNodes[N]);if(x(L))return D.some(L);const z=k(T.childNodes[N]);if(z.isSome())return z}return D.none()};return k(y.dom)})(r,b)}),m=e(r);return l.each(h=>{Ud(a).filter(b=>Zo(b,h)).fold(()=>{Ll(h)},At)}),m},Yc=(e,r,a,l,m)=>{const h=b=>b+"px";return{position:e,left:r.map(h),top:a.map(h),right:l.map(h),bottom:m.map(h)}},oh=(e,r)=>{var a;It(e,(a=r,{...a,position:D.some(a.position)}))},qf=Rl([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Gf=(e,r,a,l,m,h)=>{const b=r.rect,y=b.x-a,x=b.y-l,k=m-(y+b.width),T=h-(x+b.height),N=D.some(y),L=D.some(x),z=D.some(k),U=D.some(T),J=D.none();return r.direction.fold(()=>Yc(e,N,L,J,J),()=>Yc(e,J,L,z,J),()=>Yc(e,N,J,J,U),()=>Yc(e,J,J,z,U),()=>Yc(e,N,L,J,J),()=>Yc(e,N,J,J,U),()=>Yc(e,N,L,J,J),()=>Yc(e,J,L,z,J))},Kf=(e,r)=>e.fold(()=>{const a=r.rect;return Yc("absolute",D.some(a.x),D.some(a.y),D.none(),D.none())},(a,l,m,h)=>Gf("absolute",r,a,l,m,h),(a,l,m,h)=>Gf("fixed",r,a,l,m,h)),Xf=(e,r)=>{const a=$n(Ql,r),l=e.fold(a,a,()=>{const b=ua();return Ql(r).translate(-b.left,-b.top)}),m=wa(r),h=Ui(r);return us(l.left,l.top,m,h)},H0=(e,r)=>r.fold(()=>e.fold($s,$s,us),a=>e.fold(ne(a),ne(a),()=>{const l=P0(e,a.x,a.y);return us(l.left,l.top,a.width,a.height)})),P0=(e,r,a)=>{const l=Kn(r,a);return e.fold(ne(l),ne(l),()=>{const m=ua();return l.translate(-m.left,-m.top)})},Yf=qf.relative,F0=qf.fixed,z0="data-alloy-placement",Jf=e=>vs(e,z0),up=Rl([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),mp=e=>{const r=Io(D.none()),a=()=>r.get().each(e);return{clear:()=>{a(),r.set(D.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{a(),r.set(D.some(l))}}},sg=()=>mp(e=>e.unbind()),Ds=()=>{const e=mp(At);return{...e,on:r=>e.get().each(r)}},cl=mn,oi=(e,r,a)=>Uc(e,r,cl,a,!1),V0=(e,r,a)=>Uc(e,r,cl,a,!0),iy=jc,Z0=["top","bottom","right","left"],gp="data-alloy-transition-timer",ly=(e,r)=>{((a,l)=>{const m=fc.max(a,l,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);qo(a,"max-height",m+"px")})(e,Math.floor(r))},ag=ne((e,r)=>{ly(e,r),xi(e,{"overflow-x":"hidden","overflow-y":"auto"})}),nh=ne((e,r)=>{ly(e,r)}),ig=(e,r,a)=>void 0===e[r]?a:e[r],hp=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],lg=(e,r,a,l=1)=>{const m=e*l,h=r*l,b=x=>Kt(a,x).getOr([]),y=(x,k,T)=>{const N=fs(hp,T);return{offset:Kn(x,k),classesOn:Yt(T,b),classesOff:Yt(N,b)}};return{southeast:()=>y(-e,r,["top","alignLeft"]),southwest:()=>y(e,r,["top","alignRight"]),south:()=>y(-e/2,r,["top","alignCentre"]),northeast:()=>y(-e,-r,["bottom","alignLeft"]),northwest:()=>y(e,-r,["bottom","alignRight"]),north:()=>y(-e/2,-r,["bottom","alignCentre"]),east:()=>y(e,-r/2,["valignCentre","left"]),west:()=>y(-e,-r/2,["valignCentre","right"]),insetNortheast:()=>y(m,h,["top","alignLeft","inset"]),insetNorthwest:()=>y(-m,h,["top","alignRight","inset"]),insetNorth:()=>y(-m/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>y(m,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-m,-h,["bottom","alignRight","inset"]),insetSouth:()=>y(-m/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>y(-m,-h/2,["valignCentre","right","inset"]),insetWest:()=>y(m,-h/2,["valignCentre","left","inset"])}},pp=()=>lg(0,0,{}),cg=it,rh=(e,r)=>a=>"rtl"===U0(a)?r:e,U0=e=>"rtl"===Ts(e,"direction")?"rtl":"ltr";var Wd;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Wd||(Wd={}));const Sm="data-alloy-vertical-dir",fp=e=>Nc(e,r=>ho(r)&&Xr(r,"data-alloy-vertical-dir")===Wd.BottomToTop),km=()=>Jr("layouts",[je("onLtr"),je("onRtl"),Zn("onBottomLtr"),Zn("onBottomRtl")]),bp=(e,r,a,l,m,h,b)=>{const y=b.map(fp).getOr(!1),x=r.layouts.map(L=>L.onLtr(e)),k=r.layouts.map(L=>L.onRtl(e)),T=y?r.layouts.bind(L=>L.onBottomLtr.map(z=>z(e))).or(x).getOr(m):x.getOr(a),N=y?r.layouts.bind(L=>L.onBottomRtl.map(z=>z(e))).or(k).getOr(h):k.getOr(l);return rh(T,N)(e)};var Qf=[je("hotspot"),Zn("bubble"),De("overrides",{}),km(),Qr("placement",(e,r,a)=>{const m=Xf(a,r.hotspot.element),h=bp(e.element,r,Uf(),Cm(),jf(),D0(),D.some(r.hotspot.element));return D.some(cg({anchorBox:m,bubble:r.bubble.getOr(pp()),overrides:r.overrides,layouts:h}))})],cy=[je("x"),je("y"),De("height",0),De("width",0),De("bubble",pp()),De("overrides",{}),km(),Qr("placement",(e,r,a)=>{const l=P0(a,r.x,r.y),m=us(l.left,l.top,r.width,r.height),h=bp(e.element,r,R0(),Zf(),R0(),Zf(),D.none());return D.some(cg({anchorBox:m,bubble:r.bubble,overrides:r.overrides,layouts:h}))})];const e1=Rl([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),vp=e=>e.fold(it,(r,a,l)=>r.translate(-a,-l)),t1=e=>e.fold(it,it),W0=e=>Gt(e,(r,a)=>r.translate(a.left,a.top),Kn(0,0)),$0=e=>{const r=Xe(e,t1);return W0(r)},o1=e1.screen,dy=e1.absolute,dg=(e,r,a)=>{const l=_e(e.element),m=ua(l),h=((b,y,x)=>{const k=ft(x.root).dom;return D.from(k.frameElement).map(pe).filter(T=>{const N=_e(T),L=_e(b.element);return Zo(N,L)}).map(Ms)})(e,0,a).getOr(m);return dy(h,m.left,m.top)},yp=(e,r,a,l)=>{const m=o1(Kn(e,r));return D.some({point:m,width:a,height:l})},n1=(e,r,a,l,m)=>e.map(h=>{const b=[r,h.point],y=l.fold(()=>$0(b),()=>$0(b),()=>(ee=>{const de=Xe(ee,vp);return W0(de)})(b)),N={x:y.left,y:y.top,width:h.width,height:h.height},L=a.showAbove?jf():Uf(),z=a.showAbove?D0():Cm(),U=bp(m,a,L,z,L,z,D.none());return cg({anchorBox:N,bubble:a.bubble.getOr(pp()),overrides:a.overrides,layouts:U})});var Tx=[je("node"),je("root"),Zn("bubble"),km(),De("overrides",{}),De("showAbove",!1),Qr("placement",(e,r,a)=>{const l=dg(e,0,r);return r.node.filter(na).bind(m=>{const h=m.dom.getBoundingClientRect(),b=yp(h.left,h.top,h.width,h.height),y=r.node.getOr(e.element);return n1(b,l,r,a,y)})})];const sh=(e,r,a,l)=>({start:e,soffset:r,finish:a,foffset:l}),uy=(Rl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e=>e.fold(it,it,it)),ug=Rl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Du={domRange:ug.domRange,relative:ug.relative,exact:ug.exact,exactFromRange:e=>ug.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const r=e.match({domRange:l=>pe(l.startContainer),relative:(l,m)=>uy(l),exact:(l,m,h,b)=>l});return ft(r)},range:sh},q0=(e,r,a)=>{const l=e.document.createRange();var m,h;return m=l,r.fold(h=>{m.setStartBefore(h.dom)},(h,b)=>{m.setStart(h.dom,b)},h=>{m.setStartAfter(h.dom)}),h=l,a.fold(y=>{h.setEndBefore(y.dom)},(y,x)=>{h.setEnd(y.dom,x)},y=>{h.setEndAfter(y.dom)}),l},G0=(e,r,a,l,m)=>{const h=e.document.createRange();return h.setStart(r.dom,a),h.setEnd(l.dom,m),h},Bu=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),ih=Rl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),my=(e,r,a)=>r(pe(a.startContainer),a.startOffset,pe(a.endContainer),a.endOffset),r1=(e,r)=>{return(a=e,l=r,((h,b)=>{const y=b.ltr();return y.collapsed?b.rtl().filter(x=>!1===x.collapsed).map(x=>ih.rtl(pe(x.endContainer),x.endOffset,pe(x.startContainer),x.startOffset)).getOrThunk(()=>my(0,ih.ltr,y)):my(0,ih.ltr,y)})(0,(h=a,l.match({domRange:y=>({ltr:ne(y),rtl:D.none}),relative:(y,x)=>({ltr:Y(()=>q0(h,y,x)),rtl:Y(()=>D.some(q0(h,x,y)))}),exact:(y,x,k,T)=>({ltr:Y(()=>G0(h,y,x,k,T)),rtl:Y(()=>D.some(G0(h,k,T,y,x)))})})))).match({ltr:(a,l,m,h)=>{const b=e.document.createRange();return b.setStart(a.dom,l),b.setEnd(m.dom,h),b},rtl:(a,l,m,h)=>{const b=e.document.createRange();return b.setStart(m.dom,h),b.setEnd(a.dom,l),b}});var a,l,h},K0=(e,r,a)=>Ie(((l,m)=>{const h=pt(m)?m:ot;let b=l.dom;const y=[];for(;null!=b.parentNode;){const x=b.parentNode,k=pe(x);if(y.push(k),!0===h(k))break;b=x}return y})(e,a),r),Xi=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return Zs(m)?[]:Xe(m.querySelectorAll(a),pe)})(r,e),gy=e=>{if(e.rangeCount>0){const r=e.getRangeAt(0),a=e.getRangeAt(e.rangeCount-1);return D.some(sh(pe(r.startContainer),r.startOffset,pe(a.endContainer),a.endOffset))}return D.none()},X0=e=>{if(null===e.anchorNode||null===e.focusNode)return gy(e);{const r=pe(e.anchorNode),a=pe(e.focusNode);return((l,m,h,b)=>{const y=((k,T,N,L)=>{const z=_e(k).dom.createRange();return z.setStart(k.dom,T),z.setEnd(N.dom,L),z})(l,m,h,b),x=Zo(l,h)&&m===b;return y.collapsed&&!x})(r,e.anchorOffset,a,e.focusOffset)?D.some(sh(r,e.anchorOffset,a,e.focusOffset)):gy(e)}},Y0=(e,r)=>(a=>{const l=a.getClientRects(),m=l.length>0?l[0]:a.getBoundingClientRect();return m.width>0||m.height>0?D.some(m).map(Bu):D.none()})(r1(e,r)),hy=((e,r)=>{const a=l=>e(l)?D.from(l.dom.nodeValue):D.none();return{get:l=>{if(!e(l))throw new Error("Can only get text value of a text node");return a(l).getOr("")},getOption:a,set:(l,m)=>{if(!e(l))throw new Error("Can only set raw text value of a text node");l.dom.nodeValue=m}}})(Fn),wp=(e,r)=>({element:e,offset:r}),J0=(e,r)=>Fn(e)?wp(e,r):((a,l)=>{const m=tn(a);if(0===m.length)return wp(a,l);if(l<m.length)return wp(m[l],0);{const h=m[m.length-1],b=Fn(h)?(y=h,hy.get(y)).length:tn(h).length;return wp(h,b)}var y})(e,r),s1=e=>void 0!==e.foffset,py=(e,r)=>r.getSelection.getOrThunk(()=>()=>{return(l=e,D.from(l.getSelection())).filter(l=>l.rangeCount>0).bind(X0);var l})().map(a=>{if(s1(a)){const l=J0(a.start,a.soffset),m=J0(a.finish,a.foffset);return Du.range(l.element,l.offset,m.element,m.offset)}return a});var Ax=[Zn("getSelection"),je("root"),Zn("bubble"),km(),De("overrides",{}),De("showAbove",!1),Qr("placement",(e,r,a)=>{const l=ft(r.root).dom,m=dg(e,0,r),h=py(l,r).bind(y=>{if(s1(y))return(k=l,T=Du.exactFromRange(y),(N=>{const L=N.getBoundingClientRect();return L.width>0||L.height>0?D.some(L).map(Bu):D.none()})(r1(k,T))).orThunk(()=>{const k=Fa("\ufeff");ss(y.start,k);const T=Y0(l,Du.exact(k,0,k,1));return Tl(k),T}).bind(k=>yp(k.left,k.top,k.width,k.height));var k,T;{const x=Gn(y,T=>T.dom.getBoundingClientRect()),k={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return yp(k.left,k.top,k.right-k.left,k.bottom-k.top)}}),b=py(l,r).bind(y=>s1(y)?ho(y.start)?D.some(y.start):Fo(y.start):D.some(y.firstCell)).getOr(e.element);return n1(h,m,r,a,b)})];const mg="link-layout",a1=e=>e.x+e.width,lh=(e,r)=>e.x-r.width,Q0=(e,r)=>e.y-r.height+e.height,fy=e=>e.y,eb=(e,r,a)=>gi(a1(e),fy(e),a.southeast(),ip(),"southeast",hi(e,{left:0,top:2}),mg),tb=(e,r,a)=>gi(lh(e,r),fy(e),a.southwest(),Hf(),"southwest",hi(e,{right:1,top:2}),mg),Em=(e,r,a)=>gi(a1(e),Q0(e,r),a.northeast(),Pf(),"northeast",hi(e,{left:0,bottom:3}),mg),xp=(e,r,a)=>gi(lh(e,r),Q0(e,r),a.northwest(),lp(),"northwest",hi(e,{right:1,bottom:3}),mg),ch=()=>[eb,tb,Em,xp],Om=()=>[tb,eb,xp,Em];var by=[je("item"),km(),De("overrides",{}),Qr("placement",(e,r,a)=>{const l=Xf(a,r.item.element),m=bp(e.element,r,ch(),Om(),ch(),Om(),D.none());return D.some(cg({anchorBox:l,bubble:pp(),overrides:r.overrides,layouts:m}))})],Nx=kn("type",{selection:Ax,node:Tx,hotspot:Qf,submenu:by,makeshift:cy});const $d=[qs("classes",ae),zl("mode","all",["all","layout","placement"])],dh=[De("useFixed",ot),Zn("getBounds")],Mx=[Vn("anchor",Nx),Jr("transition",$d)],Cp=(e,r,a,l,m,h)=>{const b=dn("placement.info",xt(Mx),m),y=b.anchor,x=l.element,k=a.get(l.uid);$f(()=>{qo(x,"position","fixed");const T=Br(x,"visibility");qo(x,"visibility","hidden");const N=r.useFixed()?(()=>{const L=document.documentElement;return F0(0,0,L.clientWidth,L.clientHeight)})():(L=>{const z=Ms(L.element),U=L.element.dom.getBoundingClientRect();return Yf(z.left,z.top,U.width,U.height)})(e);y.placement(e,y,N).each(L=>{const z=h.orThunk(()=>r.getBounds.map(lr)),U=((me,xe,Ne,Ge,Et,_t,Ot,so)=>{const _o=ig(Ot,"maxHeightFunction",ag()),go=ig(Ot,"maxWidthFunction",At),Xo=me.origin;return((e,r,a,l)=>{const m=((h,b,y,x)=>{Lr(b,"max-height"),Lr(b,"max-width");const k={width:wa(T=b),height:Ui(T)};var T;return((N,L,z,U,J,Q)=>{const re=U.width,ce=U.height,ee=(de,me,xe,Ne,Ge)=>{const _t=((e,r,a,l)=>{const m=e.bubble,h=m.offset,b=((de,me,xe)=>{const Ne=(so,_o)=>me[so].map(go=>{const Uo="top"===so||"bottom"===so,Xo=Uo?xe.top:xe.left,Yo=("left"===so||"top"===so?Math.max:Math.min)(go,_o)+Xo;return Uo?Ul(Yo,de.y,de.bottom):Ul(Yo,de.x,de.right)}).getOr(_o),Ge=Ne("left",de.x),Et=Ne("top",de.y),_t=Ne("right",de.right),Ot=Ne("bottom",de.bottom);return us(Ge,Et,_t-Ge,Ot-Et)})(l,e.restriction,h),x=e.y+h.top,k=us(e.x+h.left,x,r,a),{originInBounds:T,sizeInBounds:N,visibleW:L,visibleH:z}=((de,me)=>{const{x:xe,y:Ne,right:Ge,bottom:Et}=me,{x:_t,y:Ot,right:so,bottom:_o,width:go,height:Uo}=de;return{originInBounds:_t>=xe&&_t<=Ge&&Ot>=Ne&&Ot<=Et,sizeInBounds:so<=Ge&&so>=xe&&_o<=Et&&_o>=Ne,visibleW:Math.min(go,_t>=xe?Ge-_t:so-xe),visibleH:Math.min(Uo,Ot>=Ne?Et-Ot:_o-Ne)}})(k,b),U=T&&N,J=U?k:((de,me)=>{const{x:xe,y:Ne,right:Ge,bottom:Et}=me,{x:_t,y:Ot,width:so,height:_o}=de,go=Math.max(xe,Ge-so),Uo=Math.max(Ne,Et-_o),Xo=Ul(_t,xe,go),Yo=Ul(Ot,Ne,Uo),zr=Math.min(Xo+so,Ge)-Xo,hs=Math.min(Yo+_o,Et)-Yo;return us(Xo,Yo,zr,hs)})(k,b),Q=J.width>0&&J.height>0,{maxWidth:re,maxHeight:ce}=((de,me,xe)=>{const Ne=ne(me.bottom-xe.y),Ge=ne(xe.bottom-me.y),Et=de.fold(go=Ge,go,Xo=Ne,Xo,go,Xo,Uo=Ge,Uo),_t=ne(me.right-xe.x),Ot=ne(xe.right-me.x);var go,Uo,Xo;return{maxWidth:((_o,go,Uo,Xo)=>_o.fold(go,Xo,go,Xo,Uo,Uo,go,Xo))(de,Ot,Ot,_t),maxHeight:Et}})(e.direction,J,l),ee={rect:J,maxHeight:ce,maxWidth:re,direction:e.direction,placement:e.placement,classes:{on:m.classesOn,off:m.classesOff},layout:e.label,testY:x};return U||e.alwaysFit?up.fit(ee):up.nofit(ee,L,z,Q)})(de(z,U,J,N,Q),re,ce,Q);return _t.fold(ne(_t),(Ot,so,_o,go)=>(Ge===go?_o>Ne||so>xe:!Ge&&go)?_t:up.nofit(me,xe,Ne,Ge))};return Gt(L,(de,me)=>{const xe=$n(ee,me);return de.fold(ne(de),xe)},up.nofit({rect:z,maxHeight:U.height,maxWidth:U.width,direction:ip(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:z.y},-1,-1,!1)).fold(it,it)})(b,x.preference,h,k,y,x.bounds)})(e,r,a,l);return((h,b,y)=>{const x=Kf(y.origin,b);y.transition.each(k=>{((e,r,a,l,m,h)=>{const b=(y=l,x=m,h.exists(T=>{const N=y.mode;return"all"===N||T[N]!==x[N]}));var y,x,T,N;if(b||((y,x)=>mm(y,x.classes))(e,l)){qo(e,"position",a.position);const y=Xf(r,e),x=Kf(r,{...m,rect:y}),k=or(Z0,T=>x[T]);((T,N)=>{const L=z=>parseFloat(z).toFixed(3);return Nr(N,(z,U)=>!((J,Q,re=Oe)=>Nn(J,Q,re).getOr(J.isNone()&&Q.isNone()))(T[U].map(L),z.map(L))).isSome()})(a,k)&&(It(e,k),b&&(jl(T=e,(N=l).classes),vs(T,gp).each(L=>{clearTimeout(parseInt(L,10)),jr(T,gp)}),((L,z)=>{const U=sg(),J=sg();let Q;const re=me=>{var xe;const Ne=null!==(xe=me.raw.pseudoElement)&&void 0!==xe?xe:"";return Zo(me.target,L)&&!ai(Ne)&&Do(Z0,me.raw.propertyName)},ce=me=>{if(uo(me)||re(me)){U.clear(),J.clear();const xe=me?.raw.type;(uo(xe)||xe===im())&&(clearTimeout(Q),jr(L,gp),Oi(L,z.classes))}},ee=oi(L,kc(),me=>{re(me)&&(ee.unbind(),U.set(oi(L,im(),ce)),J.set(oi(L,Km(),ce)))}),de=(me=>{const xe=_t=>{const Ot=Ts(me,_t).split(/\s*,\s*/);return Ie(Ot,ai)},Ne=_t=>{if(No(_t)&&/^[\d.]+/.test(_t)){const Ot=parseFloat(_t);return si(_t,"ms")?Ot:1e3*Ot}return 0},Ge=xe("transition-delay"),Et=xe("transition-duration");return Gt(Et,(_t,Ot,so)=>{const _o=Ne(Ge[so])+Ne(Ot);return Math.max(_t,_o)},0)})(L);requestAnimationFrame(()=>{Q=setTimeout(ce,de+17),Bo(L,gp,Q)})})(T,N)),Sl(e))}else Oi(e,l.classes)})(h,y.origin,x,k,b,y.lastPlacement)}),oh(h,x)})(r,m,l),Bo(r,z0,m.placement),((h,b)=>{const y=b.classes;Oi(h,y.off),jl(h,y.on)})(r,m),(0,l.maxHeightFunction)(r,m.maxHeight),((h,b,y)=>{(0,y.maxWidthFunction)(h,b.maxWidth)})(r,m,l),{layout:m.layout,placement:m.placement}})(me.anchorBox,xe,Ne,{bounds:H0(Xo,_t),origin:Xo,preference:Ge,maxHeightFunction:_o,maxWidthFunction:go,lastPlacement:Et,transition:so})})({anchorBox:(Q=L).anchorBox,origin:N},l.element,Q.bubble,Q.layouts,k,z,Q.overrides,b.transition);var Q;a.set(l.uid,U)}),T.fold(()=>{Lr(x,"visibility")},L=>{qo(x,"visibility",L)}),Br(x,"left").isNone()&&Br(x,"top").isNone()&&Br(x,"right").isNone()&&Br(x,"bottom").isNone()&&cs(Br(x,"position"),"fixed")&&Lr(x,"position")},x)};var _p=Object.freeze({__proto__:null,position:(e,r,a,l,m)=>{const h=D.none();Cp(e,r,a,l,m,h)},positionWithinBounds:Cp,getMode:(e,r,a)=>r.useFixed()?"fixed":"absolute",reset:(e,r,a,l)=>{const m=l.element;Tt(["position","left","right","top","bottom"],h=>Lr(m,h)),jr(m,z0),a.clear(l.uid)}});const Yi=pi({fields:dh,name:"positioning",active:Wf,apis:_p,state:Object.freeze({__proto__:null,init:()=>{let e={};return vl({readState:()=>e,clear:r=>{ut(r)?delete e[r]:e={}},set:(r,a)=>{e[r]=a},get:r=>Kt(e,r)})}})}),uh=e=>e.getSystem().isConnected(),qd=e=>{Fr(e,Qm());const r=e.components();Tt(r,qd)},Gd=e=>{const r=e.components();Tt(r,Gd),Fr(e,nc())},ob=(e,r)=>{e.getSystem().addToWorld(r),na(e.element)&&Gd(r)},mh=e=>{qd(e),e.getSystem().removeFromWorld(e)},vy=(e,r)=>{_i(e.element,r.element)},Lu=(e,r)=>{i1(e,r,_i)},i1=(e,r,a)=>{e.getSystem().addToWorld(r),a(e.element,r.element),na(e.element)&&Gd(r),e.syncComponents()},Sp=e=>{qd(e),Tl(e.element),e.getSystem().removeFromWorld(e)},ic=e=>{const r=Lt(e.element).bind(a=>e.getSystem().getByDom(a).toOptional());Sp(e),r.each(a=>{a.syncComponents()})},nb=e=>{const r=e.components();Tt(r,Sp),Ol(e.element),e.syncComponents()},kp=(e,r)=>{Tm(e,r,_i)},Kd=(e,r)=>{Tm(e,r,bc)},Tm=(e,r,a)=>{a(e,r.element);const l=tn(r.element);Tt(l,m=>{r.getByDom(m).each(Gd)})},Iu=e=>{const r=tn(e.element);Tt(r,a=>{e.getByDom(a).each(qd)}),Tl(e.element)},Am=(e,r,a,l)=>{a.get().each(b=>{nb(e)});const m=r.getAttachPoint(e);Lu(m,e);const h=e.getSystem().build(l);return Lu(e,h),a.set(h),h},Hu=(e,r,a,l)=>{const m=Am(e,r,a,l);return r.onOpen(e,m),m},yd=(e,r,a)=>{a.get().each(l=>{nb(e),ic(e),r.onClose(e,l),a.clear()})},l1=(e,r,a)=>a.isOpen(),c1=(e,r,a)=>{const l=r.getAttachPoint(e);var m,b;qo(e.element,"position",Yi.getMode(l)),b=r.cloakVisibilityAttr,Br((m=e).element,"visibility").fold(()=>{jr(m.element,b)},x=>{Bo(m.element,b,x)}),qo(m.element,"visibility","hidden")},yy=(e,r,a)=>{var l;l=e.element,Jo(["top","left","right","bottom"],m=>Br(l,m).isSome())||Lr(e.element,"position"),((l,m,h)=>{vs(l.element,h).fold(()=>Lr(l.element,m),b=>qo(l.element,m,b))})(e,"visibility",r.cloakVisibilityAttr)};var wy=Object.freeze({__proto__:null,cloak:c1,decloak:yy,open:Hu,openWhileCloaked:(e,r,a,l,m)=>{c1(e,r),Hu(e,r,a,l),m(),yy(e,r)},close:yd,isOpen:l1,isPartOf:(e,r,a,l)=>l1(0,0,a)&&a.get().exists(m=>r.isPartOf(e,m,l)),getState:(e,r,a)=>a.get(),setContent:(e,r,a,l)=>a.get().map(()=>Am(e,r,a,l))}),Xd=Object.freeze({__proto__:null,events:(e,r)=>Mr([Ct(ea(),(a,l)=>{yd(a,e,r)})])}),Pu=[cr("onOpen"),cr("onClose"),je("isPartOf"),je("getAttachPoint"),De("cloakVisibilityAttr","data-precloak-visibility")],Ep=Object.freeze({__proto__:null,init:()=>{const e=Ds(),r=ne("not-implemented");return vl({readState:r,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const mr=pi({fields:Pu,name:"sandboxing",active:Xd,apis:wy,state:Ep}),ni=ne("dismiss.popups"),$l=ne("reposition.popups"),Fu=ne("mouse.released"),d1=Wn([De("isExtraPart",ot),Jr("fireEventInstead",[De("event",cm())])]),La=e=>{const r=dn("Dismissal",d1,e);return{[ni()]:{schema:Wn([je("target")]),onReceive:(a,l)=>{mr.isOpen(a)&&(mr.isPartOf(a,l.target)||r.isExtraPart(a,l.target)||r.fireEventInstead.fold(()=>mr.close(a),m=>Fr(a,m.event)))}}}},Rx=Wn([Jr("fireEventInstead",[De("event",$g())]),Ir("doReposition")]),Jc=e=>{const r=dn("Reposition",Rx,e);return{[$l()]:{onReceive:a=>{mr.isOpen(a)&&r.fireEventInstead.fold(()=>r.doReposition(a),l=>Fr(a,l.event))}}}},u1=(e,r,a)=>{r.store.manager.onLoad(e,r,a)},m1=(e,r,a)=>{r.store.manager.onUnload(e,r,a)};var gg=Object.freeze({__proto__:null,onLoad:u1,onUnload:m1,setValue:(e,r,a,l)=>{r.store.manager.setValue(e,r,a,l)},getValue:(e,r,a)=>r.store.manager.getValue(e,r,a),getState:(e,r,a)=>a}),rb=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.resetOnDom?[ys((l,m)=>{u1(l,e,r)}),Hi((l,m)=>{m1(l,e,r)})]:[cp(e,r,u1)];return Mr(a)}});const Op=()=>{const e=Io(null);return vl({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},gh=()=>{const e=Io({}),r=Io({});return vl({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:r.get()}),lookup:a=>Kt(e.get(),a).orThunk(()=>Kt(r.get(),a)),update:a=>{const l=e.get(),m=r.get(),h={},b={};Tt(a,y=>{h[y.value]=y,Kt(y,"meta").each(x=>{Kt(x,"text").each(k=>{b[k]=y})})}),e.set({...l,...h}),r.set({...m,...b})},clear:()=>{e.set({}),r.set({})}})};var g1=Object.freeze({__proto__:null,memory:Op,dataset:gh,manual:()=>vl({readState:At}),init:e=>e.store.manager.state(e)});const Tp=(e,r,a,l)=>{const m=r.store;a.update([l]),m.setValue(e,l),r.onSetValue(e,l)};var wd=[Zn("initialValue"),je("getFallbackEntry"),je("getDataKey"),je("setValue"),Qr("manager",{setValue:Tp,getValue:(e,r,a)=>{const l=r.store,m=l.getDataKey(e);return a.lookup(m).getOrThunk(()=>l.getFallbackEntry(m))},onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{Tp(e,r,a,l)})},onUnload:(e,r,a)=>{a.clear()},state:gh})],h1=[je("getValue"),De("setValue",At),Zn("initialValue"),Qr("manager",{setValue:(e,r,a,l)=>{r.store.setValue(e,l),r.onSetValue(e,l)},getValue:(e,r,a)=>r.store.getValue(e),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{r.store.setValue(e,l)})},onUnload:At,state:Rs.init})],sb=[Zn("initialValue"),Qr("manager",{setValue:(e,r,a,l)=>{a.set(l),r.onSetValue(e,l)},getValue:(e,r,a)=>a.get(),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},onUnload:(e,r,a)=>{a.clear()},state:Op})],xy=[Wr("store",{mode:"memory"},kn("mode",{memory:sb,manual:h1,dataset:wd})),cr("onSetValue"),De("resetOnDom",!1)];const Ut=pi({fields:xy,name:"representing",active:rb,apis:gg,extra:{setValueFrom:(e,r)=>{const a=Ut.getValue(r);Ut.setValue(e,a)}},state:g1}),xa=(e,r)=>Fd(e,{},Xe(r,a=>{return l=a.name(),m="Cannot configure "+a.name()+" for "+e,Yn(l,l,{tag:"option",process:{}},gt(h=>yc("The field: "+l+" is forbidden. "+m)));var l,m}).concat([wr("dump",it)])),p1=e=>e.dump,Aa=(e,r)=>({...Vt(r),...e.dump}),fi=xa,Ni=Aa,dl="placeholder",Il=Rl([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),hg=e=>Wo(e,"uiType"),Dc=(e,r,a,l)=>{return(m=e,b=a,y=l,hg(b)&&b.uiType===dl?(T=b,N=y,(x=m).exists(L=>L!==T.owner)?Il.single(!0,ne(T)):Kt(N,T.name).fold(()=>{throw new Error("Unknown placeholder component: "+T.name+"\nKnown: ["+_r(N)+"]\nNamespace: "+x.getOr("none")+"\nSpec: "+JSON.stringify(T,null,2))},L=>L.replace())):Il.single(!1,ne(b))).fold((m,h)=>{const b=hg(a)?h(r,a.config,a.validated):h(r),y=Kt(b,"components").getOr([]),x=Yt(y,k=>Dc(e,r,k,l));return[{...b,components:x}]},(m,h)=>{if(hg(a)){const b=h(r,a.config,a.validated);return a.validated.preprocess.getOr(it)(b)}return h(r)});var m,b,y,x,T,N},Nm=Il.single,Cy=Il.multiple,g=ne(dl),f=Rl([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),_=De("factory",{sketch:it}),E=De("schema",[]),B=je("name"),I=Yn("pname","pname",V(e=>"<alloy."+bo(e.name)+">"),W()),Z=wr("schema",()=>[Zn("preprocess")]),q=De("defaults",ne({})),te=De("overrides",ne({})),ge=xt([_,E,B,I,q,te]),ye=xt([_,E,B,q,te]),he=xt([_,E,B,I,q,te]),we=xt([_,Z,B,je("unit"),I,q,te]),Ee=e=>e.fold(D.some,D.none,D.some,D.some),$e=e=>{const r=a=>a.name;return e.fold(r,r,r,r)},Ze=(e,r)=>a=>{const l=dn("Converting part type",r,a);return e(l)},et=Ze(f.required,ge),dt=Ze(f.external,ye),St=Ze(f.optional,he),wt=Ze(f.group,we),$t=ne("entirety");var Xt=Object.freeze({__proto__:null,required:et,external:dt,optional:St,group:wt,asNamedPart:Ee,name:$e,asCommon:e=>e.fold(it,it,it,it),original:$t});const no=(e,r,a,l)=>Un(r.defaults(e,a,l),a,{uid:e.partUids[r.name]},r.overrides(e,a,l)),$o=(e,r)=>{const a={};return Tt(r,l=>{Ee(l).each(m=>{const h=jo(e,m.pname);a[m.name]=b=>{const y=dn("Part: "+m.name+" in "+e,xt(m.schema),b);return{...h,config:b,validated:y}}})}),a},jo=(e,r)=>({uiType:g(),owner:e,name:r}),gr=(e,r,a)=>({uiType:g(),owner:e,name:r,config:a,validated:{}}),un=e=>Yt(e,r=>r.fold(D.none,D.some,D.none,D.none).map(a=>Yr(a.name,a.schema.concat([rt($t())]))).toArray()),Bn=e=>Xe(e,$e),yn=(e,r,a)=>((l,m,h)=>{const b={},y={};return Tt(h,x=>{x.fold(k=>{b[k.pname]=Nm(!0,(T,N,L)=>k.factory.sketch(no(T,k,N,L)))},k=>{const T=m.parts[k.name];y[k.name]=ne(k.factory.sketch(no(m,k,T[$t()]),T))},k=>{b[k.pname]=Nm(!1,(T,N,L)=>k.factory.sketch(no(T,k,N,L)))},k=>{b[k.pname]=Cy(!0,(T,N,L)=>Xe(T[k.name],U=>k.factory.sketch(Un(k.defaults(T,U,L),U,k.overrides(T,U)))))})}),{internals:ne(b),externals:ne(y)}})(0,r,a),Vr=(e,r,a)=>((l,m,h,b)=>{const y=Gn(b,(k,T)=>((N,L)=>{let z=!1;return{name:ne(N),required:()=>L.fold((U,J)=>U,(U,J)=>U),used:()=>z,replace:()=>{if(z)throw new Error("Trying to use the same placeholder more than once: "+N);return z=!0,L}}})(T,k)),x=(k=l,T=m,L=y,Yt(h,z=>Dc(k,T,z,L)));var k,T,L;return Pn(y,k=>{if(!1===k.used()&&k.required())throw new Error("Placeholder: "+k.name()+" was not found in components list\nNamespace: "+l.getOr("none")+"\nComponents: "+JSON.stringify(m.components,null,2))}),x})(D.some(e),r,r.components,a),En=(e,r,a)=>{const l=r.partUids[a];return e.getSystem().getByUid(l).toOptional()},aa=(e,r,a)=>En(e,r,a).getOrDie("Could not find part: "+a),Wa=(e,r,a)=>{const l={},m=r.partUids,h=e.getSystem();return Tt(a,b=>{l[b]=ne(h.getByUid(m[b]))}),l},Ji=(e,r)=>{const a=e.getSystem();return Gn(r.partUids,(l,m)=>ne(a.getByUid(l)))},Yd=e=>_r(e.partUids),$a=(e,r,a)=>{const l={},m=r.partUids,h=e.getSystem();return Tt(a,b=>{l[b]=ne(h.getByUid(m[b]).getOrDie())}),l},zu=(e,r)=>{const a=Bn(r);return tc(Xe(a,l=>({key:l,value:e+"-"+l})))},hh=e=>Yn("partUids","partUids",G(r=>zu(r.uid,e)),W());var Ap=Object.freeze({__proto__:null,generate:$o,generateOne:gr,schemas:un,names:Bn,substitutes:yn,components:Vr,defaultUids:zu,defaultUidsSchema:hh,getAllParts:Ji,getAllPartNames:Yd,getPart:En,getPartOrDie:aa,getParts:Wa,getPartsOrDie:$a});const ph=(e,r,a,l,m)=>{const h=(y=m,((b=l).length>0?[Yr("parts",b)]:[]).concat([je("uid"),De("dom",{}),De("components",[]),rt("originalSpec"),De("debug.sketcher",{})]).concat(y));var b,y;return dn(e+" [SpecSchema]",Wn(h.concat(r)),a)},xd=(e,r,a,l,m)=>{const h=pg(m),b=un(a),y=hh(a),x=ph(e,r,h,b,[y]),k=yn(0,x,a);return l(x,Vr(e,x,k.internals()),h,k.externals())},pg=e=>Wo(e,"uid")?e:{...e,uid:Xg("uid")},d4=Wn([je("name"),je("factory"),je("configFields"),De("apis",{}),De("extraApis",{})]),fh=Wn([je("name"),je("factory"),je("configFields"),je("partFields"),De("apis",{}),De("extraApis",{})]),lc=e=>{const r=dn("Sketcher for "+e.name,d4,e),a=Gn(r.apis,Jg),l=Gn(r.extraApis,(m,h)=>Eu(m,h));return{name:r.name,configFields:r.configFields,sketch:m=>((h,b,y,x)=>{const k=pg(x);return y(ph(h,b,k,[],[]),k)})(r.name,r.configFields,r.factory,m),...a,...l}},ul=e=>{const r=dn("Sketcher for "+e.name,fh,e),a=$o(r.name,r.partFields),l=Gn(r.apis,Jg),m=Gn(r.extraApis,(h,b)=>Eu(h,b));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:h=>xd(r.name,r.configFields,r.partFields,r.factory,h),parts:a,...l,...m}},fg=e=>fn("input")(e)&&"radio"!==Xr(e,"type")||fn("textarea")(e);var u4=Object.freeze({__proto__:null,getCurrent:(e,r,a)=>r.find(e)});const _y=[je("find")],dr=pi({fields:_y,name:"composing",apis:u4}),Mm=["input","button","textarea","select"],Qc=(e,r,a)=>{(r.disabled()?Bx:Sy)(e,r)},bi=(e,r)=>!0===r.useNative&&Do(Mm,Wt(e.element)),Dx=e=>{Bo(e.element,"disabled","disabled")},f1=e=>{jr(e.element,"disabled")},m4=e=>{Bo(e.element,"aria-disabled","true")},g4=e=>{Bo(e.element,"aria-disabled","false")},Bx=(e,r,a)=>{r.disableClass.each(l=>{Us(e.element,l)}),(bi(e,r)?Dx:m4)(e),r.onDisabled(e)},Sy=(e,r,a)=>{r.disableClass.each(l=>{Ws(e.element,l)}),(bi(e,r)?f1:g4)(e),r.onEnabled(e)},Lx=(e,r)=>bi(e,r)?ji(e.element,"disabled"):"true"===Xr(e.element,"aria-disabled");var PT=Object.freeze({__proto__:null,enable:Sy,disable:Bx,isDisabled:Lx,onLoad:Qc,set:(e,r,a,l)=>{(l?Bx:Sy)(e,r)}}),FT=Object.freeze({__proto__:null,exhibit:(e,r)=>Pi({classes:r.disabled()?r.disableClass.toArray():[]}),events:(e,r)=>Mr([Yh(bl(),(a,l)=>Lx(a,e)),cp(e,r,Qc)])}),h4=[Gs("disabled",ot),De("useNative",!0),Zn("disableClass"),cr("onDisabled"),cr("onEnabled")];const Ko=pi({fields:h4,name:"disabling",active:FT,apis:PT}),Ix=(e,r,a,l)=>{const m=Xi(e.element,"."+r.highlightClass);Tt(m,h=>{Jo(l,b=>Zo(b.element,h))||(Ws(h,r.highlightClass),e.getSystem().getByDom(h).each(b=>{r.onDehighlight(e,b),Fr(b,qg())}))})},b1=(e,r,a,l)=>{Ix(e,r,0,[l]),v1(e,r,a,l)||(Us(l.element,r.highlightClass),r.onHighlight(e,l),Fr(l,Gh()))},v1=(e,r,a,l)=>Gi(l.element,r.highlightClass),Hx=(e,r,a)=>Oa(e.element,"."+r.itemClass).bind(l=>e.getSystem().getByDom(l).toOptional()),bh=(e,r,a)=>{const l=Xi(e.element,"."+r.itemClass);return(l.length>0?D.some(l[l.length-1]):D.none()).bind(m=>e.getSystem().getByDom(m).toOptional())},y1=(e,r,a,l)=>{const m=Xi(e.element,"."+r.itemClass);return Hs(m,h=>Gi(h,r.highlightClass)).bind(h=>{const b=Nu(h,l,0,m.length-1);return e.getSystem().getByDom(m[b]).toOptional()})},p4=(e,r,a)=>{const l=Xi(e.element,"."+r.itemClass);return Dt(Xe(l,m=>e.getSystem().getByDom(m).toOptional()))};var f4=Object.freeze({__proto__:null,dehighlightAll:(e,r,a)=>Ix(e,r,0,[]),dehighlight:(e,r,a,l)=>{v1(e,r,a,l)&&(Ws(l.element,r.highlightClass),r.onDehighlight(e,l),Fr(l,qg()))},highlight:b1,highlightFirst:(e,r,a)=>{Hx(e,r).each(l=>{b1(e,r,a,l)})},highlightLast:(e,r,a)=>{bh(e,r).each(l=>{b1(e,r,a,l)})},highlightAt:(e,r,a,l)=>{((m,h,b,y)=>{const x=Xi(m.element,"."+h.itemClass);return D.from(x[y]).fold(()=>Mn.error(new Error("No element found with index "+y)),m.getSystem().getByDom)})(e,r,0,l).fold(m=>{throw m},m=>{b1(e,r,a,m)})},highlightBy:(e,r,a,l)=>{const m=p4(e,r);Ue(m,l).each(h=>{b1(e,r,a,h)})},isHighlighted:v1,getHighlighted:(e,r,a)=>Oa(e.element,"."+r.highlightClass).bind(l=>e.getSystem().getByDom(l).toOptional()),getFirst:Hx,getLast:bh,getPrevious:(e,r,a)=>y1(e,r,0,-1),getNext:(e,r,a)=>y1(e,r,0,1),getCandidates:p4}),b4=[je("highlightClass"),je("itemClass"),cr("onHighlight"),cr("onDehighlight")];const Zr=pi({fields:b4,name:"highlighting",apis:f4}),v4=[8],Jd=[9],Vu=[13],ab=[27],cc=[32],ib=[37],w1=[38],lb=[39],Np=[40],vo=(e,r,a)=>{const l=Jn(e.slice(0,r)),m=Jn(e.slice(r+1));return Ue(l.concat(m),a)},Mp=(e,r,a)=>{const l=Jn(e.slice(0,r));return Ue(l,a)},y4=(e,r,a)=>{const l=e.slice(0,r),m=e.slice(r+1);return Ue(m.concat(l),a)},ky=(e,r,a)=>{const l=e.slice(r+1);return Ue(l,a)},pr=e=>r=>Do(e,r.raw.which),Qd=e=>r=>ts(e,a=>a(r)),Rp=e=>!0===e.raw.shiftKey,Px=e=>!0===e.raw.ctrlKey,bg=yo(Rp),Rr=(e,r)=>({matches:e,classification:r}),Fx=(e,r,a)=>{r.exists(l=>a.exists(m=>Zo(m,l)))||Co(e,xf(),{prevFocus:r,newFocus:a})},zx=()=>{const e=r=>Rc(r.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().triggerFocus(a,r.element);const m=e(r);Fx(r,l,m)}}},Vx=()=>{const e=r=>Zr.getHighlighted(r).map(a=>a.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().getByDom(a).fold(At,h=>{Zr.highlight(r,h)});const m=e(r);Fx(r,l,m)}}};var ed;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(ed||(ed={}));const Rm=(e,r,a,l,m)=>{const h=(y,x,k,T,N)=>{return(L=k(y,x,T,N),z=x.event,Ue(L,U=>U.matches(z)).map(U=>U.classification)).bind(U=>U(y,x,T,N));var L,z},b={schema:()=>e.concat([De("focusManager",zx()),Wr("focusInside","onFocus",Go(y=>Do(["onFocus","onEnterOrSpace","onApi"],y)?Mn.value(y):Mn.error("Invalid value for focusInside"))),Qr("handler",b),Qr("state",r),Qr("sendFocusIn",m)]),processKey:h,toEvents:(y,x)=>{const k=y.focusInside!==ed.OnFocusMode?D.none():m(y).map(N=>Ct(oc(),(L,z)=>{N(L,y,x),z.stop()})),T=[Ct(Gc(),(N,L)=>{h(N,L,a,y,x).fold(()=>{((z,U)=>{const J=pr(cc.concat(Vu))(U.event);y.focusInside===ed.OnEnterOrSpaceMode&&J&&sm(z,U)&&m(y).each(Q=>{Q(z,y,x),U.stop()})})(N,L)},z=>{L.stop()})}),Ct(Wh(),(N,L)=>{h(N,L,l,y,x).each(z=>{L.stop()})})];return Mr(k.toArray().concat(T))}};return b},Dp=e=>{const r=[Zn("onEscape"),Zn("onEnter"),De("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),De("firstTabstop",0),De("useTabstopAt",mn),Zn("visibilitySelector")].concat([e]),a=(y,x)=>{const k=y.visibilitySelector.bind(T=>Bl(x,T)).getOr(x);return Ns(k)>0},l=(y,x,k)=>{((T,N)=>{const L=Xi(T.element,N.selector),z=Ie(L,U=>a(N,U));return D.from(z[N.firstTabstop])})(y,x).each(T=>{x.focusManager.set(y,T)})},m=(y,x,k,T)=>{const N=Xi(y.element,k.selector);return(L=y,z=k,z.focusManager.get(L).bind(U=>Bl(U,z.selector))).bind(L=>Hs(N,$n(Zo,L)).bind(z=>{return U=y,re=k,T(N,z,ee=>{return a(de=re,me=ee)&&de.useTabstopAt(me);var de,me}).fold(()=>re.cyclic?D.some(!0):D.none(),ee=>(re.focusManager.set(U,ee),D.some(!0)));var U,re}));var L,z},h=ne([Rr(Qd([Rp,pr(Jd)]),(y,x,k)=>m(y,0,k,k.cyclic?vo:Mp)),Rr(pr(Jd),(y,x,k)=>m(y,0,k,k.cyclic?y4:ky)),Rr(Qd([bg,pr(Vu)]),(y,x,k)=>k.onEnter.bind(T=>T(y,x)))]),b=ne([Rr(pr(ab),(y,x,k)=>k.onEscape.bind(T=>T(y,x)))]);return Rm(r,Rs.init,h,b,()=>D.some(l))};var Ey=Dp(wr("cyclic",ot)),zT=Dp(wr("cyclic",mn));const x1=(e,r,a)=>fg(a)&&pr(cc)(r.event)?D.none():(Kh(e,a,bl()),D.some(!0)),vh=(e,r)=>D.some(!0),VT=[De("execute",x1),De("useSpace",!1),De("useEnter",!0),De("useControlEnter",!1),De("useDown",!1)],Zx=(e,r,a)=>a.execute(e,r,e.element);var jx=Rm(VT,Rs.init,(e,r,a,l)=>{const m=a.useSpace&&!fg(e.element)?cc:[],b=a.useDown?Np:[],y=m.concat(a.useEnter?Vu:[]).concat(b);return[Rr(pr(y),Zx)].concat(a.useControlEnter?[Rr(Qd([Px,pr(Vu)]),Zx)]:[])},(e,r,a,l)=>a.useSpace&&!fg(e.element)?[Rr(pr(cc),vh)]:[],()=>D.none());const Ux=()=>{const e=Ds();return vl({readState:()=>e.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{e.set({numRows:r,numColumns:a})},getNumRows:()=>e.get().map(r=>r.numRows),getNumColumns:()=>e.get().map(r=>r.numColumns)})};var ZT=Object.freeze({__proto__:null,flatgrid:Ux,init:e=>e.state(e)});const w4=e=>(r,a,l,m)=>{const h=e(r.element);return db(h,r,a,l,m)},Oy=(e,r)=>{const a=rh(e,r);return w4(a)},cb=(e,r)=>{const a=rh(r,e);return w4(a)},Ty=e=>(r,a,l,m)=>db(e,r,a,l,m),db=(e,r,a,l,m)=>l.focusManager.get(r).bind(h=>e(r.element,h,l,m)).map(h=>(l.focusManager.set(r,h),!0)),ub=Ty,mb=Ty,Dm=Ty,x4=e=>{return!((r=e.dom).offsetWidth<=0&&r.offsetHeight<=0);var r},Wx=(e,r,a)=>{const l=Xi(e,a);return m=Ie(l,x4),Hs(m,b=>Zo(b,r)).map(b=>({index:b,candidates:m}));var m},$x=(e,r)=>Hs(e,a=>Zo(r,a)),C4=(e,r,a,l)=>l(Math.floor(r/a),r%a).bind(m=>{const h=m.row*a+m.column;return h>=0&&h<e.length?D.some(e[h]):D.none()}),Ay=(e,r,a,l,m)=>C4(e,r,l,(h,b)=>{const x=Nu(b,m,0,(h===a-1?e.length-h*l:l)-1);return D.some({row:h,column:x})}),qx=(e,r,a,l,m)=>C4(e,r,l,(h,b)=>{const y=Nu(h,m,0,a-1),k=Ul(b,0,(y===a-1?e.length-y*l:l)-1);return D.some({row:y,column:k})}),_4=[je("selector"),De("execute",x1),il("onEscape"),De("captureTab",!1),xm()],S4=(e,r,a)=>{Oa(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},Ny=e=>(r,a,l,m)=>Wx(r,a,l.selector).bind(h=>e(h.candidates,h.index,m.getNumRows().getOr(l.initSize.numRows),m.getNumColumns().getOr(l.initSize.numColumns))),Gx=(e,r,a)=>a.captureTab?D.some(!0):D.none(),k4=Ny((e,r,a,l)=>Ay(e,r,a,l,-1)),My=Ny((e,r,a,l)=>Ay(e,r,a,l,1)),E4=Ny((e,r,a,l)=>qx(e,r,a,l,-1)),O4=Ny((e,r,a,l)=>qx(e,r,a,l,1)),T4=ne([Rr(pr(ib),Oy(k4,My)),Rr(pr(lb),cb(k4,My)),Rr(pr(w1),ub(E4)),Rr(pr(Np),mb(O4)),Rr(Qd([Rp,pr(Jd)]),Gx),Rr(Qd([bg,pr(Jd)]),Gx),Rr(pr(cc.concat(Vu)),(e,r,a,l)=>{return(m=e,h=a,h.focusManager.get(m).bind(b=>Bl(b,h.selector))).bind(m=>a.execute(e,r,m));var m,h})]),jT=ne([Rr(pr(ab),(e,r,a)=>a.onEscape(e,r)),Rr(pr(cc),vh)]);var UT=Rm(_4,Ux,T4,jT,()=>D.some(S4));const A4=(e,r,a,l,m)=>{const h=(b,y,x)=>m(b,y,l,0,x.length-1,x[y],k=>{return"button"===Wt(T=x[k])&&"disabled"===Xr(T,"disabled")?h(b,k,x):D.from(x[k]);var T});return Wx(e,a,r).bind(b=>{const y=b.index;return h(y,y,b.candidates)})},N4=(e,r,a,l)=>A4(e,r,a,l,(m,h,b,y,x,k,T)=>{const N=Ul(h+b,y,x);return N===m?D.from(k):T(N)}),yh=(e,r,a,l)=>A4(e,r,a,l,(m,h,b,y,x,k,T)=>{const N=Nu(h,b,y,x);return N===m?D.none():T(N)}),M4=[je("selector"),De("getInitial",D.none),De("execute",x1),il("onEscape"),De("executeOnMove",!1),De("allowVertical",!0),De("allowHorizontal",!0),De("cycles",!0)],Ry=(e,r,a)=>{return(l=e,m=a,m.focusManager.get(l).bind(h=>Bl(h,m.selector))).bind(l=>a.execute(e,r,l));var l,m},Kx=(e,r,a)=>{r.getInitial(e).orThunk(()=>Oa(e.element,r.selector)).each(l=>{r.focusManager.set(e,l)})},Xx=(e,r,a)=>(a.cycles?yh:N4)(e,a.selector,r,-1),R4=(e,r,a)=>(a.cycles?yh:N4)(e,a.selector,r,1),Yx=e=>(r,a,l,m)=>e(r,a,l,m).bind(()=>l.executeOnMove?Ry(r,a,l):D.some(!0)),D4=ne([Rr(pr(cc),vh),Rr(pr(ab),(e,r,a)=>a.onEscape(e,r))]);var WT=Rm(M4,Rs.init,(e,r,a,l)=>{const m=[...a.allowHorizontal?ib:[]].concat(a.allowVertical?w1:[]),h=[...a.allowHorizontal?lb:[]].concat(a.allowVertical?Np:[]);return[Rr(pr(m),Yx(Oy(Xx,R4))),Rr(pr(h),Yx(cb(Xx,R4))),Rr(pr(Vu),Ry),Rr(pr(cc),Ry)]},D4,()=>D.some(Kx));const Dy=(e,r,a)=>D.from(e[r]).bind(l=>D.from(l[a]).map(m=>({rowIndex:r,columnIndex:a,cell:m}))),By=(e,r,a,l)=>{const h=Nu(a,l,0,e[r].length-1);return Dy(e,r,h)},Ly=(e,r,a,l)=>{const m=Nu(a,l,0,e.length-1),b=Ul(r,0,e[m].length-1);return Dy(e,m,b)},Jx=(e,r,a,l)=>{const h=Ul(a+l,0,e[r].length-1);return Dy(e,r,h)},td=(e,r,a,l)=>{const m=Ul(a+l,0,e.length-1),b=Ul(r,0,e[m].length-1);return Dy(e,m,b)},C1=[Yr("selectors",[je("row"),je("cell")]),De("cycles",!0),De("previousSelector",D.none),De("execute",x1)],Qx=(e,r,a)=>{r.previousSelector(e).orThunk(()=>Oa(e.element,r.selectors.cell)).each(l=>{r.focusManager.set(e,l)})},_1=(e,r)=>(a,l,m)=>{const h=m.cycles?e:r;return Bl(l,m.selectors.row).bind(b=>{const y=Xi(b,m.selectors.cell);return $x(y,l).bind(x=>{const k=Xi(a,m.selectors.row);return $x(k,b).bind(T=>{const N=(z=m,Xe(k,U=>Xi(U,z.selectors.cell)));var z;return h(N,T,x).map(L=>L.cell)})})})},gb=_1((e,r,a)=>By(e,r,a,-1),(e,r,a)=>Jx(e,r,a,-1)),Iy=_1((e,r,a)=>By(e,r,a,1),(e,r,a)=>Jx(e,r,a,1)),$T=_1((e,r,a)=>Ly(e,a,r,-1),(e,r,a)=>td(e,a,r,-1)),qT=_1((e,r,a)=>Ly(e,a,r,1),(e,r,a)=>td(e,a,r,1)),B4=ne([Rr(pr(ib),Oy(gb,Iy)),Rr(pr(lb),cb(gb,Iy)),Rr(pr(w1),ub($T)),Rr(pr(Np),mb(qT)),Rr(pr(cc.concat(Vu)),(e,r,a)=>Rc(e.element).bind(l=>a.execute(e,r,l)))]),eC=ne([Rr(pr(cc),vh)]);var Bp=Rm(C1,Rs.init,B4,eC,()=>D.some(Qx));const tC=[je("selector"),De("execute",x1),De("moveOnTab",!1)],oC=(e,r,a)=>a.focusManager.get(e).bind(l=>a.execute(e,r,l)),L4=(e,r,a)=>{Oa(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},nC=(e,r,a)=>yh(e,a.selector,r,-1),rC=(e,r,a)=>yh(e,a.selector,r,1),sC=ne([Rr(pr(w1),Dm(nC)),Rr(pr(Np),Dm(rC)),Rr(Qd([Rp,pr(Jd)]),(e,r,a,l)=>a.moveOnTab?Dm(nC)(e,r,a,l):D.none()),Rr(Qd([bg,pr(Jd)]),(e,r,a,l)=>a.moveOnTab?Dm(rC)(e,r,a,l):D.none()),Rr(pr(Vu),oC),Rr(pr(cc),oC)]),GT=ne([Rr(pr(cc),vh)]);var I4=Rm(tC,Rs.init,sC,GT,()=>D.some(L4));const H4=[il("onSpace"),il("onEnter"),il("onShiftEnter"),il("onLeft"),il("onRight"),il("onTab"),il("onShiftTab"),il("onUp"),il("onDown"),il("onEscape"),De("stopSpaceKeyup",!1),Zn("focusIn")];var KT=Rm(H4,Rs.init,(e,r,a)=>[Rr(pr(cc),a.onSpace),Rr(Qd([bg,pr(Vu)]),a.onEnter),Rr(Qd([Rp,pr(Vu)]),a.onShiftEnter),Rr(Qd([Rp,pr(Jd)]),a.onShiftTab),Rr(Qd([bg,pr(Jd)]),a.onTab),Rr(pr(w1),a.onUp),Rr(pr(Np),a.onDown),Rr(pr(ib),a.onLeft),Rr(pr(lb),a.onRight),Rr(pr(cc),a.onSpace)],(e,r,a)=>[...a.stopSpaceKeyup?[Rr(pr(cc),vh)]:[],Rr(pr(ab),a.onEscape)],e=>e.focusIn);const P4=Ey.schema(),XT=zT.schema(),Hy=WT.schema(),YT=UT.schema(),F4=Bp.schema(),dc=jx.schema(),z4=I4.schema(),JT=KT.schema(),Ho=I0({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:P4,cyclic:XT,flow:Hy,flatgrid:YT,matrix:F4,execution:dc,menu:z4,special:JT}),name:"keying",active:{events:(e,r)=>e.handler.toEvents(e,r)},apis:{focusIn:(e,r,a)=>{r.sendFocusIn(r).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},l=>{l(e,r,a)})},setGridSize:(e,r,a,l,m)=>{bs(a,"setGridSize")?a.setGridSize(l,m):console.error("Layout does not support setGridSize")}},state:ZT}),V4=(e,r)=>{$f(()=>{((a,l,m)=>{const h=a.components();var x;Tt((x=a).components(),k=>Tl(k.element)),Ol(x.element),x.syncComponents();const b=Xe(r,e.getSystem().build),y=fs(h,b);Tt(y,x=>{qd(x),a.getSystem().removeFromWorld(x)}),Tt(b,x=>{uh(x)?vy(a,x):(a.getSystem().addToWorld(x),vy(a,x),na(a.element)&&Gd(x))}),a.syncComponents()})(e)},e.element)},aC=(e,r)=>{$f(()=>{((a,l,m)=>{const h=a.components(),b=Yt(l,k=>Yg(k).toArray());Tt(h,k=>{Do(b,k)||mh(k)});const y=(k=e.element,T=r,N=e.getSystem().buildOrPatch,rp(k,T,(L,z)=>Rf(k,z,L,N))),x=fs(h,y);var k,T,N;Tt(x,k=>{uh(k)&&mh(k)}),Tt(y,k=>{uh(k)||ob(a,k)}),a.syncComponents()})(e,r)},e.element)},Z4=(e,r,a,l)=>{mh(r);const m=Rf(e.element,a,l,e.getSystem().buildOrPatch);ob(e,m),e.syncComponents()},iC=(e,r,a)=>{const l=e.getSystem().build(a);i1(e,l,r)},j4=(e,r,a,l)=>{ic(r),iC(e,(m,h)=>{return y=h,void Dn(b=m,a).fold(()=>{_i(b,y)},k=>{ss(k,y)});var b,y},l)},hb=(e,r)=>e.components(),vg=(e,r,a,l,m)=>{const h=hb(e);return D.from(h[l]).map(b=>(m.fold(()=>ic(b),y=>{(r.reuseDom?Z4:j4)(e,b,l,y)}),b))};var U4=Object.freeze({__proto__:null,append:(e,r,a,l)=>{iC(e,_i,l)},prepend:(e,r,a,l)=>{iC(e,Id,l)},remove:(e,r,a,l)=>{const m=hb(e);Ue(m,b=>Zo(l.element,b.element)).each(ic)},replaceAt:vg,replaceBy:(e,r,a,l,m)=>{const h=hb(e);return Hs(h,l).bind(b=>vg(e,r,0,b,m))},set:(e,r,a,l)=>(r.reuseDom?aC:V4)(e,l),contents:hb});const pn=pi({fields:[mi("reuseDom",!0)],name:"replacing",apis:U4}),On=(e,r)=>({key:e,value:{config:{},me:((l,m)=>{const h=Mr(m);return pi({fields:[je("enabled")],name:l,active:{events:ne(h)}})})(e,r),configAsRaw:ne({}),initialConfig:{},state:Rs}}),W4=(e,r)=>{r.ignore||(Ll(e.element),r.onFocus(e))};var $4=Object.freeze({__proto__:null,focus:W4,blur:(e,r)=>{r.ignore||dp(e.element)},isFocused:e=>th(e.element)}),lC=Object.freeze({__proto__:null,exhibit:(e,r)=>Pi(r.ignore?{}:{attributes:{tabindex:"-1"}}),events:e=>Mr([Ct(oc(),(r,a)=>{W4(r,e),a.stop()})].concat(e.stopMousedown?[Ct(ti(),(r,a)=>{a.event.prevent()})]:[]))}),cC=[cr("onFocus"),De("stopMousedown",!1),De("ignore",!1)];const nn=pi({fields:cC,name:"focusing",active:lC,apis:$4}),eu=(e,r,a,l)=>{const m=a.get();var h,y;a.set(l),h=e,y=a,r.toggleClass.each(x=>{y.get()?Us(h.element,x):Ws(h.element,x)}),((h,b,y)=>{const x=b.aria;x.update(h,x,y.get())})(e,r,a),m!==l&&r.onToggled(e,l)},dC=(e,r,a)=>{eu(e,r,a,!a.get())},uC=(e,r,a)=>{eu(e,r,a,r.selected)};var QT=Object.freeze({__proto__:null,onLoad:uC,toggle:dC,isOn:(e,r,a)=>a.get(),on:(e,r,a)=>{eu(e,r,a,!0)},off:(e,r,a)=>{eu(e,r,a,!1)},set:eu}),eA=Object.freeze({__proto__:null,exhibit:()=>Pi({}),events:(e,r)=>{const a=(l=e,m=r,h=dC,Ec(y=>{h(y,l,m)}));var l,m,h;const b=cp(e,r,uC);return Mr(en([e.toggleOnExecute?[a]:[],[b]]))}});const S1=(e,r,a)=>{Bo(e.element,"aria-expanded",a)};var pb=[De("selected",!1),Zn("toggleClass"),De("toggleOnExecute",!0),cr("onToggled"),Wr("aria",{mode:"none"},kn("mode",{pressed:[De("syncWithExpanded",!1),Qr("update",(e,r,a)=>{Bo(e.element,"aria-pressed",a),r.syncWithExpanded&&S1(e,0,a)})],checked:[Qr("update",(e,r,a)=>{Bo(e.element,"aria-checked",a)})],expanded:[Qr("update",S1)],selected:[Qr("update",(e,r,a)=>{Bo(e.element,"aria-selected",a)})],none:[Qr("update",At)]}))];const Ln=pi({fields:pb,name:"toggling",active:eA,apis:QT,state:{init:()=>{const e=Io(!1);return{get:()=>e.get(),set:r=>e.set(r),clear:()=>e.set(!1),readState:()=>e.get()}}}}),mC=()=>{const e=(r,a)=>{a.stop(),pd(r)};return[Ct(Sc(),e),Ct(lm(),e),Su(sl()),Su(ti())]},Zu=e=>Mr(en([e.map(r=>Ec((a,l)=>{r(a),l.stop()})).toArray(),mC()])),yg="alloy.item-hover",gC="alloy.item-focus",Bm="alloy.item-toggled",Py=e=>{(Rc(e.element).isNone()||nn.isFocused(e))&&(nn.isFocused(e)||nn.focus(e),Co(e,yg,{item:e}))},hC=e=>{Co(e,gC,{item:e})},pC=ne(yg),q4=ne(gC),fC=ne(Bm),G4=e=>e.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),tA=[je("data"),je("components"),je("dom"),De("hasSubmenu",!1),Zn("toggling"),fi("itemBehaviours",[Ln,nn,Ho,Ut]),De("ignoreFocus",!1),De("domModification",{}),Qr("builder",e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:G4(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ni(e.itemBehaviours,[e.toggling.fold(Ln.revoke,r=>{return Ln.config({aria:{mode:"checked"},...zs(a=r,(l,m)=>"exclusive"!==m),onToggled:(l,m)=>{var h;pt(a.onToggled)&&a.onToggled(l,m),Co(h=l,Bm,{item:h,state:m})}});var a}),nn.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:r=>{hC(r)}}),Ho.config({mode:"execution"}),Ut.config({store:{mode:"memory",initialValue:e.data}}),On("item-type-events",[...mC(),Ct(Cc(),Py),Ct(Xm(),nn.focus)])]),components:e.components,eventOrder:e.eventOrder})),De("eventOrder",{})],oA=[je("dom"),je("components"),Qr("builder",e=>({dom:e.dom,components:e.components,events:Mr([Jh(Xm())])}))],bC=ne("item-widget"),k1=ne([et({name:"widget",overrides:e=>({behaviours:Vt([Ut.config({store:{mode:"manual",getValue:r=>e.data,setValue:At}})])})})]),vC=[je("uid"),je("data"),je("components"),je("dom"),De("autofocus",!1),De("ignoreFocus",!1),fi("widgetBehaviours",[Ut,nn,Ho]),De("domModification",{}),hh(k1()),Qr("builder",e=>{const r=yn(bC(),e,k1()),a=Vr(bC(),e,r.internals()),l=h=>En(h,e,"widget").map(b=>(Ho.focusIn(b),b)),m=(h,b)=>(fg(b.event.target)||e.autofocus&&b.setSource(h.element),D.none());return{dom:e.dom,components:a,domModification:e.domModification,events:Mr([Ec((h,b)=>{l(h).each(y=>{b.stop()})}),Ct(Cc(),Py),Ct(Xm(),(h,b)=>{e.autofocus?l(h):nn.focus(h)})]),behaviours:Ni(e.widgetBehaviours,[Ut.config({store:{mode:"memory",initialValue:e.data}}),nn.config({ignore:e.ignoreFocus,onFocus:h=>{hC(h)}}),Ho.config({mode:"special",focusIn:e.autofocus?h=>{l(h)}:yl(),onLeft:m,onRight:m,onEscape:(h,b)=>nn.isFocused(h)||e.autofocus?(e.autofocus&&b.setSource(h.element),D.none()):(nn.focus(h),D.some(!0))})])}})],yC=kn("type",{widget:vC,item:tA,separator:oA}),nA=ne([wt({factory:{sketch:e=>{const r=dn("menu.spec item",yC,e);return r.builder(r)}},name:"items",unit:"item",defaults:(e,r)=>Wo(r,"uid")?r:{...r,uid:Xg("item")},overrides:(e,r)=>({type:r.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),rA=ne([je("value"),je("items"),je("dom"),je("components"),De("eventOrder",{}),xa("menuBehaviours",[Zr,Ut,dr,Ho]),Wr("movement",{mode:"menu",moveOnTab:!0},kn("mode",{grid:[xm(),Qr("config",(e,r)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:e.focusManager}))],matrix:[Qr("config",(e,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+e.markers.item},previousSelector:r.previousSelector,focusManager:e.focusManager})),je("rowSelector"),De("previousSelector",D.none)],menu:[De("moveOnTab",!0),Qr("config",(e,r)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:r.moveOnTab,focusManager:e.focusManager}))]})),Vn("markers",S0()),De("fakeFocus",!1),De("focusManager",zx()),cr("onHighlight"),cr("onDehighlight")]),wC=ne("alloy.menu-focus"),wh=ul({name:"Menu",configFields:rA(),partFields:nA(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Aa(e.menuBehaviours,[Zr.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Ut.config({store:{mode:"memory",initialValue:e.value}}),dr.config({find:D.some}),Ho.config(e.movement.config(e,e.movement))]),events:Mr([Ct(q4(),(m,h)=>{const b=h.event;m.getSystem().getByDom(b.target).each(y=>{Zr.highlight(m,y),h.stop(),Co(m,wC(),{menu:m,item:y})})}),Ct(pC(),(m,h)=>{Zr.highlight(m,h.event.item)}),Ct(fC(),(m,h)=>{const{item:b,state:y}=h.event;y&&"menuitemradio"===Xr(b.element,"role")&&((x,k)=>{const T=Xi(x.element,'[role="menuitemradio"][aria-checked="true"]');Tt(T,N=>{Zo(N,k.element)||x.getSystem().getByDom(N).each(L=>{Ln.off(L)})})})(m,b)})]),components:r,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),xC=(e,r,a,l)=>Kt(a,l).bind(m=>Kt(e,m).bind(h=>{const b=xC(e,r,a,h);return D.some([h].concat(b))})).getOr([]),CC=e=>"prepared"===e.type?D.some(e.menu):D.none(),K4=CC,SC=bo("tiered-menu-item-highlight"),E1=bo("tiered-menu-item-dehighlight");var Qi;!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(Qi||(Qi={}));const kC=ne("collapse-item"),xh=lc({name:"TieredMenu",configFields:[vd("onExecute"),vd("onEscape"),Au("onOpenMenu"),Au("onOpenSubmenu"),cr("onRepositionMenu"),cr("onCollapseMenu"),De("highlightOnOpen",Qi.HighlightMenuAndItem),Yr("data",[je("primary"),je("menus"),je("expansions")]),De("fakeFocus",!1),cr("onHighlightItem"),cr("onDehighlightItem"),cr("onHover"),jd(),je("dom"),De("navigateOnHover",!0),De("stayInDom",!1),xa("tmenuBehaviours",[Ho,Zr,dr,pn]),De("eventOrder",{})],apis:{collapseMenu:(e,r)=>{e.collapseMenu(r)},highlightPrimary:(e,r)=>{e.highlightPrimary(r)},repositionMenus:(e,r)=>{e.repositionMenus(r)}},factory:(e,r)=>{const a=Ds(),l=(()=>{const e=Io({}),r=Io({}),a=Io({}),l=Ds(),m=Io({}),h=x=>b(x).bind(CC),b=x=>Kt(r.get(),x),y=x=>Kt(e.get(),x);return{setMenuBuilt:(x,k)=>{r.set({...r.get(),[x]:{type:"prepared",menu:k}})},setContents:(x,k,T,N)=>{l.set(x),e.set(T),r.set(k),m.set(N);const L=((z,U)=>{const J={};Pn(z,(ee,de)=>{Tt(ee,me=>{J[me]=de})});const Q=U,re=nr(U,(ee,de)=>({k:ee,v:de})),ce=Gn(re,(ee,de)=>[de].concat(xC(J,Q,re,de)));return Gn(J,ee=>Kt(ce,ee).getOr([ee]))})(N,T);a.set(L)},expand:x=>Kt(e.get(),x).map(k=>{const T=Kt(a.get(),x).getOr([]);return[k].concat(T)}),refresh:x=>Kt(a.get(),x),collapse:x=>Kt(a.get(),x).bind(k=>k.length>1?D.some(k.slice(1)):D.none()),lookupMenu:b,lookupItem:y,otherMenus:x=>{const k=m.get();return fs(_r(k),x)},getPrimary:()=>l.get().bind(h),getMenus:()=>r.get(),clear:()=>{e.set({}),r.set({}),a.set({}),l.clear()},isClear:()=>l.get().isNone(),getTriggeringPath:(x,k)=>{const T=Ie(y(x).toArray(),N=>h(N).isSome());return Kt(a.get(),x).bind(N=>{const L=Jn(T.concat(N));return(z=>{const U=[];for(let J=0;J<z.length;J++){const Q=z[J];if(!Q.isSome())return D.none();U.push(Q.getOrDie())}return D.some(U)})(Yt(L,(z,U)=>{return(J=z,Q=k,re=L.slice(0,U+1),h(J).bind(ce=>{return(ee=J,Nr(e.get(),(de,me)=>de===ee)).bind(ee=>Q(ee).map(de=>({triggeredMenu:ce,triggeringItem:de,triggeringPath:re})));var ee})).fold(()=>cs(l.get(),z)?[]:[D.none()],J=>[D.some(J)]);var J,Q,re}))})}}})(),m=ee=>Ut.getValue(ee).value,b=Zr.highlight,y=(ee,de)=>{b(ee,de),Zr.getHighlighted(de).orThunk(()=>Zr.getFirst(de)).each(me=>{e.fakeFocus?Zr.highlight(de,me):Kh(ee,me.element,Xm())})},x=(ee,de)=>Dt(Xe(de,me=>ee.lookupMenu(me).bind(xe=>"prepared"===xe.type?D.some(xe.menu):D.none()))),k=(ee,de,me)=>{const xe=x(de,de.otherMenus(me));Tt(xe,Ne=>{Oi(Ne.element,[e.markers.backgroundMenu]),e.stayInDom||pn.remove(ee,Ne)})},T=(ee,de)=>{const me=(xe=ee,a.get().getOrThunk(()=>{const Ne={},Ge=Xi(xe.element,`.${e.markers.item}`),Et=Ie(Ge,_t=>"true"===Xr(_t,"aria-haspopup"));return Tt(Et,_t=>{xe.getSystem().getByDom(_t).each(Ot=>{const so=m(Ot);Ne[so]=Ot})}),a.set(Ne),Ne}));var xe;Pn(me,(xe,Ne)=>{const Ge=Do(de,Ne);Bo(xe.element,"aria-expanded",Ge)})},N=(ee,de,me)=>D.from(me[0]).bind(xe=>de.lookupMenu(xe).bind(Ne=>{if("notbuilt"===Ne.type)return D.none();{const Ge=Ne.menu,Et=x(de,me.slice(1));return Tt(Et,_t=>{Us(_t.element,e.markers.backgroundMenu)}),na(Ge.element)||pn.append(ee,sc(Ge)),Oi(Ge.element,[e.markers.backgroundMenu]),y(ee,Ge),k(ee,de,me),D.some(Ge)}}));let L;var ee;(ee=L||(L={}))[ee.HighlightSubmenu=0]="HighlightSubmenu",ee[ee.HighlightParent=1]="HighlightParent";const z=(ee,de,me=L.HighlightSubmenu)=>{if(de.hasConfigured(Ko)&&Ko.isDisabled(de))return D.some(de);{const xe=m(de);return l.expand(xe).bind(Ne=>(T(ee,Ne),D.from(Ne[0]).bind(Ge=>l.lookupMenu(Ge).bind(Et=>{const _t=((Ot,so,_o)=>{if("notbuilt"===_o.type){const go=Ot.getSystem().build(_o.nbMenu());return l.setMenuBuilt(so,go),go}return _o.menu})(ee,Ge,Et);return na(_t.element)||pn.append(ee,sc(_t)),e.onOpenSubmenu(ee,de,_t,Jn(Ne)),me===L.HighlightSubmenu?(Zr.highlightFirst(_t),N(ee,l,Ne)):(Zr.dehighlightAll(_t),D.some(de))}))))}},U=(ee,de)=>{const me=m(de);return l.collapse(me).bind(xe=>(T(ee,xe),N(ee,l,xe).map(Ne=>(e.onCollapseMenu(ee,de,Ne),Ne))))},J=ee=>(de,me)=>Bl(me.getSource(),`.${e.markers.item}`).bind(xe=>de.getSystem().getByDom(xe).toOptional().bind(Ne=>ee(de,Ne).map(mn))),Q=Mr([Ct(wC(),(ee,de)=>{l.lookupItem(m(de.event.item)).each(()=>{Zr.highlight(ee,de.event.menu);const Ne=m(de.event.item);l.refresh(Ne).each(Ge=>k(ee,l,Ge))})}),Ec((ee,de)=>{const me=de.event.target;ee.getSystem().getByDom(me).each(xe=>{0===m(xe).indexOf("collapse-item")&&U(ee,xe),z(ee,xe,L.HighlightSubmenu).fold(()=>{e.onExecute(ee,xe)},At)})}),ys((ee,de)=>{(me=>{const xe=(Ge=me,Et=e.data.primary,Gn(e.data.menus,(Ot,so)=>{const _o=()=>wh.sketch({...Ot,value:so,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(go,Uo)=>{Co(go,SC,{menuComp:go,itemComp:Uo})},onDehighlight:(go,Uo)=>{Co(go,E1,{menuComp:go,itemComp:Uo})},focusManager:e.fakeFocus?Vx():zx()});return so===Et?{type:"prepared",menu:Ge.getSystem().build(_o())}:{type:"notbuilt",nbMenu:_o}})),Ne=Gn(e.data.menus,(de,me)=>Yt(de.items,xe=>"separator"===xe.type?[]:[xe.data.value]));var Ge,Et;return l.setContents(e.data.primary,xe,e.data.expansions,Ne),l.getPrimary()})(ee).each(me=>{pn.append(ee,sc(me)),e.onOpenMenu(ee,me),e.highlightOnOpen===Qi.HighlightMenuAndItem?y(ee,me):e.highlightOnOpen===Qi.HighlightJustMenu&&b(ee,me)})}),Ct(SC,(ee,de)=>{e.onHighlightItem(ee,de.event.menuComp,de.event.itemComp)}),Ct(E1,(ee,de)=>{e.onDehighlightItem(ee,de.event.menuComp,de.event.itemComp)}),...e.navigateOnHover?[Ct(pC(),(ee,de)=>{const me=de.event.item;((xe,Ne)=>{const Ge=m(Ne);l.refresh(Ge).bind(Et=>(T(xe,Et),N(xe,l,Et)))})(ee,me),z(ee,me,L.HighlightParent),e.onHover(ee,me)})]:[]]),re=ee=>Zr.getHighlighted(ee).bind(Zr.getHighlighted),ce={collapseMenu:ee=>{re(ee).each(de=>{U(ee,de)})},highlightPrimary:ee=>{l.getPrimary().each(de=>{y(ee,de)})},repositionMenus:ee=>{l.getPrimary().bind(me=>re(ee).bind(xe=>{const Ne=m(xe),Ge=ls(l.getMenus()),Et=Dt(Xe(Ge,K4));return l.getTriggeringPath(Ne,_t=>{return _o=_t,is(Et,go=>{if(!go.getSystem().isConnected())return D.none();const Uo=Zr.getCandidates(go);return Ue(Uo,Xo=>m(Xo)===_o)});var _o})}).map(xe=>({primary:me,triggeringPath:xe}))).fold(()=>{var me;(me=ee,D.from(me.components()[0]).filter(xe=>"menu"===Xr(xe.element,"role"))).each(me=>{e.onRepositionMenu(ee,me,[])})},({primary:me,triggeringPath:xe})=>{e.onRepositionMenu(ee,me,xe)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Aa(e.tmenuBehaviours,[Ho.config({mode:"special",onRight:J((ee,de)=>fg(de.element)?D.none():z(ee,de,L.HighlightSubmenu)),onLeft:J((ee,de)=>fg(de.element)?D.none():U(ee,de)),onEscape:J((ee,de)=>U(ee,de).orThunk(()=>e.onEscape(ee,de).map(()=>ee))),focusIn:(ee,de)=>{l.getPrimary().each(me=>{Kh(ee,me.element,Xm())})}}),Zr.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),dr.config({find:ee=>Zr.getHighlighted(ee)}),pn.config({})]),eventOrder:e.eventOrder,apis:ce,events:Q}},extraApis:{tieredData:(e,r,a)=>({primary:e,menus:r,expansions:a}),singleData:(e,r)=>({primary:e,menus:vu(e,r),expansions:{}}),collapseItem:e=>({value:bo(kC()),meta:{text:e}})}}),Na=lc({name:"InlineView",configFields:[je("lazySink"),cr("onShow"),cr("onHide"),ui("onEscape"),xa("inlineBehaviours",[mr,Ut,Ki]),Jr("fireDismissalEventInstead",[De("event",cm())]),Jr("fireRepositionEventInstead",[De("event",$g())]),De("getRelated",D.none),De("isExtraPart",ot),De("eventOrder",D.none)],factory:(e,r)=>{const a=(b,y,x,k)=>{const T=e.lazySink(b).getOrDie();mr.openWhileCloaked(b,y,()=>Yi.positionWithinBounds(T,b,x,k())),Ut.setValue(b,D.some({mode:"position",config:x,getBounds:k}))},l=(b,y,x,k)=>{const T=((N,L,z,U,J)=>{const Q=()=>N.lazySink(L),re="horizontal"===U.type?{layouts:{onLtr:()=>Uf(),onRtl:()=>Cm()}}:{},ce=ee=>2===ee.length?re:{};return xh.sketch({dom:{tag:"div"},data:U.data,markers:U.menu.markers,highlightOnOpen:U.menu.highlightOnOpen,fakeFocus:U.menu.fakeFocus,onEscape:()=>(mr.close(L),N.onEscape.map(ee=>ee(L)),D.some(!0)),onExecute:()=>D.some(!0),onOpenMenu:(ee,de)=>{Yi.positionWithinBounds(Q().getOrDie(),de,z,J())},onOpenSubmenu:(ee,de,me,xe)=>{const Ne=Q().getOrDie();Yi.position(Ne,me,{anchor:{type:"submenu",item:de,...ce(xe)}})},onRepositionMenu:(ee,de,me)=>{const xe=Q().getOrDie();Yi.positionWithinBounds(xe,de,z,J()),Tt(me,Ne=>{const Ge=ce(Ne.triggeringPath);Yi.position(xe,Ne.triggeredMenu,{anchor:{type:"submenu",item:Ne.triggeringItem,...Ge}})})}})})(e,b,y,x,k);mr.open(b,T),Ut.setValue(b,D.some({mode:"menu",menu:T}))},m=b=>{mr.isOpen(b)&&Ut.getValue(b).each(y=>{switch(y.mode){case"menu":mr.getState(b).each(xh.repositionMenus);break;case"position":const x=e.lazySink(b).getOrDie();Yi.positionWithinBounds(x,b,y.config,y.getBounds())}})},h={setContent:(b,y)=>{mr.setContent(b,y)},showAt:(b,y,x)=>{a(b,y,x,D.none)},showWithinBounds:a,showMenuAt:(b,y,x)=>{l(b,y,x,D.none)},showMenuWithinBounds:l,hide:b=>{mr.isOpen(b)&&(Ut.setValue(b,D.none()),mr.close(b))},getContent:b=>mr.getState(b),reposition:m,isOpen:mr.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Aa(e.inlineBehaviours,[mr.config({isPartOf:(b,y,x)=>{return bm(y,x)||(T=x,e.getRelated(b).exists(N=>bm(N,T)));var T},getAttachPoint:b=>e.lazySink(b).getOrDie(),onOpen:b=>{e.onShow(b)},onClose:b=>{e.onHide(b)}}),Ut.config({store:{mode:"memory",initialValue:D.none()}}),Ki.config({channels:{...La({isExtraPart:r.isExtraPart,...e.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...Jc({...e.fireRepositionEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({}),doReposition:m})}})]),eventOrder:e.eventOrder,apis:h}},apis:{showAt:(e,r,a,l)=>{e.showAt(r,a,l)},showWithinBounds:(e,r,a,l,m)=>{e.showWithinBounds(r,a,l,m)},showMenuAt:(e,r,a,l)=>{e.showMenuAt(r,a,l)},showMenuWithinBounds:(e,r,a,l,m)=>{e.showMenuWithinBounds(r,a,l,m)},hide:(e,r)=>{e.hide(r)},isOpen:(e,r)=>e.isOpen(r),getContent:(e,r)=>e.getContent(r),setContent:(e,r,a)=>{e.setContent(r,a)},reposition:(e,r)=>{e.reposition(r)}}});var fb=tinymce.util.Tools.resolve("tinymce.util.Delay");const Fi=lc({name:"Button",factory:e=>{const r=Zu(e.action),a=e.dom.tag,l=m=>Kt(e.dom,"attributes").bind(h=>Kt(h,m));return{uid:e.uid,dom:e.dom,components:e.components,events:r,behaviours:Ni(e.buttonBehaviours,[nn.config({}),Ho.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===a?{type:l("type").getOr("button"),...l("role").map(m=>({role:m})).getOr({})}:{role:e.role.getOr(l("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[De("uid",void 0),je("dom"),De("components",[]),fi("buttonBehaviours",[nn,Ho]),Zn("action"),Zn("role"),De("eventOrder",{})]}),es=e=>{const r=void 0!==e.uid&&bs(e,"uid")?e.uid:Xg("memento");return{get:a=>a.getSystem().getByUid(r).getOrDie(),getOpt:a=>a.getSystem().getByUid(r).toOptional(),asSpec:()=>({...e,uid:r})}};var od=tinymce.util.Tools.resolve("tinymce.util.I18n");const Fy={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},zy="temporary-placeholder",bb=e=>()=>Kt(e,zy).getOr("!not found!"),EC=(e,r)=>{const a=e.toLowerCase();if(od.isRtl()){const l=si(m=a,"-rtl")?m:m+"-rtl";return Wo(r,l)?l:a}var m;return a},OC=(e,r)=>Kt(r,EC(e,r)),TC=(e,r)=>{const a=r();return OC(e,a).getOrThunk(bb(a))},AC=()=>On("add-focusable",[ys(e=>{fm(e.element,"svg").each(r=>Bo(r,"focusable","false"))})]),NC=(e,r,a,l)=>{var m,h;const b=(x=r,od.isRtl()&&Wo(Fy,x)?["tox-icon--flip"]:[]),y=Kt(a,EC(r,a)).or(l).getOrThunk(bb(a));var x;return{dom:{tag:e.tag,attributes:null!==(m=e.attributes)&&void 0!==m?m:{},classes:e.classes.concat(b),innerHtml:y},behaviours:Vt([...null!==(h=e.behaviours)&&void 0!==h?h:[],AC()])}},tu=(e,r,a,l=D.none())=>NC(r,e,a(),l),sA={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wg=lc({name:"Notification",factory:e=>{const r=es({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Vt([pn.config({})])}),a=T=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${T}%`}}}),l=T=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${T}%`}}),m=es({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:Vt([pn.config({})])}),h={updateProgress:(T,N)=>{T.getSystem().isConnected()&&m.getOpt(T).each(L=>{pn.set(L,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(N)]},l(N)])})},updateText:(T,N)=>{if(T.getSystem().isConnected()){const L=r.get(T);pn.set(L,[Ks(N)])}}},b=en([e.icon.toArray(),e.level.toArray(),e.level.bind(T=>D.from(sA[T])).toArray()]),y=es(Fi.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[tu("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:T=>{e.onAction(T)}})),k=[((T,N,L)=>{const z=L(),U=Ue(T,J=>Wo(z,EC(J,z)));return NC({tag:"div",classes:["tox-notification__icon"]},U.getOr(zy),z,D.none())})(b,0,e.iconProvider),{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Vt([pn.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(T=>["tox-notification","tox-notification--in",`tox-notification--${T}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Vt([nn.config({}),On("notification-events",[Ct(_c(),T=>{y.getOpt(T).each(nn.focus)})])]),components:k.concat(e.progress?[m.asSpec()]:[]).concat(e.closeButton?[y.asSpec()]:[]),apis:h}},configFields:[Zn("level"),je("progress"),Zn("icon"),je("onAction"),je("text"),je("iconProvider"),je("translationProvider"),mi("closeButton",!0)],apis:{updateProgress:(e,r,a)=>{e.updateProgress(r,a)},updateText:(e,r,a)=>{e.updateText(r,a)}}});var Cd,ju,O1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ch=tinymce.util.Tools.resolve("tinymce.EditorManager"),Hl=tinymce.util.Tools.resolve("tinymce.Env");(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(Cd||(Cd={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(ju||(ju={}));const xs=e=>r=>r.options.get(e),T1=e=>r=>D.from(e(r)),MC=e=>{const r=Hl.deviceType.isPhone(),a=Hl.deviceType.isTablet()||r,l=e.options.register,m=b=>No(b)||!1===b,h=b=>No(b)||lo(b);l("skin",{processor:b=>No(b)||!1===b,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:h,default:Math.max(e.getElement().offsetHeight,400)}),l("width",{processor:h,default:O1.DOM.getStyle(e.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:b=>No(b)||Is(b),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:b=>Is(b)||No(b)||Ar(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),X(9,b=>{l("toolbar"+(b+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:ju.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:e.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:m,default:"#top"}),l("anchor_bottom",{processor:m,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:b=>"both"===b||Is(b),default:!Hl.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},Vy=xs("readonly"),RC=xs("height"),A1=xs("width"),vb=T1(xs("min_width")),Zy=T1(xs("min_height")),yb=T1(xs("max_width")),jy=T1(xs("max_height")),Uy=T1(xs("style_formats")),Wy=xs("style_formats_merge"),N1=xs("style_formats_autohide"),wb=xs("content_langs"),DC=xs("removed_menuitems"),Lp=xs("toolbar_mode"),$y=xs("toolbar_groups"),qy=xs("toolbar_location"),X4=xs("fixed_toolbar_container"),BC=xs("fixed_toolbar_container_target"),LC=xs("toolbar_persist"),Y4=xs("toolbar_sticky_offset"),IC=xs("menubar"),M1=xs("toolbar"),HC=xs("file_picker_callback"),PC=xs("file_picker_validator_handler"),J4=xs("font_size_input_default_unit"),Gy=xs("file_picker_types"),Q4=xs("typeahead_urls"),FC=xs("anchor_top"),Ky=xs("anchor_bottom"),xb=xs("draggable_modal"),zC=xs("statusbar"),e3=xs("elementpath"),Xy=xs("branding"),_h=xs("resize"),t3=xs("paste_as_text"),o3=xs("sidebar_show"),Yy=xs("promotion"),Jy=e=>!1===e.options.get("skin"),Cb=e=>!1!==e.options.get("menubar"),VC=e=>{const r=e.options.get("skin_url");if(Jy(e))return r;if(r)return e.documentBaseURI.toAbsolute(r);{const a=e.options.get("skin");return Ch.baseURL+"/skins/ui/"+a}},Qy=e=>e.options.get("line_height_formats").split(" "),_b=e=>{const r=M1(e),a=No(r),l=Ar(r)&&r.length>0;return!Sb(e)&&(l||a||!0===r)},Ip=e=>{const r=X(9,l=>e.options.get("toolbar"+(l+1))),a=Ie(r,No);return Vs(a.length>0,a)},Sb=e=>Ip(e).fold(()=>{const r=M1(e);return jn(r,No)&&r.length>0},mn),kb=e=>qy(e)===ju.bottom,e2=e=>{var r;if(!e.inline)return D.none();const a=null!==(r=X4(e))&&void 0!==r?r:"";if(a.length>0)return Oa(da(),a);const l=BC(e);return ut(l)?D.some(pe(l)):D.none()},Hp=e=>e.inline&&e2(e).isSome(),Eb=e=>e2(e).getOrThunk(()=>rs(Gr(pe(e.getElement())))),ZC=e=>e.inline&&!Cb(e)&&!_b(e)&&!Sb(e),Ob=e=>(e.options.get("toolbar_sticky")||e.inline)&&!Hp(e)&&!ZC(e),Lm=e=>!Hp(e)&&"split"===e.options.get("ui_mode"),jC=e=>{const r=e.options.get("menu");return Gn(r,a=>({...a,items:a.items}))};var aA=Object.freeze({__proto__:null,get ToolbarMode(){return Cd},get ToolbarLocation(){return ju},register:MC,getSkinUrl:VC,isReadOnly:Vy,isSkinDisabled:Jy,getHeightOption:RC,getWidthOption:A1,getMinWidthOption:vb,getMinHeightOption:Zy,getMaxWidthOption:yb,getMaxHeightOption:jy,getUserStyleFormats:Uy,shouldMergeStyleFormats:Wy,shouldAutoHideStyleFormats:N1,getLineHeightFormats:Qy,getContentLanguages:wb,getRemovedMenuItems:DC,isMenubarEnabled:Cb,isMultipleToolbars:Sb,isToolbarEnabled:_b,isToolbarPersist:LC,getMultipleToolbarsOption:Ip,getUiContainer:Eb,useFixedContainer:Hp,isSplitUiMode:Lm,getToolbarMode:Lp,isDraggableModal:xb,isDistractionFree:ZC,isStickyToolbar:Ob,getStickyToolbarOffset:Y4,getToolbarLocation:qy,isToolbarLocationBottom:kb,getToolbarGroups:$y,getMenus:jC,getMenubar:IC,getToolbar:M1,getFilePickerCallback:HC,getFilePickerTypes:Gy,useTypeaheadUrls:Q4,getAnchorTop:FC,getAnchorBottom:Ky,getFilePickerValidatorHandler:PC,getFontSizeInputDefaultUnit:J4,useStatusBar:zC,useElementPath:e3,promotionEnabled:Yy,useBranding:Xy,getResize:_h,getPasteAsText:t3,getSidebarShow:o3});const n3="[data-mce-autocompleter]",t2=e=>Bl(e,n3);var UC;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(UC||(UC={}));var nd=UC;const Tb="tox-menu-nav__js",o2="tox-collection__item",$C={normal:Tb,color:"tox-swatch"},n2="tox-collection__item--enabled",qC="tox-collection__item-icon",Ab="tox-collection__item-label",R1="tox-collection__item--active",Uu="tox-collection__item-container",r2="tox-collection__item-container--row",Pp=e=>Kt($C,e).getOr(Tb),r3=e=>"color"===e?"tox-swatches":"tox-menu",s2=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:r3(e),tieredMenu:"tox-tiered-menu"}),xg=e=>{const r=s2(e);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:Pp(e)}},GC=(e,r,a)=>{const l=s2(a);return{tag:"div",classes:en([[l.menu,`tox-menu-${r}-column`],e?[l.hasIcons]:[]])}},KC=[wh.parts.items({})],Mb=(e,r,a)=>{const l=s2(a);return{dom:{tag:"div",classes:en([[l.tieredMenu]])},markers:xg(a)}},XC=ne([Zn("data"),De("inputAttributes",{}),De("inputStyles",{}),De("tag","input"),De("inputClasses",[]),cr("onSetValue"),De("styles",{}),De("eventOrder",{}),xa("inputBehaviours",[Ut,nn]),De("selectOnFocus",!0)]),s3=e=>Vt([nn.config({onFocus:e.selectOnFocus?r=>{const a=r.element,l=rc(a);a.dom.setSelectionRange(0,l.length)}:At})]),a3=e=>({...s3(e),...Aa(e.inputBehaviours,[Ut.config({store:{mode:"manual",...e.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>rc(r.element),setValue:(r,a)=>{rc(r.element)!==a&&Xc(r.element,a)}},onSetValue:e.onSetValue})])}),YC=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),Sh=lc({name:"Input",configFields:XC(),factory:(e,r)=>({uid:e.uid,dom:YC(e),components:[],behaviours:a3(e),eventOrder:e.eventOrder})}),JC=bo("refetch-trigger-event"),D1=bo("redirect-menu-item-interaction"),QC="tox-menu__searcher",Rb=e=>Oa(e.element,`.${QC}`).bind(r=>e.getSystem().getByDom(r).toOptional()),e_=Rb,t_=e=>({fetchPattern:Ut.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),i3=e=>{const r=(m,h)=>(h.cut(),D.none()),a=(m,h)=>(Co(m,D1,{interactionEvent:h.event,eventType:h.event.raw.type}),D.some(!0)),l="searcher-events";return{dom:{tag:"div",classes:[o2]},components:[Sh.sketch({inputClasses:[QC,"tox-textfield"],inputAttributes:{...e.placeholder.map(m=>({placeholder:e.i18n(m)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Vt([On(l,[Ct(am(),m=>{Fr(m,JC)}),Ct(Gc(),(m,h)=>{"Escape"===h.event.raw.key&&h.stop()})]),Ho.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Ho.name()]}})]}},Db="tox-collection--results__js",o_=e=>{var r;return e.dom?{...e,dom:{...e.dom,attributes:{...null!==(r=e.dom.attributes)&&void 0!==r?r:{},id:bo("aria-item-search-result-id"),"aria-selected":"false"}}}:e},Bb=(e,r)=>a=>{const l=sr(a,r);return Xe(l,m=>({dom:e,components:m}))},a2=(e,r)=>{const a=[];let l=[];return Tt(e,(m,h)=>{r(m,h)?(l.length>0&&a.push(l),l=[],(Wo(m.dom,"innerHtml")||m.components&&m.components.length>0)&&l.push(m)):l.push(m)}),l.length>0&&a.push(l),Xe(a,m=>({dom:{tag:"div",classes:["tox-collection__group"]},components:m}))},i2=(e,r,a)=>wh.parts.items({preprocess:l=>{const m=Xe(l,a);return"auto"!==e&&e>1?Bb({tag:"div",classes:["tox-collection__group"]},e)(m):a2(m,(h,b)=>"separator"===r[b].type)}}),n_=(e,r,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[i2(e,r,it)]}),Lb=e=>Jo(e,r=>"icon"in r&&void 0!==r.icon),Wu=e=>(console.error(tt(e)),console.log(e),D.none()),l3=(e,r,a,l,m)=>{const h=(b=a,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[wh.parts.items({preprocess:y=>a2(y,(x,k)=>"separator"===b[k].type)})]});var b;return{value:e,dom:h.dom,components:h.components,items:a}},l2=(e,r,a,l,m)=>{if("color"===m.menuType){const h={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[wh.parts.items({preprocess:"auto"!==(b=l)?Bb({tag:"div",classes:["tox-swatches__row"]},b):it})]}]};return{value:e,dom:h.dom,components:h.components,items:a}}var b;if("normal"===m.menuType&&"auto"===l){const h=n_(l,a);return{value:e,dom:h.dom,components:h.components,items:a}}if("normal"===m.menuType||"searchable"===m.menuType){const h="searchable"!==m.menuType?n_(l,a):"search-with-field"===m.searchMode.searchMode?((b,y,x)=>{const k=bo("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===b?["tox-collection--list"]:["tox-collection--grid"])},components:[i3({i18n:od.translate,placeholder:x.placeholder}),{dom:{tag:"div",classes:[...1===b?["tox-collection--list"]:["tox-collection--grid"],Db],attributes:{id:k}},components:[i2(b,y,o_)]}]}})(l,a,m.searchMode):((b,y,x=!0)=>{const k=bo("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Db].concat(1===b?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:k}},components:[i2(b,y,o_)]}})(l,a);return{value:e,dom:h.dom,components:h.components,items:a}}if("listpreview"===m.menuType&&"auto"!==l){const h=(b=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[wh.parts.items({preprocess:Bb({tag:"div",classes:["tox-collection__group"]},b)})]}))(l);return{value:e,dom:h.dom,components:h.components,items:a}}return{value:e,dom:GC(r,l,m.menuType),components:KC,items:a}},Ys=Oo("type"),r_=Oo("name"),Ib=Oo("label"),ou=Oo("text"),s_=Oo("title"),a_=Oo("icon"),B1=Oo("value"),i_=Ir("fetch"),c3=Ir("getSubmenuItems"),Fp=Ir("onAction"),d3=Ir("onItemAction"),kh=Gs("onSetup",()=>At),u3=Pr("name"),Cg=Pr("text"),_d=Pr("icon"),Hb=Pr("tooltip"),zp=Pr("label"),m3=Pr("shortcut"),c2=ui("select"),Pb=mi("active",!1),iA=mi("borderless",!1),Sd=mi("enabled",!0),Fb=mi("primary",!1),l_=e=>De("columns",e),d2=De("meta",{}),u2=Gs("onAction",At),Eh=e=>Ra("type",e),m2=e=>Yn("name","name",V(()=>bo(`${e}-name`)),ae),c_=xt([Ys,Cg]),lA=xt([Eh("autocompleteitem"),Pb,Sd,d2,B1,Cg,_d]),L1=[Sd,Hb,_d,Cg,kh],d_=xt([Ys,Fp].concat(L1)),u_=e=>oo("toolbarbutton",d_,e),g2=[Pb].concat(L1),cA=xt(g2.concat([Ys,Fp])),m_=e=>oo("ToggleButton",cA,e),g_=[Gs("predicate",ot),zl("scope","node",["node","editor"]),zl("position","selection",["node","selection","line"])],g3=L1.concat([Eh("contextformbutton"),Fb,Fp,wr("original",it)]),dA=g2.concat([Eh("contextformbutton"),Fb,Fp,wr("original",it)]),Vp=L1.concat([Eh("contextformbutton")]),h_=g2.concat([Eh("contextformtogglebutton")]),p_=kn("type",{contextformbutton:g3,contextformtogglebutton:dA}),$u=xt([Eh("contextform"),Gs("initValue",ne("")),zp,qs("commands",p_),ga("launch",kn("type",{contextformbutton:Vp,contextformtogglebutton:h_}))].concat(g_)),f_=xt([Eh("contexttoolbar"),Oo("items")].concat(g_)),uA=[Ys,Oo("src"),Pr("alt"),wc("classes",[],ae)],h3=xt(uA),mA=[Ys,ou,u3,wc("classes",["tox-collection__item-label"],ae)],gA=xt(mA),p3=ro(()=>mo("type",{cardimage:h3,cardtext:gA,cardcontainer:Bc})),Bc=xt([Ys,Ra("direction","horizontal"),Ra("align","left"),Ra("valign","middle"),qs("items",p3)]),Lc=[Sd,Cg,m3,Yn("value","value",V(()=>bo("menuitem-value")),W()),d2],hA=xt([Ys,zp,qs("items",p3),kh,u2].concat(Lc)),f3=xt([Ys,Pb,_d].concat(Lc)),zb=[Ys,Oo("fancytype"),u2],b_=[De("initData",{})].concat(zb),b3=[ui("select"),Fd("initData",{},[mi("allowCustomColors",!0),Ra("storageKey","default"),Pd("colors",W())])].concat(zb),pA=kn("fancytype",{inserttable:b_,colorswatch:b3}),fA=xt([Ys,kh,u2,_d].concat(Lc)),Vb=xt([Ys,c3,kh,_d].concat(Lc)),h2=xt([Ys,_d,Pb,kh,Fp].concat(Lc)),v_=(e,r,a)=>{const l=Xi(e.element,"."+a);if(l.length>0){const m=Hs(l,h=>{const b=h.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(b-y)>r}).getOr(l.length);return D.some({numColumns:m,numRows:Math.ceil(l.length/m)})}return D.none()},nu=e=>{return r=bo("unnamed-events"),Vt([On(r,e)]);var r},v3=bo("tooltip.exclusive"),Zb=bo("tooltip.show"),wl=bo("tooltip.hide"),p2=(e,r,a)=>{e.getSystem().broadcastOn([v3],{})};var qu=Object.freeze({__proto__:null,hideAllExclusive:p2,setComponents:(e,r,a,l)=>{a.getTooltip().each(m=>{m.getSystem().isConnected()&&pn.set(m,l)})}}),ms=Object.freeze({__proto__:null,events:(e,r)=>{const a=l=>{r.getTooltip().each(m=>{ic(m),e.onHide(l,m),r.clearTooltip()}),r.clearTimer()};return Mr(en([[Ct(Zb,l=>{r.resetTimer(()=>{(m=>{if(!r.isShowing()){p2(m);const h=e.lazySink(m).getOrDie(),b=m.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Mr("normal"===e.mode?[Ct(Cc(),y=>{Fr(m,Zb)}),Ct(wu(),y=>{Fr(m,wl)})]:[]),behaviours:Vt([pn.config({})])});r.setTooltip(b),Lu(h,b),e.onShow(m,b),Yi.position(h,b,{anchor:e.anchor(m)})}})(l)},e.delay)}),Ct(wl,l=>{r.resetTimer(()=>{a(l)},e.delay)}),Ct(_u(),(l,m)=>{m.universal||Do(m.channels,v3)&&a(l)}),Hi(l=>{a(l)})],"normal"===e.mode?[Ct(_c(),l=>{Fr(l,Zb)}),Ct(yf(),l=>{Fr(l,wl)}),Ct(Cc(),l=>{Fr(l,Zb)}),Ct(wu(),l=>{Fr(l,wl)})]:[Ct(Gh(),(l,m)=>{Fr(l,Zb)}),Ct(qg(),l=>{Fr(l,wl)})]]))}}),Zp=[je("lazySink"),je("tooltipDom"),De("exclusive",!0),De("tooltipComponents",[]),De("delay",300),zl("mode","normal",["normal","follow-highlight"]),De("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:ne([ha,Wl,Ti,Xs,Ai,Ta]),onRtl:ne([ha,Wl,Ti,Xs,Ai,Ta])}})),cr("onHide"),cr("onShow")],f2=Object.freeze({__proto__:null,init:()=>{const e=Ds(),r=Ds(),a=()=>{e.on(clearTimeout)},l=ne("not-implemented");return vl({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:a,resetTimer:(m,h)=>{a(),e.set(setTimeout(m,h))},readState:l})}});const y_=pi({fields:Zp,name:"tooltipping",active:ms,state:f2,apis:qu}),b2="silver.readonly",w_=xt([Vn("readonly",Ve)]),v2=(e,r)=>{const a=e.mainUi.outerContainer.element,l=[e.mainUi.mothership,...e.uiMotherships];r&&Tt(l,m=>{m.broadcastOn([ni()],{target:a})}),Tt(l,m=>{m.broadcastOn([b2],{readonly:r})})},y2=(e,r)=>{e.on("init",()=>{e.mode.isReadOnly()&&v2(r,!0)}),e.on("SwitchMode",()=>v2(r,e.mode.isReadOnly())),Vy(e)&&e.mode.set("readonly")},vi=()=>Ki.config({channels:{[b2]:{schema:w_,onReceive:(e,r)=>{Ko.set(e,r.readonly)}}}}),jp=e=>Ko.config({disabled:e}),x_=e=>Ko.config({disabled:e,disableClass:"tox-tbtn--disabled"}),jb=e=>Ko.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Ub=(e,r)=>{const a=e.getApi(r);return l=>{l(a)}},Gu=(e,r)=>ys(a=>{Ub(e,a)(l=>{const m=e.onSetup(l);pt(m)&&r.set(m)})}),Oh=(e,r)=>Hi(a=>Ub(e,a)(r.get())),bA=(e,r)=>Ec((a,l)=>{Ub(e,a)(e.onAction),e.triggersSubmenu||r!==nd.CLOSE_ON_EXECUTE||(a.getSystem().isConnected()&&Fr(a,ea()),l.stop())}),vA={[bl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},I1=Dt,H1=(e,r,a,l)=>{const m=Io(At);return{type:"item",dom:r.dom,components:I1(r.optComponents),data:e.data,eventOrder:vA,hasSubmenu:e.triggersSubmenu,itemBehaviours:Vt([On("item-events",[bA(e,a),Gu(e,m),Oh(e,m)]),(h=()=>!e.enabled||l.isDisabled(),Ko.config({disabled:h,disableClass:"tox-collection__item--state-disabled"})),vi(),pn.config({})].concat(e.itemBehaviours))};var h},P1=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),yA=e=>{const r=Hl.os.isMacOS()||Hl.os.isiOS(),a=r?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},l=e.split("+");return Xe(l,h=>{const b=h.toLowerCase().trim();return Wo(a,b)?a[b]:h}).join(r?"":"+")},C_=(e,r,a=[qC])=>tu(e,{tag:"div",classes:a},r),y3=e=>({dom:{tag:"div",classes:[Ab]},components:[Ks(od.translate(e))]}),w3=(e,r)=>({dom:{tag:"div",classes:r,innerHtml:e}}),x3=(e,r)=>({dom:{tag:"div",classes:[Ab]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Ks(od.translate(r))]}]}),wA=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Ks(yA(e))]}),C3=e=>C_("checkmark",e,["tox-collection__item-checkmark"]),_3=e=>{const r=e.map(a=>({attributes:{title:od.translate(a),id:bo("menu-item")}})).getOr({});return{tag:"div",classes:[Tb,o2],...r}},Wb=(e,r,a,l=D.none())=>"color"===e.presets?((m,h,b)=>{const y=m.ariaLabel,x=m.value,k=m.iconContent.map(T=>((N,L,z)=>{const U=L();return OC(N,U).or(z).getOrThunk(bb(U))})(T,h.icons,b));return{dom:(()=>{const N=k.getOr(""),z={tag:"div",attributes:y.map(U=>({title:h.translate(U)})).getOr({}),classes:["tox-swatch"]};return"custom"===x?{...z,tag:"button",classes:[...z.classes,"tox-swatches__picker-btn"],innerHtml:N}:"remove"===x?{...z,classes:[...z.classes,"tox-swatch--remove"],innerHtml:N}:ut(x)?{...z,attributes:{...z.attributes,"data-mce-color":x},styles:{"background-color":x},innerHtml:N}:z})(),optComponents:[]}})(e,r,l):((m,h,b,y)=>{const x={tag:"div",classes:[qC]},k=b?m.iconContent.map(z=>tu(z,x,h.icons,y)).orThunk(()=>D.some({dom:x})):D.none(),T=m.checkMark,N=D.from(m.meta).fold(()=>y3,z=>Wo(z,"style")?$n(x3,z.style):y3),L=m.htmlContent.fold(()=>m.textContent.map(N),z=>D.some(w3(z,[Ab])));return{dom:_3(m.ariaLabel),optComponents:[k,L,m.shortcutContent.map(wA),T,m.caret]}})(e,r,a,l),__=(e,r)=>Kt(e,"tooltipWorker").map(a=>[y_.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:nh}}),mode:"follow-highlight",onShow:(l,m)=>{a(h=>{y_.setComponents(l,[_0({element:pe(h)})])})}})]).getOr([]),ru=(e,r)=>{const a=(l=od.translate(e),O1.DOM.encode(l));var l;if(r.length>0){const l=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return a.replace(l,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}return a},S3=(e,r)=>Xe(e,a=>{switch(a.type){case"cardcontainer":return h=a,b=S3(a.items,r),{dom:{tag:"div",classes:[Uu,"vertical"===h.direction?"tox-collection__item-container--column":r2,"left"===h.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",(()=>{switch(h.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:b};case"cardimage":return((h,b,y)=>({dom:{tag:"img",classes:b,attributes:{src:h,alt:y.getOr("")}}}))(a.src,a.classes,a.alt);case"cardtext":const l=a.name.exists(h=>Do(r.cardText.highlightOn,h)),m=l?D.from(r.cardText.matchText).getOr(""):"";return w3(ru(a.text,m),a.classes)}var h,b}),w2=$o(bC(),k1()),S_=e=>({value:T_(e)}),k_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,E_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,O_=e=>k_.test(e)||E_.test(e),T_=e=>Bi(e,"#").toUpperCase(),A_=e=>{const r=e.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},$b=e=>{const r=A_(e.red)+A_(e.green)+A_(e.blue);return S_(r)},N_=Math.min,M_=Math.max,qb=Math.round,F1=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,k3=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,_g=(e,r,a,l)=>({red:e,green:r,blue:a,alpha:l}),x2=e=>{const r=parseInt(e,10);return r.toString()===e&&r>=0&&r<=255},C2=e=>{let r,a,l;const m=(e.hue||0)%360;let h=e.saturation/100,b=e.value/100;if(h=M_(0,N_(h,1)),b=M_(0,N_(b,1)),0===h)return r=a=l=qb(255*b),_g(r,a,l,1);const y=m/60,x=b*h,k=x*(1-Math.abs(y%2-1)),T=b-x;switch(Math.floor(y)){case 0:r=x,a=k,l=0;break;case 1:r=k,a=x,l=0;break;case 2:r=0,a=x,l=k;break;case 3:r=0,a=k,l=x;break;case 4:r=k,a=0,l=x;break;case 5:r=x,a=0,l=k;break;default:r=a=l=0}return r=qb(255*(r+T)),a=qb(255*(a+T)),l=qb(255*(l+T)),_g(r,a,l,1)},Up=e=>{const r=(h=>{const b={value:h.value.replace(k_,(T,N,L,z)=>N+N+L+L+z+z)},y=E_.exec(b.value);return null===y?["FFFFFF","FF","FF","FF"]:y})(e),a=parseInt(r[1],16),l=parseInt(r[2],16),m=parseInt(r[3],16);return _g(a,l,m,1)},_2=(e,r,a,l)=>{const m=parseInt(e,10),h=parseInt(r,10),b=parseInt(a,10),y=parseFloat(l);return _g(m,h,b,y)},S2=e=>{if("transparent"===e)return D.some(_g(0,0,0,0));const r=F1.exec(e);if(null!==r)return D.some(_2(r[1],r[2],r[3],"1"));const a=k3.exec(e);return null!==a?D.some(_2(a[1],a[2],a[3],a[4])):D.none()},E3=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,R_=_g(255,0,0,1),D_=(e,r)=>{e.dispatch("ResizeContent",r)},B_=(e,r)=>{e.dispatch("TextColorChange",r)},O3=(e,r)=>e.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),k2=(e,r)=>()=>{e(),r()},Pl=e=>Th(e,"NodeChange",r=>{r.setEnabled(e.selection.isEditable())}),E2=(e,r)=>a=>{const l=Pl(e)(a),m=(h=e,b=r,y=>{const x=sg(),k=()=>{y.setActive(h.formatter.match(b));const T=h.formatter.formatChanged(b,y.setActive);x.set(T)};return h.initialized?k():h.once("init",k),()=>{h.off("init",k),x.clear()}})(a);var h,b;return()=>{l(),m()}},Th=(e,r,a)=>l=>{const m=()=>a(l),h=()=>{a(l),e.on(r,m)};return e.initialized?h():e.once("init",h),()=>{e.off("init",h),e.off(r,m)}},T3=e=>r=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,r.format)})},Ic=(e,r)=>()=>e.execCommand(r);var Im=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const L_={},I_=e=>Kt(L_,e).getOrThunk(()=>{const r=`tinymce-custom-colors-${e}`,a=Im.getItem(r);if(uo(a)){const m=Im.getItem("tinymce-custom-colors");Im.setItem(r,ut(m)?m:"[]")}const l=((m,h=10)=>{const b=Im.getItem(m),y=No(b)?JSON.parse(b):[],x=h-(k=y).length<0?k.slice(0,h):k;var k;const T=N=>{x.splice(N,1)};return{add:N=>{Nt(x,N).each(T),x.unshift(N),x.length>h&&x.pop(),Im.setItem(m,JSON.stringify(x))},state:()=>x.slice(0)}})(r,10);return L_[e]=l,l}),A3=(e,r)=>{I_(e).add(r)},Gb=(e,r,a)=>({hue:e,saturation:r,value:a}),z1=e=>{let r=0,a=0,l=0;const m=e.red/255,h=e.green/255,b=e.blue/255,y=Math.min(m,Math.min(h,b)),x=Math.max(m,Math.max(h,b));return y===x?(l=y,Gb(0,0,100*l)):(r=m===y?3:b===y?1:5,r=60*(r-(m===y?h-b:b===y?m-h:b-m)/(x-y)),a=(x-y)/x,l=x,Gb(Math.round(r),Math.round(100*a),Math.round(100*l)))},O2=e=>$b(C2(e)),H_=e=>{return(r=e,O_(r)?D.some({value:T_(r)}):D.none()).orThunk(()=>S2(e).map($b)).getOrThunk(()=>{const a=document.createElement("canvas");a.height=1,a.width=1;const l=a.getContext("2d");l.clearRect(0,0,a.width,a.height),l.fillStyle="#FFFFFF",l.fillStyle=e,l.fillRect(0,0,1,1);const m=l.getImageData(0,0,1,1).data;return $b(_g(m[0],m[1],m[2],m[3]))});var r},T2="forecolor",Kb="hilitecolor",A2=e=>Math.max(5,Math.ceil(Math.sqrt(e))),Xb=(e,r)=>{const a=A2(r),l=Ku("color_cols")(e);return 5===a?l:a},N3=e=>{const r=[];for(let a=0;a<e.length;a+=2)r.push({text:e[a+1],value:"#"+H_(e[a]).value,icon:"checkmark",type:"choiceitem"});return r},Ku=e=>r=>r.options.get(e),su="#000000",N2=(e,r)=>{const a=(l=e,(m=r)===T2?Ku("color_cols_foreground")(l):m===Kb?Ku("color_cols_background")(l):Ku("color_cols")(l));var l,m;return a>0?a:5},qa=Ku("custom_colors"),V1=(e,r)=>r===T2&&e.options.isSet("color_map_foreground")?Ku("color_map_foreground")(e):r===Kb&&e.options.isSet("color_map_background")?Ku("color_map_background")(e):Ku("color_map")(e),M3=Ku("color_default_foreground"),R3=Ku("color_default_background"),P_=(e,r)=>{const a=pe(e.selection.getStart()),l="hilitecolor"===r?Da(a,m=>{if(ho(m)){const h=Ts(m,"background-color");return Vs(S2(h).exists(b=>0!==b.alpha),h)}return D.none()}).getOr("rgba(0, 0, 0, 0)"):Ts(a,"color");return S2(l).map(m=>"#"+$b(m).value)},F_=e=>{const r="choiceitem",a={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[a,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},M2=(e,r,a,l)=>{"custom"===a?H3(e)(m=>{m.each(h=>{A3(r,h),e.execCommand("mceApplyTextcolor",r,h),l(h)})},P_(e,r).getOr(su)):"remove"===a?(l(""),e.execCommand("mceRemoveTextcolor",r)):(l(a),e.execCommand("mceApplyTextcolor",r,a))},D3=(e,r,a)=>{return e.concat((l=r,Xe(I_(l).state(),m=>({type:"choiceitem",text:m,icon:"checkmark",value:m}))).concat(F_(a)));var l},B3=(e,r,a)=>l=>{l(D3(e,r,a))},R2=(e,r,a)=>{e.setIconFill("forecolor"===r?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",a)},D2=(e,r)=>a=>{const l=P_(e,r);return cs(l,a.toUpperCase())},L3=(e,r,a,l,m)=>{e.ui.registry.addSplitButton(r,{tooltip:l,presets:"color",icon:"forecolor"===r?"text-color":"highlight-bg-color",select:D2(e,a),columns:N2(e,a),fetch:B3(V1(e,a),a,qa(e)),onAction:h=>{M2(e,a,m.get(),At)},onItemAction:(h,b)=>{M2(e,a,b,y=>{m.set(y),B_(e,{name:r,color:y})})},onSetup:h=>{R2(h,r,m.get());const b=y=>{y.name===r&&R2(h,y.name,y.color)};return e.on("TextColorChange",b),k2(Pl(e)(h),()=>{e.off("TextColorChange",b)})}})},I3=(e,r,a,l,m)=>{e.ui.registry.addNestedMenuItem(r,{text:l,icon:"forecolor"===r?"text-color":"highlight-bg-color",onSetup:h=>(R2(h,r,m.get()),Pl(e)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:D2(e,a),initData:{storageKey:a},onAction:h=>{M2(e,a,h.value,b=>{m.set(b),B_(e,{name:r,color:b})})}}]})},H3=e=>(r,a)=>{let l=!1;e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:a},onAction:(h,b)=>{"hex-valid"===b.name&&(l=b.value)},onSubmit:h=>{const b=h.getData().colorpicker;l?(r(D.from(b)),h.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",b]))},onClose:At,onCancel:()=>{r(D.none())}})},B2=(e,r,a,l,m,h,b,y)=>{const x=Lb(r),k=P3(r,a,l,"color"!==m?"normal":"color",h,b,y);return l2(e,x,k,l,{menuType:m})},P3=(e,r,a,l,m,h,b)=>Dt(Xe(e,y=>{return"choiceitem"===y.type?(x=y,oo("choicemenuitem",f3,x)).fold(Wu,k=>D.some(((T,N,L,z,U,J,Q,re=!0)=>{const ce=Wb({presets:L,textContent:N?T.text:D.none(),htmlContent:D.none(),ariaLabel:T.text,iconContent:T.icon,shortcutContent:N?T.shortcut:D.none(),checkMark:N?D.some(C3(Q.icons)):D.none(),caret:D.none(),value:T.value},Q,re);return Un(H1({data:P1(T),enabled:T.enabled,getApi:ee=>({setActive:de=>{Ln.set(ee,de)},isActive:()=>Ln.isOn(ee),isEnabled:()=>!Ko.isDisabled(ee),setEnabled:de=>Ko.set(ee,!de)}),onAction:ee=>z(T.value),onSetup:ee=>(ee.setActive(U),At),triggersSubmenu:!1,itemBehaviours:[]},ce,J,Q),{toggling:{toggleClass:n2,toggleOnExecute:!1,selected:T.active,exclusive:!0}})})(k,1===a,l,r,h(k.value),m,b,Lb(e)))):D.none();var x})),L2=(e,r)=>{const a=xg(r);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===r?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>"color"===r?Oa(l.element,"[aria-checked=true]"):D.none()}},F3=bo("cell-over"),z_=bo("cell-execute"),xA=(e,r,a)=>{const l=h=>Co(h,z_,{row:e,col:r}),m=(h,b)=>{b.stop(),l(h)};return ja({dom:{tag:"div",attributes:{role:"button","aria-labelledby":a}},behaviours:Vt([On("insert-table-picker-cell",[Ct(Cc(),nn.focus),Ct(bl(),l),Ct(Sc(),m),Ct(lm(),m)]),Ln.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),nn.config({onFocus:h=>Co(h,F3,{row:e,col:r})})])})},CA=e=>Yt(e,r=>Xe(r,sc)),z3=(e,r)=>Ks(`${r}x${e}`),I2={inserttable:e=>{const r=bo("size-label"),a=((h,b,y)=>{const x=[];for(let k=0;k<10;k++){const T=[];for(let N=0;N<10;N++)T.push(xA(k,N,h));x.push(T)}return x})(r),l=z3(0,0),m=es({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:r}},components:[l],behaviours:Vt([pn.config({})])});return{type:"widget",data:{value:bo("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[w2.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:CA(a).concat(m.asSpec()),behaviours:Vt([On("insert-table-picker",[ys(h=>{pn.set(m.get(h),[l])}),Sf(F3,(h,b,y)=>{const{row:x,col:k}=y.event;((T,N,L,z,U)=>{for(let J=0;J<10;J++)for(let Q=0;Q<10;Q++)Ln.set(T[J][Q],J<=N&&Q<=L)})(a,x,k),pn.set(m.get(h),[z3(x+1,k+1)])}),Sf(z_,(h,b,y)=>{const{row:x,col:k}=y.event;e.onAction({numRows:x+1,numColumns:k+1}),Fr(h,ea())})]),Ho.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,r)=>{const a=((b,y)=>{const x=b.initData.allowCustomColors&&y.colorinput.hasCustomColors();return b.initData.colors.fold(()=>D3(y.colorinput.getColors(b.initData.storageKey),b.initData.storageKey,x),k=>k.concat(F_(x)))})(e,r),l=r.colorinput.getColorCols(e.initData.storageKey),m="color",h={...B2(bo("menu-value"),a,b=>{e.onAction({value:b})},l,m,nd.CLOSE_ON_EXECUTE,e.select.getOr(ot),r.shared.providers),markers:xg(m),movement:L2(l,m)};return{type:"widget",data:{value:bo("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[w2.widget(wh.sketch(h))]}}},Yb=e=>({type:"separator",dom:{tag:"div",classes:[o2,"tox-collection__group-heading"]},components:e.text.map(Ks).toArray()});var H2=Object.freeze({__proto__:null,getCoupled:(e,r,a,l)=>a.getOrCreate(e,r,l),getExistingCoupled:(e,r,a,l)=>a.getExisting(e,r,l)}),Z1=[Vn("others",zo(Mn.value,W()))],V3=Object.freeze({__proto__:null,init:()=>{const e={},r=(l,m)=>{if(0===_r(l.others).length)throw new Error("Cannot find any known coupled components");return Kt(e,m)},a=ne({});return vl({readState:a,getExisting:(l,m,h)=>r(m,h).orThunk(()=>(Kt(m.others,h).getOrDie("No information found for coupled component: "+h),D.none())),getOrCreate:(l,m,h)=>r(m,h).getOrThunk(()=>{const b=Kt(m.others,h).getOrDie("No information found for coupled component: "+h)(l),y=l.getSystem().build(b);return e[h]=y,y})})}});const pa=pi({fields:Z1,name:"coupling",apis:H2,state:V3}),V_=e=>{let r=D.none(),a=[];const l=b=>{m()?h(b):a.push(b)},m=()=>r.isSome(),h=b=>{r.each(y=>{setTimeout(()=>{b(y)},0)})};return e(b=>{m()||(r=D.some(b),Tt(a,h),a=[])}),{get:l,map:b=>V_(y=>{l(x=>{y(b(x))})}),isReady:m}},_A={nu:V_,pure:e=>V_(r=>{r(e)})},SA=e=>{setTimeout(()=>{throw e},0)},j1=e=>{const r=a=>{e().then(a,SA)};return{map:a=>j1(()=>e().then(a)),bind:a=>j1(()=>e().then(l=>a(l).toPromise())),anonBind:a=>j1(()=>e().then(()=>a.toPromise())),toLazy:()=>_A.nu(r),toCached:()=>{let a=null;return j1(()=>(null===a&&(a=e()),a))},toPromise:e,get:r}},Sg=e=>j1(()=>new Promise(e)),rd=e=>j1(()=>Promise.resolve(e)),Ah=ne("sink"),Z_=ne(St({name:Ah(),overrides:ne({dom:{tag:"div"},behaviours:Vt([Yi.config({useFixed:mn})]),events:Mr([Su(Gc()),Su(ti()),Su(Sc())])})})),j_=(e,r)=>{const a=e.getHotspot(r).getOr(r),l="hotspot",m=e.getAnchorOverrides();return e.layouts.fold(()=>({type:l,hotspot:a,overrides:m}),h=>({type:l,hotspot:a,overrides:m,layouts:h}))},Wp=(e,r,a,l,m,h,b)=>((x,k,T,N,L,z,U)=>{const J=(ce=k,(0,x.fetch)(N).map(ce)),Q=Qb(N,x);var ce;return J.map(re=>re.bind(ce=>D.from(xh.sketch({...z.menu(),uid:Xg(""),data:ce,highlightOnOpen:U,onOpenMenu:(ee,de)=>{const me=Q().getOrDie();Yi.position(me,de,{anchor:T}),mr.decloak(L)},onOpenSubmenu:(ee,de,me)=>{const xe=Q().getOrDie();Yi.position(xe,me,{anchor:{type:"submenu",item:de}}),mr.decloak(L)},onRepositionMenu:(ee,de,me)=>{const xe=Q().getOrDie();Yi.position(xe,de,{anchor:T}),Tt(me,Ne=>{Yi.position(xe,Ne.triggeredMenu,{anchor:{type:"submenu",item:Ne.triggeringItem}})})},onEscape:()=>(nn.focus(N),mr.close(L),D.some(!0))}))))})(e,r,j_(e,a),a,l,m,b).map(x=>(x.fold(()=>{mr.isOpen(l)&&mr.close(l)},k=>{mr.cloak(l),mr.open(l,k),h(l)}),l)),Jb=(e,r,a,l,m,h,b)=>(mr.close(l),rd(l)),$p=(e,r,a,l,m,h)=>{const b=pa.getCoupled(a,"sandbox");return(mr.isOpen(b)?Jb:Wp)(e,r,a,b,l,m,h)},Qb=(e,r)=>e.getSystem().getByUid(r.uid+"-"+Ah()).map(a=>()=>Mn.value(a)).getOrThunk(()=>r.lazySink.fold(()=>()=>Mn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(e))),U_=e=>{mr.getState(e).each(r=>{xh.repositionMenus(r)})},W_=(e,r,a)=>{const l=ry(),m=Qb(r,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:Ni(e.sandboxBehaviours,[Ut.config({store:{mode:"memory",initialValue:r}}),mr.config({onOpen:(h,b)=>{const y=j_(e,r);l.link(r.element),e.matchWidth&&((x,k,T)=>{const N=dr.getCurrent(k).getOr(k),L=vr(x.element);T?qo(N.element,"min-width",L+"px"):Fl.set(N.element,L)})(y.hotspot,b,e.useMinWidth),e.onOpen(y,h,b),void 0!==a&&void 0!==a.onOpen&&a.onOpen(h,b)},onClose:(h,b)=>{l.unlink(r.element),void 0!==a&&void 0!==a.onClose&&a.onClose(h,b)},isPartOf:(h,b,y)=>bm(b,y)||bm(r,y),getAttachPoint:()=>m().getOrDie()}),dr.config({find:h=>mr.getState(h).bind(b=>dr.getCurrent(b))}),Ki.config({channels:{...La({isExtraPart:ot}),...Jc({doReposition:U_})}})])}},$_=e=>{const r=pa.getCoupled(e,"sandbox");U_(r)},q_=()=>[De("sandboxClasses",[]),fi("sandboxBehaviours",[dr,Ki,mr,Ut])],kA=ne([je("dom"),je("fetch"),cr("onOpen"),il("onExecute"),De("getHotspot",D.some),De("getAnchorOverrides",ne({})),km(),xa("dropdownBehaviours",[Ln,pa,Ho,nn]),je("toggleClass"),De("eventOrder",{}),Zn("lazySink"),De("matchWidth",!1),De("useMinWidth",!1),Zn("role")].concat(q_())),Z3=ne([dt({schema:[jd(),De("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),Z_()]),sd=ul({name:"Dropdown",configFields:kA(),partFields:Z3(),factory:(e,r,a,l)=>{const m=x=>{mr.getState(x).each(k=>{xh.highlightPrimary(k)})},h=(x,k,T)=>$p(e,it,x,l,k,T),b={expand:x=>{Ln.isOn(x)||h(x,At,Qi.HighlightNone).get(At)},open:x=>{Ln.isOn(x)||h(x,At,Qi.HighlightMenuAndItem).get(At)},refetch:x=>pa.getExistingCoupled(x,"sandbox").fold(()=>h(x,At,Qi.HighlightMenuAndItem).map(At),k=>Wp(e,it,x,k,l,At,Qi.HighlightMenuAndItem).map(At)),isOpen:Ln.isOn,close:x=>{Ln.isOn(x)&&h(x,At,Qi.HighlightMenuAndItem).get(At)},repositionMenus:x=>{Ln.isOn(x)&&$_(x)}},y=(x,k)=>(pd(x),D.some(!0));return{uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.dropdownBehaviours,[Ln.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),pa.config({others:{sandbox:x=>W_(e,x,{onOpen:()=>Ln.on(x),onClose:()=>Ln.off(x)})}}),Ho.config({mode:"special",onSpace:y,onEnter:y,onDown:(x,k)=>{if(sd.isOpen(x)){const T=pa.getCoupled(x,"sandbox");m(T)}else sd.open(x);return D.some(!0)},onEscape:(x,k)=>sd.isOpen(x)?(sd.close(x),D.some(!0)):D.none()}),nn.config({})]),events:Zu(D.some(x=>{h(x,m,Qi.HighlightMenuAndItem).get(At)})),eventOrder:{...e.eventOrder,[bl()]:["disabling","toggling","alloy.base.behaviour"]},apis:b,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),x=>({role:x})),..."button"===e.dom.tag?{type:Kt(e.dom,"attributes").bind(x=>Kt(x,"type")).getOr("button")}:{}}}}},apis:{open:(e,r)=>e.open(r),refetch:(e,r)=>e.refetch(r),expand:(e,r)=>e.expand(r),close:(e,r)=>e.close(r),isOpen:(e,r)=>e.isOpen(r),repositionMenus:(e,r)=>e.repositionMenus(r)}}),j3=(e,r,a)=>{e_(e).each(l=>{var m,h;h=l,vs(a.element,"id").each(y=>Bo(h.element,"aria-activedescendant",y)),(Gi((m=r).element,Db)?D.some(m.element):Oa(m.element,"."+Db)).each(h=>{vs(h,"id").each(b=>Bo(l.element,"aria-controls",b))})}),Bo(a.element,"aria-selected","true")},U3=(e,r,a)=>{Bo(a.element,"aria-selected","false")},U1=e=>pa.getExistingCoupled(e,"sandbox").bind(Rb).map(t_).map(r=>r.fetchPattern).getOr("");var P2;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(P2||(P2={}));const ad=(e,r,a,l,m,h)=>{const b=Lb(r),y=Dt(Xe(r,k=>{const T=N=>((e,r,a,l,m)=>{const h=a.shared.providers,b=x=>m?{...x,shortcut:D.none(),icon:x.text.isSome()?D.none():x.icon}:x;switch(e.type){case"menuitem":return(y=e,oo("menuitem",fA,y)).fold(Wu,x=>D.some(((k,T,N,L=!0)=>{const z=Wb({presets:"normal",iconContent:k.icon,textContent:k.text,htmlContent:D.none(),ariaLabel:k.text,caret:D.none(),checkMark:D.none(),shortcutContent:k.shortcut},N,L);return H1({data:P1(k),getApi:U=>({isEnabled:()=>!Ko.isDisabled(U),setEnabled:J=>Ko.set(U,!J)}),enabled:k.enabled,onAction:k.onAction,onSetup:k.onSetup,triggersSubmenu:!1,itemBehaviours:[]},z,T,N)})(b(x),r,h,l)));case"nestedmenuitem":return(x=e,oo("nestedmenuitem",Vb,x)).fold(Wu,x=>D.some(((k,T,N,L=!0,z=!1)=>{const U=C_(z?"chevron-down":"chevron-right",N.icons,["tox-collection__item-caret"]),Q=Wb({presets:"normal",iconContent:k.icon,textContent:k.text,htmlContent:D.none(),ariaLabel:k.text,caret:D.some(U),checkMark:D.none(),shortcutContent:k.shortcut},N,L);return H1({data:P1(k),getApi:re=>({isEnabled:()=>!Ko.isDisabled(re),setEnabled:ce=>Ko.set(re,!ce),setIconFill:(ce,ee)=>{Oa(re.element,`svg path[class="${ce}"], rect[class="${ce}"]`).each(de=>{Bo(de,"fill",ee)})}}),enabled:k.enabled,onAction:At,onSetup:k.onSetup,triggersSubmenu:!0,itemBehaviours:[]},Q,T,N)})(b(x),r,h,l,m)));case"togglemenuitem":return(x=>oo("togglemenuitem",h2,x))(e).fold(Wu,x=>D.some(((k,T,N,L=!0)=>{const z=Wb({iconContent:k.icon,textContent:k.text,htmlContent:D.none(),ariaLabel:k.text,checkMark:D.some(C3(N.icons)),caret:D.none(),shortcutContent:k.shortcut,presets:"normal",meta:k.meta},N,L);return Un(H1({data:P1(k),enabled:k.enabled,getApi:U=>({setActive:J=>{Ln.set(U,J)},isActive:()=>Ln.isOn(U),isEnabled:()=>!Ko.isDisabled(U),setEnabled:J=>Ko.set(U,!J)}),onAction:k.onAction,onSetup:k.onSetup,triggersSubmenu:!1,itemBehaviours:[]},z,T,N),{toggling:{toggleClass:n2,toggleOnExecute:!1,selected:k.active}})})(b(x),r,h,l)));case"separator":return(x=>oo("separatormenuitem",c_,x))(e).fold(Wu,x=>D.some(Yb(x)));case"fancymenuitem":return(x=>oo("fancymenuitem",pA,x))(e).fold(Wu,x=>{return T=a,Kt(I2,(k=x).fancytype).map(N=>N(k,T));var k,T});default:return console.error("Unknown item in general menu",e),D.none()}var x,y})(N,a,l,m?!Wo(N,"text"):b,m);return"nestedmenuitem"===k.type&&k.getSubmenuItems().length<=0?T({...k,enabled:!1}):T(k)})),x="no-search"===(k=h).searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:k};var k;return(m?l3:l2)(e,b,y,1,x)},ev=e=>xh.singleData(e.value,e),OA=["visible","hidden"],$3=e=>{if(Eo(e)){const r=Ts(e,"overflow");return Sa(r).length>0&&!Do(OA,r)}return!1},W1=(e,r)=>Lm(e)?(a=>{const l=K0(a,$3),m=0===l.length?Fs(a).map(Kr).map(h=>K0(h,$3)).getOr([]):l;return qr(m).map(h=>({element:h,others:m.slice(1)}))})(r):D.none(),tv=e=>{const r=[...Xe(e.others,ma),$s()];return a=ma(e.element),Gt(r,(m,h)=>Ea(m,h),a);var a},$1=(e,r,a)=>Bl(e,r,a).isSome(),q3=(e,r)=>{let a=null;return{cancel:()=>{null!==a&&(clearTimeout(a),a=null)},schedule:(...l)=>{a=setTimeout(()=>{e.apply(null,l),a=null},r)}}},G_=e=>{const r=e.raw;return void 0===r.touches||1!==r.touches.length?D.none():D.some(r.touches[0])},K_=(e,r)=>{const a=Kt(e,"target").getOr(r);return Io(a)},ov=Rl([{stopped:[]},{resume:["element"]},{complete:[]}]),z2=(e,r,a,l,m,h)=>{const b=e(r,l),y=((x,k)=>{const T=Io(!1),N=Io(!1);return{stop:()=>{T.set(!0)},cut:()=>{N.set(!0)},isStopped:T.get,isCut:N.get,event:x,setSource:k.set,getSource:k.get}})(a,m);return b.fold(()=>(h.logEventNoHandlers(r,l),ov.complete()),x=>{const k=x.descHandler;return np(k)(y),y.isStopped()?(h.logEventStopped(r,x.element,k.purpose),ov.stopped()):y.isCut()?(h.logEventCut(r,x.element,k.purpose),ov.complete()):Lt(x.element).fold(()=>(h.logNoParent(r,x.element,k.purpose),ov.complete()),T=>(h.logEventResponse(r,x.element,k.purpose),ov.resume(T)))})},X_=(e,r,a,l,m,h)=>z2(e,r,a,l,m,h).fold(mn,b=>X_(e,r,a,b,m,h),ot),Y_=(e,r,a,l,m)=>{const h=K_(a,l);return X_(e,r,a,l,h,m)},Xu=lc({name:"Container",factory:e=>{const{attributes:r,...a}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...a},components:e.components,behaviours:p1(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[De("components",[]),xa("containerBehaviours",[]),De("events",{}),De("domModification",{}),De("eventOrder",{})]}),J_=e=>{const r=Q=>Lt(e.element).fold(mn,re=>Zo(Q,re)),a=(()=>{const e=(()=>{const l={};return{registerId:(m,h,b)=>{Pn(b,(y,x)=>{const k=void 0!==l[x]?l[x]:{};var T;k[h]={cHandler:$n.apply(void 0,[(T=y).handler].concat(m)),purpose:T.purpose},l[x]=k})},unregisterId:m=>{Pn(l,(h,b)=>{Wo(h,m)&&delete h[m]})},filterByType:m=>Kt(l,m).map(h=>Ao(h,(b,y)=>({id:y,descHandler:b}))).getOr([]),find:(m,h,b)=>Kt(l,h).bind(y=>Da(b,x=>{return k=y,eg(T=x).bind(N=>Kt(k,N)).map(N=>({element:T,descHandler:N}));var k,T},m))}})(),r={},a=l=>{eg(l.element).each(m=>{delete r[m],e.unregisterId(m)})};return{find:(l,m,h)=>e.find(l,m,h),filter:l=>e.filterByType(l),register:l=>{const m=eg((b=l).element).getOrThunk(()=>((x,k)=>{const T=bo(Of+"uid-");return Tf(k,T),T})(0,b.element));var b;bs(r,m)&&((b,y)=>{const x=r[y];if(x!==b)throw new Error('The tagId "'+y+'" is already used by: '+Tc(x.element)+"\nCannot use it for: "+Tc(b.element)+"\nThe conflicting element is"+(na(x.element)?" ":" not ")+"already in the DOM");a(b)})(l,m),e.registerId([l],m,l.events),r[m]=l},unregister:a,getById:l=>Kt(r,l)}})(),l=(Q,re)=>a.find(r,Q,re),m=((e,r)=>{const a={stopBackspace:!0,...r},l=(N=>{const L=Ds(),z=Io(!1),U=q3(Q=>{N.triggerEvent(kx(),Q),z.set(!0)},400),J=tc([{key:sl(),value:Q=>(G_(Q).each(re=>{U.cancel();const ce={x:re.clientX,y:re.clientY,target:Q.target};U.schedule(Q),z.set(!1),L.set(ce)}),D.none())},{key:Dl(),value:Q=>(U.cancel(),G_(Q).each(re=>{L.on(ce=>{((ee,de)=>{const me=Math.abs(ee.clientX-de.x),xe=Math.abs(ee.clientY-de.y);return me>5||xe>5})(re,ce)&&L.clear()})}),D.none())},{key:Ba(),value:Q=>(U.cancel(),L.get().filter(re=>Zo(re.target,Q.target)).map(re=>z.get()?(Q.prevent(),!1):N.triggerEvent(lm(),Q)))}]);return{fireIfReady:(Q,re)=>Kt(J,re).bind(ce=>ce(Q))}})(a),m=Xe(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),N=>oi(e,N,L=>{l.fireIfReady(L,N).each(z=>{z&&L.kill()}),a.triggerEvent(N,L)&&L.kill()})),h=Ds(),b=oi(e,"paste",N=>{l.fireIfReady(N,"paste").each(L=>{L&&N.kill()}),a.triggerEvent("paste",N)&&N.kill(),h.set(setTimeout(()=>{a.triggerEvent($h(),N)},0))}),y=oi(e,"keydown",N=>{var L;a.triggerEvent("keydown",N)?N.kill():a.stopBackspace&&(L=N).raw.which===v4[0]&&!Do(["input","textarea"],Wt(L.target))&&!$1(L.target,'[contenteditable="true"]')&&N.prevent()}),x=oi(e,"focusin",N=>{a.triggerEvent("focusin",N)&&N.kill()}),k=Ds(),T=oi(e,"focusout",N=>{a.triggerEvent("focusout",N)&&N.kill(),k.set(setTimeout(()=>{a.triggerEvent(yf(),N)},0))});return{unbind:()=>{Tt(m,N=>{N.unbind()}),y.unbind(),x.unbind(),T.unbind(),b.unbind(),h.on(clearTimeout),k.on(clearTimeout)}}})(e.element,{triggerEvent:(Q,re)=>al(Q,re.target,ce=>{return Y_(l,Q,me=re,me.target,ce);var me})}),h={debugInfo:ne("real"),triggerEvent:(Q,re,ce)=>{al(Q,re,ee=>Y_(l,Q,ce,re,ee))},triggerFocus:(Q,re)=>{eg(Q).fold(()=>{Ll(Q)},ce=>{al(oc(),Q,ee=>(((de,me,xe,Ne,Ge)=>{const Et=K_(xe,Ne);z2(de,me,xe,Ne,Et,Ge)})(l,oc(),{originator:re,kill:At,prevent:At,target:Q},Q,ee),!1))})},triggerEscape:(Q,re)=>{h.triggerEvent("keydown",Q.element,re.event)},getByUid:Q=>U(Q),getByDom:Q=>J(Q),build:ja,buildOrPatch:sp,addToGui:Q=>{x(Q)},removeFromGui:Q=>{k(Q)},addToWorld:Q=>{b(Q)},removeFromWorld:Q=>{y(Q)},broadcast:Q=>{N(Q)},broadcastOn:(Q,re)=>{L(Q,re)},broadcastEvent:(Q,re)=>{z(Q,re)},isConnected:mn},b=Q=>{Q.connect(h),Fn(Q.element)||(a.register(Q),Tt(Q.components(),b),h.triggerEvent(Ug(),Q.element,{target:Q.element}))},y=Q=>{Fn(Q.element)||(Tt(Q.components(),y),a.unregister(Q)),Q.disconnect()},x=Q=>{Lu(e,Q)},k=Q=>{ic(Q)},T=Q=>{const re=a.filter(_u());Tt(re,ce=>{np(ce.descHandler)(Q)})},N=Q=>{T({universal:!0,data:Q})},L=(Q,re)=>{T({universal:!1,channels:Q,data:re})},z=(Q,re)=>((ce,ee,de)=>{const me=(xe=>{const Ne=Io(!1);return{stop:()=>{Ne.set(!0)},cut:At,isStopped:Ne.get,isCut:ot,event:xe,setSource:Dr("Cannot set source of a broadcasted event"),getSource:Dr("Cannot get source of a broadcasted event")}})(ee);return Tt(ce,xe=>{np(xe.descHandler)(me)}),me.isStopped()})(a.filter(Q),re),U=Q=>a.getById(Q).fold(()=>Mn.error(new Error('Could not find component with uid: "'+Q+'" in system.')),Mn.value),J=Q=>{const re=eg(Q).getOr("not found");return U(re)};return b(e),{root:e,element:e.element,destroy:()=>{m.unbind(),Tl(e.element)},add:x,remove:k,getByUid:U,getByDom:J,addToWorld:b,removeFromWorld:y,broadcast:N,broadcastOn:L,broadcastEvent:z}},X3=ne([De("prefix","form-field"),xa("fieldBehaviours",[dr,Ut])]),Y3=ne([St({schema:[je("dom")],name:"label"}),St({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[je("text")],name:"aria-descriptor"}),et({factory:{sketch:e=>{const r=((a,l)=>{const m={};return Pn(a,(h,b)=>{Do(l,b)||(m[b]=h)}),m})(e,["factory"]);return e.factory.sketch(r)}},schema:[je("factory")],name:"field"})]),$r=ul({name:"FormField",configFields:X3(),partFields:Y3(),factory:(e,r,a,l)=>{const m=Aa(e.fieldBehaviours,[dr.config({find:y=>En(y,e,"field")}),Ut.config({store:{mode:"manual",getValue:y=>dr.getCurrent(y).bind(Ut.getValue),setValue:(y,x)=>{dr.getCurrent(y).each(k=>{Ut.setValue(k,x)})}}})]),h=Mr([ys((y,x)=>{const k=Wa(y,e,["label","field","aria-descriptor"]);k.field().each(T=>{const N=bo(e.prefix);k.label().each(L=>{Bo(L.element,"for",N),Bo(T.element,"id",N)}),k["aria-descriptor"]().each(L=>{const z=bo(e.prefix);Bo(L.element,"id",z),Bo(T.element,"aria-describedby",z)})})})]);return{uid:e.uid,dom:e.dom,components:r,behaviours:m,events:h,apis:{getField:y=>En(y,e,"field"),getLabel:y=>En(y,e,"label")}}},apis:{getField:(e,r)=>e.getField(r),getLabel:(e,r)=>e.getLabel(r)}});var Q_=Object.freeze({__proto__:null,exhibit:(e,r)=>Pi({attributes:tc([{key:r.tabAttr,value:"true"}])})}),J3=[De("tabAttr","data-alloy-tabstop")];const fa=pi({fields:J3,name:"tabstopping",active:Q_});var eS=tinymce.util.Tools.resolve("tinymce.html.Entities");const kd=(e,r,a,l)=>{const m=nv(e,r,a,l);return $r.sketch(m)},nv=(e,r,a,l)=>({dom:V2(a),components:e.toArray().concat([r]),fieldBehaviours:Vt(l)}),V2=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),Nh=(e,r)=>$r.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ks(r.translate(e))]}),Hc=bo("form-component-change"),q1=bo("form-close"),kg=bo("form-cancel"),au=bo("form-action"),qp=bo("form-submit"),Pc=bo("form-block"),Z2=bo("form-unblock"),tS=bo("form-tabchange"),Q3=bo("form-resize"),eE=["input","textarea"],j2=e=>{const r=Wt(e);return Do(eE,r)},U2=(e,r)=>{const a=r.getRoot(e).getOr(e.element);Ws(a,r.invalidClass),r.notify.each(l=>{j2(e.element)&&Bo(e.element,"aria-invalid",!1),l.getContainer(e).each(m=>{Oc(m,l.validHtml)}),l.onValid(e)})},Gp=(e,r,a,l)=>{const m=r.getRoot(e).getOr(e.element);Us(m,r.invalidClass),r.notify.each(h=>{j2(e.element)&&Bo(e.element,"aria-invalid",!0),h.getContainer(e).each(b=>{Oc(b,l)}),h.onInvalid(e,l)})},oS=(e,r,a)=>r.validator.fold(()=>rd(Mn.value(!0)),l=>l.validate(e)),W2=(e,r,a)=>(r.notify.each(l=>{l.onValidate(e)}),oS(e,r).map(l=>e.getSystem().isConnected()?l.fold(m=>(Gp(e,r,0,m),Mn.error(m)),m=>(U2(e,r),Mn.value(m))):Mn.error("No longer in system")));var tE=Object.freeze({__proto__:null,markValid:U2,markInvalid:Gp,query:oS,run:W2,isInvalid:(e,r)=>{const a=r.getRoot(e).getOr(e.element);return Gi(a,r.invalidClass)}}),$2=Object.freeze({__proto__:null,events:(e,r)=>e.validator.map(a=>Mr([Ct(a.onEvent,l=>{W2(l,e).get(it)})].concat(a.validateOnLoad?[ys(l=>{W2(l,e).get(At)})]:[]))).getOr({})}),TA=[je("invalidClass"),De("getRoot",D.none),Jr("notify",[De("aria","alert"),De("getContainer",D.none),De("validHtml",""),cr("onValid"),cr("onInvalid"),cr("onValidate")]),Jr("validator",[je("validate"),De("onEvent","input"),De("validateOnLoad",!0)])];const Hm=pi({fields:TA,name:"invalidating",active:$2,apis:tE,extra:{validation:e=>r=>{const a=Ut.getValue(r);return rd(e(a))}}}),G1=pi({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Mr([Yh(vf(),mn)]),exhibit:()=>Pi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),nS=bo("color-input-change"),q2=bo("color-swatch-change"),rS=bo("color-picker-cancel"),ql=St({schema:[je("dom")],name:"label"}),Eg=e=>St({name:e+"-edge",overrides:r=>r.model.manager.edgeActions[e].fold(()=>({}),a=>({events:Mr([_f(sl(),(l,m,h)=>a(l,h),[r]),_f(ti(),(l,m,h)=>a(l,h),[r]),_f(xc(),(l,m,h)=>{h.mouseIsDown.get()&&a(l,h)},[r])])}))}),AA=Eg("top-left"),NA=Eg("top"),oE=Eg("top-right"),MA=Eg("right"),RA=Eg("bottom-right"),DA=Eg("bottom"),nE=Eg("bottom-left");var Pm=[ql,Eg("left"),MA,NA,DA,AA,oE,nE,RA,et({name:"thumb",defaults:ne({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Mr([Kg(sl(),e,"spectrum"),Kg(Dl(),e,"spectrum"),Kg(Ba(),e,"spectrum"),Kg(ti(),e,"spectrum"),Kg(xc(),e,"spectrum"),Kg(xu(),e,"spectrum")])})}),et({schema:[wr("mouseIsDown",()=>Io(!1))],name:"spectrum",overrides:e=>{const r=e.model.manager,a=(l,m)=>r.getValueFromEvent(m).map(h=>r.setValueFrom(l,e,h));return{behaviours:Vt([Ho.config({mode:"special",onLeft:l=>r.onLeft(l,e),onRight:l=>r.onRight(l,e),onUp:l=>r.onUp(l,e),onDown:l=>r.onDown(l,e)}),nn.config({})]),events:Mr([Ct(sl(),a),Ct(Dl(),a),Ct(ti(),a),Ct(xc(),(l,m)=>{e.mouseIsDown.get()&&a(l,m)})])}}})];const Kp=ne("slider.change.value"),G2=e=>{const r=e.event.raw;if(-1!==r.type.indexOf("touch")){const a=r;return void 0!==a.touches&&1===a.touches.length?D.some(a.touches[0]).map(l=>Kn(l.clientX,l.clientY)):D.none()}{const a=r;return void 0!==a.clientX?D.some(a).map(l=>Kn(l.clientX,l.clientY)):D.none()}},Fm=e=>e.model.minX,Og=e=>e.model.minY,K2=e=>e.model.minX-1,X2=e=>e.model.minY-1,Xp=e=>e.model.maxX,Mh=e=>e.model.maxY,Ed=e=>e.model.maxX+1,Yp=e=>e.model.maxY+1,rE=(e,r,a)=>r(e)-a(e),sS=e=>rE(e,Xp,Fm),Y2=e=>rE(e,Mh,Og),aS=e=>sS(e)/2,J2=e=>Y2(e)/2,Tg=e=>e.stepSize,K1=e=>e.snapToGrid,X1=e=>e.snapStart,iS=e=>e.rounded,rv=(e,r)=>void 0!==e[r+"-edge"],sE=e=>rv(e,"left"),aE=e=>rv(e,"right"),iE=e=>rv(e,"top"),lS=e=>rv(e,"bottom"),zm=e=>e.model.value.get(),Ag=(e,r)=>({x:e,y:r}),iu=(e,r)=>{Co(e,Kp(),{value:r})},Q2=(e,r,a,l)=>e<r?e:e>a?a:e===r?r-1:Math.max(r,e-l),Jp=(e,r,a,l)=>e>a?e:e<r?r:e===a?a+1:Math.min(a,e+l),cS=(e,r,a)=>Math.max(r,Math.min(a,e)),lE=e=>{const{min:r,max:a,range:l,value:m,step:h,snap:b,snapStart:y,rounded:x,hasMinEdge:k,hasMaxEdge:T,minBound:N,maxBound:L,screenRange:z}=e,U=k?r-1:r,J=T?a+1:a;if(m<N)return U;if(m>L)return J;{const Q=(ee=N,Math.min(L,Math.max(m,ee))-ee),re=cS(Q/z*l+r,U,J);return b&&re>=r&&re<=a?((ce,ee,de,me,xe)=>xe.fold(()=>{const Ge=Math.round((ce-ee)/me)*me;return cS(ee+Ge,ee-1,de+1)},Ne=>{const Et=Math.round((ce-Ne)%me/me),_t=Math.floor((ce-Ne)/me),Ot=Math.floor((de-Ne)/me),so=Ne+Math.min(Ot,_t+Et)*me;return Math.max(Ne,so)}))(re,r,a,h,y):x?Math.round(re):re}var ee},cE=e=>{const{min:r,max:a,range:l,value:m,hasMinEdge:h,hasMaxEdge:b,maxBound:y,maxOffset:x,centerMinEdge:k,centerMaxEdge:T}=e;return m<r?h?0:k:m>a?b?y:T:(m-r)/l*x},Yu="left",lu=e=>e.element.dom.getBoundingClientRect(),Od=(e,r)=>e[r],sv=e=>{const r=lu(e);return Od(r,Yu)},ow=e=>{const r=lu(e);return Od(r,"right")},av=e=>{const r=lu(e);return Od(r,"top")},iv=e=>{const r=lu(e);return Od(r,"bottom")},uS=e=>{const r=lu(e);return Od(r,"width")},mS=e=>{const r=lu(e);return Od(r,"height")},dE=(e,r,a)=>(e+r)/2-a,gS=(e,r)=>{const a=lu(e),l=lu(r),m=Od(a,Yu),h=Od(a,"right"),b=Od(l,Yu);return dE(m,h,b)},hS=(e,r)=>{const a=lu(e),l=lu(r),m=Od(a,"top"),h=Od(a,"bottom"),b=Od(l,"top");return dE(m,h,b)},nw=(e,r)=>{Co(e,Kp(),{value:r})},pS=(e,r,a)=>{const l={min:Fm(r),max:Xp(r),range:sS(r),value:a,step:Tg(r),snap:K1(r),snapStart:X1(r),rounded:iS(r),hasMinEdge:sE(r),hasMaxEdge:aE(r),minBound:sv(e),maxBound:ow(e),screenRange:uS(e)};return lE(l)},uE=e=>(r,a)=>((l,m,h)=>{const b=(l>0?Jp:Q2)(zm(h),Fm(h),Xp(h),Tg(h));return nw(m,b),D.some(b)})(e,r,a).map(mn),Y1=(e,r,a,l,m,h)=>{const b=((y,x,k,T,N)=>{const L=uS(y),z=T.bind(Q=>D.some(gS(Q,y))).getOr(0),U=N.bind(Q=>D.some(gS(Q,y))).getOr(L),J={min:Fm(x),max:Xp(x),range:sS(x),value:k,hasMinEdge:sE(x),hasMaxEdge:aE(x),minBound:sv(y),minOffset:0,maxBound:ow(y),maxOffset:L,centerMinEdge:z,centerMaxEdge:U};return cE(J)})(r,h,a,l,m);return sv(r)-sv(e)+b},mE=uE(-1),gE=uE(1),fS=D.none,hE=D.none,BA={"top-left":D.none(),top:D.none(),"top-right":D.none(),right:D.some((e,r)=>{iu(e,Ed(r))}),"bottom-right":D.none(),bottom:D.none(),"bottom-left":D.none(),left:D.some((e,r)=>{iu(e,K2(r))})};var pE=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=pS(e,r,a);return nw(e,l),l},setToMin:(e,r)=>{const a=Fm(r);nw(e,a)},setToMax:(e,r)=>{const a=Xp(r);nw(e,a)},findValueOfOffset:pS,getValueFromEvent:e=>G2(e).map(r=>r.left),findPositionOfValue:Y1,setPositionFromValue:(e,r,a,l)=>{const m=zm(a),h=Y1(e,l.getSpectrum(e),m,l.getLeftEdge(e),l.getRightEdge(e),a),b=vr(r.element)/2;qo(r.element,"left",h-b+"px")},onLeft:mE,onRight:gE,onUp:fS,onDown:hE,edgeActions:BA});const lv=(e,r)=>{Co(e,Kp(),{value:r})},bS=(e,r,a)=>{const l={min:Og(r),max:Mh(r),range:Y2(r),value:a,step:Tg(r),snap:K1(r),snapStart:X1(r),rounded:iS(r),hasMinEdge:iE(r),hasMaxEdge:lS(r),minBound:av(e),maxBound:iv(e),screenRange:mS(e)};return lE(l)},vS=e=>(r,a)=>((l,m,h)=>{const b=(l>0?Jp:Q2)(zm(h),Og(h),Mh(h),Tg(h));return lv(m,b),D.some(b)})(e,r,a).map(mn),rw=(e,r,a,l,m,h)=>{const b=((y,x,k,T,N)=>{const L=mS(y),z=T.bind(Q=>D.some(hS(Q,y))).getOr(0),U=N.bind(Q=>D.some(hS(Q,y))).getOr(L),J={min:Og(x),max:Mh(x),range:Y2(x),value:k,hasMinEdge:iE(x),hasMaxEdge:lS(x),minBound:av(y),minOffset:0,maxBound:iv(y),maxOffset:L,centerMinEdge:z,centerMaxEdge:U};return cE(J)})(r,h,a,l,m);return av(r)-av(e)+b},LA=D.none,yS=D.none,IA=vS(-1),cv=vS(1),wS={"top-left":D.none(),top:D.some((e,r)=>{iu(e,X2(r))}),"top-right":D.none(),right:D.none(),"bottom-right":D.none(),bottom:D.some((e,r)=>{iu(e,Yp(r))}),"bottom-left":D.none(),left:D.none()};var xS=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=bS(e,r,a);return lv(e,l),l},setToMin:(e,r)=>{const a=Og(r);lv(e,a)},setToMax:(e,r)=>{const a=Mh(r);lv(e,a)},findValueOfOffset:bS,getValueFromEvent:e=>G2(e).map(r=>r.top),findPositionOfValue:rw,setPositionFromValue:(e,r,a,l)=>{const m=zm(a),h=rw(e,l.getSpectrum(e),m,l.getTopEdge(e),l.getBottomEdge(e),a),b=Ns(r.element)/2;qo(r.element,"top",h-b+"px")},onLeft:LA,onRight:yS,onUp:IA,onDown:cv,edgeActions:wS});const J1=(e,r)=>{Co(e,Kp(),{value:r})},dv=(e,r)=>({x:e,y:r}),uv=(e,r)=>(a,l)=>((m,h,b,y)=>{const x=m>0?Jp:Q2,k=h?zm(y).x:x(zm(y).x,Fm(y),Xp(y),Tg(y)),T=h?x(zm(y).y,Og(y),Mh(y),Tg(y)):zm(y).y;return J1(b,dv(k,T)),D.some(k)})(e,r,a,l).map(mn),fE=uv(-1,!1),bE=uv(1,!1),vE=uv(-1,!0),yE=uv(1,!0),wE={"top-left":D.some((e,r)=>{iu(e,Ag(K2(r),X2(r)))}),top:D.some((e,r)=>{iu(e,Ag(aS(r),X2(r)))}),"top-right":D.some((e,r)=>{iu(e,Ag(Ed(r),X2(r)))}),right:D.some((e,r)=>{iu(e,Ag(Ed(r),J2(r)))}),"bottom-right":D.some((e,r)=>{iu(e,Ag(Ed(r),Yp(r)))}),bottom:D.some((e,r)=>{iu(e,Ag(aS(r),Yp(r)))}),"bottom-left":D.some((e,r)=>{iu(e,Ag(K2(r),Yp(r)))}),left:D.some((e,r)=>{iu(e,Ag(K2(r),J2(r)))})};var xE=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=pS(e,r,a.left),m=bS(e,r,a.top),h=dv(l,m);return J1(e,h),h},setToMin:(e,r)=>{const a=Fm(r),l=Og(r);J1(e,dv(a,l))},setToMax:(e,r)=>{const a=Xp(r),l=Mh(r);J1(e,dv(a,l))},getValueFromEvent:e=>G2(e),setPositionFromValue:(e,r,a,l)=>{const m=zm(a),h=Y1(e,l.getSpectrum(e),m.x,l.getLeftEdge(e),l.getRightEdge(e),a),b=rw(e,l.getSpectrum(e),m.y,l.getTopEdge(e),l.getBottomEdge(e),a),y=vr(r.element)/2,x=Ns(r.element)/2;qo(r.element,"left",h-y+"px"),qo(r.element,"top",b-x+"px")},onLeft:fE,onRight:bE,onUp:vE,onDown:yE,edgeActions:wE});const cu=ul({name:"Slider",configFields:[De("stepSize",1),De("onChange",At),De("onChoose",At),De("onInit",At),De("onDragStart",At),De("onDragEnd",At),De("snapToGrid",!1),De("rounded",!0),Zn("snapStart"),Vn("model",kn("mode",{x:[De("minX",0),De("maxX",100),wr("value",e=>Io(e.mode.minX)),je("getInitialValue"),Qr("manager",pE)],y:[De("minY",0),De("maxY",100),wr("value",e=>Io(e.mode.minY)),je("getInitialValue"),Qr("manager",xS)],xy:[De("minX",0),De("maxX",100),De("minY",0),De("maxY",100),wr("value",e=>Io({x:e.mode.minX,y:e.mode.minY})),je("getInitialValue"),Qr("manager",xE)]})),xa("sliderBehaviours",[Ho,Ut]),wr("mouseIsDown",()=>Io(!1))],partFields:Pm,factory:(e,r,a,l)=>{const m=re=>aa(re,e,"thumb"),h=re=>aa(re,e,"spectrum"),b=re=>En(re,e,"left-edge"),y=re=>En(re,e,"right-edge"),x=re=>En(re,e,"top-edge"),k=re=>En(re,e,"bottom-edge"),T=e.model,N=T.manager,L=(re,ce)=>{N.setPositionFromValue(re,ce,e,{getLeftEdge:b,getRightEdge:y,getTopEdge:x,getBottomEdge:k,getSpectrum:h})},z=(re,ce)=>{T.value.set(ce);const ee=m(re);L(re,ee)},U=re=>{const ce=e.mouseIsDown.get();e.mouseIsDown.set(!1),ce&&En(re,e,"thumb").each(ee=>{const de=T.value.get();e.onChoose(re,ee,de)})},J=(re,ce)=>{ce.stop(),e.mouseIsDown.set(!0),e.onDragStart(re,m(re))},Q=(re,ce)=>{ce.stop(),e.onDragEnd(re,m(re)),U(re)};return{uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.sliderBehaviours,[Ho.config({mode:"special",focusIn:re=>En(re,e,"spectrum").map(Ho.focusIn).map(mn)}),Ut.config({store:{mode:"manual",getValue:re=>T.value.get(),setValue:z}}),Ki.config({channels:{[Fu()]:{onReceive:U}}})]),events:Mr([Ct(Kp(),(re,ce)=>{((ee,de)=>{z(ee,de);const me=m(ee);e.onChange(ee,me,de),D.some(!0)})(re,ce.event.value)}),ys((re,ce)=>{const ee=T.getInitialValue();T.value.set(ee);const de=m(re);L(re,de);const me=h(re);e.onInit(re,de,me,T.value.get())}),Ct(sl(),J),Ct(Ba(),Q),Ct(ti(),J),Ct(xu(),Q)]),apis:{resetToMin:re=>{N.setToMin(re,e)},resetToMax:re=>{N.setToMax(re,e)},setValue:z,refresh:L},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,r,a)=>{e.setValue(r,a)},resetToMin:(e,r)=>{e.resetToMin(r)},resetToMax:(e,r)=>{e.resetToMax(r)},refresh:(e,r)=>{e.refresh(r)}}}),sw=bo("rgb-hex-update"),aw=bo("slider-update"),CE=bo("palette-update"),SE=[xa("formBehaviours",[Ut])],kE=e=>"<alloy.field."+e+">",EE=(e,r)=>({uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.formBehaviours,[Ut.config({store:{mode:"manual",getValue:a=>{const l=Ji(a,e);return Gn(l,(m,h)=>m().bind(b=>{return y=dr.getCurrent(b),x=new Error(`Cannot find a current component to extract the value from for form part '${h}': `+Tc(b.element)),y.fold(()=>Mn.error(x),Mn.value);var y,x}).map(Ut.getValue))},setValue:(a,l)=>{Pn(l,(m,h)=>{En(a,e,h).each(b=>{dr.getCurrent(b).each(y=>{Ut.setValue(y,m)})})})}}})]),apis:{getField:(a,l)=>En(a,e,l).bind(dr.getCurrent)}}),Qp={getField:Jg((e,r,a)=>e.getField(r,a)),sketch:e=>{const r=(()=>{const h=[];return{field:(b,y)=>(h.push(b),gr("form",kE(b),y)),record:ne(h)}})(),a=e(r),l=r.record(),m=Xe(l,h=>et({name:h,pname:kE(h)}));return xd("form",SE,m,EE,a)}},OE=bo("valid-input"),CS=bo("invalid-input"),TE=bo("validating-input"),iw="colorcustom.rgb.",Ng=()=>dr.config({find:D.some}),lw=e=>dr.config({find:r=>Dn(r.element,e).bind(a=>r.getSystem().getByDom(a).toOptional())}),cw=xt([De("preprocess",it),De("postprocess",it)]),ME=(e,r,a)=>Ut.config({store:{mode:"manual",...e.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:a}}),RE=(e,r,a)=>ME(e,l=>r(l.element),(l,m)=>a(l.element,m)),DE=(e,r)=>{const a=dn("RepresentingConfigs.memento processors",cw,r);return Ut.config({store:{mode:"manual",getValue:l=>{const m=e.get(l),h=Ut.getValue(m);return a.postprocess(h)},setValue:(l,m)=>{const h=a.preprocess(m),b=e.get(l);Ut.setValue(b,h)}}})},BE=RE,ef=ME,Tn=e=>Ut.config({store:{mode:"memory",initialValue:e}}),mv={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var LE=tinymce.util.Tools.resolve("tinymce.Resource"),Vm=tinymce.util.Tools.resolve("tinymce.util.Tools");const dw=bo("alloy-fake-before-tabstop"),uw=bo("alloy-fake-after-tabstop"),_S=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Vt([nn.config({ignore:!0}),fa.config({})])}),Q1=e=>({dom:{tag:"div",classes:["tox-navobj"]},components:[_S([dw]),e,_S([uw])],behaviours:Vt([lw(1)])}),SS=(e,r)=>{Co(e,Gc(),{raw:{which:9,shiftKey:r}})},IE=(e,r)=>{const a=r.element;Gi(a,dw)?SS(e,!0):Gi(a,uw)&&SS(e,!1)},tf=e=>$1(e,["."+dw,"."+uw].join(","),ot),kS=bo("toolbar.button.execute"),Rh=bo("common-button-display-events"),HE={[bl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[nc()]:["toolbar-button-events",Rh],[ti()]:["focusing","alloy.base.behaviour",Rh]},ES=e=>qo(e.element,"width",Ts(e.element,"width")),OS=(e,r,a)=>tu(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},r),TS=(e,r)=>OS(e,r,[]),Dh=(e,r)=>OS(e,r,[pn.config({})]),PE=(e,r,a)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Ks(a.translate(e))],behaviours:Vt([pn.config({})])}),id=bo("update-menu-text"),of=bo("update-menu-icon"),mw=(e,r,a)=>{const l=Io(At),m=e.text.map(L=>es(PE(L,r,a.providers))),h=e.icon.map(L=>es(Dh(L,a.providers.icons))),b=(L,z)=>{const U=Ut.getValue(L);return nn.focus(U),Co(U,"keydown",{raw:z.event.raw}),sd.close(U),D.some(!0)},y=e.role.fold(()=>({}),L=>({role:L})),x=e.tooltip.fold(()=>({}),L=>{const z=a.providers.translate(L);return{title:z,"aria-label":z}}),k=tu("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},a.providers.icons),T=bo("common-button-display-events");return es(sd.sketch({...e.uid?{uid:e.uid}:{},...y,dom:{tag:"button",classes:[r,`${r}--select`].concat(Xe(e.classes,L=>`${r}--${L}`)),attributes:{...x}},components:I1([h.map(L=>L.asSpec()),m.map(L=>L.asSpec()),D.some(k)]),matchWidth:!0,useMinWidth:!0,onOpen:(L,z,U)=>{e.searchable&&e_(U).each(Q=>nn.focus(Q))},dropdownBehaviours:Vt([...e.dropdownBehaviours,jp(()=>e.disabled||a.providers.isDisabled()),vi(),G1.config({}),pn.config({}),On("dropdown-events",[Gu(e,l),Oh(e,l)]),On(T,[ys((L,z)=>ES(L))]),On("menubutton-update-display-text",[Ct(id,(L,z)=>{m.bind(U=>U.getOpt(L)).each(U=>{pn.set(U,[Ks(a.providers.translate(z.event.text))])})}),Ct(of,(L,z)=>{h.bind(U=>U.getOpt(L)).each(U=>{pn.set(U,[Dh(z.event.icon,a.providers.icons)])})})])]),eventOrder:Un(HE,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[nc()]:["toolbar-button-events","dropdown-events",T]}),sandboxBehaviours:Vt([Ho.config({mode:"special",onLeft:b,onRight:b}),On("dropdown-sandbox-events",[Ct(JC,(L,z)=>{(U=>{const J=Ut.getValue(U),Q=Rb(U).map(t_);sd.refetch(J).get(()=>{const re=pa.getCoupled(J,"sandbox");Q.each(ce=>Rb(re).each(ee=>{return Ut.setValue(de=ee,(me=ce).fetchPattern),de.element.dom.selectionStart=me.selectionStart,void(de.element.dom.selectionEnd=me.selectionEnd);var de,me}))})})(L),z.stop()}),Ct(D1,(L,z)=>{var U,J,Q;J=z,(Q=U=L,mr.getState(Q).bind(Zr.getHighlighted).bind(Zr.getHighlighted)).each(Q=>{((re,ce,ee,de)=>{const me={...de,target:ce};re.getSystem().triggerEvent(ee,ce,me)})(U,Q.element,J.event.eventType,J.event.interactionEvent)}),z.stop()})])]),lazySink:a.getSink,toggleClass:`${r}--active`,parts:{menu:{...Mb(0,0,e.presets),fakeFocus:e.searchable,onHighlightItem:j3,onCollapseMenu:(L,z,U)=>{Zr.getHighlighted(U).each(J=>{j3(L,U,J)})},onDehighlightItem:U3}},fetch:L=>Sg($n(e.fetch,L))})).asSpec()},AS=e=>"separator"===e.type,FE={type:"separator"},NS=(e,r)=>{const a=((l,m)=>{const h=Gt(l,(b,y)=>No(y)?""===y?b:"|"===y?b.length>0&&!AS(b[b.length-1])?b.concat([FE]):b:Wo(m,y.toLowerCase())?b.concat([m[y.toLowerCase()]]):b:b.concat([y]),[]);return h.length>0&&AS(h[h.length-1])&&h.pop(),h})(No(e)?e.split(" "):e,r);return To(a,(l,m)=>{if(Wo(m,"getSubmenuItems")){const b=((y,x)=>{const k=y.getSubmenuItems(),T=NS(k,x);return{item:y,menus:Un(T.menus,{[y.value]:T.items}),expansions:Un(T.expansions,{[y.value]:y.value})}})((y=>{const x=Kt(y,"value").getOrThunk(()=>bo("generated-menu-item"));return Un({value:x},y)})(m),r);return{menus:Un(l.menus,b.menus),items:[b.item,...l.items],expansions:Un(l.expansions,b.expansions)}}return{...l,items:[m,...l.items]}},{menus:{},expansions:{},items:[]})},nf=(e,r,a,l)=>{const m=bo("primary-menu"),h=NS(e,a.shared.providers.menuItems());if(0===h.items.length)return D.none();const b=l.search.fold(()=>({searchMode:"no-search"}),L=>({searchMode:"search-with-field",placeholder:L.placeholder})),y=ad(m,h.items,r,a,l.isHorizontalMenu,b),x=l.search.fold(()=>({searchMode:"no-search"}),L=>({searchMode:"search-with-results"})),k=Gn(h.menus,(N,L)=>ad(L,N,r,a,!1,x)),T=Un(k,vu(m,y));return D.from(xh.tieredData(m,T,h.expansions))},MS=e=>!Wo(e,"items"),RS="data-value",du=(e,r,a,l)=>Xe(a,m=>MS(m)?{type:"togglemenuitem",text:m.text,value:m.value,active:m.value===l,onAction:()=>{Ut.setValue(e,m.value),Co(e,Hc,{name:r}),nn.focus(e)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>du(e,r,m.items,l)}),e0=(e,r)=>is(e,a=>MS(a)?Vs(a.value===r,a):e0(a.items,r)),gw=lc({name:"HtmlSelect",configFields:[je("options"),xa("selectBehaviours",[nn,Ut]),De("selectClasses",[]),De("selectAttributes",{}),Zn("data")],factory:(e,r)=>{const a=Xe(e.options,m=>({dom:{tag:"option",value:m.value,innerHtml:m.text}})),l=e.data.map(m=>vu("initialValue",m)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:a,behaviours:Aa(e.selectBehaviours,[nn.config({}),Ut.config({store:{mode:"manual",getValue:m=>rc(m.element),setValue:(m,h)=>{const b=qr(e.options);Ue(e.options,y=>y.value===h).isSome()?Xc(m.element,h):-1===m.element.dom.selectedIndex&&""===h&&b.each(y=>Xc(m.element,y.value))},...l}})])}}}),DS=ne([De("field1Name","field1"),De("field2Name","field2"),Au("onLockedChange"),bd(["lockClass"]),De("locked",!1),fi("coupledFieldBehaviours",[dr,Ut])]),hw=(e,r)=>et({factory:$r,name:e,overrides:a=>({fieldBehaviours:Vt([On("coupled-input-behaviour",[Ct(am(),l=>{var m,h,b;(m=l,h=a,b=r,En(m,h,b).bind(dr.getCurrent)).each(m=>{En(l,a,"lock").each(h=>{Ln.isOn(h)&&a.onLockedChange(l,m,h)})})})])])})}),zE=ne([hw("field1","field2"),hw("field2","field1"),et({factory:Fi,schema:[je("dom")],name:"lock",overrides:e=>({buttonBehaviours:Vt([Ln.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),uc=ul({name:"FormCoupledInputs",configFields:DS(),partFields:zE(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:Ni(e.coupledFieldBehaviours,[dr.config({find:D.some}),Ut.config({store:{mode:"manual",getValue:m=>{const h=$a(m,e,["field1","field2"]);return{[e.field1Name]:Ut.getValue(h.field1()),[e.field2Name]:Ut.getValue(h.field2())}},setValue:(m,h)=>{const b=$a(m,e,["field1","field2"]);bs(h,e.field1Name)&&Ut.setValue(b.field1(),h[e.field1Name]),bs(h,e.field2Name)&&Ut.setValue(b.field2(),h[e.field2Name])}}})]),apis:{getField1:m=>En(m,e,"field1"),getField2:m=>En(m,e,"field2"),getLock:m=>En(m,e,"lock")}}),apis:{getField1:(e,r)=>e.getField1(r),getField2:(e,r)=>e.getField2(r),getLock:(e,r)=>e.getLock(r)}}),pw=e=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==r){const a=parseFloat(r[1]);return Mn.value({value:a,unit:r[2]})}return Mn.error(e)},BS=(e,r)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=m=>Wo(a,m);return e.unit===r?D.some(e.value):l(e.unit)&&l(r)?D.some(a[e.unit]===a[r]?e.value:e.value/a[e.unit]*a[r]):D.none()},gv=e=>D.none(),LS=(e,r)=>{const a=e.label.map(T=>Nh(T,r)),l=[Ko.config({disabled:()=>e.disabled||r.isDisabled()}),vi(),Ho.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:T=>(Fr(T,qp),D.some(!0))}),On("textfield-change",[Ct(am(),(T,N)=>{Co(T,Hc,{name:e.name})}),Ct($h(),(T,N)=>{Co(T,Hc,{name:e.name})})]),fa.config({})],m=e.validation.map(T=>Hm.config({getRoot:N=>Fo(N.element),invalidClass:"tox-invalid",validator:{validate:N=>{const L=Ut.getValue(N),z=T.validator(L);return rd(!0===z?Mn.value(L):Mn.error(z))},validateOnLoad:T.validateOnLoad}})).toArray(),h={...e.placeholder.fold(ne({}),T=>({placeholder:r.translate(T)})),...e.inputMode.fold(ne({}),T=>({inputmode:T}))},b=$r.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map(T=>({data:T})).getOr({}),inputAttributes:h,inputClasses:[e.classname],inputBehaviours:Vt(en([l,m])),selectOnFocus:!1,factory:Sh}),y=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[b]}:b,x=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),k=[Ko.config({disabled:()=>e.disabled||r.isDisabled(),onDisabled:T=>{$r.getField(T).each(Ko.disable)},onEnabled:T=>{$r.getField(T).each(Ko.enable)}}),vi()];return kd(a,y,x,k)},t0=(e,r)=>r.getAnimationRoot.fold(()=>e.element,a=>a(e)),Zm=e=>e.dimension.property,Bh=(e,r)=>e.dimension.getDimension(r),Td=(e,r)=>{const a=t0(e,r);Oi(a,[r.shrinkingClass,r.growingClass])},hv=(e,r)=>{Ws(e.element,r.openClass),Us(e.element,r.closedClass),qo(e.element,Zm(r),"0px"),Sl(e.element)},Lh=(e,r)=>{Ws(e.element,r.closedClass),Us(e.element,r.openClass),Lr(e.element,Zm(r))},o0=(e,r,a,l)=>{a.setCollapsed(),qo(e.element,Zm(r),Bh(r,e.element)),Td(e,r),hv(e,r),r.onStartShrink(e),r.onShrunk(e)},HA=(e,r,a,l)=>{const m=l.getOrThunk(()=>Bh(r,e.element));a.setCollapsed(),qo(e.element,Zm(r),m),Sl(e.element);const h=t0(e,r);Ws(h,r.growingClass),Us(h,r.shrinkingClass),hv(e,r),r.onStartShrink(e)},fw=(e,r,a)=>{const l=Bh(r,e.element);("0px"===l?o0:HA)(e,r,a,D.some(l))},pv=(e,r,a)=>{const l=t0(e,r),m=Gi(l,r.shrinkingClass),h=Bh(r,e.element);Lh(e,r);const b=Bh(r,e.element);(m?()=>{qo(e.element,Zm(r),h),Sl(e.element)}:()=>{hv(e,r)})(),Ws(l,r.shrinkingClass),Us(l,r.growingClass),Lh(e,r),qo(e.element,Zm(r),b),a.setExpanded(),r.onStartGrow(e)},VE=(e,r,a)=>{const l=t0(e,r);return!0===Gi(l,r.growingClass)},IS=(e,r,a)=>{const l=t0(e,r);return!0===Gi(l,r.shrinkingClass)};var HS=Object.freeze({__proto__:null,refresh:(e,r,a)=>{if(a.isExpanded()){Lr(e.element,Zm(r));const l=Bh(r,e.element);qo(e.element,Zm(r),l)}},grow:(e,r,a)=>{a.isExpanded()||pv(e,r,a)},shrink:(e,r,a)=>{a.isExpanded()&&fw(e,r,a)},immediateShrink:(e,r,a)=>{a.isExpanded()&&o0(e,r,a)},hasGrown:(e,r,a)=>a.isExpanded(),hasShrunk:(e,r,a)=>a.isCollapsed(),isGrowing:VE,isShrinking:IS,isTransitioning:(e,r,a)=>VE(e,r)||IS(e,r),toggleGrow:(e,r,a)=>{(a.isExpanded()?fw:pv)(e,r,a)},disableTransitions:Td,immediateGrow:(e,r,a)=>{a.isExpanded()||(Lh(e,r),qo(e.element,Zm(r),Bh(r,e.element)),Td(e,r),a.setExpanded(),r.onStartGrow(e),r.onGrown(e))}}),ZE=Object.freeze({__proto__:null,exhibit:(e,r,a)=>Pi(r.expanded?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:vu(r.dimension.property,"0px")}),events:(e,r)=>Mr([dm(im(),(a,l)=>{l.event.raw.propertyName===e.dimension.property&&(Td(a,e),r.isExpanded()&&Lr(a.element,e.dimension.property),(r.isExpanded()?e.onGrown:e.onShrunk)(a))})])}),PA=[je("closedClass"),je("openClass"),je("shrinkingClass"),je("growingClass"),Zn("getAnimationRoot"),cr("onShrunk"),cr("onStartShrink"),cr("onGrown"),cr("onStartGrow"),De("expanded",!1),Vn("dimension",kn("property",{width:[Qr("property","width"),Qr("getDimension",e=>vr(e)+"px")],height:[Qr("property","height"),Qr("getDimension",e=>Ns(e)+"px")]}))];const mc=pi({fields:PA,name:"sliding",active:ZE,apis:HS,state:Object.freeze({__proto__:null,init:e=>{const r=Io(e.expanded);return vl({isExpanded:()=>!0===r.get(),isCollapsed:()=>!1===r.get(),setCollapsed:$n(r.set,!1),setExpanded:$n(r.set,!0),readState:()=>"expanded: "+r.get()})}})}),bw=e=>({isEnabled:()=>!Ko.isDisabled(e),setEnabled:r=>Ko.set(e,!r),setActive:r=>{const a=e.element;r?(Us(a,"tox-tbtn--enabled"),Bo(a,"aria-pressed",!0)):(Ws(a,"tox-tbtn--enabled"),jr(a,"aria-pressed"))},isActive:()=>Gi(e.element,"tox-tbtn--enabled"),setText:r=>{Co(e,id,{text:r})},setIcon:r=>Co(e,of,{icon:r})}),fv=(e,r,a,l,m=!0)=>mw({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:l,fetch:(h,b)=>{const y={pattern:e.search.isSome()?U1(h):""};e.fetch(x=>{b(nf(x,nd.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:e.search}))},y,bw(h))},onSetup:e.onSetup,getApi:bw,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...m?[fa.config({})]:[]]},r,a.shared),jE=(e,r,a)=>{const l=h=>b=>{const y=!b.isActive();b.setActive(y),h.storage.set(y),a.shared.getSink().each(x=>{r().getOpt(x).each(k=>{Ll(k.element),Co(k,au,{name:h.name,value:h.storage.get()})})})},m=h=>b=>{b.setActive(h.storage.get())};return h=>{h(Xe(e,b=>{const y=b.text.fold(()=>({}),x=>({text:x}));return{type:b.type,active:!1,...y,onAction:l(b),onSetup:m(b)}}))}},UE=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Ks(e)]}),vw=bo("leaf-label-event-id"),yw=({leaf:e,onLeafAction:r,visible:a,treeId:l,selectedId:m,backstage:h})=>{const b=e.menu.map(x=>fv(x,"tox-mbtn",h,D.none(),a)),y=[UE(e.title)];return b.each(x=>y.push(x)),Fi.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:x=>{r(e.id),x.getSystem().broadcastOn([`update-active-item-${l}`],{value:e.id})},eventOrder:{[Gc()]:[vw,"keying"]},buttonBehaviours:Vt([...a?[fa.config({})]:[],Ln.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ki.config({channels:{[`update-active-item-${l}`]:{onReceive:(x,k)=>{(k.value===e.id?Ln.on:Ln.off)(x)}}}}),On(vw,[ys((x,k)=>{m.each(T=>{(T===e.id?Ln.on:Ln.off)(x)})}),Ct(Gc(),(x,k)=>{const N="ArrowRight"===k.event.raw.code;"ArrowLeft"===k.event.raw.code?(Mc(x.element,".tox-tree--directory").each(L=>{x.getSystem().getByDom(L).each(z=>{fm(L,".tox-tree--directory__label").each(U=>{z.getSystem().getByDom(U).each(nn.focus)})})}),k.stop()):N&&k.stop()})])])})},WE=bo("directory-label-event-id"),$E=({directory:e,visible:r,noChildren:a,backstage:l})=>{const m=e.menu.map(k=>fv(k,"tox-mbtn",l,D.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(y=l.shared.providers.icons,T=y,tu("chevron-right",{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},T))]},UE(e.title)];var T,y;m.each(k=>{h.push(k)});const x=k=>{Mc(k.element,".tox-tree--directory").each(T=>{k.getSystem().getByDom(T).each(N=>{const L=!Ln.isOn(N);Ln.toggle(N),Co(k,"expand-tree-node",{expanded:L,node:e.id})})})};return Fi.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:h,action:x,eventOrder:{[Gc()]:[WE,"keying"]},buttonBehaviours:Vt([...r?[fa.config({})]:[],On(WE,[Ct(Gc(),(k,T)=>{const N="ArrowRight"===T.event.raw.code,L="ArrowLeft"===T.event.raw.code;N&&a&&T.stop(),(N||L)&&Mc(k.element,".tox-tree--directory").each(z=>{k.getSystem().getByDom(z).each(U=>{!Ln.isOn(U)&&N||Ln.isOn(U)&&L?(x(k),T.stop()):L&&!Ln.isOn(U)&&(Mc(U.element,".tox-tree--directory").each(J=>{fm(J,".tox-tree--directory__label").each(Q=>{U.getSystem().getByDom(Q).each(nn.focus)})}),T.stop())})})})])])})},FA=({children:e,onLeafAction:r,visible:a,treeId:l,expandedIds:m,selectedId:h,backstage:b})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(y=>"leaf"===y.type?yw({leaf:y,selectedId:h,onLeafAction:r,visible:a,treeId:l,backstage:b}):PS({directory:y,expandedIds:m,selectedId:h,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:b})),behaviours:Vt([mc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),pn.config({})])}),ww=bo("directory-event-id"),PS=({directory:e,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:m,expandedIds:h,selectedId:b})=>{const{children:y}=e,x=Io(h),k=h.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[$E({directory:e,visible:a,noChildren:0===e.children.length,backstage:m}),FA({children:y,expandedIds:h,selectedId:b,onLeafAction:r,visible:k,treeId:l,backstage:m})],behaviours:Vt([On(ww,[ys((T,N)=>{Ln.set(T,k)}),Ct("expand-tree-node",(T,N)=>{const{expanded:L,node:z}=N.event;x.set(L?[...x.get(),z]:x.get().filter(U=>U!==z))})]),Ln.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(T,N)=>{const L=T.components()[1],z=(U=N,y.map(J=>"leaf"===J.type?yw({leaf:J,selectedId:b,onLeafAction:r,visible:U,treeId:l,backstage:m}):PS({directory:J,expandedIds:x.get(),selectedId:b,onLeafAction:r,labelTabstopping:U,treeId:l,backstage:m})));var U;N?mc.grow(L):mc.shrink(L),pn.set(L,z)}})])}},xw=bo("tree-event-id");var zA=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.stream.streams.setup(e,r);return Mr([Ct(e.event,a),Hi(()=>r.cancel())].concat(e.cancelEvent.map(l=>[Ct(l,()=>r.cancel())]).getOr([])))}});const bv=(e,r)=>{let a=null;const l=()=>{Ya(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...m)=>{l(),a=setTimeout(()=>{a=null,e.apply(null,m)},r)}}},n0=e=>{const r=Io(null);return vl({readState:()=>({timer:null!==r.get()?"set":"unset"}),setTimer:a=>{r.set(a)},cancel:()=>{const a=r.get();null!==a&&a.cancel()}})};var qE=Object.freeze({__proto__:null,throttle:n0,init:e=>e.stream.streams.state(e)}),GE=[Vn("stream",kn("mode",{throttle:[je("delay"),De("stopEvent",!0),Qr("streams",{setup:(e,r)=>{const a=e.stream,l=bv(e.onStream,a.delay);return r.setTimer(l),(m,h)=>{l.throttle(m,h),a.stopEvent&&h.stop()}},state:n0})]})),De("event","input"),Zn("cancelEvent"),Au("onStream")];const Cw=pi({fields:GE,name:"streaming",active:zA,state:qE}),vv=(e,r,a)=>{const l=Ut.getValue(a);Ut.setValue(r,l),yv(r)},_w=(e,r)=>{const a=e.element,l=rc(a),m=a.dom;"number"!==Xr(a,"type")&&r(m,l)},yv=e=>{_w(e,(r,a)=>r.setSelectionRange(a.length,a.length))},Ih=ne("alloy.typeahead.itemexecute"),KE=ne([Zn("lazySink"),je("fetch"),De("minChars",5),De("responseTime",1e3),cr("onOpen"),De("getHotspot",D.some),De("getAnchorOverrides",ne({})),De("layouts",D.none()),De("eventOrder",{}),Fd("model",{},[De("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),De("selectsOver",!0),De("populateFromBrowse",!0)]),cr("onSetValue"),il("onExecute"),cr("onItemExecute"),De("inputClasses",[]),De("inputAttributes",{}),De("inputStyles",{}),De("matchWidth",!0),De("useMinWidth",!1),De("dismissOnBlur",!0),bd(["openClass"]),Zn("initialData"),xa("typeaheadBehaviours",[nn,Ut,Cw,Ho,Ln,pa]),wr("lazyTypeaheadComp",()=>Io(D.none)),wr("previewing",()=>Io(!0))].concat(XC()).concat(q_())),XE=ne([dt({schema:[jd()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(r,a,l)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(m=>{((h,b,y)=>{if(h.selectsOver){const x=Ut.getValue(b),k=h.getDisplayText(x),T=Ut.getValue(y);return 0===h.getDisplayText(T).indexOf(k)?D.some(()=>{var L;vv(0,b,y),L=k.length,_w(b,(z,U)=>z.setSelectionRange(L,U.length))}):D.none()}return D.none()})(e.model,m,l).fold(()=>{e.model.selectsOver?(Zr.dehighlight(a,l),e.previewing.set(!0)):e.previewing.set(!1)},h=>{h(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(m=>{e.model.populateFromBrowse&&vv(0,m,l),vs(l.element,"id").each(h=>Bo(m.element,"aria-activedescendant",h))})},onExecute:(r,a)=>e.lazyTypeaheadComp.get().map(l=>(Co(l,Ih(),{item:a}),!0)),onHover:(r,a)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(l=>{e.model.populateFromBrowse&&vv(0,l,a)})}})})]),FS=ul({name:"Typeahead",configFields:KE(),partFields:XE(),factory:(e,r,a,l)=>{const m=(N,L,z)=>{e.previewing.set(!1);const U=pa.getCoupled(N,"sandbox");if(mr.isOpen(U))dr.getCurrent(U).each(J=>{Zr.getHighlighted(J).fold(()=>{z(J)},()=>{Cf(U,J.element,"keydown",L)})});else{const J=Q=>{dr.getCurrent(Q).each(z)};Wp(e,b(N),N,U,l,J,Qi.HighlightMenuAndItem).get(At)}},h=s3(e),b=N=>L=>L.map(z=>{const U=ls(z.menus),J=Yt(U,Q=>Ie(Q.items,re=>"item"===re.type));return Ut.getState(N).update(Xe(J,Q=>Q.data)),z}),y=N=>dr.getCurrent(N),x="typeaheadevents",k=[nn.config({}),Ut.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:N=>rc(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,L)=>{Xc(N.element,e.model.getDisplayText(L))},...e.initialData.map(N=>vu("initialValue",N)).getOr({})}}),Cw.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(N,L)=>{const z=pa.getCoupled(N,"sandbox");if(nn.isFocused(N)&&rc(N.element).length>=e.minChars){const U=y(z).bind(Q=>Zr.getHighlighted(Q).map(Ut.getValue));e.previewing.set(!0);const J=Q=>{y(z).each(re=>{U.fold(()=>{e.model.selectsOver&&Zr.highlightFirst(re)},ce=>{Zr.highlightBy(re,ee=>Ut.getValue(ee).value===ce.value),Zr.getHighlighted(re).orThunk(()=>(Zr.highlightFirst(re),D.none()))})})};Wp(e,b(N),N,z,l,J,Qi.HighlightJustMenu).get(At)}},cancelEvent:Ym()}),Ho.config({mode:"special",onDown:(N,L)=>(m(N,L,Zr.highlightFirst),D.some(!0)),onEscape:N=>{const L=pa.getCoupled(N,"sandbox");return mr.isOpen(L)?(mr.close(L),D.some(!0)):D.none()},onUp:(N,L)=>(m(N,L,Zr.highlightLast),D.some(!0)),onEnter:N=>{const L=pa.getCoupled(N,"sandbox"),z=mr.isOpen(L);if(z&&!e.previewing.get())return y(L).bind(U=>Zr.getHighlighted(U)).map(U=>(Co(N,Ih(),{item:U}),!0));{const U=Ut.getValue(N);return Fr(N,Ym()),e.onExecute(L,N,U),z&&mr.close(L),D.some(!0)}}}),Ln.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),pa.config({others:{sandbox:N=>W_(e,N,{onOpen:()=>Ln.on(N),onClose:()=>{e.lazyTypeaheadComp.get().each(L=>jr(L.element,"aria-activedescendant")),Ln.off(N)}})}}),On(x,[ys(N=>{e.lazyTypeaheadComp.set(D.some(N))}),Hi(N=>{e.lazyTypeaheadComp.set(D.none())}),Ec(N=>{const L=At;$p(e,b(N),N,l,L,Qi.HighlightMenuAndItem).get(At)}),Ct(Ih(),(N,L)=>{const z=pa.getCoupled(N,"sandbox");vv(0,N,L.event.item),Fr(N,Ym()),e.onItemExecute(N,z,L.event.item,Ut.getValue(N)),mr.close(z),yv(N)})].concat(e.dismissOnBlur?[Ct(yf(),N=>{const L=pa.getCoupled(N,"sandbox");Rc(L.element).isNone()&&mr.close(L)})]:[]))],T={[Qm()]:[Ut.name(),Cw.name(),x],...e.eventOrder};return{uid:e.uid,dom:YC(Un(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Aa(e.typeaheadBehaviours,k)},eventOrder:T}}}),Mg=e=>({...e,toCached:()=>Mg(e.toCached()),bindFuture:r=>Mg(e.bind(a=>a.fold(l=>rd(Mn.error(l)),l=>r(l)))),bindResult:r=>Mg(e.map(a=>a.bind(r))),mapResult:r=>Mg(e.map(a=>a.map(r))),mapError:r=>Mg(e.map(a=>a.mapError(r))),foldResult:(r,a)=>e.map(l=>l.fold(r,a)),withTimeout:(r,a)=>Mg(Sg(l=>{let m=!1;const h=setTimeout(()=>{m=!0,l(Mn.error(a()))},r);e.get(b=>{m||(clearTimeout(h),l(b))})}))}),Sw=(e,r,a=[],l,m,h)=>{const b=r.fold(()=>({}),k=>({action:k})),y={buttonBehaviours:Vt([jp(()=>!e.enabled||h.isDisabled()),vi(),fa.config({}),On("button press",[Gg("click"),Gg("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...b},x=Un(y,{dom:l});return Un(x,{components:m})},zS=(e,r,a,l=[])=>{const m={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(y=>({"aria-label":a.translate(y),title:a.translate(y)})).getOr({})},h=e.icon.map(y=>TS(y,a.icons)),b=I1([h]);return Sw(e,r,l,m,b,a)},VS=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},YE=(e,r,a,l=[],m=[])=>{const h=a.translate(e.text),b=e.icon.map(T=>TS(T,a.icons)),y=[b.getOrThunk(()=>Ks(h))],x=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),k=[...VS(x),...b.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...m];return Sw(e,r,l,{tag:"button",classes:k,attributes:{title:h}},y,a)},JE=(e,r,a,l=[],m=[])=>{const h=YE(e,D.some(r),a,l,m);return Fi.sketch(h)},QE=(e,r)=>a=>{"custom"===r?Co(a,au,{name:e,value:{}}):"submit"===r?Fr(a,qp):"cancel"===r?Fr(a,kg):console.error("Unknown button type: ",r)},kw=(e,r,a)=>{if("menu"===r){const l=()=>b,m=e,h={...e,type:"menubutton",search:D.none(),onSetup:y=>(y.setEnabled(e.enabled),At),fetch:jE(m.items,l,a)},b=es(fv(h,"tox-tbtn",a,D.none()));return b.asSpec()}if("custom"===(m=r)||"cancel"===m||"submit"===m){const l=QE(e.name,r),m={...e,borderless:!1};return JE(m,l,a.shared.providers,[])}var m;if(((l,m)=>"togglebutton"===m)(0,r))return((l,m)=>{var h,b;const y=l.icon.map(ce=>Dh(ce,m.icons)).map(es),x=l.buttonType.getOr(l.primary?"primary":"secondary"),k={...l,name:null!==(h=l.name)&&void 0!==h?h:"",primary:"primary"===x,tooltip:D.from(l.tooltip),enabled:null!==(b=l.enabled)&&void 0!==b&&b,borderless:!1},T=k.tooltip.map(ce=>({"aria-label":m.translate(ce),title:m.translate(ce)})).getOr({}),N=VS(x??"secondary"),L=l.icon.isSome()&&l.text.isSome(),z={tag:"button",classes:[...N.concat(l.icon.isSome()?["tox-button--icon"]:[]),...l.active?["tox-button--enabled"]:[],...L?["tox-button--icon-and-text"]:[]],attributes:T},U=m.translate(l.text.getOr("")),J=Ks(U),Q=[...I1([y.map(ce=>ce.asSpec())]),...l.text.isSome()?[J]:[]],re=Sw(k,D.some(ce=>{Co(ce,au,{name:l.name,value:{setIcon:ee=>{y.map(de=>de.getOpt(ce).each(me=>{pn.set(me,[Dh(ee,m.icons)])}))}}})}),[],z,Q,m);return Fi.sketch(re)})(e,a.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")},ZA={type:"separator"},jA=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:At}),Ew=(e,r)=>({type:"menuitem",value:r,text:e,meta:{attach:void 0},onAction:At}),r0=(e,r)=>{return(a=>Xe(a,jA))((a=e,Ie(r,m=>m.type===a)));var a},UA=e=>r0("header",e.targets),eO=e=>r0("anchor",e.targets),ZS=e=>D.from(e.anchorTop).map(r=>Ew("<top>",r)).toArray(),tO=e=>D.from(e.anchorBottom).map(r=>Ew("<bottom>",r)).toArray(),jS=(e,r)=>{const a=e.toLowerCase();return Ie(r,l=>{var m;const b=null!==(m=l.value)&&void 0!==m?m:"";return Es((void 0!==l.meta&&void 0!==l.meta.text?l.meta.text:l.text).toLowerCase(),a)||Es(b.toLowerCase(),a)})},oO=bo("aria-invalid"),WA=(e,r)=>{e.dom.checked=r},$A=e=>e.dom.checked,yi=e=>(r,a,l,m)=>Kt(a,"name").fold(()=>e(a,m,D.none()),h=>r.field(h,e(a,m,Kt(l,h)))),qA={bar:yi((e,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Xe(e.items,r.shared.interpreter)})),collection:yi((e,r,a)=>((l,m,h)=>{const b=l.label.map(z=>Nh(z,m)),y=z=>(U,J)=>{Bl(J.event.target,"[data-collection-item-value]").each(Q=>{z(U,J,Q,Xr(Q,"data-collection-item-value"))})},x=y((z,U,J,Q)=>{U.stop(),m.isDisabled()||Co(z,au,{name:l.name,value:Q})}),k=[Ct(Cc(),y((z,U,J)=>{Ll(J)})),Ct(Sc(),x),Ct(lm(),x),Ct(_c(),y((z,U,J)=>{Oa(z.element,"."+R1).each(Q=>{Ws(Q,R1)}),Us(J,R1)})),Ct(jg(),y(z=>{Oa(z.element,"."+R1).each(U=>{Ws(U,R1)})})),Ec(y((z,U,J,Q)=>{Co(z,au,{name:l.name,value:Q})}))],T=(z,U)=>Xe(Xi(z.element,".tox-collection__item"),U),N=$r.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==l.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:it},behaviours:Vt([Ko.config({disabled:m.isDisabled,onDisabled:z=>{T(z,U=>{Us(U,"tox-collection__item--state-disabled"),Bo(U,"aria-disabled",!0)})},onEnabled:z=>{T(z,U=>{Ws(U,"tox-collection__item--state-disabled"),jr(U,"aria-disabled")})}}),vi(),pn.config({}),Ut.config({store:{mode:"memory",initialValue:h.getOr([])},onSetValue:(z,U)=>{((J,Q)=>{const re=Xe(Q,de=>{const me=od.translate(de.text),xe=1===l.columns?`<div class="tox-collection__item-label">${me}</div>`:"",Ne=`<div class="tox-collection__item-icon">${de.icon}</div>`,Ge={_:" "," - ":" ","-":" "},Et=me.replace(/\_| \- |\-/g,_t=>Ge[_t]);return`<div class="tox-collection__item${m.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${eS.encodeAllRaw(de.value)}" title="${Et}" aria-label="${Et}">${Ne}${xe}</div>`}),ce="auto"!==l.columns&&l.columns>1?sr(re,l.columns):[re],ee=Xe(ce,de=>`<div class="tox-collection__group">${de.join("")}</div>`);Oc(J.element,ee.join(""))})(z,U),"auto"===l.columns&&v_(z,5,"tox-collection__item").each(({numRows:J,numColumns:Q})=>{Ho.setGridSize(z,J,Q)}),Fr(z,Q3)}}),fa.config({}),Ho.config((L=l.columns,1===L?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===L?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${o2}`}})),On("collection-events",k)]),eventOrder:{[bl()]:["disabling","alloy.base.behaviour","collection-events"]}});var L;return kd(b,N,["tox-form__group--collection"],[])})(e,r.shared.providers,a)),alertbanner:yi((e,r)=>{return Xu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${(a=e).level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Fi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:TC(a.icon,(l=r.shared.providers).icons),attributes:{title:l.translate(a.iconTooltip)}},action:m=>{Co(m,au,{name:"alert-banner",value:a.url})},buttonBehaviours:Vt([AC()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:l.translate(a.text)}}]});var a,l}),input:yi((e,r,a)=>{return m=r.shared.providers,h=a,LS({name:(l=e).name,multiline:!1,label:l.label,inputMode:l.inputMode,placeholder:l.placeholder,flex:!1,disabled:!l.enabled,classname:"tox-textfield",validation:D.none(),maximized:l.maximized,data:h},m);var l,m,h}),textarea:yi((e,r,a)=>{return m=r.shared.providers,h=a,LS({name:(l=e).name,multiline:!0,label:l.label,inputMode:D.none(),placeholder:l.placeholder,flex:!0,disabled:!l.enabled,classname:"tox-textarea",validation:D.none(),maximized:l.maximized,data:h},m);var l,m,h}),label:yi((e,r)=>{return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"]},components:[Ks((l=r.shared).providers.translate((a=e).label))]},...Xe(a.items,l.interpreter)],behaviours:Vt([Ng(),pn.config({}),(m=D.none(),RE(m,Qh,Oc)),Ho.config({mode:"acyclic"})])};var a,l,m}),iframe:(sk=(e,r,a)=>((l,m,h)=>{const b=l.sandboxed,y=l.transparent,x="tox-dialog__iframe",k={...l.label.map(z=>({title:z})).getOr({}),...h.map(z=>({srcdoc:z})).getOr({}),...b?{sandbox:"allow-scripts allow-same-origin"}:{}},T=(z=>{const U=Io(z.getOr(""));return{getValue:J=>U.get(),setValue:(J,Q)=>{U.get()!==Q&&Bo(J.element,"srcdoc",Q),U.set(Q)}}})(h),N=l.label.map(z=>Nh(z,m)),L=$r.parts.field({factory:{sketch:z=>Q1({uid:z.uid,dom:{tag:"iframe",attributes:k,classes:y?[x]:[x,`${x}--opaque`]},behaviours:Vt([fa.config({}),nn.config({}),ef(h,T.getValue,T.setValue)])})}});return kd(N,L,["tox-form__group--stretched"],[])})(e,r.shared.providers,a),(e,r,a,l)=>{const m=Un(r,{source:"dynamic"});return yi(sk)(e,m,a,l)}),button:yi((e,r)=>((a,l)=>{const m=QE(a.name,"custom");return h=D.none(),b=$r.parts.field({factory:Fi,...YE(a,D.some(m),l,[Tn(""),Ng()])}),kd(h,b,[],[]);var h,b})(e,r.shared.providers)),checkbox:yi((e,r,a)=>((l,m,h)=>{const b=N=>(N.element.dom.click(),D.some(!0)),y=$r.parts.field({factory:{sketch:it},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Vt([Ng(),Ko.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:N=>{Fo(N.element).each(L=>Us(L,"tox-checkbox--disabled"))},onEnabled:N=>{Fo(N.element).each(L=>Ws(L,"tox-checkbox--disabled"))}}),fa.config({}),nn.config({}),BE(h,$A,WA),Ho.config({mode:"special",onEnter:b,onSpace:b,stopSpaceKeyup:!0}),On("checkbox-events",[Ct(Cu(),(N,L)=>{Co(N,Hc,{name:l.name})})])])}),x=$r.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ks(m.translate(l.label))],behaviours:Vt([G1.config({})])}),k=N=>tu("checked"===N?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+N]},m.icons),T=es({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[k("checked"),k("unchecked")]});return $r.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[y,T.asSpec(),x],fieldBehaviours:Vt([Ko.config({disabled:()=>!l.enabled||m.isDisabled()}),vi()])})})(e,r.shared.providers,a)),colorinput:yi((e,r,a)=>((l,m,h,b)=>{const y=$r.parts.field({factory:Sh,inputClasses:["tox-textfield"],data:b,onSetValue:N=>Hm.run(N).get(At),inputBehaviours:Vt([Ko.config({disabled:m.providers.isDisabled}),vi(),fa.config({}),Hm.config({invalidClass:"tox-textbox-field-invalid",getRoot:N=>Fo(N.element),notify:{onValid:N=>{const L=Ut.getValue(N);Co(N,nS,{color:L})}},validator:{validateOnLoad:!1,validate:N=>{const L=Ut.getValue(N);if(0===L.length)return rd(Mn.value(!0));{const z=Os("span");qo(z,"background-color",L);const U=Br(z,"background-color").fold(()=>Mn.error("blah"),J=>Mn.value(L));return rd(U)}}}})]),selectOnFocus:!1}),x=l.label.map(N=>Nh(N,m.providers)),k=(N,L)=>{Co(N,q2,{value:L})},T=es((N={dom:{tag:"span",attributes:{"aria-label":m.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Ai,Ti,ha],onLtr:()=>[Ti,Ai,ha]},components:[],fetch:B3(h.getColors(l.storageKey),l.storageKey,h.hasCustomColors()),columns:h.getColorCols(l.storageKey),presets:"color",onItemAction:(N,L)=>{T.getOpt(N).each(z=>{"custom"===L?h.colorPicker(U=>{U.fold(()=>Fr(z,rS),J=>{k(z,J),A3(l.storageKey,J)})},"#ffffff"):k(z,"remove"===L?"":L)})}},sd.sketch({dom:N.dom,components:N.components,toggleClass:"mce-active",dropdownBehaviours:Vt([jp((L=m).providers.isDisabled),vi(),G1.config({}),fa.config({})]),layouts:N.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:L.getSink,fetch:z=>Sg(U=>N.fetch(U)).map(U=>D.from(ev(Un(B2(bo("menu-value"),U,J=>{N.onItemAction(z,J)},N.columns,N.presets,nd.CLOSE_ON_EXECUTE,ot,L.providers),{movement:L2(N.columns,N.presets)})))),parts:{menu:Mb(0,0,N.presets)}})));var N,L;return $r.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:x.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[y,T.asSpec()]}]),fieldBehaviours:Vt([On("form-field-events",[Ct(nS,(N,L)=>{T.getOpt(N).each(z=>{qo(z.element,"background-color",L.event.color)}),Co(N,Hc,{name:l.name})}),Ct(q2,(N,L)=>{$r.getField(N).each(z=>{Ut.setValue(z,L.event.value),dr.getCurrent(N).each(nn.focus)})}),Ct(rS,(N,L)=>{$r.getField(N).each(z=>{dr.getCurrent(N).each(nn.focus)})})])])})})(e,r.shared,r.colorinput,a)),colorpicker:yi((e,r,a)=>((l,m,h)=>{const b=k=>"tox-"+k,y=((e,r)=>lc({name:"ColourPicker",configFields:[je("dom"),De("onValidHex",At),De("onInvalidHex",At)],factory:l=>{const m=((e,r,a,l)=>{const m=(T,N)=>Hm.config({invalidClass:r("invalid"),notify:{onValidate:L=>{Co(L,TE,{type:T})},onValid:L=>{Co(L,OE,{type:T,value:Ut.getValue(L)})},onInvalid:L=>{Co(L,CS,{type:T,value:Ut.getValue(L)})}},validator:{validate:L=>{const z=Ut.getValue(L),U=N(z)?Mn.value(!0):Mn.error(e("aria.input.invalid"));return rd(U)},validateOnLoad:!1}}),h=(T,N,L,z,U)=>{const J=e(iw+"range"),ce=[$r.parts.label({dom:{tag:"label",attributes:{"aria-label":z}},components:[Ks(L)]}),$r.parts.field({data:U,factory:Sh,inputAttributes:{type:"text",..."hex"===N?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:Vt([m(N,T),fa.config({})]),onSetValue:de=>{Hm.isInvalid(de)&&Hm.run(de).get(At)}})],ee="hex"!==N?[$r.parts["aria-descriptor"]({text:J})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:ce.concat(ee)}},b=(T,N)=>{Ut.setValue(T,{red:N.red,green:N.green,blue:N.blue})},y=es({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=(T,N)=>{y.getOpt(T).each(L=>{qo(L.element,"background-color","#"+N.value)})};return lc({factory:()=>{const T={red:Io(D.some(255)),green:Io(D.some(255)),blue:Io(D.some(255)),hex:Io(D.some("ffffff"))},N=me=>T[me].get(),L=(me,xe)=>{T[me].set(xe)},z=me=>{const Ne=me.green,Ge=me.blue;L("red",D.some(me.red)),L("green",D.some(Ne)),L("blue",D.some(Ge))},U=(me,xe)=>{const Ne=xe.event;"hex"!==Ne.type?L(Ne.type,D.none()):l(me)},J=(me,xe)=>{const Ne=xe.event;"hex"===Ne.type?((Ge,Et)=>{a(Ge);const _t=S_(Et);L("hex",D.some(_t.value));const Ot=Up(_t);b(Ge,Ot),z(Ot),Co(Ge,sw,{hex:_t}),x(Ge,_t)})(me,Ne.value):((Ge,Et,_t)=>{const Ot=parseInt(_t,10);L(Et,D.some(Ot)),N("red").bind(so=>N("green").bind(_o=>N("blue").map(go=>_g(so,_o,go,1)))).each(so=>{const _o=((go,Uo)=>{const Xo=$b(Uo);return Qp.getField(go,"hex").each(Yo=>{nn.isFocused(Yo)||Ut.setValue(go,{hex:Xo.value})}),Xo})(Ge,so);Co(Ge,sw,{hex:_o}),x(Ge,_o)})})(me,Ne.type,Ne.value)},Q=me=>({label:e(iw+me+".label"),description:e(iw+me+".description")}),re=Q("red"),ce=Q("green"),ee=Q("blue"),de=Q("hex");return Un(Qp.sketch(me=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[me.field("red",$r.sketch(h(x2,"red",re.label,re.description,255))),me.field("green",$r.sketch(h(x2,"green",ce.label,ce.description,255))),me.field("blue",$r.sketch(h(x2,"blue",ee.label,ee.description,255))),me.field("hex",$r.sketch(h(O_,"hex",de.label,de.description,"ffffff"))),y.asSpec()],formBehaviours:Vt([Hm.config({invalidClass:r("form-invalid")}),On("rgb-form-events",[Ct(OE,J),Ct(CS,U),Ct(TE,U)])])})),{apis:{updateHex:(me,xe)=>{Ut.setValue(me,{hex:xe.value}),((Ne,Ge)=>{const Et=Up(Ge);b(Ne,Et),z(Et)})(me,xe),x(me,xe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(T,N,L)=>{T.updateHex(N,L)}},extraApis:{}})})(e,r,l.onValidHex,l.onInvalidHex),h=((J,Q)=>{const re=cu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[Q("sv-palette-spectrum")]}}),ce=cu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[Q("sv-palette-thumb")],innerHtml:`<div class=${Q("sv-palette-inner-thumb")} role="presentation"></div>`}}),ee=(de,me)=>{const{width:xe,height:Ne}=de,Ge=de.getContext("2d");if(null===Ge)return;Ge.fillStyle=me,Ge.fillRect(0,0,xe,Ne);const Et=Ge.createLinearGradient(0,0,xe,0);Et.addColorStop(0,"rgba(255,255,255,1)"),Et.addColorStop(1,"rgba(255,255,255,0)"),Ge.fillStyle=Et,Ge.fillRect(0,0,xe,Ne);const _t=Ge.createLinearGradient(0,0,0,Ne);_t.addColorStop(0,"rgba(0,0,0,0)"),_t.addColorStop(1,"rgba(0,0,0,1)"),Ge.fillStyle=_t,Ge.fillRect(0,0,xe,Ne)};return lc({factory:de=>{const me=ne({x:0,y:0}),xe=Vt([dr.config({find:D.some}),nn.config({})]);return cu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[Q("sv-palette")]},model:{mode:"xy",getInitialValue:me},rounded:!1,components:[re,ce],onChange:(Ne,Ge,Et)=>{Co(Ne,CE,{value:Et})},onInit:(Ne,Ge,Et,_t)=>{ee(Et.element.dom,E3(R_))},sliderBehaviours:xe})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(de,me,xe)=>{((Ne,Ge)=>{const Et=Ne.components()[0].element.dom,_t=Gb(Ge,100,100),Ot=C2(_t);ee(Et,E3(Ot))})(me,xe)},setThumb:(de,me,xe)=>{((Ne,Ge)=>{const Et=z1(Up(Ge));cu.setValue(Ne,{x:Et.saturation,y:100-Et.value})})(me,xe)}},extraApis:{}})})(0,r),b={paletteRgba:Io(R_),paletteHue:Io(0)},y=es(((J,Q)=>{const re=cu.parts.spectrum({dom:{tag:"div",classes:[Q("hue-slider-spectrum")],attributes:{role:"presentation"}}}),ce=cu.parts.thumb({dom:{tag:"div",classes:[Q("hue-slider-thumb")],attributes:{role:"presentation"}}});return cu.sketch({dom:{tag:"div",classes:[Q("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:ne(0)},components:[re,ce],sliderBehaviours:Vt([nn.config({})]),onChange:(ee,de,me)=>{Co(ee,aw,{value:me})}})})(0,r)),x=es(h.sketch({})),k=es(m.sketch({})),T=(J,Q,re)=>{x.getOpt(J).each(ce=>{h.setHue(ce,re)})},N=(J,Q)=>{k.getOpt(J).each(re=>{m.updateHex(re,Q)})},L=(J,Q,re)=>{y.getOpt(J).each(ce=>{cu.setValue(ce,100-re/360*100)})},z=(J,Q)=>{x.getOpt(J).each(re=>{h.setThumb(re,Q)})},U=(J,Q,re,ce)=>{((ee,de)=>{const me=Up(ee);b.paletteRgba.set(me),b.paletteHue.set(de)})(Q,re),Tt(ce,ee=>{ee(J,Q,re)})};return{uid:l.uid,dom:l.dom,components:[x.asSpec(),y.asSpec(),k.asSpec()],behaviours:Vt([On("colour-picker-events",[Ct(sw,(()=>{const J=[T,L,z];return(Q,re)=>{const ce=re.event.hex,ee=z1(Up(ce));U(Q,ce,ee.hue,J)}})()),Ct(CE,(()=>{const J=[N];return(Q,re)=>{const ce=re.event.value,ee=b.paletteHue.get(),de=Gb(ee,ce.x,100-ce.y),me=O2(de);U(Q,me,ee,J)}})()),Ct(aw,(()=>{const J=[T,N];return(Q,re)=>{const ce=(100-re.event.value)/100*360,ee=b.paletteRgba.get(),de=z1(ee),me=Gb(ce,de.saturation,de.value),xe=O2(me);U(Q,xe,ce,J)}})())]),dr.config({find:J=>k.getOpt(J)}),Ho.config({mode:"acyclic"})])}}}))((k=m,T=>k.translate(mv[T])),b),x=es(y.sketch({dom:{tag:"div",classes:[b("color-picker-container")],attributes:{role:"presentation"}},onValidHex:k=>{Co(k,au,{name:"hex-valid",value:!0})},onInvalidHex:k=>{Co(k,au,{name:"hex-valid",value:!1})}}));var k;return{dom:{tag:"div"},components:[x.asSpec()],behaviours:Vt([ef(h,k=>{const T=x.get(k);return dr.getCurrent(T).bind(N=>Ut.getValue(N).hex).map(N=>"#"+Bi(N,"#")).getOr("")},(k,T)=>{const N=D.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(T)).bind(z=>ks(z,1)),L=x.get(k);dr.getCurrent(L).fold(()=>{console.log("Can not find form")},z=>{Ut.setValue(z,{hex:N.getOr("")}),Qp.getField(z,"hex").each(U=>{Fr(U,am())})})}),Ng()])}})(0,r.shared.providers,a)),dropzone:yi((e,r,a)=>((l,m,h)=>{const b=(U,J)=>{J.stop()},y=U=>(J,Q)=>{Tt(U,re=>{re(J,Q)})},x=(U,J)=>{var Q;Ko.isDisabled(U)||T(U,null===(Q=J.event.raw.dataTransfer)||void 0===Q?void 0:Q.files)},k=(U,J)=>{T(U,J.event.raw.target.files)},T=(U,J)=>{J&&(Ut.setValue(U,((Q,re)=>{const ce=Vm.explode(re.getOption("images_file_types"));return Ie(_a(Q),ee=>Jo(ce,de=>si(ee.name.toLowerCase(),`.${de.toLowerCase()}`)))})(J,m)),Co(U,Hc,{name:l.name}))},N=es({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Vt([On("input-file-events",[Su(Sc()),Su(lm())])])}),L=l.label.map(U=>Nh(U,m)),z=$r.parts.field({factory:{sketch:U=>({uid:U.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Vt([Tn(h.getOr([])),Ng(),Ko.config({}),Ln.config({toggleClass:"dragenter",toggleOnExecute:!1}),On("dropzone-events",[Ct("dragenter",y([b,Ln.toggle])),Ct("dragleave",y([b,Ln.toggle])),Ct("dragover",b),Ct("drop",y([b,x])),Ct(Cu(),k)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ks(m.translate("Drop an image here"))]},Fi.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ks(m.translate("Browse for an image")),N.asSpec()],action:J=>{N.get(J).element.dom.click()},buttonBehaviours:Vt([fa.config({}),jp(m.isDisabled),vi()])})]}]})}});return kd(L,z,["tox-form__group--stretched"],[])})(e,r.shared.providers,a)),grid:yi((e,r)=>{return{dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${(a=e).columns}col`]},components:Xe(a.items,r.shared.interpreter)};var a}),listbox:yi((e,r,a)=>((l,m,h)=>{const b=m.shared.providers,y=h.bind(N=>e0(l.items,N)).orThunk(()=>qr(l.items).filter(MS)),x=l.label.map(N=>Nh(N,b)),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[$r.parts.field({dom:{},factory:{sketch:N=>mw({uid:N.uid,text:y.map(L=>L.text),icon:D.none(),tooltip:l.label,role:D.none(),fetch:(L,z)=>{const U=du(L,l.name,l.items,Ut.getValue(L));z(nf(U,nd.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:D.none()}))},onSetup:ne(At),getApi:ne({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[fa.config({}),ef(y.map(L=>L.value),L=>Xr(L.element,RS),(L,z)=>{e0(l.items,z).each(U=>{Bo(L.element,RS,U.value),Co(L,id,{text:U.text})})})]},"tox-listbox",m.shared)}})]};return $r.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:en([x.toArray(),[T]]),fieldBehaviours:Vt([Ko.config({disabled:ne(!l.enabled),onDisabled:N=>{$r.getField(N).each(Ko.disable)},onEnabled:N=>{$r.getField(N).each(Ko.enable)}})])})})(e,r,a)),selectbox:yi((e,r,a)=>((l,m,h)=>{const b=Xe(l.items,N=>({text:m.translate(N.text),value:N.value})),y=l.label.map(N=>Nh(N,m)),x=$r.parts.field({dom:{},...h.map(N=>({data:N})).getOr({}),selectAttributes:{size:l.size},options:b,factory:gw,selectBehaviours:Vt([Ko.config({disabled:()=>!l.enabled||m.isDisabled()}),fa.config({}),On("selectbox-change",[Ct(Cu(),(N,L)=>{Co(N,Hc,{name:l.name})})])])}),k=l.size>1?D.none():D.some(tu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},m.icons)),T={dom:{tag:"div",classes:["tox-selectfield"]},components:en([[x],k.toArray()])};return $r.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:en([y.toArray(),[T]]),fieldBehaviours:Vt([Ko.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:N=>{$r.getField(N).each(Ko.disable)},onEnabled:N=>{$r.getField(N).each(Ko.enable)}}),vi()])})})(e,r.shared.providers,a)),sizeinput:yi((e,r)=>((a,l)=>{let m=gv;const h=bo("ratio-event"),b=z=>tu(z,{tag:"span",classes:["tox-icon","tox-lock-icon__"+z]},l.icons),y=uc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:l.translate(a.label.getOr("Constrain proportions"))}},components:[b("lock"),b("unlock")],buttonBehaviours:Vt([Ko.config({disabled:()=>!a.enabled||l.isDisabled()}),vi(),fa.config({})])}),x=z=>({dom:{tag:"div",classes:["tox-form__group"]},components:z}),k=z=>$r.parts.field({factory:Sh,inputClasses:["tox-textfield"],inputBehaviours:Vt([Ko.config({disabled:()=>!a.enabled||l.isDisabled()}),vi(),fa.config({}),On("size-input-events",[Ct(_c(),(U,J)=>{Co(U,h,{isField1:z})}),Ct(Cu(),(U,J)=>{Co(U,Hc,{name:a.name})})])]),selectOnFocus:!1}),T=z=>({dom:{tag:"label",classes:["tox-label"]},components:[Ks(l.translate(z))]}),N=uc.parts.field1(x([$r.parts.label(T("Width")),k(!0)])),L=uc.parts.field2(x([$r.parts.label(T("Height")),k(!1)]));return uc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[N,L,x([T("\xa0"),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(z,U,J)=>{pw(Ut.getValue(z)).each(Q=>{m(Q).each(re=>{Ut.setValue(U,(ce=>{const ee={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let de=ce.value.toFixed((me=ce.unit)in ee?ee[me]:1);var me;return-1!==de.indexOf(".")&&(de=de.replace(/\.?0*$/,"")),de+ce.unit})(re))})})},coupledFieldBehaviours:Vt([Ko.config({disabled:()=>!a.enabled||l.isDisabled(),onDisabled:z=>{uc.getField1(z).bind($r.getField).each(Ko.disable),uc.getField2(z).bind($r.getField).each(Ko.disable),uc.getLock(z).each(Ko.disable)},onEnabled:z=>{uc.getField1(z).bind($r.getField).each(Ko.enable),uc.getField2(z).bind($r.getField).each(Ko.enable),uc.getLock(z).each(Ko.enable)}}),vi(),On("size-input-events2",[Ct(h,(z,U)=>{const J=U.event.isField1,Q=J?uc.getField1(z):uc.getField2(z),re=J?uc.getField2(z):uc.getField1(z),ce=Q.map(Ut.getValue).getOr(""),ee=re.map(Ut.getValue).getOr("");m=((de,me)=>{const xe=pw(de).toOptional(),Ne=pw(me).toOptional();return Nn(xe,Ne,(Ge,Et)=>BS(Ge,Et.unit).map(_t=>Et.value/_t).map(_t=>{return Ot=_t,so=Et.unit,_o=>BS(_o,so).map(go=>({value:go*Ot,unit:so}));var Ot,so}).getOr(gv)).getOr(gv)})(ce,ee)})])])})})(e,r.shared.providers)),slider:yi((e,r,a)=>((l,m,h)=>{const b=cu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ks(m.translate(l.label))]}),y=cu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),x=cu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return cu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:l.min,maxX:l.max,getInitialValue:ne(h.getOrThunk(()=>(Math.abs(l.max)-Math.abs(l.min))/2))},components:[b,y,x],sliderBehaviours:Vt([Ng(),nn.config({})]),onChoose:(k,T,N)=>{Co(k,Hc,{name:l.name,value:N})}})})(e,r.shared.providers,a)),urlinput:yi((e,r,a)=>((l,m,h,b)=>{const y=m.shared.providers,x=ce=>{const ee=Ut.getValue(ce);h.addToHistory(ee.value,l.filetype)},k={...b.map(ce=>({initialData:ce})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":oO,type:"url"},minChars:0,responseTime:0,fetch:ce=>{const ee=((me,xe,Ne)=>{var Ge,Et;const _t=Ut.getValue(xe),Ot=null!==(Et=null===(Ge=_t?.meta)||void 0===Ge?void 0:Ge.text)&&void 0!==Et?Et:_t.value;return Ne.getLinkInformation().fold(()=>[],so=>{const _o=jS(Ot,(Uo=Ne.getHistory(me),Xe(Uo,Xo=>Ew(Xo,Xo))));var Uo,go;return"file"===me?(go=[_o,jS(Ot,UA(so)),jS(Ot,en([ZS(so),eO(so),tO(so)]))],Gt(go,(Uo,Xo)=>0===Uo.length||0===Xo.length?Uo.concat(Xo):Uo.concat(ZA,Xo),[])):_o})})(l.filetype,ce,h),de=nf(ee,nd.BUBBLE_TO_SANDBOX,m,{isHorizontalMenu:!1,search:D.none()});return rd(de)},getHotspot:ce=>Q.getOpt(ce),onSetValue:(ce,ee)=>{ce.hasConfigured(Hm)&&Hm.run(ce).get(At)},typeaheadBehaviours:Vt([...h.getValidationHandler().map(ce=>Hm.config({getRoot:ee=>Fo(ee.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ee,de)=>{L.getOpt(ee).each(me=>{Bo(me.element,"title",y.translate(de))})}},validator:{validate:ee=>{const de=Ut.getValue(ee);return Mg(Sg(me=>{ce({type:l.filetype,url:de.value},xe=>{if("invalid"===xe.status){const Ne=Mn.error(xe.message);me(Ne)}else{const Ne=Mn.value(xe.message);me(Ne)}})}))},validateOnLoad:!1}})).toArray(),Ko.config({disabled:()=>!l.enabled||y.isDisabled()}),fa.config({}),On("urlinput-events",[Ct(am(),ce=>{const ee=rc(ce.element),de=ee.trim();de!==ee&&Xc(ce.element,de),"file"===l.filetype&&Co(ce,Hc,{name:l.name})}),Ct(Cu(),ce=>{Co(ce,Hc,{name:l.name}),x(ce)}),Ct($h(),ce=>{Co(ce,Hc,{name:l.name}),x(ce)})])]),eventOrder:{[am()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ce=>ce.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:m.shared.getSink,parts:{menu:Mb(0,0,"normal")},onExecute:(ce,ee,de)=>{Co(ee,qp,{})},onItemExecute:(ce,ee,de,me)=>{x(ce),Co(ce,Hc,{name:l.name})}},T=$r.parts.field({...k,factory:FS}),N=l.label.map(ce=>Nh(ce,y)),L=es(((ce,ee,de=ce,me=ce)=>tu(de,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ce],attributes:{title:y.translate(me),"aria-live":"polite",...ee.fold(()=>({}),xe=>({id:xe}))}},y.icons))("invalid",D.some(oO),"warning")),z=es({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[L.asSpec()]}),U=h.getUrlPicker(l.filetype),J=bo("browser.url.event"),Q=es({dom:{tag:"div",classes:["tox-control-wrap"]},components:[T,z.asSpec()],behaviours:Vt([Ko.config({disabled:()=>!l.enabled||y.isDisabled()})])}),re=es(JE({name:l.name,icon:D.some("browse"),text:l.label.getOr(""),enabled:l.enabled,primary:!1,buttonType:D.none(),borderless:!0},ce=>Fr(ce,J),y,[],["tox-browse-url"]));return $r.sketch({dom:V2([]),components:N.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:en([[Q.asSpec()],U.map(()=>re.asSpec()).toArray()])}]),fieldBehaviours:Vt([Ko.config({disabled:()=>!l.enabled||y.isDisabled(),onDisabled:ce=>{$r.getField(ce).each(Ko.disable),re.getOpt(ce).each(Ko.disable)},onEnabled:ce=>{$r.getField(ce).each(Ko.enable),re.getOpt(ce).each(Ko.enable)}}),vi(),On("url-input-events",[Ct(J,ce=>{dr.getCurrent(ce).each(ee=>{const de=Ut.getValue(ee),me={fieldname:l.name,...de};U.each(xe=>{xe(me).get(Ne=>{Ut.setValue(ee,Ne),Co(ce,Hc,{name:l.name})})})})})])])})})(e,r,r.urlinput,a)),customeditor:yi(e=>{const r=Ds(),a=es({dom:{tag:e.tag}}),l=Ds();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Vt([On("custom-editor-events",[ys(m=>{a.getOpt(m).each(h=>{var b;(b=e,Wo(b,"init")?e.init(h.element.dom):LE.load(e.scriptId,e.scriptUrl).then(b=>b(h.element.dom,e.settings))).then(b=>{l.on(y=>{b.setValue(y)}),l.clear(),r.set(b)})})})]),ef(D.none(),()=>r.get().fold(()=>l.get().getOr(""),m=>m.getValue()),(m,h)=>{r.get().fold(()=>l.set(h),b=>b.setValue(h))}),Ng()]),components:[a.asSpec()]}}),htmlpanel:yi(e=>Xu.sketch("presentation"===e.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Vt([fa.config({}),nn.config({})])})),imagepreview:yi((e,r,a)=>((l,m)=>{const h=Io(m.getOr({url:""})),b=es({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:m.map(T=>({src:T.url})).getOr({})}}),y=es({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[b.asSpec()]}),x={};l.height.each(T=>x.height=T);const k=m.map(T=>({url:T.url,zoom:D.from(T.zoom),cachedWidth:D.from(T.cachedWidth),cachedHeight:D.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:x,attributes:{role:"presentation"}},components:[y.asSpec()],behaviours:Vt([Ng(),ef(k,()=>h.get(),(T,N)=>{const L={url:N.url};N.zoom.each(U=>L.zoom=U),N.cachedWidth.each(U=>L.cachedWidth=U),N.cachedHeight.each(U=>L.cachedHeight=U),h.set(L);const z=()=>{const{cachedWidth:U,cachedHeight:J,zoom:Q}=L;if(!_n(U)&&!_n(J)){if(_n(Q)){const ce=((ee,de,me)=>{const xe=vr(ee),Ne=Ns(ee);return Math.min(xe/de,Ne/me,1)})(T.element,U,J);L.zoom=ce}const re=((ce,ee,de,me,xe)=>{const Ne=de*xe,Ge=me*xe,Et=Math.max(0,ce/2-Ne/2),_t=Math.max(0,ee/2-Ge/2);return{left:Et.toString()+"px",top:_t.toString()+"px",width:Ne.toString()+"px",height:Ge.toString()+"px"}})(vr(T.element),Ns(T.element),U,J,L.zoom);y.getOpt(T).each(ce=>{xi(ce.element,re)})}};b.getOpt(T).each(U=>{const J=U.element;var Q;N.url!==Xr(J,"src")&&(Bo(J,"src",N.url),Ws(T.element,"tox-imagepreview__loaded")),z(),(Q=J,new Promise((re,ce)=>{const ee=()=>{me(),re(Q)},de=[oi(Q,"load",ee),oi(Q,"error",()=>{me(),ce("Unable to load data from image: "+Q.dom.src)})],me=()=>Tt(de,xe=>xe.unbind());Q.dom.complete&&ee()})).then(re=>{T.getSystem().isConnected()&&(Us(T.element,"tox-imagepreview__loaded"),L.cachedWidth=re.dom.naturalWidth,L.cachedHeight=re.dom.naturalHeight,z())})})})])}})(e,a)),table:yi((e,r)=>((a,l)=>{const m=y=>({dom:{tag:"td",innerHtml:l.translate(y)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(b=a.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Xe(b,y=>({dom:{tag:"th",innerHtml:l.translate(y)}}))}]}),(h=a.cells,{dom:{tag:"tbody"},components:Xe(h,y=>({dom:{tag:"tr"},components:Xe(y,m)}))})],behaviours:Vt([fa.config({}),nn.config({})])};var h,b})(e,r.shared.providers)),tree:yi((e,r)=>((a,l)=>{const m=a.onLeafAction.getOr(At),h=a.onToggleExpand.getOr(At),y=Io(a.defaultExpandedIds),x=Io(a.defaultSelectedId),k=bo("tree-id"),T=(N,L)=>a.items.map(z=>"leaf"===z.type?yw({leaf:z,selectedId:N,onLeafAction:m,visible:!0,treeId:k,backstage:l}):PS({directory:z,selectedId:N,onLeafAction:m,expandedIds:L,labelTabstopping:!0,treeId:k,backstage:l}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(x.get(),y.get()),behaviours:Vt([Ho.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),On(xw,[Ct("expand-tree-node",(N,L)=>{const{expanded:z,node:U}=L.event;y.set(z?[...y.get(),U]:y.get().filter(J=>J!==U)),h(y.get(),{expanded:z,node:U})})]),Ki.config({channels:{[`update-active-item-${k}`]:{onReceive:(N,L)=>{x.set(D.some(L.value)),pn.set(N,T(D.some(L.value),y.get()))}}}}),pn.config({})])}})(e,r)),panel:yi((e,r)=>{return{dom:{tag:"div",classes:(a=e).classes},components:Xe(a.items,r.shared.interpreter)};var a})},GA={field:(e,r)=>r,record:ne([])},nO=(e,r,a,l)=>{const m=Un(l,{shared:{interpreter:h=>Ow(e,h,a,m)}});return Ow(e,r,a,m)},Ow=(e,r,a,l)=>Kt(qA,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),m=>m(e,r,a,l)),wv=(e,r,a)=>Ow(GA,e,r,a),Ju="layout-inset",Hh=e=>e.x,xv=(e,r)=>e.x+e.width/2-r.width/2,Cv=(e,r)=>e.x+e.width-r.width,Tw=e=>e.y,Aw=(e,r)=>e.y+e.height-r.height,_v=(e,r)=>e.y+e.height/2-r.height/2,rf=(e,r,a)=>gi(Cv(e,r),Aw(e,r),a.insetSouthwest(),lp(),"southwest",hi(e,{right:0,bottom:3}),Ju),Nw=(e,r,a)=>gi(Hh(e),Aw(e,r),a.insetSoutheast(),Pf(),"southeast",hi(e,{left:1,bottom:3}),Ju),sf=(e,r,a)=>gi(Cv(e,r),Tw(e),a.insetNorthwest(),Hf(),"northwest",hi(e,{right:0,top:2}),Ju),af=(e,r,a)=>gi(Hh(e),Tw(e),a.insetNortheast(),ip(),"northeast",hi(e,{left:1,top:2}),Ju),uu=(e,r,a)=>gi(xv(e,r),Tw(e),a.insetNorth(),k0(),"north",hi(e,{top:2}),Ju),lf=(e,r,a)=>gi(xv(e,r),Aw(e,r),a.insetSouth(),E0(),"south",hi(e,{bottom:3}),Ju),s0=(e,r,a)=>gi(Cv(e,r),_v(e,r),a.insetEast(),T0(),"east",hi(e,{right:0}),Ju),US=(e,r,a)=>gi(Hh(e),_v(e,r),a.insetWest(),O0(),"west",hi(e,{left:1}),Ju),rO=e=>{switch(e){case"north":return uu;case"northeast":return af;case"northwest":return sf;case"south":return lf;case"southeast":return Nw;case"southwest":return rf;case"east":return s0;case"west":return US}},sO=(e,r,a,l,m)=>Jf(l).map(rO).getOr(uu)(e,r,a,l,m),KA=e=>{switch(e){case"north":return lf;case"northeast":return Nw;case"northwest":return rf;case"south":return uu;case"southeast":return af;case"southwest":return sf;case"east":return US;case"west":return s0}},XA=(e,r,a,l,m)=>Jf(l).map(KA).getOr(uu)(e,r,a,l,m),WS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},YA=(e,r,a)=>{const l={maxHeightFunction:nh()};return()=>a()?{type:"node",root:rs(Gr(e())),node:D.from(e()),bubble:lg(12,12,WS),layouts:{onRtl:()=>[af],onLtr:()=>[sf]},overrides:l}:{type:"hotspot",hotspot:r(),bubble:lg(-12,12,WS),layouts:{onRtl:()=>[Ti,Ai,ha],onLtr:()=>[Ai,Ti,ha]},overrides:l}},JA=(e,r,a)=>()=>a()?{type:"node",root:rs(Gr(e())),node:D.from(e()),layouts:{onRtl:()=>[uu],onLtr:()=>[uu]}}:{type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[ha],onLtr:()=>[ha]}},aO=(e,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const a=e.selection.getRng(),l=e.model.table.getSelectedCells();if(l.length>1){const h=l[l.length-1],b={firstCell:pe(l[0]),lastCell:pe(h)};return D.some(b)}return D.some(Du.range(pe(a.startContainer),a.startOffset,pe(a.endContainer),a.endOffset))}}),iO=e=>r=>({type:"node",root:e(),node:r}),ld=(e,r,a)=>{const l=Hp(e),m=()=>pe(e.getBody()),h=()=>pe(e.getContentAreaContainer()),b=()=>l||!a();return{inlineDialog:YA(h,r,b),banner:JA(h,r,b),cursor:aO(e,m),node:iO(m)}},QA=e=>(r,a)=>{H3(e)(r,a)},lO=e=>()=>qa(e),cO=e=>r=>V1(e,r),e5=e=>r=>N2(e,r),Sv=e=>()=>xb(e),kv=e=>bs(e,"items"),dO=e=>bs(e,"format"),Ev=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],uO=e=>Gt(e,(r,a)=>{if(Wo(a,"items")){const l=uO(a.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:a.title,items:l.formats}])}}if(Wo(a,"inline")||Wo(a,"block")||Wo(a,"selector")){const l=`custom-${No(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:a}]),formats:r.formats.concat([{title:a.title,format:l,icon:a.icon}])}}return{...r,formats:r.formats.concat(a)}},{customFormats:[],formats:[]}),mO=e=>Uy(e).map(r=>{const a=((l,m)=>{const h=uO(m),b=y=>{Tt(y,x=>{l.formatter.has(x.name)||l.formatter.register(x.name,x.format)})};return l.formatter?b(h.customFormats):l.on("init",()=>{b(h.customFormats)}),h.formats})(e,r);return Wy(e)?Ev.concat(a):a}).getOr(Ev),cd=(e,r,a)=>({...e,type:"formatter",isSelected:r(e.format),getStylePreview:a(e.format)}),Ov=(e,r,a,l)=>{const m=h=>Xe(h,b=>kv(b)?(y=>{const x=m(y.items);return{...y,type:"submenu",getStyleItems:ne(x)}})(b):dO(b)?cd(b,a,l):(y=>{const x=_r(y);return 1===x.length&&Do(x,"title")})(b)?{...b,type:"separator"}:(y=>{const x=No(y.name)?y.name:bo(y.title),k=`custom-${x}`,T={...y,type:"formatter",format:k,isSelected:a(k),getStylePreview:l(k)};return e.formatter.register(x,T),T})(b));return m(r)},gO=Vm.trim,$S=e=>r=>{return!(!ut(a=r)||1!==a.nodeType||r.contentEditable!==e&&r.getAttribute("data-mce-contenteditable")!==e);var a},t5=$S("true"),hO=$S("false"),pO=(e,r,a,l,m)=>({type:e,title:r,url:a,level:l,attach:m}),qS=e=>e.innerText||e.textContent,fO=e=>{return(r=e)&&"A"===r.nodeName&&void 0!==(r.id||r.name)&&KS(e);var r},GS=e=>e&&/^(H[1-6])$/.test(e.nodeName),KS=e=>(r=>{let a=r;for(;a=a.parentNode;){const l=a.contentEditable;if(l&&"inherit"!==l)return t5(a)}return!1})(e)&&!hO(e),bO=e=>GS(e)&&KS(e),vO=e=>{var r;const a=(l=e).id?l.id:bo("h");var l;return pO("header",null!==(r=qS(e))&&void 0!==r?r:"","#"+a,(l=>GS(l)?parseInt(l.nodeName.substr(1),10):0)(e),()=>{e.id=a})},yO=e=>{const r=e.id||e.name,a=qS(e);return pO("anchor",a||"#"+r,"#"+r,0,At)},o5=e=>gO(e.title).length>0,n5=e=>{const r=Xe(Xi(pe(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),m=>m.dom);return Ie((a=r,Xe(Ie(a,bO),vO)).concat((a=>Xe(Ie(a,fO),yO))(r)),o5);var a},Mw="tinymce-url-history",wO=e=>No(e)&&/^https?/.test(e),xO=e=>ps(e)&&Nr(e,r=>{return!(Ar(a=r)&&a.length<=5&&ts(a,wO));var a}).isNone(),XS=()=>{const e=Im.getItem(Mw);if(null===e)return{};let r;try{r=JSON.parse(e)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Mw+" was not valid JSON",a),{};throw a}return xO(r)?r:(console.log("Local storage "+Mw+" was not valid format",r),{})},YS=e=>{const r=XS();return Kt(r,e).getOr([])},Rw=(e,r)=>{if(!wO(e))return;const a=XS(),l=Kt(a,r).getOr([]),m=Ie(l,h=>h!==e);a[r]=[e].concat(m).slice(0,5),(h=>{if(!xO(h))throw new Error("Bad format for history:\n"+JSON.stringify(h));Im.setItem(Mw,JSON.stringify(h))})(a)},JS=e=>!!e,r5=e=>Gn(Vm.makeMap(e,/[, ]/),JS),QS=e=>D.from(HC(e)),CO=e=>D.from(e).filter(No).getOrUndefined(),Ga=Ap,Qu=Xt,_O=ne([De("shell",!1),je("makeItem"),De("setupItem",At),fi("listBehaviours",[pn])]),tk=St({name:"items",overrides:()=>({behaviours:Vt([pn.config({})])})}),s5=ne([tk]),ok=ul({name:ne("CustomList")(),configFields:_O(),partFields:s5(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[pn.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:Aa(e.listBehaviours,m.behaviours),apis:{setItems:(h,b)=>{var y;(y=h,e.shell?D.some(y):En(y,e,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const k=pn.contents(x),T=b.length,N=T-k.length,L=N>0?X(N,()=>e.makeItem()):[],z=k.slice(T);Tt(z,J=>pn.remove(x,J)),Tt(L,J=>pn.append(x,J));const U=pn.contents(x);Tt(U,(J,Q)=>{e.setupItem(h,J,b[Q],Q)})})}}}},apis:{setItems:(e,r,a)=>{e.setItems(r,a)}}}),em=ne([je("dom"),De("shell",!0),xa("toolbarBehaviours",[pn])]),SO=ne([St({name:"groups",overrides:()=>({behaviours:Vt([pn.config({})])})})]),tm=ul({name:"Toolbar",configFields:em(),partFields:SO(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[pn.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:Aa(e.toolbarBehaviours,m.behaviours),apis:{setGroups:(h,b)=>{var y;(y=h,e.shell?D.some(y):En(y,e,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{pn.set(x,b)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)}}}),a5=At,nk=ot,rk=ne([]);var sk,Dw=Object.freeze({__proto__:null,setup:a5,isDocked:nk,getBehaviours:rk});const Tv=e=>(cs(Br(e,"position"),"fixed")?D.none():So(e)).orThunk(()=>{const r=Os("span");return Lt(e).bind(a=>{_i(a,r);const l=So(r);return Tl(r),l})}),kO=e=>Tv(e).map(Ms).getOrThunk(()=>Kn(0,0)),EO=(e,r)=>{const a=e.element;Us(a,r.transitionClass),Ws(a,r.fadeOutClass),Us(a,r.fadeInClass),r.onShow(e)},OO=(e,r)=>{const a=e.element;Us(a,r.transitionClass),Ws(a,r.fadeInClass),Us(a,r.fadeOutClass),r.onHide(e)},Bw=(e,r)=>e.y>=r.y,TO=(e,r)=>e.bottom<=r.bottom,Lw=(e,r,a)=>({location:"top",leftX:r,topY:a.bounds.y-e.y}),Iw=(e,r,a)=>({location:"bottom",leftX:r,bottomY:e.bottom-a.bounds.bottom}),Hw=e=>e.box.x-e.win.x,Pw=(e,r,a)=>a.getInitialPos().map(l=>{const m=((h,b)=>{const y=b.optScrollEnv.fold(ne(h.bounds.y),x=>x.scrollElmTop+(h.bounds.y-x.currentScrollTop));return Kn(h.bounds.x,y)})(l,r);return{box:us(m.left,m.top,vr(e),Ns(e)),location:l.location}}),Fw=(e,r,a,l,m)=>{const h=((y,x)=>{const k=x.optScrollEnv.fold(ne(y.y),T=>y.y+T.currentScrollTop-T.scrollElmTop);return Kn(y.x,k)})(r,a),b=us(h.left,h.top,r.width,r.height);l.setInitialPos({style:zc(e),position:Ts(e,"position")||"static",bounds:b,location:m.location})},zw=(e,r,a)=>a.getInitialPos().bind(l=>{var m;switch(a.clearInitialPos(),l.position){case"static":return D.some({morph:"static"});case"absolute":const h=Tv(e).getOr(da()),b=ma(h),y=null!==(m=h.dom.scrollTop)&&void 0!==m?m:0;return D.some({morph:"absolute",positionCss:Yc("absolute",Kt(l.style,"left").map(x=>r.x-b.x),Kt(l.style,"top").map(x=>r.y-b.y+y),Kt(l.style,"right").map(x=>b.right-r.right),Kt(l.style,"bottom").map(x=>b.bottom-r.bottom))});default:return D.none()}}),ak=e=>{switch(e.location){case"top":return D.some({morph:"fixed",positionCss:Yc("fixed",D.some(e.leftX),D.some(e.topY),D.none(),D.none())});case"bottom":return D.some({morph:"fixed",positionCss:Yc("fixed",D.some(e.leftX),D.none(),D.none(),D.some(e.bottomY))});default:return D.none()}},AO=(e,r,a)=>{a.setDocked(!1),Tt(["left","right","top","bottom","position"],l=>Lr(e.element,l)),r.onUndocked(e)},ik=(e,r,a,l)=>{const m="fixed"===l.position;a.setDocked(m),oh(e.element,l),(m?r.onDocked:r.onUndocked)(e)},lk=(e,r,a,l,m=!1)=>{r.contextual.each(h=>{h.lazyContext(e).each(b=>{const y=(x=b).y<(k=l.bounds).bottom&&x.bottom>k.y;var x,k;y!==a.isVisible()&&(a.setVisible(y),m&&!y?(jl(e.element,[h.fadeOutClass]),h.onHide(e)):(y?EO:OO)(e,h))})})},Av=(e,r,a,l,m)=>{lk(e,r,a,l,!0),ik(e,r,a,m.positionCss)},a0=(e,r,a)=>{e.getSystem().isConnected()&&((l,m,h)=>{const b=m.lazyViewport(l);lk(l,m,h,b),((e,r,a)=>{const l=e.element;return cs(Br(l,"position"),"fixed")?(y=m=l,x=h=r,k=b=a,Pw(y,x,k).filter(({box:T})=>{return N=k.getModes(),L=T,z=x,ts(N,U=>{switch(U){case"bottom":return TO(L,z.bounds);case"top":return Bw(L,z.bounds)}});var N,L,z}).bind(({box:T})=>zw(y,T,k))).orThunk(()=>h.optScrollEnv.bind(y=>Pw(m,h,b)).bind(({box:y,location:x})=>{const k=$s(),T=Hw({win:k,box:y}),N="top"===x?Lw(k,T,h):Iw(k,T,h);return ak(N)})):((m,h,b)=>{const y=ma(m),x=$s(),k=((T,N,L)=>{const z=N.win,U=N.box,J=Hw(N);return is(T,Q=>{switch(Q){case"bottom":return TO(U,L.bounds)?D.none():D.some(Iw(z,J,L));case"top":return Bw(U,L.bounds)?D.none():D.some(Lw(z,J,L));default:return D.none()}}).getOr({location:"no-dock"})})(b.getModes(),{win:x,box:y},h);return"top"===k.location||"bottom"===k.location?(Fw(m,y,h,b,k),ak(k)):D.none()})(l,r,a);var m,h,b,y,x,k})(l,b,h).each(y=>{((x,k,T,N,L)=>{switch(L.morph){case"static":return AO(x,k,T);case"absolute":return ik(x,k,T,L.positionCss);case"fixed":Av(x,k,T,N,L)}})(l,m,h,b,y)})})(e,r,a)},ck=(e,r,a)=>{a.isDocked()&&((l,m,h)=>{const b=l.element;h.setDocked(!1);const y=m.lazyViewport(l);((x,k,T)=>{const N=x.element;return Pw(N,k,T).bind(({box:L})=>zw(N,L,T))})(l,y,h).each(x=>{switch(x.morph){case"static":AO(l,m,h);break;case"absolute":ik(l,m,h,x.positionCss)}}),h.setVisible(!0),m.contextual.each(x=>{Oi(b,[x.fadeInClass,x.fadeOutClass,x.transitionClass]),x.onShow(l)}),a0(l,m,h)})(e,r,a)},Rg=e=>(r,a,l)=>{const m=a.lazyViewport(r);((h,b,y,x)=>{const k=ma(h),T=$s(),N=x(T,Hw({win:T,box:k}),b);return"bottom"===N.location||"top"===N.location?(L=h,z=k,U=b,Q=N,(J=y).getInitialPos().fold(()=>Fw(L,z,U,J,Q),()=>At),ak(N)):D.none();var L,z,U,J,Q})(r.element,m,l,e).each(h=>{Av(r,a,l,m,h)})},NO=Rg(Lw),MO=Rg(Iw);var dk=Object.freeze({__proto__:null,refresh:a0,reset:ck,isDocked:(e,r,a)=>a.isDocked(),getModes:(e,r,a)=>a.getModes(),setModes:(e,r,a,l)=>a.setModes(l),forceDockToTop:NO,forceDockToBottom:MO}),l5=Object.freeze({__proto__:null,events:(e,r)=>Mr([dm(im(),(a,l)=>{e.contextual.each(m=>{Gi(a.element,m.transitionClass)&&(Oi(a.element,[m.transitionClass,m.fadeInClass]),(r.isVisible()?m.onShown:m.onHidden)(a)),l.stop()})}),Ct(Wg(),(a,l)=>{a0(a,e,r)}),Ct(ey(),(a,l)=>{a0(a,e,r)}),Ct(Jm(),(a,l)=>{ck(a,e,r)})])}),RO=[Jr("contextual",[Oo("fadeInClass"),Oo("fadeOutClass"),Oo("transitionClass"),Ir("lazyContext"),cr("onShow"),cr("onShown"),cr("onHide"),cr("onHidden")]),Gs("lazyViewport",()=>({bounds:$s(),optScrollEnv:D.none()})),wc("modes",["top","bottom"],ae),cr("onDocked"),cr("onUndocked")];const Ka=pi({fields:RO,name:"docking",active:l5,apis:dk,state:Object.freeze({__proto__:null,init:e=>{const r=Io(!1),a=Io(!0),l=Ds(),m=Io(e.modes);return vl({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:m.get,setModes:m.set,readState:()=>`docked:  ${r.get()}, visible: ${a.get()}, modes: ${m.get().join(",")}`})}})}),Vw=ne(bo("toolbar-height-change")),om={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},uk="tox-tinymce--toolbar-sticky-on",mk="tox-tinymce--toolbar-sticky-off",Zw=(e,r)=>Do(Ka.getModes(e),r),jw=e=>{const r=e.element;Fo(r).each(a=>{const l="padding-"+Ka.getModes(e)[0];if(Ka.isDocked(e)){const m=vr(a);qo(r,"width",m+"px"),qo(a,l,Ui(h=r)+(parseInt(Ts(h,"margin-top"),10)||0)+(parseInt(Ts(h,"margin-bottom"),10)||0)+"px")}else Lr(r,"width"),Lr(a,l);var h})},DO=(e,r)=>{r?(Ws(e,om.fadeOutClass),jl(e,[om.transitionClass,om.fadeInClass])):(Ws(e,om.fadeInClass),jl(e,[om.fadeOutClass,om.transitionClass]))},BO=(e,r)=>{const a=pe(e.getContainer());r?(Us(a,uk),Ws(a,mk)):(Us(a,mk),Ws(a,uk))},gk=(e,r)=>{const a=Ds(),l=r.getSink,m=y=>{l().each(x=>y(x.element))},h=y=>{e.inline||jw(y),BO(e,Ka.isDocked(y)),y.getSystem().broadcastOn([$l()],{}),l().each(x=>x.getSystem().broadcastOn([$l()],{}))},b=e.inline?[]:[Ki.config({channels:{[Vw()]:{onReceive:jw}}})];return[nn.config({}),Ka.config({contextual:{lazyContext:y=>{const x=Ui(y.element),k=e.inline?e.getContentAreaContainer():e.getContainer();return D.from(k).map(T=>{const N=ma(pe(T));return W1(e,y.element).fold(()=>{const L=N.height-x,z=N.y+(Zw(y,"top")?0:x);return us(N.x,z,N.width,L)},L=>{const z=Ea(N,tv(L)),U=Zw(y,"top")?z.y:z.y+x;return us(z.x,U,z.width,z.height-x)})})},onShow:()=>{m(y=>DO(y,!0))},onShown:y=>{m(x=>Oi(x,[om.transitionClass,om.fadeInClass])),a.get().each(x=>{((k,T)=>{const N=_e(T);Ud(N).filter(L=>!Zo(T,L)).filter(L=>Zo(L,pe(N.dom.body))||ue(k,L)).each(()=>Ll(T))})(y.element,x),a.clear()})},onHide:y=>{var x,k;(x=y.element,k=l,Rc(x).orThunk(()=>k().toOptional().bind(T=>Rc(T.element)))).fold(a.clear,a.set),m(x=>DO(x,!1))},onHidden:()=>{m(y=>Oi(y,[om.transitionClass]))},...om},lazyViewport:y=>W1(e,y.element).fold(()=>{const x=$s(),k=Y4(e),T=x.y+(Zw(y,"top")?k:0),N=x.height-(Zw(y,"bottom")?k:0);return{bounds:us(x.x,T,x.width,N),optScrollEnv:D.none()}},x=>({bounds:tv(x),optScrollEnv:D.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:Ms(x.element).top})})),modes:[r.header.getDockingMode()],onDocked:h,onUndocked:h}),...b]};var LO=Object.freeze({__proto__:null,setup:(e,r,a)=>{e.inline||(r.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{a().each(Ka.reset)}),e.on("ResizeWindow ResizeEditor",()=>{a().each(jw)}),e.on("SkinLoaded",()=>{a().each(l=>{Ka.isDocked(l)?Ka.reset(l):Ka.refresh(l)})}),e.on("FullscreenStateChanged",()=>{a().each(Ka.reset)})),e.on("AfterScrollIntoView",l=>{a().each(m=>{Ka.refresh(m);const h=m.element;x4(h)&&((b,y)=>{const x=_e(y),k=ft(y).dom.innerHeight,T=ua(x),N=pe(b.elm),L=Al(N),z=Ns(N),U=L.y,J=U+z,Q=Ms(y),re=Ns(y),ce=Q.top,ee=ce+re,de=Math.abs(ce-T.top)<2,me=Math.abs(ee-(T.top+k))<2;de&&U<ee?ds(T.left,U-re,x):me&&J>ce&&ds(T.left,U-k+z+re,x)})(l,h)})}),e.on("PostRender",()=>{BO(e,!1)})},isDocked:e=>e().map(Ka.isDocked).getOr(!1),getBehaviours:gk});const IO=xt([Ys,Vn("items",ur([gn([r_,qs("items",ae)]),ae]))].concat(L1)),HO=[Pr("text"),Pr("tooltip"),Pr("icon"),Wr("search",!1,ur([Ve,xt([Pr("placeholder")])],e=>Is(e)?e?D.some({placeholder:D.none()}):D.none():D.some(e))),Ir("fetch"),Gs("onSetup",()=>At)],PO=xt([Ys,...HO]),hk=e=>oo("menubutton",PO,e),c5=xt([Ys,Hb,_d,Cg,c2,i_,kh,zl("presets","normal",["normal","color","listpreview"]),l_(1),Fp,d3]);var Uw=lc({factory:(e,r)=>{const a={focus:Ho.focusIn,setMenus:(l,m)=>{const h=Xe(m,b=>{const x=hk({type:"menubutton",text:b.text,fetch:k=>{k(b.getItems())}}).mapError(k=>tt(k)).getOrDie();return fv(x,"tox-mbtn",r.backstage,D.some("menuitem"))});pn.set(l,h)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Vt([pn.config({}),On("menubar-events",[ys(l=>{e.onSetup(l)}),Ct(Cc(),(l,m)=>{Oa(l.element,".tox-mbtn--active").each(h=>{Bl(m.event.target,".tox-mbtn").each(b=>{Zo(h,b)||l.getSystem().getByDom(h).each(y=>{l.getSystem().getByDom(b).each(x=>{sd.expand(x),sd.close(y),nn.focus(x)})})})})}),Ct(xf(),(l,m)=>{m.event.prevFocus.bind(h=>l.getSystem().getByDom(h).toOptional()).each(h=>{m.event.newFocus.bind(b=>l.getSystem().getByDom(b).toOptional()).each(b=>{sd.isOpen(h)&&(sd.expand(b),sd.close(h))})})})]),Ho.config({mode:"flow",selector:".tox-mbtn",onEscape:l=>(e.onEscape(l),D.some(!0))}),fa.config({})]),apis:a,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[je("dom"),je("uid"),je("onEscape"),je("backstage"),De("onSetup",At)],apis:{focus:(e,r)=>{e.focus(r)},setMenus:(e,r,a)=>{e.setMenus(r,a)}}});const Ww="container",FO=[xa("slotBehaviours",[])],zO=e=>"<alloy.field."+e+">",d5=(e,r)=>{const a=T=>Yd(e),l=(T,N)=>(L,z)=>En(L,e,z).map(U=>T(U,z)).getOr(N),m=(T,N)=>"true"!==Xr(T.element,"aria-hidden"),h=l(m,!1),b=l((T,N)=>{if(m(T)){const L=T.element;qo(L,"display","none"),Bo(L,"aria-hidden","true"),Co(T,zd(),{name:N,visible:!1})}}),y=(T=b,(N,L)=>{Tt(L,z=>T(N,z))}),x=l((T,N)=>{if(!m(T)){const L=T.element;Lr(L,"display"),jr(L,"aria-hidden"),Co(T,zd(),{name:N,visible:!0})}}),k={getSlotNames:a,getSlot:(T,N)=>En(T,e,N),isShowing:h,hideSlot:b,hideAllSlots:T=>y(T,a()),showSlot:x};var T;return{uid:e.uid,dom:e.dom,components:r,behaviours:p1(e.slotBehaviours),apis:k}},u5=Gn({getSlotNames:(e,r)=>e.getSlotNames(r),getSlot:(e,r,a)=>e.getSlot(r,a),isShowing:(e,r,a)=>e.isShowing(r,a),hideSlot:(e,r,a)=>e.hideSlot(r,a),hideAllSlots:(e,r)=>e.hideAllSlots(r),showSlot:(e,r,a)=>e.showSlot(r,a)},e=>Jg(e)),ml={...u5,sketch:e=>{const r=(()=>{const h=[];return{slot:(b,y)=>(h.push(b),gr(Ww,zO(b),y)),record:ne(h)}})(),a=e(r),l=r.record(),m=Xe(l,h=>et({name:h,pname:zO(h)}));return xd(Ww,FO,m,d5,a)}},m5=xt([_d,Hb,Gs("onShow",At),Gs("onHide",At),kh]),VO=e=>({element:()=>e.element.dom}),ZO=(e,r)=>{const a=Xe(_r(r),l=>{const h=tr(oo("sidebar",m5,r[l]));return{name:l,getApi:VO,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return Xe(a,l=>{const m=Io(At);return e.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:nu([Gu(l,m),Oh(l,m),Ct(zd(),(h,b)=>{const y=b.event;Ue(a,k=>k.name===y.name).each(k=>{(y.visible?k.onShow:k.onHide)(k.getApi(h))})})])})})},jO=e=>ml.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:ZO(r,e),slotBehaviours:nu([ys(a=>ml.hideAllSlots(a))])})),$w=(e,r)=>{Bo(e,"role",r)},i0=e=>dr.getCurrent(e).bind(r=>mc.isGrowing(r)||mc.hasGrown(r)?dr.getCurrent(r).bind(a=>Ue(ml.getSlotNames(a),l=>ml.isShowing(a,l))):D.none()),pk=bo("FixSizeEvent"),fk=bo("AutoSizeEvent");var g5=Object.freeze({__proto__:null,block:(e,r,a,l)=>{Bo(e.element,"aria-busy",!0);const m=r.getRoot(e).getOr(e),h=Vt([Ho.config({mode:"special",onTab:()=>D.some(!0),onShiftTab:()=>D.some(!0)}),nn.config({})]),b=l(m,h),y=m.getSystem().build(b);pn.append(m,sc(y)),y.hasConfigured(Ho)&&r.focus&&Ho.focusIn(y),a.isBlocked()||r.onBlock(e),a.blockWith(()=>pn.remove(m,y))},unblock:(e,r,a)=>{jr(e.element,"aria-busy"),a.isBlocked()&&r.onUnblock(e),a.clear()}}),h5=[Gs("getRoot",D.none),mi("focus",!0),cr("onBlock"),cr("onUnblock")];const nm=pi({fields:h5,name:"blocking",apis:g5,state:Object.freeze({__proto__:null,init:()=>{const e=mp(r=>r.destroy());return vl({readState:e.isSet,blockWith:r=>{e.set({destroy:r})},clear:e.clear,isBlocked:e.isSet})}})}),Dg=e=>{const r=((e,r)=>{const a=document.createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return ya(a.childNodes[0])})(e),a=tn(r),l=Gt(void 0!==(b=r).dom.attributes?b.dom.attributes:[],(x,k)=>"class"===k.name?x:{...x,[k.name]:k.value},{}),m=(b=>Array.prototype.slice.call(b.dom.classList,0))(r),h=0===a.length?{}:{innerHtml:Qh(r)};var b;return{tag:Wt(r),classes:m,attributes:l,...h}},bk=e=>dr.getCurrent(e).each(r=>Ll(r.element)),vk=(e,r,a)=>({within:e,extra:r,withinWidth:a}),yk=(e,r,a)=>{const l=Gt(e,(b,y)=>((x,k)=>{const T=a(x);return D.some({element:x,start:k,finish:k+T,width:T})})(y,b.len).fold(ne(b),x=>({len:x.finish,list:b.list.concat([x])})),{len:0,list:[]}).list,m=Ie(l,b=>b.finish<=r),h=To(m,(b,y)=>b+y.width,0);return{within:m,extra:l.slice(m.length),withinWidth:h}},qw=e=>Xe(e,r=>r.element),WO=(e,r)=>{const a=Xe(r,l=>sc(l));tm.setGroups(e,a)},Nv=(e,r,a)=>{const l=r.builtGroups.get();if(0===l.length)return;const m=aa(e,r,"primary"),h=pa.getCoupled(e,"overflowGroup");qo(m.element,"visibility","hidden");const b=l.concat([h]),y=is(b,k=>Rc(k.element).bind(T=>k.getSystem().getByDom(T).toOptional()));a([]),WO(m,b);const x=((k,T,N,L)=>{const z=((re,ce,ee)=>{const de=yk(ce,re,ee);return 0===de.extra.length?D.some(de):D.none()})(k,T,N).getOrThunk(()=>yk(T,k-N(L),N)),U=z.within,J=z.extra,Q=z.withinWidth;return 1===J.length&&J[0].width<=N(L)?((re,ce,ee)=>{const de=qw(re.concat(ce));return vk(de,[],ee)})(U,J,Q):J.length>=1?((re,ce,ee,de)=>{const me=qw(re).concat([ee]);return vk(me,qw(ce),de)})(U,J,L,Q):(ee=Q,vk(qw(U),[],ee));var ee})(vr(m.element),r.builtGroups.get(),k=>vr(k.element),h);0===x.extra.length?(pn.remove(m,h),a([])):(WO(m,x.within),a(x.extra)),Lr(m.element,"visibility"),Sl(m.element),y.each(nn.focus)},wk=ne([xa("splitToolbarBehaviours",[pa]),wr("builtGroups",()=>Io([]))]),$O=ne([bd(["overflowToggledClass"]),ui("getOverflowBounds"),je("lazySink"),wr("overflowGroups",()=>Io([])),cr("onOpened"),cr("onClosed")].concat(wk())),qO=ne([et({factory:tm,schema:em(),name:"primary"}),dt({schema:em(),name:"overflow"}),dt({name:"overflow-button"}),dt({name:"overflow-group"})]),Gw=ne((e,r)=>{((a,l)=>{const m=Fl.max(a,l,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);qo(a,"max-width",m+"px")})(e,Math.floor(r))}),GO=ne([bd(["toggledClass"]),je("lazySink"),Ir("fetch"),ui("getBounds"),Jr("fireDismissalEventInstead",[De("event",cm())]),km(),cr("onToggled")]),Mv=ne([dt({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Vt([Ln.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),dt({factory:tm,schema:em(),name:"toolbar",overrides:e=>({toolbarBehaviours:Vt([Ho.config({mode:"cyclic",onEscape:r=>(En(r,e,"button").each(nn.focus),D.none())})])})})]),Kw=Ds(),Xw=(e,r)=>{const a=pa.getCoupled(e,"toolbarSandbox");mr.isOpen(a)?mr.close(a):mr.open(a,r.toolbar())},Yw=(e,r,a,l)=>{const m=a.getBounds.map(b=>b()),h=a.lazySink(e).getOrDie();Yi.positionWithinBounds(h,r,{anchor:{type:"hotspot",hotspot:e,layouts:l,overrides:{maxWidthFunction:Gw()}}},m)},KO=(e,r,a,l,m)=>{tm.setGroups(r,m),Yw(e,r,a,l),Ln.on(e)},mu=ul({name:"FloatingToolbarButton",factory:(e,r,a,l)=>({...Fi.sketch({...l.button(),action:m=>{Xw(m,l)},buttonBehaviours:Ni({dump:l.button().buttonBehaviours},[pa.config({others:{toolbarSandbox:m=>((h,b,y)=>{const x=ry();return{dom:{tag:"div",attributes:{id:x.id}},behaviours:Vt([Ho.config({mode:"special",onEscape:k=>(mr.close(k),D.some(!0))}),mr.config({onOpen:(k,T)=>{const N=Kw.get().getOr(!1);y.fetch().get(L=>{KO(h,T,y,b.layouts,L),x.link(h.element),N||Ho.focusIn(T)})},onClose:()=>{Ln.off(h),Kw.get().getOr(!1)||nn.focus(h),x.unlink(h.element)},isPartOf:(k,T,N)=>bm(T,N)||bm(h,N),getAttachPoint:()=>y.lazySink(h).getOrDie()}),Ki.config({channels:{...La({isExtraPart:ot,...y.fireDismissalEventInstead.map(k=>({fireEventInstead:{event:k.event}})).getOr({})}),...Jc({doReposition:()=>{mr.getState(pa.getCoupled(h,"toolbarSandbox")).each(k=>{Yw(h,k,y,b.layouts)})}})}})])}})(m,a,e)}})])}),apis:{setGroups:(m,h)=>{mr.getState(pa.getCoupled(m,"toolbarSandbox")).each(b=>{KO(m,b,e,a.layouts,h)})},reposition:m=>{mr.getState(pa.getCoupled(m,"toolbarSandbox")).each(h=>{Yw(m,h,e,a.layouts)})},toggle:m=>{Xw(m,l)},toggleWithoutFocusing:m=>{var h,b;h=m,b=l,Kw.set(!0),Xw(h,b),Kw.clear()},getToolbar:m=>mr.getState(pa.getCoupled(m,"toolbarSandbox")),isOpen:m=>mr.isOpen(pa.getCoupled(m,"toolbarSandbox"))}}),configFields:GO(),partFields:Mv(),apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggleWithoutFocusing(r)},getToolbar:(e,r)=>e.getToolbar(r),isOpen:(e,r)=>e.isOpen(r)}}),XO=ne([je("items"),bd(["itemSelector"]),xa("tgroupBehaviours",[Ho])]),p5=ne([wt({name:"items",unit:"item"})]),Jw=ul({name:"ToolbarGroup",configFields:XO(),partFields:p5(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.tgroupBehaviours,[Ho.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),xk=e=>Xe(e,r=>sc(r)),Qw=(e,r,a)=>{Nv(e,a,l=>{a.overflowGroups.set(l),r.getOpt(e).each(m=>{mu.setGroups(m,xk(l))})})},Ck=ul({name:"SplitFloatingToolbar",configFields:$O(),partFields:qO(),factory:(e,r,a,l)=>{const m=es(mu.sketch({fetch:()=>Sg(h=>{h(xk(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Ai,Ti],onRtl:()=>[Ti,Ai],onBottomLtr:()=>[Ta,Xs],onBottomRtl:()=>[Xs,Ta]},getBounds:a.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(h,b)=>e[b?"onOpened":"onClosed"](h)}));return{uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.splitToolbarBehaviours,[pa.config({others:{overflowGroup:()=>Jw.sketch({...l["overflow-group"](),items:[m.asSpec()]})}})]),apis:{setGroups:(h,b)=>{e.builtGroups.set(Xe(b,h.getSystem().build)),Qw(h,m,e)},refresh:h=>Qw(h,m,e),toggle:h=>{m.getOpt(h).each(b=>{mu.toggle(b)})},toggleWithoutFocusing:h=>{m.getOpt(h).each(mu.toggleWithoutFocusing)},isOpen:h=>m.getOpt(h).map(mu.isOpen).getOr(!1),reposition:h=>{m.getOpt(h).each(b=>{mu.reposition(b)})},getOverflow:h=>m.getOpt(h).bind(mu.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r),getOverflow:(e,r)=>e.getOverflow(r)}}),YO=ne([bd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),cr("onOpened"),cr("onClosed")].concat(wk())),l0=ne([et({factory:tm,schema:em(),name:"primary"}),et({factory:tm,schema:em(),name:"overflow",overrides:e=>({toolbarBehaviours:Vt([mc.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:r=>{En(r,e,"overflow-button").each(a=>{Ln.off(a),nn.focus(a)}),e.onClosed(r)},onGrown:r=>{Ho.focusIn(r),e.onOpened(r)},onStartGrow:r=>{En(r,e,"overflow-button").each(Ln.on)}}),Ho.config({mode:"acyclic",onEscape:r=>(En(r,e,"overflow-button").each(nn.focus),D.some(!0))})])})}),dt({name:"overflow-button",overrides:e=>({buttonBehaviours:Vt([Ln.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),dt({name:"overflow-group"})]),Rv=(e,r)=>{En(e,r,"overflow-button").bind(()=>En(e,r,"overflow")).each(a=>{Dv(e,r),mc.toggleGrow(a)})},Dv=(e,r)=>{En(e,r,"overflow").each(a=>{Nv(e,r,l=>{const m=Xe(l,h=>sc(h));tm.setGroups(a,m)}),En(e,r,"overflow-button").each(l=>{mc.hasGrown(a)&&Ln.on(l)}),mc.refresh(a)})},ex=ul({name:"SplitSlidingToolbar",configFields:YO(),partFields:l0(),factory:(e,r,a,l)=>{const m="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:r,behaviours:Aa(e.splitToolbarBehaviours,[pa.config({others:{overflowGroup:h=>Jw.sketch({...l["overflow-group"](),items:[Fi.sketch({...l["overflow-button"](),action:b=>{Fr(h,m)}})]})}}),On("toolbar-toggle-events",[Ct(m,h=>{Rv(h,e)})])]),apis:{setGroups:(h,b)=>{((y,x)=>{const k=Xe(x,y.getSystem().build);e.builtGroups.set(k)})(h,b),Dv(h,e)},refresh:h=>Dv(h,e),toggle:h=>Rv(h,e),isOpen:h=>En(h,e,"overflow").map(mc.hasGrown).getOr(!1)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},toggle:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r)}}),_k=e=>({dom:{tag:"div",classes:["tox-toolbar__group"],...e.title.fold(()=>({}),a=>({attributes:{title:a}}))},components:[Jw.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Vt([fa.config({}),nn.config({})])}),Bv=e=>Jw.sketch(_k(e)),Sk=(e,r)=>{const a=ys(l=>{const m=Xe(e.initGroups,Bv);tm.setGroups(l,m)});return Vt([jb(e.providers.isDisabled),vi(),Ho.config({mode:r,onEscape:e.onEscape,selector:".tox-toolbar__group"}),On("toolbar-events",[a])])},Lv=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":_k({title:D.none(),items:[]}),"overflow-button":zS({name:"more",icon:D.some("more-drawer"),enabled:!0,tooltip:D.some("More..."),primary:!1,buttonType:D.none(),borderless:!1},D.none(),e.providers)},splitToolbarBehaviours:Sk(e,r)}},JO=e=>{const r=Lv(e),a=Ck.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Ck.sketch({...r,lazySink:e.getSink,getOverflowBounds:()=>{const l=e.moreDrawerData.lazyHeader().element,m=Al(l),h=yt(l),b=Al(h),y=Math.max(h.dom.scrollHeight,b.height);return us(m.x+4,b.y,m.width-8,y)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[a],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:l=>e.onToggled(l,!0),onClosed:l=>e.onToggled(l,!1)})},QO=e=>{const r=ex.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=ex.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=Lv(e);return ex.sketch({...l,components:[r,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:m=>{m.getSystem().broadcastOn([Vw()],{type:"opened"}),e.onToggled(m,!0)},onClosed:m=>{m.getSystem().broadcastOn([Vw()],{type:"closed"}),e.onToggled(m,!1)}})},Iv=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return tm.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Cd.scrolling?["tox-toolbar--scrolling"]:[])},components:[tm.parts.groups({})],toolbarBehaviours:Sk(e,r)})},kk=[Cg,_d,Pr("tooltip"),zl("buttonType","secondary",["primary","secondary"]),mi("borderless",!1),Ir("onAction")],eT={button:[...kk,ou,Ur("type",["button"])],togglebutton:[...kk,mi("active",!1),Ur("type",["togglebutton"])]},tx=[Ur("type",["group"]),wc("buttons",[],kn("type",eT))],tT=kn("type",{...eT,group:tx}),oT=xt([wc("buttons",[],tT),Ir("onShow"),Ir("onHide")]),Ek=(e,r)=>((a,l)=>{var m,h;const b="togglebutton"===a.type,y=a.icon.map(ce=>Dh(ce,l.icons)).map(es),x={...a,name:b?a.text.getOr(a.icon.getOr("")):null!==(m=a.text)&&void 0!==m?m:a.icon.getOr(""),primary:"primary"===a.buttonType,buttonType:D.from(a.buttonType),tooltip:a.tooltip,icon:a.icon,enabled:!0,borderless:a.borderless},k=VS(null!==(h=a.buttonType)&&void 0!==h?h:"secondary"),T=b?a.text.map(l.translate):D.some(l.translate(a.text)),N=T.map(Ks),L=x.tooltip.or(T).map(ce=>({"aria-label":l.translate(ce),title:l.translate(ce)})).getOr({}),z=y.map(ce=>ce.asSpec()),U=I1([z,N]),J=a.icon.isSome()&&N.isSome(),Q={tag:"button",classes:k.concat(...a.icon.isSome()&&!J?["tox-button--icon"]:[]).concat(...J?["tox-button--icon-and-text"]:[]).concat(...a.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===a.type&&a.active?["tox-button--enabled"]:[]),attributes:L},re=Sw(x,D.some(ce=>{const ee=de=>{y.map(me=>me.getOpt(ce).each(xe=>{pn.set(xe,[Dh(de,l.icons)])}))};return b?a.onAction({setIcon:ee,setActive:de=>{const me=ce.element;de?(Us(me,"tox-button--enabled"),Bo(me,"aria-pressed",!0)):(Ws(me,"tox-button--enabled"),jr(me,"aria-pressed"))},isActive:()=>Gi(ce.element,"tox-button--enabled")}):"button"===a.type?a.onAction({setIcon:ee}):void 0}),[],Q,U,l);return Fi.sketch(re)})(e,r),nT=Ci().deviceType,rT=nT.isPhone(),f5=nT.isTablet();var Ph=ul({name:"silver.View",configFields:[je("viewConfig")],partFields:[St({factory:{sketch:e=>{let r=!1;const a=Xe(e.buttons,l=>{return"group"===l.type?(r=!0,h=e.providers,{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Xe(l.buttons,b=>Ek(b,h))}):Ek(l,e.providers);var h});return{uid:e.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...rT||f5?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Vt([nn.config({}),Ho.config({mode:"flow",selector:"button, .tox-button",focusInside:ed.OnEnterOrSpaceMode})]),components:r?a:[Xu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Xu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}}},schema:[je("buttons"),je("providers")],name:"header"}),St({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,apis:{getPane:h=>Ga.getPart(h,e,"pane"),getOnShow:h=>e.viewConfig.onShow,getOnHide:h=>e.viewConfig.onHide}}),apis:{getPane:(e,r)=>e.getPane(r),getOnShow:(e,r)=>e.getOnShow(r),getOnHide:(e,r)=>e.getOnHide(r)}});const b5=(e,r,a)=>Ao(r,(l,m)=>{const h=tr(oo("view",oT,l));return e.slot(m,Ph.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[Ph.parts.header({buttons:h.buttons,providers:a})]:[],Ph.parts.pane({})]}))}),Ok=(e,r)=>ml.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:b5(a,e,r),slotBehaviours:nu([ys(l=>ml.hideAllSlots(l))])})),Tk=e=>Ue(ml.getSlotNames(e),r=>ml.isShowing(e,r)),Ak=(e,r,a)=>{ml.getSlot(e,r).each(l=>{Ph.getPane(l).each(m=>{a(l)({getContainer:ne(m.element.dom)})})})};var Hv=lc({factory:(e,r)=>{const a={setViews:(l,m)=>{pn.set(l,[Ok(m,r.backstage.shared.providers)])},whichView:l=>dr.getCurrent(l).bind(Tk),toggleView:(l,m,h,b)=>dr.getCurrent(l).exists(y=>{const x=Tk(y),k=x.exists(N=>b===N),T=ml.getSlot(y,b).isSome();return T&&(ml.hideAllSlots(y),k?((N=>{const L=N.element;qo(L,"display","none"),Bo(L,"aria-hidden","true")})(l),m()):(h(),(N=>{const L=N.element;Lr(L,"display"),jr(L,"aria-hidden")})(l),ml.showSlot(y,b),Ak(y,b,Ph.getOnShow)),x.each(N=>Ak(y,N,Ph.getOnHide))),T})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Vt([pn.config({}),dr.config({find:l=>{const m=pn.contents(l);return qr(m)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[je("backstage")],apis:{setViews:(e,r,a)=>e.setViews(r,a),toggleView:(e,r,a,l,m)=>e.toggleView(r,a,l,m),whichView:(e,r)=>e.whichView(r)}});const sT=Qu.optional({factory:Uw,name:"menubar",schema:[je("backstage")]}),Nk=Qu.optional({factory:{sketch:e=>ok.sketch({uid:e.uid,dom:e.dom,listBehaviours:Vt([Ho.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Iv({type:e.type,uid:bo("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),D.some(!0))}),setupItem:(r,a,l,m)=>{tm.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[je("dom"),je("onEscape")]}),aT=Qu.optional({factory:{sketch:e=>{return((a=e).type===Cd.sliding?QO:a.type===Cd.floating?JO:Iv)({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),D.some(!0)),onToggled:(a,l)=>e.onToolbarToggled(l),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes});var a}},name:"toolbar",schema:[je("dom"),je("onEscape"),je("getSink")]}),v5=Qu.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:e.components,behaviours:Vt((e.sticky?gk:rk)(e.editor,e.sharedBackstage))})},name:"header",schema:[je("dom")]}),Mk=Qu.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]})},name:"promotion",schema:[je("dom")]}),iT=Qu.optional({name:"socket",schema:[je("dom")]}),lT=Qu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Vt([fa.config({}),nn.config({}),mc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{dr.getCurrent(r).each(ml.hideAllSlots),Fr(r,fk)},onGrown:r=>{Fr(r,fk)},onStartGrow:r=>{Co(r,pk,{width:Br(r.element,"width").getOr("")})},onStartShrink:r=>{Co(r,pk,{width:vr(r.element)+"px"})}}),pn.config({}),dr.config({find:r=>{const a=pn.contents(r);return qr(a)}})])}],behaviours:Vt([lw(0),On("sidebar-sliding-events",[Ct(pk,(r,a)=>{qo(r.element,"width",a.event.width)}),Ct(fk,(r,a)=>{Lr(r.element,"width")})])])})},name:"sidebar",schema:[je("dom")]}),cT=Qu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Vt([pn.config({}),nm.config({focus:!1}),dr.config({find:r=>qr(r.components())})]),components:[]})},name:"throbber",schema:[je("dom")]}),y5=Qu.optional({factory:Hv,name:"viewWrapper",schema:[je("backstage")]}),cf=Qu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]});var gs=ul({name:"OuterContainer",factory:(e,r,a)=>{let l=!1;const m={getSocket:h=>Ga.getPart(h,e,"socket"),setSidebar:(h,b,y)=>{Ga.getPart(h,e,"sidebar").each(x=>{return T=b,N=y,void dr.getCurrent(k=x).each(L=>{pn.set(L,[jO(T)]);const z=N?.toLowerCase();No(z)&&Wo(T,z)&&dr.getCurrent(L).each(U=>{ml.showSlot(U,z),mc.immediateGrow(L),Lr(L.element,"width"),$w(k.element,"region")})});var k,T,N})},toggleSidebar:(h,b)=>{Ga.getPart(h,e,"sidebar").each(y=>{return k=b,void dr.getCurrent(x=y).each(T=>{dr.getCurrent(T).each(N=>{mc.hasGrown(T)?ml.isShowing(N,k)?(mc.shrink(T),$w(x.element,"presentation")):(ml.hideAllSlots(N),ml.showSlot(N,k),$w(x.element,"region")):(ml.hideAllSlots(N),ml.showSlot(N,k),mc.grow(T),$w(x.element,"region"))})});var x,k})},whichSidebar:h=>Ga.getPart(h,e,"sidebar").bind(i0).getOrNull(),getHeader:h=>Ga.getPart(h,e,"header"),getToolbar:h=>Ga.getPart(h,e,"toolbar"),setToolbar:(h,b)=>{Ga.getPart(h,e,"toolbar").each(y=>{const x=Xe(b,Bv);y.getApis().setGroups(y,x)})},setToolbars:(h,b)=>{Ga.getPart(h,e,"multiple-toolbar").each(y=>{const x=Xe(b,k=>Xe(k,Bv));ok.setItems(y,x)})},refreshToolbar:h=>{Ga.getPart(h,e,"toolbar").each(b=>b.getApis().refresh(b))},toggleToolbarDrawer:h=>{Ga.getPart(h,e,"toolbar").each(b=>{Vo(b.getApis().toggle,y=>y(b))})},toggleToolbarDrawerWithoutFocusing:h=>{Ga.getPart(h,e,"toolbar").each(b=>{Vo(b.getApis().toggleWithoutFocusing,y=>y(b))})},isToolbarDrawerToggled:h=>Ga.getPart(h,e,"toolbar").bind(b=>D.from(b.getApis().isOpen).map(y=>y(b))).getOr(!1),getThrobber:h=>Ga.getPart(h,e,"throbber"),focusToolbar:h=>{Ga.getPart(h,e,"toolbar").orThunk(()=>Ga.getPart(h,e,"multiple-toolbar")).each(b=>{Ho.focusIn(b)})},setMenubar:(h,b)=>{Ga.getPart(h,e,"menubar").each(y=>{Uw.setMenus(y,b)})},focusMenubar:h=>{Ga.getPart(h,e,"menubar").each(b=>{Uw.focus(b)})},setViews:(h,b)=>{Ga.getPart(h,e,"viewWrapper").each(y=>{Hv.setViews(y,b)})},toggleView:(h,b)=>Ga.getPart(h,e,"viewWrapper").exists(y=>Hv.toggleView(y,()=>m.showMainView(h),()=>m.hideMainView(h),b)),whichView:h=>Ga.getPart(h,e,"viewWrapper").bind(Hv.whichView).getOrNull(),hideMainView:h=>{l=m.isToolbarDrawerToggled(h),l&&m.toggleToolbarDrawer(h),Ga.getPart(h,e,"editorContainer").each(b=>{const y=b.element;qo(y,"display","none"),Bo(y,"aria-hidden","true")})},showMainView:h=>{l&&m.toggleToolbarDrawer(h),Ga.getPart(h,e,"editorContainer").each(b=>{const y=b.element;Lr(y,"display"),jr(y,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:r,apis:m,behaviours:e.behaviours}},configFields:[je("dom"),je("behaviours")],partFields:[v5,sT,aT,Nk,iT,lT,Mk,cT,y5,cf],apis:{getSocket:(e,r)=>e.getSocket(r),setSidebar:(e,r,a,l)=>{e.setSidebar(r,a,l)},toggleSidebar:(e,r,a)=>{e.toggleSidebar(r,a)},whichSidebar:(e,r)=>e.whichSidebar(r),getHeader:(e,r)=>e.getHeader(r),getToolbar:(e,r)=>e.getToolbar(r),setToolbar:(e,r,a)=>{e.setToolbar(r,a)},setToolbars:(e,r,a)=>{e.setToolbars(r,a)},refreshToolbar:(e,r)=>e.refreshToolbar(r),toggleToolbarDrawer:(e,r)=>{e.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(e,r)=>{e.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(e,r)=>e.isToolbarDrawerToggled(r),getThrobber:(e,r)=>e.getThrobber(r),setMenubar:(e,r,a)=>{e.setMenubar(r,a)},focusMenubar:(e,r)=>{e.focusMenubar(r)},focusToolbar:(e,r)=>{e.focusToolbar(r)},setViews:(e,r,a)=>{e.setViews(r,a)},toggleView:(e,r,a)=>e.toggleView(r,a),whichView:(e,r)=>e.whichView(r)}});const Rk={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Dk=e=>e.split(" "),Bk=(e,r)=>{const a={...Rk,...r.menus},l=_r(r.menus).length>0,m=Dk(void 0===r.menubar||!0===r.menubar?"file edit view insert format tools table help":!1===r.menubar?"":r.menubar),h=Ie(m,y=>{const x=Wo(Rk,y);return l?x||Kt(r.menus,y).exists(k=>Wo(k,"items")):x}),b=Xe(h,y=>{const x=a[y];return((k,T,N)=>{const L=DC(N).split(/[ ,]/);return{text:k.title,getItems:()=>Yt(k.items,z=>{const U=z.toLowerCase();return 0===U.trim().length||Jo(L,J=>J===U)?[]:"separator"===U||"|"===U?[{type:"separator"}]:T.menuItems[U]?[T.menuItems[U]]:[]})}})({title:x.title,items:Dk(x.items)},r,e)});return Ie(b,y=>y.getItems().length>0&&Jo(y.getItems(),x=>No(x)||"separator"!==x.type))},Lk=e=>{const r=()=>{e._skinLoaded=!0,e.dispatch("SkinLoaded")};return()=>{e.initialized?r():e.on("init",r)}},dT=(e,r,a)=>(e.on("remove",()=>a.unload(r)),a.load(r)),Pv=(e,r)=>dT(e,r+"/skin.min.css",e.ui.styleSheetLoader),w5=(e,r)=>{var a;return a=pe(e.getElement()),Fs(a).isSome()?dT(e,r+"/skin.shadowdom.min.css",O1.DOM.styleSheetLoader):Promise.resolve()},ox=(e,r)=>{const a=VC(r);return a&&r.contentCSS.push(a+(e?"/content.inline":"/content")+".min.css"),!Jy(r)&&No(a)?Promise.all([Pv(r,a),w5(r,a)]).then(Lk(r),(l=r,()=>{l.dispatch("SkinLoadError",{message:"Skin could not be loaded"})})):Promise.resolve(Lk(r)());var l},x5=$n(ox,!1),C5=$n(ox,!0),_5=(e,r,a)=>{const l=(b,y,x,k)=>{const T=r.shared.providers.translate(b.title);if("separator"===b.type)return D.some({type:"separator",text:T});if("submenu"===b.type){const N=Yt(b.getStyleItems(),L=>m(L,y,k));return 0===y&&N.length<=0?D.none():D.some({type:"nestedmenuitem",text:T,enabled:N.length>0,getSubmenuItems:()=>Yt(b.getStyleItems(),L=>m(L,y,k))})}return D.some({type:"togglemenuitem",text:T,icon:b.icon,active:b.isSelected(k),enabled:!x,onAction:a.onAction(b),...b.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},m=(b,y,x)=>{const k="formatter"===b.type&&a.isInvalid(b);return 0===y?k?[]:l(b,y,!1,x).toArray():l(b,y,k,x).toArray()},h=b=>{const y=a.getCurrentValue(),x=a.shouldHide?0:1;return Yt(b,k=>m(k,x,y))};return{validateItems:h,getFetch:(b,y)=>(x,k)=>{const T=y(),N=h(T);k(nf(N,nd.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:D.none()}))}}},c0=(e,r,a)=>{const l=a.dataset,m="basic"===l.type?()=>Xe(l.data,h=>cd(h,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:_5(0,r,a),getStyleItems:m}},Fv=(e,r,a)=>{const{items:l,getStyleItems:m}=c0(0,r,a),h=Th(e,"NodeChange",b=>{const y=b.getComponent();a.updateText(y),Ko.set(b.getComponent(),!e.selection.isEditable())});return mw({text:a.icon.isSome()?D.none():a.text,icon:a.icon,tooltip:D.from(a.tooltip),role:D.none(),fetch:l.getFetch(r,m),onSetup:h,getApi:b=>({getComponent:ne(b)}),columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)};var Bg;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(Bg||(Bg={}));const Ik=(e,r,a)=>{var h,m;return{type:"basic",data:(h=e.options.get(r),m=a===Bg.SemiColon?h.replace(/;$/,"").split(";"):h.split(" "),Xe(m,h=>{let b=h,y=h;const x=h.split("=");return x.length>1&&(b=x[0],y=x[1]),{title:b,format:y}}))}},Hk=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Pk=e=>{const r={type:"basic",data:Hk};return{tooltip:"Align",text:D.none(),icon:D.some("align-left"),isSelectedFor:a=>()=>e.formatter.match(a),getCurrentValue:D.none,getPreviewFor:a=>D.none,onAction:a=>()=>Ue(Hk,l=>l.format===a.format).each(l=>e.execCommand(l.command)),updateText:a=>{const l=Ue(Hk,m=>e.formatter.match(m.format)).fold(ne("left"),m=>m.title.toLowerCase());Co(a,of,{icon:`align-${l}`})},dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},uT=(e,r)=>{const a=r(),l=Xe(a,m=>m.format);return D.from(e.formatter.closest(l)).bind(m=>Ue(a,h=>h.format===m)).orThunk(()=>Vs(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},mT=e=>{const r="Paragraph",a=Ik(e,"block_formats",Bg.SemiColon);return{tooltip:"Blocks",text:D.some(r),icon:D.none(),isSelectedFor:l=>()=>e.formatter.match(l),getCurrentValue:D.none,getPreviewFor:l=>()=>{const m=e.formatter.get(l);return m?D.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):D.none()},onAction:T3(e),updateText:l=>{const m=uT(e,()=>a.data).fold(ne(r),h=>h.title);Co(l,id,{text:m})},dataset:a,shouldHide:!1,isInvalid:l=>!e.formatter.canApply(l.format)}},S5=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],nx=e=>{const r=e.split(/\s*,\s*/);return Xe(r,a=>a.replace(/^['"]+|['"]+$/g,""))},Fk=e=>{const r="System Font",a=()=>{const m=k=>k?nx(k)[0]:"",h=e.queryCommandValue("FontName"),b=l.data,y=h?h.toLowerCase():"";return{matchOpt:Ue(b,k=>{const T=k.format;return T.toLowerCase()===y||m(T).toLowerCase()===m(y).toLowerCase()}).orThunk(()=>{return Vs(0===(k=y).indexOf("-apple-system")&&(()=>{const T=nx(k.toLowerCase());return ts(S5,N=>T.indexOf(N.toLowerCase())>-1)})(),{title:r,format:y});var k}),font:h}},l=Ik(e,"font_family_formats",Bg.SemiColon);return{tooltip:"Fonts",text:D.some(r),icon:D.none(),isSelectedFor:m=>h=>h.exists(b=>b.format===m),getCurrentValue:()=>{const{matchOpt:m}=a();return m},getPreviewFor:m=>()=>D.some({tag:"div",styles:-1===m.indexOf("dings")?{"font-family":m}:{}}),onAction:m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,m.format)})},updateText:m=>{const{matchOpt:h,font:b}=a(),y=h.fold(ne(b),x=>x.title);Co(m,id,{text:y})},dataset:l,shouldHide:!1,isInvalid:ot}},k5={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},E5=(()=>{const e="[0-9]+",r="[eE][+-]?"+e,a=m=>`(?:${m})?`,l=["Infinity",e+"\\."+a(e)+a(r),"\\."+e+a(r),e+a(r)].join("|");return new RegExp(`^([+-]?(?:${l}))(.*)$`)})(),rx=(e,r)=>D.from(E5.exec(e)).bind(a=>{const l=Number(a[1]),m=a[2];return h=m,Jo(r,y=>Jo(k5[y],x=>h===x))?D.some({value:l,unit:m}):D.none();var h}),zk={tab:ne(9),escape:ne(27),enter:ne(13),backspace:ne(8),delete:ne(46),left:ne(37),up:ne(38),right:ne(39),down:ne(40),space:ne(32),home:ne(36),end:ne(35),pageUp:ne(33),pageDown:ne(34)},gT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},df={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Vk=(e,r)=>/[0-9.]+px$/.test(e)?((a,l)=>{const m=Math.pow(10,l);return Math.round(a*m)/m})(72*parseInt(e,10)/96,r||0)+"pt":Kt(df,e).getOr(e),sx=e=>Kt(gT,e).getOr(""),hT=e=>{const r=()=>{let m=D.none();const h=l.data,b=e.queryCommandValue("FontSize");if(b)for(let y=3;m.isNone()&&y>=0;y--){const x=Vk(b,y),k=sx(x);m=Ue(h,T=>T.format===b||T.format===x||T.format===k)}return{matchOpt:m,size:b}},a=ne(D.none),l=Ik(e,"font_size_formats",Bg.Space);return{tooltip:"Font sizes",text:D.some("12pt"),icon:D.none(),isSelectedFor:m=>h=>h.exists(b=>b.format===m),getPreviewFor:a,getCurrentValue:()=>{const{matchOpt:m}=r();return m},onAction:m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,m.format)})},updateText:m=>{const{matchOpt:h,size:b}=r(),y=h.fold(ne(b),x=>x.title);Co(m,id,{text:y})},dataset:l,shouldHide:!1,isInvalid:ot}},Fh=(e,r)=>{const a="Paragraph";return{tooltip:"Formats",text:D.some(a),icon:D.none(),isSelectedFor:l=>()=>e.formatter.match(l),getCurrentValue:D.none,getPreviewFor:l=>()=>{const m=e.formatter.get(l);return void 0!==m?D.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):D.none()},onAction:T3(e),updateText:l=>{const m=y=>kv(y)?Yt(y.items,m):dO(y)?[{title:y.title,format:y.format}]:[],h=Yt(mO(e),m),b=uT(e,ne(h)).fold(ne(a),y=>y.title);Co(l,id,{text:b})},shouldHide:N1(e),isInvalid:l=>!e.formatter.canApply(l.format),dataset:r}},pT=ne([je("toggleClass"),je("fetch"),Au("onExecute"),De("getHotspot",D.some),De("getAnchorOverrides",ne({})),km(),Au("onItemExecute"),Zn("lazySink"),je("dom"),cr("onOpen"),xa("splitDropdownBehaviours",[pa,Ho,nn]),De("matchWidth",!1),De("useMinWidth",!1),De("eventOrder",{}),Zn("role")].concat(q_())),O5=et({factory:Fi,schema:[je("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Vt([nn.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(pd)},buttonBehaviours:Vt([Ln.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),T5=et({factory:Fi,schema:[je("dom")],name:"button",defaults:()=>({buttonBehaviours:Vt([nn.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(a=>{e.onExecute(a,r)})}})}),Zk=ne([O5,T5,St({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[je("text")],name:"aria-descriptor"}),dt({schema:[jd()],name:"menu",defaults:e=>({onExecute:(r,a)=>{r.getSystem().getByUid(e.uid).each(l=>{e.onItemExecute(l,r,a)})}})}),Z_()]),zh=ul({name:"SplitDropdown",configFields:pT(),partFields:Zk(),factory:(e,r,a,l)=>{const m=k=>{dr.getCurrent(k).each(T=>{Zr.highlightFirst(T),Ho.focusIn(T)})},h=k=>{$p(e,it,k,l,m,Qi.HighlightMenuAndItem).get(At)},b=k=>{const T=aa(k,e,"button");return pd(T),D.some(!0)},y={...Mr([ys((k,T)=>{En(k,e,"aria-descriptor").each(N=>{const L=bo("aria");Bo(N.element,"id",L),Bo(k.element,"aria-describedby",L)})})]),...Zu(D.some(h))};return{uid:e.uid,dom:e.dom,components:r,apis:{repositionMenus:k=>{Ln.isOn(k)&&$_(k)}},eventOrder:{...e.eventOrder,[bl()]:["disabling","toggling","alloy.base.behaviour"]},events:y,behaviours:Aa(e.splitDropdownBehaviours,[pa.config({others:{sandbox:k=>{const T=aa(k,e,"arrow");return W_(e,k,{onOpen:()=>{Ln.on(T),Ln.on(k)},onClose:()=>{Ln.off(T),Ln.off(k)}})}}}),Ho.config({mode:"special",onSpace:b,onEnter:b,onDown:k=>(h(k),D.some(!0))}),nn.config({}),Ln.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,r)=>e.repositionMenus(r)}}),ax=e=>({isEnabled:()=>!Ko.isDisabled(e),setEnabled:r=>Ko.set(e,!r),setText:r=>Co(e,id,{text:r}),setIcon:r=>Co(e,of,{icon:r})}),ix=e=>({setActive:r=>{Ln.set(e,r)},isActive:()=>Ln.isOn(e),isEnabled:()=>!Ko.isDisabled(e),setEnabled:r=>Ko.set(e,!r),setText:r=>Co(e,id,{text:r}),setIcon:r=>Co(e,of,{icon:r})}),Vh=(e,r)=>e.map(a=>({"aria-label":r.translate(a),title:r.translate(a)})).getOr({}),zv=bo("focus-button"),lx=(e,r,a,l,m)=>{const h=r.map(y=>es(PE(y,"tox-tbtn",m))),b=e.map(y=>es(Dh(y,m.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:Vh(a,m)},components:I1([b.map(y=>y.asSpec()),h.map(y=>y.asSpec())]),eventOrder:{[ti()]:["focusing","alloy.base.behaviour",Rh],[nc()]:[Rh,"toolbar-group-button-events"]},buttonBehaviours:Vt([jb(m.isDisabled),vi(),On(Rh,[ys((y,x)=>ES(y)),Ct(id,(y,x)=>{h.bind(k=>k.getOpt(y)).each(k=>{pn.set(k,[Ks(m.translate(x.event.text))])})}),Ct(of,(y,x)=>{b.bind(k=>k.getOpt(y)).each(k=>{pn.set(k,[Dh(x.event.icon,m.icons)])})}),Ct(ti(),(y,x)=>{x.event.prevent(),Fr(y,zv)})])].concat(l.getOr([])))}},jk=(e,r,a)=>{var l;const m=Io(At),h=lx(e.icon,e.text,e.tooltip,D.none(),a);return Fi.sketch({dom:h.dom,components:h.components,eventOrder:HE,buttonBehaviours:{...Vt([On("toolbar-button-events",[(b={onAction:e.onAction,getApi:r.getApi},Ec((y,x)=>{Ub(b,y)(k=>{Co(y,kS,{buttonApi:k}),b.onAction(k)})})),Gu(r,m),Oh(r,m)]),jb(()=>!e.enabled||a.isDisabled()),vi()].concat(r.toolbarButtonBehaviours)),[Rh]:null===(l=h.buttonBehaviours)||void 0===l?void 0:l[Rh]}});var b},Uk=(e,r,a)=>jk(e,{toolbarButtonBehaviours:a.length>0?[On("toolbarButtonWith",a)]:[],getApi:ax,onSetup:e.onSetup},r),fT=(e,r,a)=>jk(e,{toolbarButtonBehaviours:[pn.config({}),Ln.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[On("toolbarToggleButtonWith",a)]:[]),getApi:ix,onSetup:e.onSetup},r),bT=(e,r,a)=>l=>Sg(m=>r.fetch(m)).map(m=>D.from(ev(Un(B2(bo("menu-value"),m,h=>{r.onItemAction(e(l),h)},r.columns,r.presets,nd.CLOSE_ON_EXECUTE,r.select.getOr(ot),a),{movement:L2(r.columns,r.presets),menuBehaviours:nu("auto"!==r.columns?[]:[ys((h,b)=>{v_(h,4,Pp(r.presets)).each(({numRows:y,numColumns:x})=>{Ho.setGridSize(h,y,x)})})])})))),vT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],uf=(e,r)=>(a,l,m)=>{const h=e(a).mapError(b=>tt(b)).getOrDie();return r(h,l,m)},A5={button:uf(u_,(e,r)=>Uk(e,r.shared.providers,[])),togglebutton:uf(m_,(e,r)=>fT(e,r.shared.providers,[])),menubutton:uf(hk,(e,r)=>fv(e,"tox-tbtn",r,D.none(),!1)),splitbutton:uf(e=>oo("SplitButton",c5,e),(e,r)=>((a,l)=>{const m=y=>({isEnabled:()=>!Ko.isDisabled(y),setEnabled:x=>Ko.set(y,!x),setIconFill:(x,k)=>{Oa(y.element,`svg path[class="${x}"], rect[class="${x}"]`).each(T=>{Bo(T,"fill",k)})},setActive:x=>{Bo(y.element,"aria-pressed",x),Oa(y.element,"span").each(k=>{y.getSystem().getByDom(k).each(T=>Ln.set(T,x))})},isActive:()=>Oa(y.element,"span").exists(x=>y.getSystem().getByDom(x).exists(Ln.isOn)),setText:x=>Oa(y.element,"span").each(k=>y.getSystem().getByDom(k).each(T=>Co(T,id,{text:x}))),setIcon:x=>Oa(y.element,"span").each(k=>y.getSystem().getByDom(k).each(T=>Co(T,of,{icon:x})))}),h=Io(At),b={getApi:m,onSetup:a.onSetup};return zh.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...Vh(a.tooltip,l.providers)}},onExecute:y=>{const x=m(y);x.isEnabled()&&a.onAction(x)},onItemExecute:(y,x,k)=>{},splitDropdownBehaviours:Vt([x_(l.providers.isDisabled),vi(),On("split-dropdown-events",[ys((y,x)=>ES(y)),Ct(zv,nn.focus),Gu(b,h),Oh(b,h)]),G1.config({})]),eventOrder:{[nc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:l.getSink,fetch:bT(m,a,l.providers),parts:{menu:Mb(0,0,a.presets)},components:[zh.parts.button(lx(a.icon,a.text,D.none(),D.some([Ln.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),l.providers)),zh.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:TC("chevron-down",l.providers.icons)},buttonBehaviours:Vt([x_(l.providers.isDisabled),vi(),AC()])}),zh.parts["aria-descriptor"]({text:l.providers.translate("To open the popup, press Shift+Enter")})]})})(e,r.shared)),grouptoolbarbutton:uf(e=>oo("GroupToolbarButton",IO,e),(e,r,a)=>{const l=a.ui.registry.getAll().buttons,m={[Sm]:r.shared.header.isPositionedAtTop()?Wd.TopToBottom:Wd.BottomToTop};if(Lp(a)===Cd.floating)return((h,b,y,x)=>{const k=b.shared,T=Io(At),N={toolbarButtonBehaviours:[],getApi:ax,onSetup:h.onSetup},L=[On("toolbar-group-button-events",[Gu(N,T),Oh(N,T)])];return mu.sketch({lazySink:k.getSink,fetch:()=>Sg(z=>{z(Xe((h=>d0(a,{buttons:l,toolbar:h,allowToolbarGroups:!1},r,D.none()))(h.items),Bv))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:lx(h.icon,h.text,h.tooltip,D.some(L),k.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:x}}}})})(e,r,0,m);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},Wk={styles:(e,r)=>{const a={type:"advanced",...r.styles};return Fv(e,r,Fh(e,a))},fontsize:(e,r)=>Fv(e,r,hT(e)),fontsizeinput:(e,r)=>((a,l,m)=>{let h=D.none();const b=Th(a,"NodeChange",ee=>{const de=ee.getComponent();h=D.some(de),m.updateInputValue(de),Ko.set(de,!a.selection.isEditable())}),y=ee=>({getComponent:ne(ee)}),x=Io(At),k=bo("custom-number-input-events"),T=(ee,de,me)=>{const xe=h.map(Ot=>Ut.getValue(Ot)).getOr(""),Ne=m.getNewValue(xe,ee),Ge=xe.length-`${Ne}`.length,Et=h.map(Ot=>Ot.element.dom.selectionStart-Ge),_t=h.map(Ot=>Ot.element.dom.selectionEnd-Ge);m.onAction(Ne,me),h.each(Ot=>{Ut.setValue(Ot,Ne),de&&(Et.each(so=>Ot.element.dom.selectionStart=so),_t.each(so=>Ot.element.dom.selectionEnd=so))})},N=(ee,de)=>T((me,xe)=>me-xe,ee,de),L=(ee,de)=>T((me,xe)=>me+xe,ee,de),z=ee=>Fo(ee.element).fold(D.none,de=>(Ll(de),D.some(!0))),U=ee=>th(ee.element)?(rr(ee.element).each(de=>Ll(de)),D.some(!0)):D.none(),J=(ee,de,me,xe)=>{const Ne=l.shared.providers.translate(me),Ge=bo("altExecuting"),Et=Th(a,"NodeChange",Ot=>{Ko.set(Ot.getComponent(),!a.selection.isEditable())}),_t=Ot=>{Ko.isDisabled(Ot)||ee(!0)};return Fi.sketch({dom:{tag:"button",attributes:{title:Ne,"aria-label":Ne},classes:xe.concat(de)},components:[TS(de,l.shared.providers.icons)],buttonBehaviours:Vt([Ko.config({}),On(Ge,[Gu({onSetup:Et,getApi:y},x),Oh({getApi:y},x),Ct(Gc(),(Ot,so)=>{so.event.raw.keyCode!==zk.space()&&so.event.raw.keyCode!==zk.enter()||Ko.isDisabled(Ot)||ee(!1)}),Ct(Sc(),_t),Ct(Ba(),_t)])]),eventOrder:{[Gc()]:[Ge,"keying"],[Sc()]:[Ge,"alloy.base.behaviour"],[Ba()]:[Ge,"alloy.base.behaviour"]}})},Q=es(J(ee=>N(!1,ee),"minus","Decrease font size",["highlight-on-focus"])),re=es(J(ee=>L(!1,ee),"plus","Increase font size",["highlight-on-focus"])),ce=es({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[Sh.sketch({inputBehaviours:Vt([Ko.config({}),On(k,[Gu({onSetup:b,getApi:y},x),Oh({getApi:y},x)]),On("input-update-display-text",[Ct(id,(ee,de)=>{Ut.setValue(ee,de.event.text)}),Ct(jg(),ee=>{m.onAction(Ut.getValue(ee))}),Ct(Cu(),ee=>{m.onAction(Ut.getValue(ee))})]),Ho.config({mode:"special",onEnter:ee=>(T(it,!0,!0),D.some(!0)),onEscape:z,onUp:ee=>(L(!0,!1),D.some(!0)),onDown:ee=>(N(!0,!1),D.some(!0)),onLeft:(ee,de)=>(de.cut(),D.none()),onRight:(ee,de)=>(de.cut(),D.none())})])})],behaviours:Vt([nn.config({}),Ho.config({mode:"special",onEnter:U,onSpace:U,onEscape:z}),On("input-wrapper-events",[Ct(Cc(),ee=>{Tt([Q,re],de=>{const me=pe(de.get(ee).element.dom);th(me)&&dp(me)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Q.asSpec(),ce.asSpec(),re.asSpec()],behaviours:Vt([nn.config({}),Ho.config({mode:"flow",focusInside:ed.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ee=>th(ee.element)?D.none():(Ll(ee.element),D.some(!0))})])}})(e,r,(a=>{const l=()=>a.queryCommandValue("FontSize");return{updateInputValue:m=>Co(m,id,{text:l()}),onAction:(m,h)=>a.execCommand("FontSize",!1,m,{skip_focus:!h}),getNewValue:(m,h)=>{rx(m,["unsupportedLength","empty"]);const b=rx(m,["unsupportedLength","empty"]).or(rx(l(),["unsupportedLength","empty"])),y=b.map(N=>N.value).getOr(16),x=J4(a),k=b.map(N=>N.unit).filter(N=>""!==N).getOr(x),T=h(y,(N=k,null!==(L={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[N])&&void 0!==L?L:{step:1}).step);var N,L;return`${(N=>N>=0)(T)?T:y}${k}`}}})(e)),fontfamily:(e,r)=>Fv(e,r,Fk(e)),blocks:(e,r)=>Fv(e,r,mT(e)),align:(e,r)=>Fv(e,r,Pk(e))},d0=(e,r,a,l)=>{const m=(b=>{const y=b.toolbar;return!1===y?[]:void 0===y||!0===y?(k=>{const T=Xe(vT,N=>{const L=Ie(N.items,z=>Wo(k,z)||Wo(Wk,z));return{name:N.name,items:L}});return Ie(T,N=>N.items.length>0)})(b.buttons):No(y)?(k=>{const T=k.split("|");return Xe(T,N=>({items:N.trim().split(" ")}))})(y):jn(y,T=>Wo(T,"name")&&Wo(T,"items"))?y:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(r),h=Xe(m,b=>{const y=Yt(b.items,x=>{return 0===x.trim().length?[]:(k=e,T=r.buttons,N=x,L=r.allowToolbarGroups,z=a,U=l,Kt(T,N.toLowerCase()).orThunk(()=>U.bind(J=>is(J,Q=>Kt(T,Q+N.toLowerCase())))).fold(()=>Kt(Wk,N.toLowerCase()).map(J=>J(k,z)),J=>{return"grouptoolbarbutton"!==J.type||L?(re=z,ce=k,Kt(A5,(Q=J).type).fold(()=>(console.error("skipping button defined by",Q),D.none()),ee=>D.some(ee(Q,re,ce)))):(console.warn(`Ignoring the '${N}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),D.none());var Q,re,ce})).toArray();var k,T,N,L,z,U});return{title:D.from(e.translate(b.name)),items:y}});return Ie(h,b=>b.items.length>0)},cx=(e,r,a,l)=>{const m=r.mainUi.outerContainer,h=a.toolbar,b=a.buttons;if(jn(h,No)){const y=h.map(x=>d0(e,{toolbar:x,buttons:b,allowToolbarGroups:a.allowToolbarGroups},l,D.none()));gs.setToolbars(m,y)}else gs.setToolbar(m,d0(e,a,l,D.none()))},yT=Ci(),wT=yT.os.isiOS()&&yT.os.version.major<=12;var N5=Object.freeze({__proto__:null,render:async(e,r,a,l,m)=>{const{mainUi:h,uiMotherships:b}=r,y=Io(0),x=h.outerContainer;await x5(e);const k=pe(m.targetNode),T=rs(Gr(k));var J,Q;Kd(k,h.mothership),J=T,Q=r,Lm(e)&&Kd(Q.mainUi.mothership.element,Q.popupUi.mothership),kp(J,Q.dialogUi.mothership),e.on("PostRender",()=>{gs.setSidebar(x,a.sidebar,o3(e)),cx(e,r,a,l),y.set(e.getWin().innerWidth),gs.setMenubar(x,Bk(e,a)),gs.setViews(x,a.views),((U,J)=>{const{uiMotherships:Q}=J,re=U.dom;let ce=U.getWin();const ee=U.getDoc().documentElement,de=Io(Kn(ce.innerWidth,ce.innerHeight)),me=Io(Kn(ee.offsetWidth,ee.offsetHeight)),xe=()=>{const _t=de.get();_t.left===ce.innerWidth&&_t.top===ce.innerHeight||(de.set(Kn(ce.innerWidth,ce.innerHeight)),D_(U))},Ne=()=>{const _t=U.getDoc().documentElement,Ot=me.get();Ot.left===_t.offsetWidth&&Ot.top===_t.offsetHeight||(me.set(Kn(_t.offsetWidth,_t.offsetHeight)),D_(U))},Ge=_t=>{U.dispatch("ScrollContent",_t)};re.bind(ce,"resize",xe),re.bind(ce,"scroll",Ge);const Et=V0(pe(U.getBody()),"load",Ne);U.on("hide",()=>{Tt(Q,_t=>{qo(_t.element,"display","none")})}),U.on("show",()=>{Tt(Q,_t=>{Lr(_t.element,"display")})}),U.on("NodeChange",Ne),U.on("remove",()=>{Et.unbind(),re.unbind(ce,"resize",xe),re.unbind(ce,"scroll",Ge),ce=null})})(e,r)});const N=gs.getSocket(x).getOrDie("Could not find expected socket element");if(wT){xi(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const U=((Q,re)=>{let ce=null;return{cancel:()=>{Ya(ce)||(clearTimeout(ce),ce=null)},throttle:(...ee)=>{Ya(ce)&&(ce=setTimeout(()=>{ce=null,Q.apply(null,ee)},20))}}})(()=>{e.dispatch("ScrollContent")}),J=oi(N.element,"scroll",U.throttle);e.on("remove",J.unbind)}y2(e,r),e.addCommand("ToggleSidebar",(U,J)=>{gs.toggleSidebar(x,J),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var U;return null!==(U=gs.whichSidebar(x))&&void 0!==U?U:""}),e.addCommand("ToggleView",(U,J)=>{if(gs.toggleView(x,J)){const Q=x.element;h.mothership.broadcastOn([ni()],{target:Q}),Tt(b,re=>{re.broadcastOn([ni()],{target:Q})}),Ya(gs.whichView(x))&&(e.focus(),e.nodeChanged(),gs.refreshToolbar(x))}}),e.addQueryValueHandler("ToggleView",()=>{var U;return null!==(U=gs.whichView(x))&&void 0!==U?U:""});const L=Lp(e);L!==Cd.sliding&&L!==Cd.floating||e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const U=e.getWin().innerWidth;U!==y.get()&&(gs.refreshToolbar(r.mainUi.outerContainer),y.set(U))});return{iframeContainer:N.element.dom,editorContainer:x.element.dom,api:{setEnabled:U=>{v2(r,!U)},isEnabled:()=>!Ko.isDisabled(x)}}}});const dx=e=>/^[0-9\.]+(|px)$/i.test(""+e)?D.some(parseInt(""+e,10)):D.none(),$k=e=>lo(e)?e+"px":e,jm=(e,r,a)=>{const l=r.filter(h=>e<h),m=a.filter(h=>e>h);return l.or(m).getOr(e)},qk=e=>{const r=A1(e),a=vb(e),l=yb(e);return dx(r).map(m=>jm(m,a,l))},{ToolbarLocation:Gk,ToolbarMode:Vv}=aA,Zv=(e,r)=>{const a=ma(e);return{pos:r?a.y:a.bottom,bounds:a}};var ux=Object.freeze({__proto__:null,render:async(e,r,a,l,m)=>{const{mainUi:h}=r,b=Ds(),y=pe(m.targetNode),x=((e,r,a,l,m)=>{const{mainUi:h,uiMotherships:b}=a,y=O1.DOM,x=Hp(e),k=Ob(e),T=yb(e).or(qk(e)),N=l.shared.header,L=N.isPositionedAtTop,z=Lp(e),U=z===Vv.sliding||z===Vv.floating,J=Io(!1),Q=()=>J.get()&&!e.removed,re=me=>U?me.fold(ne(0),xe=>xe.components().length>1?Ns(xe.components()[1].element):0):0,ce=()=>{Tt(b,me=>{me.broadcastOn([$l()],{})})},ee=me=>{if(!Q())return;x||m.on(Ne=>{const Ge=T.getOrThunk(()=>{const Et=dx(Ts(da(),"margin-left")).getOr(0);return vr(da())-Ms(r).left+Et});qo(Ne.element,"max-width",Ge+"px")});const xe=x?D.none():(()=>{if(x)return D.none();if(Ms(h.outerContainer.element).left+wa(h.outerContainer.element)>=window.innerWidth-40||Br(h.outerContainer.element,"width").isSome()){qo(h.outerContainer.element,"position","absolute"),qo(h.outerContainer.element,"left","0px"),Lr(h.outerContainer.element,"width");const Ne=wa(h.outerContainer.element);return D.some(Ne)}return D.none()})();var Ne;U&&gs.refreshToolbar(h.outerContainer),x||(Ne=xe,m.on(Ge=>{const Et=gs.getToolbar(h.outerContainer),_t=re(Et),Ot=ma(r),{top:so,left:_o}=(Xo=e,Yo=h.outerContainer.element,Lm(Xo)?Tv(Yo):D.none()).fold(()=>({top:L()?Math.max(Ot.y-Ns(Ge.element)+_t,0):Ot.bottom,left:Ot.x}),Xo=>{var Yo;const zr=ma(Xo),hs=null!==(Yo=Xo.dom.scrollTop)&&void 0!==Yo?Yo:0,Cn=Zo(Xo,da()),hr=Cn?Math.max(Ot.y-Ns(Ge.element)+_t,0):Ot.y-zr.y+hs-Ns(Ge.element)+_t;return{top:L()?hr:Ot.bottom,left:Cn?Ot.x:Ot.x-zr.x}}),go={position:"absolute",left:Math.round(_o)+"px",top:Math.round(so)+"px"},Uo=Ne.map(Xo=>{const Yo=ua(),zr=window.innerWidth-(_o-Yo.left);return{width:Math.max(Math.min(Xo,zr),150)+"px"}}).getOr({});var Xo,Yo;xi(h.outerContainer.element,{...go,...Uo})})),k&&m.on(me),ce()},de=()=>!(x||!k||!Q())&&m.get().exists(me=>{const xe=N.getDockingMode(),Ne=(Et=>{switch(qy(e)){case Gk.auto:const _t=gs.getToolbar(h.outerContainer),Ot=re(_t),so=Ns(Et.element)-Ot,_o=ma(r);if(_o.y>so)return"top";{const go=yt(r),Uo=Math.max(go.dom.scrollHeight,Ns(go));return _o.bottom<Uo-so||$s().bottom<_o.bottom-so?"bottom":"top"}case Gk.bottom:return"bottom";default:return"top"}})(me);return Ne!==xe&&(Ge=Ne,m.on(Et=>{Ka.setModes(Et,[Ge]),N.setDockingMode(Ge);const _t=L()?Wd.TopToBottom:Wd.BottomToTop;Bo(Et.element,Sm,_t)}),!0);var Ge});return{isVisible:Q,isPositionedAtTop:L,show:()=>{J.set(!0),qo(h.outerContainer.element,"display","flex"),y.addClass(e.getBody(),"mce-edit-focus"),Tt(b,me=>{Lr(me.element,"display")}),de(),Lm(e)?ee(me=>Ka.isDocked(me)?Ka.reset(me):Ka.refresh(me)):ee(Ka.refresh)},hide:()=>{J.set(!1),qo(h.outerContainer.element,"display","none"),y.removeClass(e.getBody(),"mce-edit-focus"),Tt(b,me=>{qo(me.element,"display","none")})},update:ee,updateMode:()=>{de()&&ee(Ka.reset)},repositionPopups:ce}})(e,y,r,l,b),k=LC(e);await C5(e);const T=()=>{if(b.isSet())return void x.show();b.set(gs.getHeader(h.outerContainer).getOrDie());const L=Eb(e);Lm(e)?(Kd(y,h.mothership),Kd(y,r.popupUi.mothership)):kp(L,h.mothership),kp(L,r.dialogUi.mothership),cx(e,r,a,l),gs.setMenubar(h.outerContainer,Bk(e,a)),x.show(),((z,U,J,Q)=>{const re=Io(Zv(U,J.isPositionedAtTop())),ce=xe=>{const{pos:Ne,bounds:Ge}=Zv(U,J.isPositionedAtTop()),{pos:Et,bounds:_t}=re.get(),Ot=Ge.height!==_t.height||Ge.width!==_t.width;re.set({pos:Ne,bounds:Ge}),Ot&&D_(z,xe),J.isVisible()&&(Et!==Ne?J.update(Ka.reset):Ot&&(J.updateMode(),J.repositionPopups()))};Q||(z.on("activate",J.show),z.on("deactivate",J.hide)),z.on("SkinLoaded ResizeWindow",()=>J.update(Ka.reset)),z.on("NodeChange keydown",xe=>{requestAnimationFrame(()=>ce(xe))});let ee=0;const de=bv(()=>J.update(Ka.refresh),33);z.on("ScrollWindow",()=>{const xe=ua().left;xe!==ee&&(ee=xe,de.throttle()),J.updateMode()}),Lm(z)&&z.on("ElementScroll",xe=>{J.update(Ka.refresh)});const me=sg();me.set(V0(pe(z.getBody()),"load",xe=>ce(xe.raw))),z.on("remove",()=>{me.clear()})})(e,y,x,k),e.nodeChanged()};return e.on("show",T),e.on("hide",x.hide),k||(e.on("focus",T),e.on("blur",x.hide)),e.on("init",()=>{(e.hasFocus()||k)&&T()}),y2(e,r),{editorContainer:h.outerContainer.element.dom,api:{show:T,hide:x.hide,setEnabled:L=>{v2(r,!L)},isEnabled:()=>!Ko.isDisabled(h.outerContainer)}}}});const Kk="contexttoolbar-hide",Gl=(e,r)=>Ct(kS,(a,l)=>{const m=(h=e.get(a),{hide:()=>Fr(h,ea()),getValue:()=>Ut.getValue(h)});var h;r.onAction(m,l.event.buttonApi)}),Xk=(e,r,a)=>r.bottom-e.y>=a&&e.bottom-r.y>=a,gx=e=>{const r=(a=>{const l=a.getBoundingClientRect();if(l.height<=0&&l.width<=0){const m=kr(pe(a.startContainer),a.startOffset).element;return(Fn(m)?Lt(m):D.some(m)).filter(ho).map(h=>h.dom.getBoundingClientRect()).getOr(l)}return l})(e.selection.getRng());if(e.inline){const a=ua();return us(a.left+r.left,a.top+r.top,r.width,r.height)}{const a=Al(pe(e.getBody()));return us(a.x+r.left,a.y+r.top,r.width,r.height)}},xT=(e,r,a,l=0)=>{const m=Va(window),h=ma(pe(e.getContentAreaContainer())),b=Cb(e)||_b(e)||Sb(e),{x:y,width:x}=((k,T,N)=>{const L=Math.max(k.x+N,T.x);return{x:L,width:Math.min(k.right-N,T.right)-L}})(h,m,l);if(e.inline&&!b)return us(y,m.y,x,m.height);{const k=r.header.isPositionedAtTop(),{y:T,bottom:N}=((L,z,U,J,Q,re)=>{const ce=pe(L.getContainer()),ee=Oa(ce,".tox-editor-header").getOr(ce),de=ma(ee),xe=J&&!(de.y>=z.bottom);if(L.inline&&xe)return{y:Math.max(de.bottom+re,U.y),bottom:U.bottom};if(L.inline&&!xe)return{y:U.y,bottom:Math.min(de.y-re,U.bottom)};const Ne="line"===Q?ma(ce):z;return xe?{y:Math.max(de.bottom+re,U.y),bottom:Math.min(Ne.bottom-re,U.bottom)}:{y:Math.max(Ne.y+re,U.y),bottom:Math.min(de.y-re,U.bottom)}})(e,h,m,k,a,l);return us(y,T,x,N-T)}},Lg={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},CT={maxHeightFunction:nh(),maxWidthFunction:Gw()},Yk=e=>"node"===e,m0=(e,r,a,l,m)=>{const h=gx(e),b=l.lastElement().exists(y=>Zo(a,y));return((y,x)=>{const k=y.selection.getRng(),T=kr(pe(k.startContainer),k.startOffset);return k.startContainer===k.endContainer&&k.startOffset===k.endOffset-1&&Zo(T.element,x)})(e,a)?b?sO:uu:b?((y,x,k)=>{const T=Br(y,"position");qo(y,"position",x);const N=Xk(h,ma(r),-20)&&!l.isReposition()?XA:sO;return T.each(L=>qo(y,"position",L)),N})(r,l.getMode()):("fixed"===l.getMode()?m.y+ua().top:m.y)+(Ns(r)+12)<=h.y?uu:lf},hx=(e,r,a,l)=>{const m=b=>(y,x,k,T,N)=>({...m0(e,T,b,a,N)({...y,y:N.y,height:N.height},x,k,T,N),alwaysFit:!0}),h=b=>Yk(l)?[m(b)]:[];return r?{onLtr:b=>[ha,Ti,Ai,Xs,Ta,Wl].concat(h(b)),onRtl:b=>[ha,Ai,Ti,Ta,Xs,Wl].concat(h(b))}:{onLtr:b=>[Wl,ha,Xs,Ti,Ta,Ai].concat(h(b)),onRtl:b=>[Wl,ha,Ta,Ai,Xs,Ti].concat(h(b))}},px=(e,r)=>{const a=Ie(r,h=>h.predicate(e.dom)),{pass:l,fail:m}=Po(a,h=>"contexttoolbar"===h.type);return{contextToolbars:l,contextForms:m}},_T=bo("forward-slide"),ST=bo("backward-slide"),mf=bo("change-slide-event"),Jk="tox-pop--resizing",fx="tox-pop--transition",o=(e,r)=>{const a=()=>{const l=r.getOptions(e),m=r.getCurrent(e).map(r.hash),h=Ds();return Xe(l,b=>({type:"togglemenuitem",text:r.display(b),onSetup:y=>{const x=T=>{T&&(h.on(N=>N.setActive(!1)),h.set(y)),y.setActive(T)};x(cs(m,r.hash(b)));const k=r.watcher(e,b,x);return()=>{h.clear(),k()}},onAction:()=>r.setCurrent(e,b)}))};e.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(a()),onSetup:r.onToolbarSetup}),e.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:a,onSetup:r.onMenuSetup})},s=e=>Th(e,"NodeChange",r=>{r.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),i=(e,r)=>a=>{a.setActive(r.get());const l=m=>{r.set(m.state),a.setActive(m.state)};return e.on("PastePlainTextToggle",l),k2(()=>e.off("PastePlainTextToggle",l),Pl(e)(a))},c=(e,r)=>()=>{e.execCommand("mceToggleFormat",!1,r)},u=(e,r)=>Th(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!e.mode.isReadOnly()&&e.undoManager[r]())}),p=e=>Th(e,"VisualAid",r=>{r.setActive(e.hasVisual)}),w=e=>No(e)?e.split(/[ ,]/):e,C=e=>r=>r.options.get(e),O=C("contextmenu_never_use_native"),R=C("contextmenu_avoid_overlap"),A=e=>{const r=e.ui.registry.getAll().contextMenus,a=e.options.get("contextmenu");return e.options.isSet("contextmenu")?a:Ie(a,l=>Wo(r,l))},H=(e,r)=>({type:"makeshift",x:e,y:r}),M=e=>"longpress"===e.type||0===e.type.indexOf("touch"),j=e=>({type:"selection",root:pe(e.selection.getNode())}),$=(e,r,a)=>{switch(a){case"node":return{type:"node",node:D.some(pe((l=e).selection.getNode())),root:pe(l.getBody())};case"point":return((e,r)=>"contextmenu"===r.type||"longpress"===r.type?e.inline?(a=>{if(M(a)){const l=a.touches[0];return H(l.pageX,l.pageY)}return H(a.pageX,a.pageY)})(r):((a,l)=>{const m=O1.DOM.getPos(a);return H((h=l).x+m.x,h.y+m.y);var h})(e.getContentAreaContainer(),(a=>{if(M(a)){const l=a.touches[0];return H(l.clientX,l.clientY)}return H(a.clientX,a.clientY)})(r)):j(e))(e,r);case"selection":return j(e)}var l},oe=(e,r,a,l,m,h)=>{const b=a(),y=$(e,r,h);nf(b,nd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:D.none()}).map(x=>{r.preventDefault(),Na.showMenuAt(m,{anchor:y},{menu:{markers:xg("normal")},data:x})})},ie={onLtr:()=>[ha,Ti,Ai,Xs,Ta,Wl,uu,lf,af,Nw,sf,rf],onRtl:()=>[ha,Ai,Ti,Ta,Xs,Wl,uu,lf,sf,rf,af,Nw]},be={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Se=(e,r,a,l,m,h)=>{const b=Ci(),y=b.os.isiOS(),x=b.os.isMacOS(),k=b.os.isAndroid(),T=b.deviceType.isTouch(),N=()=>{const L=a();((z,U,J,Q,re,ce,ee)=>{const de=((me,xe,Ne)=>{const Ge=$(me,xe,Ne);return{bubble:lg(0,"point"===Ne?12:0,be),layouts:ie,overrides:{maxWidthFunction:Gw(),maxHeightFunction:nh()},...Ge}})(z,U,ce);nf(J,nd.CLOSE_ON_EXECUTE,Q,{isHorizontalMenu:!0,search:D.none()}).map(me=>{U.preventDefault();const xe=ee?Qi.HighlightMenuAndItem:Qi.HighlightNone;Na.showMenuWithinBounds(re,{anchor:de},{menu:{markers:xg("normal"),highlightOnOpen:xe},data:me,type:"horizontal"},()=>D.some(xT(z,Q.shared,"node"===ce?"node":"selection"))),z.dispatch(Kk)})})(e,r,L,l,m,h,!(k||y||x&&T))};if((x||y)&&"node"!==h){const L=()=>{(z=>{const U=z.selection.getRng(),J=()=>{fb.setEditorTimeout(z,()=>{z.selection.setRng(U)},10),ce()};z.once("touchend",J);const Q=ee=>{ee.preventDefault(),ee.stopImmediatePropagation()};z.on("mousedown",Q,!0);const re=()=>ce();z.once("longpresscancel",re);const ce=()=>{z.off("touchend",J),z.off("longpresscancel",re),z.off("mousedown",Q)}})(e),N()};((z,U)=>{const J=z.selection;if(J.isCollapsed()||U.touches.length<1)return!1;{const Q=U.touches[0],re=J.getRng();return Y0(z.getWin(),Du.domRange(re)).exists(ce=>ce.left<=Q.clientX&&ce.right>=Q.clientX&&ce.top<=Q.clientY&&ce.bottom>=Q.clientY)}})(e,r)?L():(e.once("selectionchange",L),e.once("touchend",()=>e.off("selectionchange",L)))}else N()},ze=e=>No(e)?"|"===e:"separator"===e.type,at={type:"separator"},Je=e=>{const r=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(No(e))return e;switch(e.type){case"separator":return at;case"submenu":return{type:"nestedmenuitem",...r(e),getSubmenuItems:()=>{const l=e.getSubmenuItems();return No(l)?l:Xe(l,Je)}};default:const a=e;return{type:"menuitem",...r(a),onAction:Ft(a.onAction)}}},Ae=(e,r)=>{if(0===r.length)return e;const a=Cr(e).filter(l=>!ze(l)).fold(()=>[],l=>[at]);return e.concat(a).concat(r).concat([at])},Pe=(e,r)=>{return!("longpress"===(a=r).type||Wo(a,"touches")||2===r.button&&(r.target!==e.getBody()||""!==r.pointerType));var a},Me=(e,r)=>Pe(e,r)?e.selection.getStart(!0):r.target,qe=(e,r,a)=>{const l=Ci().deviceType.isTouch,m=ja(Na.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>e.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Vt([On("dismissContextMenu",[Ct(cm(),(y,x)=>{mr.close(y),e.focus()})])])})),h=()=>Na.hide(m),b=y=>{if(O(e)&&y.preventDefault(),y.ctrlKey&&!O(e)||(k=>0===A(k).length)(e))return;const x=((k,T)=>{const N=R(k),L=Pe(k,T)?"selection":"point";if(ai(N)){const z=Me(k,T);return $1(pe(z),N)?"node":L}return L})(e,y);(l()?Se:oe)(e,y,()=>{const k=Me(e,y),T=e.ui.registry.getAll(),N=A(e);return((L,z,U)=>{const J=Gt(z,(Q,re)=>Kt(L,re.toLowerCase()).map(ce=>{const ee=ce.update(U);if(No(ee))return Ae(Q,ee.split(" "));if(ee.length>0){const de=Xe(ee,Je);return Ae(Q,de)}return Q}).getOrThunk(()=>Q.concat([re])),[]);return J.length>0&&ze(J[J.length-1])&&J.pop(),J})(T.contextMenus,N,k)},a,m,x)};e.on("init",()=>{const y="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");e.on(y,h),e.on("longpress contextmenu",b)})},Qt=Rl([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Ht=e=>r=>r.translate(-e.left,-e.top),Lo=e=>r=>r.translate(e.left,e.top),to=e=>(r,a)=>Gt(e,(l,m)=>m(l),Kn(r,a)),wn=(e,r,a)=>e.fold(to([Lo(a),Ht(r)]),to([Ht(r)]),to([])),xn=(e,r,a)=>e.fold(to([Lo(a)]),to([]),to([Lo(r)])),ao=(e,r,a)=>e.fold(to([]),to([Ht(a)]),to([Lo(r),Ht(a)])),Mo=(e,r,a)=>{const l=e.fold((m,h)=>({position:D.some("absolute"),left:D.some(m+"px"),top:D.some(h+"px")}),(m,h)=>({position:D.some("absolute"),left:D.some(m-a.left+"px"),top:D.some(h-a.top+"px")}),(m,h)=>({position:D.some("fixed"),left:D.some(m+"px"),top:D.some(h+"px")}));return{right:D.none(),bottom:D.none(),...l}},rn=(e,r,a,l)=>{const m=(h,b)=>(y,x)=>{const k=h(r,a,l);return b(y.getOr(k.left),x.getOr(k.top))};return e.fold(m(ao,Te),m(xn,Re),m(wn,st))},Te=Qt.offset,Re=Qt.absolute,st=Qt.fixed,kt=(e,r)=>{const a=Xr(e,r);return _n(a)?NaN:parseInt(a,10)},vt=(e,r,a,l)=>is(e,m=>((y,x,k,T,N,L)=>{const z=xn(y,N,L),U=xn(x,N,L);return Math.abs(z.left-U.left)<=k&&Math.abs(z.top-U.top)<=T})(r,m.sensor,m.range.left,m.range.top,a,l)?D.some({output:rn(m.output,r,a,l),extra:m.extra}):D.none());var fo=Object.freeze({__proto__:null,snapTo:(e,r,a,l)=>{const m=r.getTarget(e.element);if(r.repositionTarget){const h=_e(e.element),b=ua(h),y=kO(m),x={coord:rn((T=l).output,T.output,b,y),extra:T.extra},k=Mo(x.coord,0,y);It(m,k)}var T}});const sn="data-initial-z-index",hn=(e,r)=>{var a;e.getSystem().addToGui(r),Lt((a=r).element).filter(ho).each(l=>{Br(l,"z-index").each(m=>{Bo(l,sn,m)}),qo(l,"z-index",Ts(a.element,"z-index"))})},io=e=>{Lt(e.element).filter(ho).each(a=>{vs(a,sn).fold(()=>Lr(a,"z-index"),l=>qo(a,"z-index",l)),jr(a,sn)}),e.getSystem().removeFromGui(e)},In=(e,r,a)=>e.getSystem().build(Xu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:a}));var wi=Jr("snaps",[je("getSnapPoints"),cr("onSensor"),je("leftAttr"),je("topAttr"),De("lazyViewport",$s),De("mustSnap",!1)]);const ba=[De("useFixed",ot),je("blockerClass"),De("getTarget",it),De("onDrag",At),De("repositionTarget",!0),De("onDrop",At),Gs("getBounds",$s),wi],Kl=(e,r)=>({bounds:e.getBounds(),height:Ui(r.element),width:wa(r.element)}),Ad=(e,r,a,l,m)=>{const h=a.update(l,m),b=a.getStartData().getOrThunk(()=>Kl(r,e));h.each(y=>{((x,k,T,N)=>{const L=k.getTarget(x.element);if(k.repositionTarget){const z=_e(x.element),U=ua(z),J=kO(L),Q=(e=>{return(r=Br(e,"left"),a=Br(e,"top"),l=Br(e,"position"),r.isSome()&&a.isSome()&&l.isSome()?D.some((m=r.getOrDie(),h=a.getOrDie(),b=l.getOrDie(),("fixed"===b?st:Te)(parseInt(m,10),parseInt(h,10)))):D.none()).getOrThunk(()=>{const m=Ms(e);return Re(m.left,m.top)});var m,h,b,r,a,l})(L),re=(ee=x,me=Q,xe=U,Ne=J,Ge=N,Et=T,((_t,Ot,so,_o,go)=>{const Uo=go.bounds,Xo=xn(Ot,so,_o),Yo=Ul(Xo.left,Uo.x,Uo.x+Uo.width-go.width),zr=Ul(Xo.top,Uo.y,Uo.y+Uo.height-go.height),hs=Re(Yo,zr);return Ot.fold(()=>{const Cn=ao(hs,so,_o);return Te(Cn.left,Cn.top)},ne(hs),()=>{const Cn=wn(hs,so,_o);return st(Cn.left,Cn.top)})})(0,k.snaps.fold(()=>{const _t=(so=Ge.left,_o=Ge.top,me.fold((Uo,Xo)=>Te(Uo+so,Xo+_o),(Uo,Xo)=>Re(Uo+so,Xo+_o),(Uo,Xo)=>st(Uo+so,Xo+_o)));var so,_o;const go=wn(_t,xe,Ne);return st(go.left,go.top)},_t=>{const Ot=((e,r,a,l,m,h)=>{const b=(N=a,L=l,((z,U)=>{const J=z.element,Q=kt(J,U.leftAttr),re=kt(J,U.topAttr);return isNaN(Q)||isNaN(re)?D.none():D.some(Kn(Q,re))})(e,r).fold(()=>N,z=>st(z.left+L.left,z.top+L.top))),y=r.mustSnap?((e,r,a,l,m)=>{const h=r.getSnapPoints(e);return vt(h,a,l,m).orThunk(()=>Gt(h,(y,x)=>{const T=((N,L,z,U,J,Q)=>{const re=xn(N,J,Q),ce=xn(L,J,Q),ee=Math.abs(re.left-ce.left),de=Math.abs(re.top-ce.top);return Kn(ee,de)})(a,x.sensor,0,0,l,m);return y.deltas.fold(()=>({deltas:D.some(T),snap:D.some(x)}),N=>(T.left+T.top)/2<=(N.left+N.top)/2?{deltas:D.some(T),snap:D.some(x)}:y)},{deltas:D.none(),snap:D.none()}).snap.map(y=>({output:rn(y.output,a,l,m),extra:y.extra})))})(e,r,b,m,h):((e,r,a,l,m)=>{const h=r.getSnapPoints(e);return vt(h,a,l,m)})(e,r,b,m,h),x=wn(b,m,h);var N,L;return((k,T,N)=>{const L=k.element;Bo(L,T.leftAttr,N.left+"px"),Bo(L,T.topAttr,N.top+"px")})(e,r,x),y.fold(()=>({coord:st(x.left,x.top),extra:D.none()}),k=>({coord:k.output,extra:k.extra}))})(ee,_t,me,Ge,xe,Ne);return Ot.extra.each(so=>{_t.onSensor(ee,so)}),Ot.coord}),xe,Ne,Et)),ce=Mo(re,0,J);It(L,ce)}var ee,me,xe,Ne,Ge,Et;k.onDrag(x,L,N)})(e,r,b,y)})},Nd=(e,r,a,l)=>{r.each(io),a.snaps.each(h=>{((x,k)=>{const T=x.element;jr(T,k.leftAttr),jr(T,k.topAttr)})(e,h)});const m=a.getTarget(e.element);l.reset(),a.onDrop(e,m)},zi=e=>(r,a)=>{const l=m=>{a.setStartData(Kl(r,m))};return Mr([Ct(Wg(),m=>{a.getStartData().each(()=>l(m))}),...e(r,a,l)])};var Fc=Object.freeze({__proto__:null,getData:e=>D.from(Kn(e.x,e.y)),getDelta:(e,r)=>Kn(r.left-e.left,r.top-e.top)});const Ia=(e,r,a)=>[Ct(ti(),(l,m)=>{if(0!==m.event.raw.button)return;m.stop();const h=()=>Nd(l,D.some(x),e,r),b=q3(h,200),y={drop:h,delayDrop:b.schedule,forceDrop:h,move:k=>{b.cancel(),Ad(l,e,r,Fc,k)}},x=In(l,e.blockerClass,(k=y,Mr([Ct(ti(),k.forceDrop),Ct(xu(),k.drop),Ct(xc(),(T,N)=>{k.move(N.event)}),Ct(wu(),k.delayDrop)])));var k;a(l),hn(l,x)})],Um=[...ba,Qr("dragger",{handlers:zi(Ia)})];var Ig=Object.freeze({__proto__:null,getData:e=>{const r=e.raw.touches;return 1===r.length?(a=>{const l=a[0];return D.some(Kn(l.clientX,l.clientY))})(r):D.none()},getDelta:(e,r)=>Kn(r.left-e.left,r.top-e.top)});const jv=(e,r,a)=>{const l=Ds(),m=h=>{Nd(h,l.get(),e,r),l.clear()};return[Ct(sl(),(h,b)=>{b.stop();const y=()=>m(h),x={drop:y,delayDrop:At,forceDrop:y,move:T=>{Ad(h,e,r,Ig,T)}},k=In(h,e.blockerClass,(T=x,Mr([Ct(sl(),T.forceDrop),Ct(Ba(),T.drop),Ct(yu(),T.drop),Ct(Dl(),(N,L)=>{T.move(L.event)})])));var T;l.set(k),a(h),hn(h,k)}),Ct(Dl(),(h,b)=>{b.stop(),Ad(h,e,r,Ig,b.event)}),Ct(Ba(),(h,b)=>{b.stop(),m(h)}),Ct(yu(),m)]},Wm=Um,Uv=[...ba,Qr("dragger",{handlers:zi(jv)})],dd=[...ba,Qr("dragger",{handlers:zi((e,r,a)=>[...Ia(e,r,a),...jv(e,r,a)])})];var Zh=Object.freeze({__proto__:null,mouse:Wm,touch:Uv,mouseOrTouch:dd}),ud=Object.freeze({__proto__:null,init:()=>{let e=D.none(),r=D.none();const a=ne({});return vl({readState:a,reset:()=>{e=D.none(),r=D.none()},update:(l,m)=>l.getData(m).bind(h=>((b,y)=>{const x=e.map(k=>b.getDelta(k,y));return e=D.some(y),x})(l,h)),getStartData:()=>r,setStartData:l=>{r=D.some(l)}})}});const Md=I0({branchKey:"mode",branches:Zh,name:"dragging",active:{events:(e,r)=>e.dragger.handlers(e,r)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:D.from(e.extra)})},state:ud,apis:fo}),Qk=(e,r,a,l,m,h)=>e.fold(()=>Md.snap({sensor:Re(a-20,l-20),range:Kn(m,h),output:Re(D.some(a),D.some(l)),extra:{td:r}}),b=>{const y=a-20,x=l-20,k=b.element.dom.getBoundingClientRect();return Md.snap({sensor:Re(y,x),range:Kn(40,40),output:Re(D.some(a-k.width/2),D.some(l-k.height/2)),extra:{td:r}})}),kT=(e,r,a)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(l,m)=>{const h=m.td;var b,y;b=r.get(),y=h,b.exists(x=>Zo(x,y))||(r.set(h),a(h))},mustSnap:!0}),gf=e=>es(Fi.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Vt([Md.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),G1.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}));var $m;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}($m||($m={}));const e4=(e,r,a)=>{const l=pe(e.getContainer()),m=((h,b,y,x,k)=>{const T={height:jm(x+b.top,Zy(h),jy(h))};return y===$m.Both&&(T.width=jm(k+b.left,vb(h),yb(h))),T})(e,r,a,Ns(l),vr(l));Pn(m,(h,b)=>{lo(h)&&qo(l,b,$k(h))}),e.dispatch("ResizeEditor")},Wv=(e,r,a,l)=>{const m=Kn(20*a,20*l);return e4(e,m,r),D.some(!0)},$v=(e,r)=>r.get().getOrDie(`UI for ${e} has not been rendered`),t4=(e,r)=>{const a=e.inline,l=a?ux:N5,m=Ob(e)?LO:Dw,h=(()=>{const de=Ds(),me=Ds(),xe=Ds();return{dialogUi:de,popupUi:me,mainUi:xe,getUiMotherships:()=>{const Ne=de.get().map(Et=>Et.mothership),Ge=me.get().map(Et=>Et.mothership);return Ne.fold(()=>Ge.toArray(),Et=>Ge.fold(()=>[Et],_t=>Zo(Et.element,_t.element)?[Et]:[Et,_t]))},lazyGetInOuterOrDie:(Ne,Ge)=>()=>xe.get().bind(Et=>Ge(Et.outerContainer)).getOrDie(`Could not find ${Ne} element in OuterContainer`)}})(),b=Ds(),y=Ds(),x=Ds(),k=Ci().deviceType.isTouch()?["tox-platform-touch"]:[],T=kb(e),N=Lp(e),L=es({dom:{tag:"div",classes:["tox-anchorbar"]}}),z=()=>h.mainUi.get().map(de=>de.outerContainer).bind(gs.getHeader),U=h.lazyGetInOuterOrDie("anchor bar",L.getOpt),J=h.lazyGetInOuterOrDie("toolbar",gs.getToolbar),Q=h.lazyGetInOuterOrDie("throbber",gs.getThrobber),re=((de,me,xe)=>{const Ne=Io(!1),Ge=(Yo=>{const zr=Io(kb(Yo)?"bottom":"top");return{isPositionedAtTop:()=>"top"===zr.get(),getDockingMode:zr.get,setDockingMode:zr.set}})(me),Et={icons:()=>me.ui.registry.getAll().icons,menuItems:()=>me.ui.registry.getAll().menuItems,translate:od.translate,isDisabled:()=>me.mode.isReadOnly()||!me.ui.isEnabled(),getOption:me.options.get},_t=(e=>({getHistory:YS,addToHistory:Rw,getLinkInformation:()=>{return Q4(r=e)?D.some({targets:n5(r.getBody()),anchorTop:CO(FC(r)),anchorBottom:CO(Ky(r))}):D.none();var r},getValidationHandler:()=>D.from(PC(e)),getUrlPicker:r=>{return((m,h)=>{const b=(y=>{const x=D.from(Gy(y)).filter(JS).map(r5);return QS(y).fold(ot,k=>x.fold(mn,T=>_r(T).length>0&&T))})(m);return Is(b)?b?QS(m):D.none():b[h]?QS(m):D.none()})(a=e,l=r).map(m=>h=>Sg(b=>{const y={filetype:l,fieldname:h.fieldname,...D.from(h.meta).getOr({})};m.call(a,(x,k)=>{if(!No(x))throw new Error("Expected value to be string");if(void 0!==k&&!ps(k))throw new Error("Expected meta to be a object");b({value:x,meta:k})},h.value,y)}));var a,l}}))(me),Ot=(Yo=>{const zr=_s=>()=>Yo.formatter.match(_s),hs=_s=>()=>{const Tr=Yo.formatter.get(_s);return void 0!==Tr?D.some({tag:Tr.length>0&&(Tr[0].inline||Tr[0].block)||"div",styles:Yo.dom.parseStyle(Yo.formatter.getCssText(_s))}):D.none()},Cn=Io([]),hr=Io([]),Cs=Io(!1);return Yo.on("PreInit",_s=>{const Tr=mO(Yo),hc=Ov(Yo,Tr,zr,hs);Cn.set(hc)}),Yo.on("addStyleModifications",_s=>{const Tr=Ov(Yo,_s.items,zr,hs);hr.set(Tr),Cs.set(_s.replace)}),{getData:()=>{const _s=Cs.get()?[]:Cn.get(),Tr=hr.get();return _s.concat(Tr)}}})(me),so={colorPicker:QA(Yo=me),hasCustomColors:lO(Yo),getColors:cO(Yo),getColorCols:e5(Yo)},_o=(Yo=>({isDraggableModal:Sv(Yo)}))(me),go={shared:{providers:Et,anchors:ld(me,xe,Ge.isPositionedAtTop),header:Ge},urlinput:_t,styles:Ot,colorinput:so,dialog:_o,isContextMenuOpen:()=>Ne.get(),setContextMenuState:Yo=>Ne.set(Yo)},Uo={...go,shared:{...go.shared,interpreter:Yo=>wv(Yo,{},Uo),getSink:de.popup}},Xo={...go,shared:{...go.shared,interpreter:Yo=>wv(Yo,{},Xo),getSink:de.dialog}};var Yo;return{popup:Uo,dialog:Xo}})({popup:()=>Mn.fromOption(h.popupUi.get().map(de=>de.sink),"(popup) UI has not been rendered"),dialog:()=>Mn.fromOption(h.dialogUi.get().map(de=>de.sink),"UI has not been rendered")},e,U),ee=de=>{const me=$k((Et=>{const _t=RC(Et),Ot=Zy(Et),so=jy(Et);return dx(_t).map(_o=>jm(_o,Ot,so))})(Ne=e).getOr(RC(Ne))),xe=$k((Ne=>qk(Ne).getOr(A1(Ne)))(e));var Ne;return e.inline||(Xl("div","width",xe)&&qo(de.element,"width",xe),Xl("div","height",me)?qo(de.element,"height",me):qo(de.element,"height","400px")),me};return{popups:{backstage:re.popup,getMothership:()=>$v("popups",x)},dialogs:{backstage:re.dialog,getMothership:()=>$v("dialogs",y)},renderUI:()=>{const de=(()=>{const de=(()=>{const Uo={attributes:{[Sm]:T?Wd.BottomToTop:Wd.TopToBottom}},Xo=gs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:re.popup,onEscape:()=>{e.focus()}}),Yo=gs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:re.popup.shared.getSink,providers:re.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:Xa=>{e.dispatch("ToggleToolbarDrawer",{state:Xa})},type:N,lazyToolbar:J,lazyHeader:()=>z().getOrDie("Could not find header element"),...Uo}),zr=gs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:re.popup.shared.providers,onEscape:()=>{e.focus()},type:N}),hs=Sb(e),Cn=_b(e),hr=Cb(e),Cs=Yy(e),_s=gs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),hc=Cs?[_s,Xo]:[Xo];return gs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(hs||Cn||hr?[]:["tox-editor-header--empty"]),...Uo},components:en([hr?hc:[],hs?[zr]:Cn?[Yo]:[],Hp(e)?[]:[L.asSpec()]]),sticky:Ob(e),editor:e,sharedBackstage:re.popup.shared})})(),me={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[gs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),gs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},xe=gs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:re.popup}),Ne=gs.parts.viewWrapper({backstage:re.popup}),Ge=zC(e)&&!a?D.some(((e,r)=>({dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const a=(()=>{const m=[];return e3(e)&&m.push(((e,r,a)=>{var l;const m=null!==(l={}.delimiter)&&void 0!==l?l:"\u203a";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Vt([Ho.config({mode:"flow",selector:"div[role=button]"}),Ko.config({disabled:a.isDisabled}),vi(),fa.config({}),pn.config({}),On("elementPathEvents",[ys((h,b)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Ho.focusIn(h)),e.on("NodeChange",y=>{const x=(T=>{const N=[];let L=T.length;for(;L-- >0;){const U=T[L];if(1===U.nodeType&&"BR"!==(z=U).nodeName&&!z.getAttribute("data-mce-bogus")&&"bookmark"!==z.getAttribute("data-mce-type")){const J=O3(e,U);if(J.isDefaultPrevented()||N.push({name:J.name,element:U}),J.isPropagationStopped())break}}var z;return N})(y.parents),k=x.length>0?Gt(x,(T,N,L)=>{const z=(J=N.element,Fi.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":Q=L,"aria-level":Q+1}},components:[Ks(N.name)],action:re=>{e.focus(),e.selection.select(J),e.nodeChanged()},buttonBehaviours:Vt([jp(a.isDisabled),vi()])}));var J,Q;return T.concat(0===L?[z]:[{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ks(` ${m} `)]},z])},[]):[];pn.set(h,k)})})])]),components:[]}})(e,0,r)),e.hasPlugin("wordcount")&&m.push(((h,b)=>{const y=(x,k,T)=>pn.set(x,[Ks(b.translate(["{0} "+T,k[T]]))]);return Fi.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Vt([jp(b.isDisabled),vi(),fa.config({}),pn.config({}),Ut.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),On("wordcount-events",[Ec(x=>{const k=Ut.getValue(x),T="words"===k.mode?"characters":"words";Ut.setValue(x,{mode:T,count:k.count}),y(x,k.count,T)}),ys(x=>{h.on("wordCountUpdate",k=>{const{mode:T}=Ut.getValue(x);Ut.setValue(x,{mode:T,count:k.wordCount}),y(x,k.wordCount,T)})})])]),eventOrder:{[bl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,r)),Xy(e)&&m.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":od.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Vt([nn.config({})])}]}),m.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:m}]:[]})(),l=((m,h)=>{const b=(x=>{const k=_h(x);return!1===k?$m.None:"both"===k?$m.Both:$m.Vertical})(m);if(b===$m.None)return D.none();const y=b===$m.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return D.some(tu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:h.translate("Resize"),"aria-label":h.translate(y)},behaviours:[Md.config({mode:"mouse",repositionTarget:!1,onDrag:(x,k,T)=>e4(m,T,b),blockerClass:"tox-blocker"}),Ho.config({mode:"special",onLeft:()=>Wv(m,b,-1,0),onRight:()=>Wv(m,b,1,0),onUp:()=>Wv(m,b,0,-1),onDown:()=>Wv(m,b,0,1)}),fa.config({}),nn.config({})]},h.icons))})(e,r);return a.concat(l.toArray())})()}))(e,re.popup.shared.providers)):D.none(),Et=en([T?[]:[de],a?[]:[me],T?[de]:[]]),_t=gs.parts.editorContainer({components:en([Et,a?[]:Ge.toArray()])}),Ot=ZC(e),so={role:"application",...od.isRtl()?{dir:"rtl"}:{},...Ot?{"aria-hidden":"true"}:{}},_o=ja(gs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(T?["tox-tinymce--toolbar-bottom"]:[]).concat(k),styles:{visibility:"hidden",...Ot?{opacity:"0",border:"0"}:{}},attributes:so},components:[_t,...a?[]:[Ne],xe],behaviours:Vt([vi(),Ko.config({disableClass:"tox-tinymce--disabled"}),Ho.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),go=J_(_o);return b.set(go),{mothership:go,outerContainer:_o}})(),me=(()=>{const Ne=Eb(e),Ge=Zo(da(),Ne)&&"grid"===Ts(Ne,"display"),Et={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(k),attributes:{...od.isRtl()?{dir:"rtl"}:{}}},behaviours:Vt([Yi.config({useFixed:()=>m.isDocked(z)})])},_t={dom:{styles:{width:document.body.clientWidth+"px"}},events:Mr([Ct(Jm(),_o=>{qo(_o.element,"width",document.body.clientWidth+"px")})])},Ot=ja(Un(Et,Ge?_t:{})),so=J_(Ot);return y.set(so),{sink:Ot,mothership:so}})(),xe=Lm(e)?(()=>{const Ne={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(k),attributes:{...od.isRtl()?{dir:"rtl"}:{}}},behaviours:Vt([Yi.config({useFixed:()=>m.isDocked(z),getBounds:()=>r.getPopupSinkBounds()})])},Ge=ja(Ne),Et=J_(Ge);return x.set(Et),{sink:Ge,mothership:Et}})():(x.set((Ne=me).mothership),Ne);var Ne;return h.dialogUi.set(me),h.popupUi.set(xe),h.mainUi.set(de),(Ne=>{const{mainUi:Ge,popupUi:Et,uiMotherships:_t}=Ne;Gn($y(e),(Cn,hr)=>{e.ui.registry.addGroupToolbarButton(hr,Cn)});const{buttons:Ot,menuItems:so,contextToolbars:_o,sidebars:go,views:Uo}=e.ui.registry.getAll(),Xo=Ip(e),Yo={menuItems:so,menus:jC(e),menubar:IC(e),toolbar:Xo.getOrThunk(()=>M1(e)),allowToolbarGroups:N===Cd.floating,buttons:Ot,sidebar:go,views:Uo};var zr;zr=Ge.outerContainer,e.addShortcut("alt+F9","focus menubar",()=>{gs.focusMenubar(zr)}),e.addShortcut("alt+F10","focus toolbar",()=>{gs.focusToolbar(zr)}),e.addCommand("ToggleToolbarDrawer",(Cn,hr)=>{hr?.skipFocus?gs.toggleToolbarDrawerWithoutFocusing(zr):gs.toggleToolbarDrawer(zr)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>gs.isToolbarDrawerToggled(zr)),((Cn,hr,Cs)=>{const _s=(Ls,Vg)=>{Tt([hr,...Cs],Bd=>{Bd.broadcastEvent(Ls,Vg)})},Tr=(Ls,Vg)=>{Tt([hr,...Cs],Bd=>{Bd.broadcastOn([Ls],Vg)})},hc=Ls=>Tr(ni(),{target:Ls.target}),Xa=Hd(),wx=oi(Xa,"touchstart",hc),Vi=oi(Xa,"touchmove",Ls=>_s(y0(),Ls)),Xv=oi(Xa,"touchend",Ls=>_s(wf(),Ls)),s4=oi(Xa,"mousedown",hc),BT=oi(Xa,"mouseup",Ls=>{0===Ls.raw.button&&Tr(Fu(),{target:Ls.target})}),f0=Ls=>Tr(ni(),{target:pe(Ls.target)}),a4=Ls=>{0===Ls.button&&Tr(Fu(),{target:pe(Ls.target)})},pf=()=>{Tt(Cn.editorManager.get(),Ls=>{Cn!==Ls&&Ls.dispatch("DismissPopups",{relatedTarget:Cn})})},Uh=Ls=>_s(Wg(),iy(Ls)),xx=Ls=>{Tr($l(),{}),_s(Jm(),iy(Ls))},i4=Gr(pe(Cn.getElement())),b0=V0(i4,"scroll",Ls=>{requestAnimationFrame(()=>{if(null!=Cn.getContainer()){const Vg=W1(Cn,hr.element).map(Bd=>[Bd.element,...Bd.others]).getOr([]);Jo(Vg,Bd=>Zo(Bd,Ls.target))&&(Cn.dispatch("ElementScroll",{target:Ls.target.dom}),_s(ey(),Ls))}})}),Yv=()=>Tr($l(),{}),Jv=Ls=>{Ls.state&&Tr(ni(),{target:pe(Cn.getContainer())})},l4=Ls=>{Tr(ni(),{target:pe(Ls.relatedTarget.getContainer())})};Cn.on("PostRender",()=>{Cn.on("click",f0),Cn.on("tap",f0),Cn.on("mouseup",a4),Cn.on("mousedown",pf),Cn.on("ScrollWindow",Uh),Cn.on("ResizeWindow",xx),Cn.on("ResizeEditor",Yv),Cn.on("AfterProgressState",Jv),Cn.on("DismissPopups",l4)}),Cn.on("remove",()=>{Cn.off("click",f0),Cn.off("tap",f0),Cn.off("mouseup",a4),Cn.off("mousedown",pf),Cn.off("ScrollWindow",Uh),Cn.off("ResizeWindow",xx),Cn.off("ResizeEditor",Yv),Cn.off("AfterProgressState",Jv),Cn.off("DismissPopups",l4),s4.unbind(),wx.unbind(),Vi.unbind(),Xv.unbind(),BT.unbind(),b0.unbind()}),Cn.on("detach",()=>{Tt([hr,...Cs],Iu),Tt([hr,...Cs],Ls=>Ls.destroy())})})(e,Ge.mothership,_t),m.setup(e,re.popup.shared,z),((e,r)=>{var a;a=e,Tt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ic(a,l.cmd),onSetup:E2(a,l.name)})}),a.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Pl(a),onAction:Ic(a,"JustifyNone")}),(e=>{var r,a;(a=>{Vm.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(l,m)=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:E2(a,l.name),onAction:c(a,l.name)})});for(let l=1;l<=6;l++){const m="h"+l;a.ui.registry.addToggleButton(m,{text:m.toUpperCase(),tooltip:"Heading "+l,onSetup:E2(a,m),onAction:c(a,m)})}})(r=e),a=r,Vm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ic(a,l.action)})}),Vm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:Pl(a),onAction:Ic(a,l.action)})}),(a=>{Vm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ic(a,l.action),onSetup:E2(a,l.name)})})})(r),(r=>{Vm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onAction:Ic(r,a.action)})}),Vm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onSetup:Pl(r),onAction:Ic(r,a.action)})}),r.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Pl(r),onAction:c(r,"code")})})(e)})(e),((a,l)=>{((m,h)=>{const b=c0(0,h,Pk(m));m.ui.registry.addNestedMenuItem("align",{text:h.shared.providers.translate("Align"),onSetup:Pl(m),getSubmenuItems:()=>b.items.validateItems(b.getStyleItems())})})(a,l),((m,h)=>{const b=c0(0,h,Fk(m));m.ui.registry.addNestedMenuItem("fontfamily",{text:h.shared.providers.translate("Fonts"),onSetup:Pl(m),getSubmenuItems:()=>b.items.validateItems(b.getStyleItems())})})(a,l),((m,h)=>{const b={type:"advanced",...h.styles},y=c0(0,h,Fh(m,b));m.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Pl(m),getSubmenuItems:()=>y.items.validateItems(y.getStyleItems())})})(a,l),((m,h)=>{const b=c0(0,h,mT(m));m.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Pl(m),getSubmenuItems:()=>b.items.validateItems(b.getStyleItems())})})(a,l),((m,h)=>{const b=c0(0,h,hT(m));m.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Pl(m),getSubmenuItems:()=>b.items.validateItems(b.getStyleItems())})})(a,l)})(e,r),(a=>{var l;(l=a).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:u(l,"hasUndo"),onAction:Ic(l,"undo")}),l.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:u(l,"hasRedo"),onAction:Ic(l,"redo")}),(l=>{l.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:u(l,"hasUndo"),onAction:Ic(l,"undo")}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:u(l,"hasRedo"),onAction:Ic(l,"redo")})})(a)})(e),(a=>{var y;(y=a).addCommand("mceApplyTextcolor",(x,k)=>{var T,N,L;N=x,L=k,(T=y).undoManager.transact(()=>{T.focus(),T.formatter.apply(N,{value:L}),T.nodeChanged()})}),y.addCommand("mceRemoveTextcolor",x=>{var k,T;T=x,(k=y).undoManager.transact(()=>{k.focus(),k.formatter.remove(T,{value:null},void 0,!0),k.nodeChanged()})});const l=M3(a),m=R3(a),h=Io(l),b=Io(m);L3(a,"forecolor","forecolor","Text color",h),L3(a,"backcolor","hilitecolor","Background color",b),I3(a,"forecolor","forecolor","Text color",h),I3(a,"backcolor","hilitecolor","Background color",b)})(e),(a=>{var l;(l=a).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ic(l,"mceToggleVisualAid")}),(l=>{l.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:p(l),onAction:Ic(l,"mceToggleVisualAid")})})(a)})(e),(a=>{var l;(l=a).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:s(l),onAction:Ic(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Pl(l),onAction:Ic(l,"indent")})})(e),(e=>{var r;o(e,{name:"lineheight",text:"Line height",icon:"line-height",getOptions:Qy,hash:a=>{return(l=a,rx(l,["fixed","relative","empty"]).map(({value:h,unit:b})=>h+b)).getOr(a);var l},display:it,watcher:(a,l,m)=>a.formatter.formatChanged("lineheight",m,!1,{value:l}).unbind,getCurrent:a=>D.from(a.queryCommandValue("LineHeight")),setCurrent:(a,l)=>a.execCommand("LineHeight",!1,l),onToolbarSetup:Pl(r=e),onMenuSetup:Pl(r)}),(r=>D.from(wb(r)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ne(a),hash:l=>_n(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,m,h)=>{var b;return l.formatter.formatChanged("lang",h,!1,{value:m.code,customValue:null!==(b=m.customCode)&&void 0!==b?b:null}).unbind},getCurrent:l=>{const m=pe(l.selection.getNode());return Da(m,h=>D.some(h).filter(ho).bind(b=>vs(b,"lang").map(y=>({code:y,customCode:vs(b,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(l,m)=>l.execCommand("Lang",!1,m),onToolbarSetup:l=>{const m=sg();return l.setActive(r.formatter.match("lang",{},void 0,!0)),m.set(r.formatter.formatChanged("lang",l.setActive,!0)),k2(m.clear,Pl(r)(l))},onMenuSetup:Pl(r)})))(e).each(r=>o(e,r))})(e),(a=>{const l=Io(t3(a)),m=()=>a.execCommand("mceTogglePlainTextPaste");a.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:m,onSetup:i(a,l)}),a.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:m,onSetup:i(a,l)})})(e)})(e,re.popup),qe(e,re.popup.shared.getSink,re.popup),(Cn=>{const{sidebars:hr}=Cn.ui.registry.getAll();Tt(_r(hr),Cs=>{const _s=hr[Cs],Tr=()=>cs(D.from(Cn.queryCommandValue("ToggleSidebar")),Cs);Cn.ui.registry.addToggleButton(Cs,{icon:_s.icon,tooltip:_s.tooltip,onAction:hc=>{Cn.execCommand("ToggleSidebar",!1,Cs),hc.setActive(Tr())},onSetup:hc=>{hc.setActive(Tr());const Xa=()=>hc.setActive(Tr());return Cn.on("ToggleSidebar",Xa),()=>{Cn.off("ToggleSidebar",Xa)}}})})})(e),((e,r,a)=>{const l=Io(!1),m=Ds(),h=y=>{var x;l.get()&&("focusin"!==(x=y).type||!(x.composed?qr(x.composedPath()):D.from(x.target)).map(pe).filter(ho).exists(k=>Gi(k,"mce-pastebin")))&&(y.preventDefault(),bk(r()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",h),e.on("BeforeExecCommand",y=>{"mcefocus"===y.command.toLowerCase()&&!0!==y.value&&h(y)})});const b=y=>{y!==l.get()&&(l.set(y),((x,k,T,N)=>{const L=k.element;if(((z,U)=>{const J="tabindex",Q=`data-mce-${J}`;D.from(z.iframeElement).map(pe).each(re=>{U?(vs(re,J).each(ce=>Bo(re,Q,ce)),Bo(re,J,-1)):(jr(re,J),vs(re,Q).each(ce=>{Bo(re,J,ce),jr(re,Q)}))})})(x,T),T)nm.block(k,(z=N,(U,J)=>({dom:{tag:"div",attributes:{"aria-label":z.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Dg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))),Lr(L,"display"),jr(L,"aria-hidden"),x.hasFocus()&&bk(k);else{const z=dr.getCurrent(k).exists(U=>th(U.element));nm.unblock(k),qo(L,"display","none"),Bo(L,"aria-hidden","true"),z&&x.focus()}var z})(e,r(),y,a.providers),e.dispatch("AfterProgressState",{state:y}))};e.on("ProgressState",y=>{if(m.on(clearTimeout),lo(y.time)){const x=fb.setEditorTimeout(e,()=>b(y.state),y.time);m.set(x)}else b(y.state),m.clear()})})(e,Q,re.popup.shared),((e,r,a,l)=>{const m=l.backstage,h=m.shared,b=Ci().deviceType.isTouch,y=Ds(),x=Ds(),k=Ds(),T=ja((xe=>{const Ne=Io([]);return Na.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:Ge=>{Ne.set([]),Na.getContent(Ge).each(Et=>{Lr(Et.element,"visibility")}),Ws(Ge.element,Jk),Lr(Ge.element,"width")},inlineBehaviours:Vt([On("context-toolbar-events",[dm(im(),(Ge,Et)=>{"width"===Et.event.raw.propertyName&&(Ws(Ge.element,Jk),Lr(Ge.element,"width"))}),Ct(mf,(Ge,Et)=>{const _t=Ge.element;Lr(_t,"width");const Ot=vr(_t);Na.setContent(Ge,Et.event.contents),Us(_t,Jk);const so=vr(_t);qo(_t,"width",Ot+"px"),Na.getContent(Ge).each(_o=>{Et.event.focus.bind(go=>(Ll(go),Rc(_t))).orThunk(()=>(Ho.focusIn(_o),Ud(Gr(_t))))}),setTimeout(()=>{qo(Ge.element,"width",so+"px")},0)}),Ct(_T,(Ge,Et)=>{Na.getContent(Ge).each(_t=>{Ne.set(Ne.get().concat([{bar:_t,focus:Ud(Gr(Ge.element))}]))}),Co(Ge,mf,{contents:Et.event.forwardContents,focus:D.none()})}),Ct(ST,(Ge,Et)=>{Cr(Ne.get()).each(_t=>{Ne.set(Ne.get().slice(0,Ne.get().length-1)),Co(Ge,mf,{contents:sc(_t.bar),focus:_t.focus})})})]),Ho.config({mode:"special",onEscape:Ge=>Cr(Ne.get()).fold(()=>xe.onEscape(),Et=>(Fr(Ge,ST),D.some(!0)))})]),lazySink:()=>Mn.value(xe.sink)})})({sink:a,onEscape:()=>(e.focus(),D.some(!0))})),N=()=>{const xe=k.get().getOr("node"),Ne=Yk(xe)?1:0;return xT(e,h,xe,Ne)},L=()=>!(e.removed||b()&&m.isContextMenuOpen()),z=()=>{if(L()){const xe=N(),Ne=cs(k.get(),"node")?(Ge=e,y.get().filter(_t=>na(_t)&&Eo(_t)).map(Al).getOrThunk(()=>gx(Ge))):gx(e);return xe.height<=0||!Xk(Ne,xe,.01)}var Ge;return!0},U=()=>{y.clear(),x.clear(),k.clear(),Na.hide(T)},J=()=>{if(Na.isOpen(T)){const xe=T.element;Lr(xe,"display"),z()?qo(xe,"display","none"):(x.set(0),Na.reposition(T))}},Q=xe=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[xe],behaviours:Vt([Ho.config({mode:"acyclic"}),On("pop-dialog-wrap-events",[ys(Ne=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>Ho.focusIn(Ne))}),Hi(Ne=>{e.shortcuts.remove("ctrl+F9")})])])}),re=Y(()=>((e,r)=>{const a={},l=[],m=[],h={},b={},y=_r(e);return Tt(y,x=>{const k=e[x];var T,N,L;"contextform"===k.type?((T,N)=>{const L=tr(oo("ContextForm",$u,N));a[T]=L,L.launch.map(z=>{h["form:"+T]={...N.launch,type:"contextformtogglebutton"===z.type?"togglebutton":"button",onAction:()=>{r(L)}}}),"editor"===L.scope?m.push(L):l.push(L),b[T]=L})(x,k):"contexttoolbar"===k.type&&(T=x,(L=N=k,oo("ContextToolbar",f_,L)).each(z=>{"editor"===N.scope?m.push(z):l.push(z),b[T]=z}))}),{forms:a,inNodeScope:l,inEditorScope:m,lookupTable:b,formNavigators:h}})(r,xe=>{const Ne=ce([xe]);Co(T,_T,{forwardContents:Q(Ne)})})),ce=xe=>{const{buttons:Ne}=e.ui.registry.getAll(),Ge={...Ne,...re().formNavigators},Et=Lp(e)===Cd.scrolling?Cd.scrolling:Cd.default,_t=en(Xe(xe,Ot=>"contexttoolbar"===Ot.type?d0(e,{buttons:Ge,toolbar:Ot.items,allowToolbarGroups:!1},l.backstage,D.some(["form:"])):((e,r)=>{const a=e.label.fold(()=>({}),h=>({"aria-label":h})),l=es(Sh.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Vt([Ho.config({mode:"special",onEnter:h=>m.findPrimary(h).map(b=>(pd(b),!0)),onLeft:(h,b)=>(b.cut(),D.none()),onRight:(h,b)=>(b.cut(),D.none())})])})),m=((h,b,y)=>{const x=Xe(b,k=>{return es((T=h,L=y,"contextformtogglebutton"===(N=k).type?((z,U,J)=>{const{primary:Q,...re}=U.original,ce=tr(m_({...re,type:"togglebutton",onAction:At}));return fT(ce,J,[Gl(z,U)])})(T,N,L):((z,U,J)=>{const{primary:Q,...re}=U.original,ce=tr(u_({...re,type:"button",onAction:At}));return Uk(ce,J,[Gl(z,U)])})(T,N,L)));var T,N,L});return{asSpecs:()=>Xe(x,k=>k.asSpec()),findPrimary:k=>is(b,(T,N)=>T.primary?D.from(x[N]).bind(L=>L.getOpt(k)).filter(yo(Ko.isDisabled)):D.none())}})(l,e.commands,r);return[{title:D.none(),items:[l.asSpec()]},{title:D.none(),items:m.asSpecs()}]})(Ot,h.providers)));return Iv({type:Et,uid:bo("context-toolbar"),initGroups:_t,onEscape:D.none,cyclicKeying:!0,providers:h.providers})},ee=(xe,Ne)=>{if(me.cancel(),!L())return;const Ge=ce(xe),Et=xe[0].position,_t=((so,_o)=>{const go="node"===so?h.anchors.node(_o):h.anchors.cursor(),Uo=(Xo=e,Yo=so,zr=b(),hs={lastElement:y.get,isReposition:()=>cs(x.get(),0),getMode:()=>Yi.getMode(a)},"line"===Yo?{bubble:lg(12,0,Lg),layouts:{onLtr:()=>[eh],onRtl:()=>[Ua]},overrides:CT}:{bubble:lg(0,12,Lg,1/12),layouts:hx(Xo,zr,hs,Yo),overrides:CT});var Xo,Yo,zr,hs;return Un(go,Uo)})(Et,Ne);k.set(Et),x.set(1);const Ot=T.element;Lr(Ot,"display"),cs(Nn(Ne,y.get(),Zo),!0)||(Ws(Ot,fx),Yi.reset(a,T)),Na.showWithinBounds(T,Q(Ge),{anchor:_t,transition:{classes:[fx],mode:"placement"}},()=>D.some(N())),Ne.fold(y.clear,y.set),z()&&qo(Ot,"display","none")};let de=!1;const me=bv(()=>{!e.hasFocus()||e.removed||de||(Gi(T.element,fx)?me.throttle():((xe,Ne)=>{const Ge=pe(Ne.getBody()),Et=Ot=>Zo(Ot,Ge),_t=pe(Ne.selection.getNode());return Et(Ot=_t)||ue(Ge,Ot)?((Ot,so,_o)=>{const go=px(Ot,so);if(go.contextForms.length>0)return D.some({elem:Ot,toolbars:[go.contextForms[0]]});{const Uo=px(Ot,_o);if(Uo.contextForms.length>0)return D.some({elem:Ot,toolbars:[Uo.contextForms[0]]});if(go.contextToolbars.length>0||Uo.contextToolbars.length>0){const Xo=(Yo=>{if(Yo.length<=1)return Yo;{const zr=Cs=>Jo(Yo,_s=>_s.position===Cs),hs=Cs=>Ie(Yo,_s=>_s.position===Cs),Cn=zr("selection"),hr=zr("node");if(Cn||hr){if(hr&&Cn){const Cs=hs("node"),_s=Xe(hs("selection"),Tr=>({...Tr,position:"node"}));return Cs.concat(_s)}return hs(Cn?"selection":"node")}return hs("line")}})(go.contextToolbars.concat(Uo.contextToolbars));return D.some({elem:Ot,toolbars:Xo})}return D.none()}})(_t,xe.inNodeScope,xe.inEditorScope).orThunk(()=>((Ot,so,_o)=>Ot(so)?D.none():hd(so,go=>{if(ho(go)){const{contextToolbars:Uo,contextForms:Xo}=px(go,_o.inNodeScope),Yo=Xo.length>0?Xo:(zr=>{if(zr.length<=1)return zr;{const hs=Cn=>Ue(zr,hr=>hr.position===Cn);return hs("selection").orThunk(()=>hs("node")).orThunk(()=>hs("line")).map(Cn=>Cn.position).fold(()=>[],Cn=>Ie(zr,hr=>hr.position===Cn))}})(Uo);return Yo.length>0?D.some({elem:go,toolbars:Yo}):D.none()}return D.none()},Ot))(Et,_t,xe)):D.none();var Ot})(re(),e).fold(U,xe=>{ee(xe.toolbars,D.some(xe.elem))}))},17);e.on("init",()=>{e.on("remove",U),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",J),e.on("click keyup focus SetContent",me.throttle),e.on(Kk,U),e.on("contexttoolbar-show",xe=>{const Ne=re();Kt(Ne.lookupTable,xe.toolbarKey).each(Ge=>{ee([Ge],Vs(xe.target!==e,xe.target)),Na.getContent(T).each(Ho.focusIn)})}),e.on("focusout",xe=>{fb.setEditorTimeout(e,()=>{Rc(a.element).isNone()&&Rc(T.element).isNone()&&U()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&U()}),e.on("AfterProgressState",xe=>{xe.state?U():e.hasFocus()&&me.throttle()}),e.on("dragstart",()=>{de=!0}),e.on("dragend drop",()=>{de=!1}),e.on("NodeChange",xe=>{Rc(T.element).fold(me.throttle,At)})})})(e,_o,Et.sink,{backstage:re.popup}),((e,r)=>{const a=Io([]),l=Io([]),m=Io(!1),h=Ds(),b=Ds(),y=ce=>{const ee=Al(ce);return Qk(N.getOpt(r),ce,ee.x,ee.y,ee.width,ee.height)},x=ce=>{const ee=Al(ce);return Qk(L.getOpt(r),ce,ee.right,ee.bottom,ee.width,ee.height)},k=kT(()=>Xe(a.get(),ce=>y(ce)),h,ce=>{b.get().each(ee=>{e.dispatch("TableSelectorChange",{start:ce,finish:ee})})}),T=kT(()=>Xe(l.get(),ce=>x(ce)),b,ce=>{h.get().each(ee=>{e.dispatch("TableSelectorChange",{start:ee,finish:ce})})}),N=gf(k),L=gf(T),z=ja(N.asSpec()),U=ja(L.asSpec()),J=(ce,ee,de,me)=>{const xe=de(ee);Md.snapTo(ce,xe),((Ne,Ge,Et,_t)=>{const Ot=Ge.dom.getBoundingClientRect();Lr(Ne.element,"display");const so=ft(pe(e.getBody())).dom.innerHeight;(Ot[me]<0||Ot[me]>so)&&qo(Ne.element,"display","none")})(ce,ee)},Q=ce=>J(z,ce,y,"top"),re=ce=>J(U,ce,x,"bottom");Ci().deviceType.isTouch()&&(e.on("TableSelectionChange",ce=>{m.get()||(Lu(r,z),Lu(r,U),m.set(!0)),h.set(ce.start),b.set(ce.finish),ce.otherCells.each(ee=>{a.set(ee.upOrLeftCells),l.set(ee.downOrRightCells),Q(ce.start),re(ce.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{h.get().each(Q),b.get().each(re)}),e.on("TableSelectionClear",()=>{m.get()&&(ic(z),ic(U),m.set(!1)),h.clear(),b.clear()}))})(e,Et.sink);const hs={targetNode:e.getElement(),height:ee(Ge.outerContainer)};return l.render(e,Ne,Yo,re.popup,hs)})({popupUi:xe,dialogUi:me,mainUi:de,uiMotherships:h.getUiMotherships()})}}},Hg=ne([je("lazySink"),Zn("dragBlockClass"),Gs("getBounds",$s),De("useTabstopAt",mn),De("firstTabstop",0),De("eventOrder",{}),xa("modalBehaviours",[Ho]),il("onExecute"),vd("onEscape")]),h0={sketch:it},OT=ne([St({name:"draghandle",overrides:(e,r)=>({behaviours:Vt([Md.config({mode:"mouse",getTarget:a=>Mc(a,'[role="dialog"]').getOr(a),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(r,null,2)).message),getBounds:e.getDragBounds})])})}),et({schema:[je("dom")],name:"title"}),et({factory:h0,schema:[je("dom")],name:"close"}),et({factory:h0,schema:[je("dom")],name:"body"}),St({factory:h0,schema:[je("dom")],name:"footer"}),dt({factory:{sketch:(e,r)=>({...e,dom:r.dom,components:r.components})},schema:[De("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),De("components",[])],name:"blocker"})]),ri=ul({name:"ModalDialog",configFields:Hg(),partFields:OT(),factory:(e,r,a,l)=>{const m=Ds(),h=bo("modal-events"),b={...e.eventOrder,[nc()]:[h].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:r,apis:{show:y=>{m.set(y);const x=e.lazySink(y).getOrDie(),k=l.blocker(),T=x.getSystem().build({...k,components:k.components.concat([sc(y)]),behaviours:Vt([nn.config({}),On("dialog-blocker-events",[dm(_c(),()=>{Ho.focusIn(y)})])])});Lu(x,T),Ho.focusIn(y)},hide:y=>{m.clear(),Lt(y.element).each(x=>{y.getSystem().getByDom(x).each(k=>{ic(k)})})},getBody:y=>aa(y,e,"body"),getFooter:y=>aa(y,e,"footer"),setIdle:y=>{nm.unblock(y)},setBusy:(y,x)=>{nm.block(y,x)}},eventOrder:b,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Aa(e.modalBehaviours,[pn.config({}),Ho.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),nm.config({getRoot:m.get}),On(h,[ys(y=>{((x,k)=>{const T=vs(x,"id").fold(()=>{const N=bo("dialog-label");return Bo(k,"id",N),N},it);Bo(x,"aria-labelledby",T)})(y.element,aa(y,e,"title").element)})])])}},apis:{show:(e,r)=>{e.show(r)},hide:(e,r)=>{e.hide(r)},getBody:(e,r)=>e.getBody(r),getFooter:(e,r)=>e.getFooter(r),setBusy:(e,r,a)=>{e.setBusy(r,a)},setIdle:(e,r)=>{e.setIdle(r)}}}),qv=xt([Ys,r_].concat(Lc)),Pg=Ve,bx=[m2("button"),_d,zl("align","end",["start","end"]),Fb,Sd,fl("buttonType",["primary","secondary"])],o4=[...bx,ou],vx=[Ur("type",["submit","cancel","custom"]),...o4],TT=[Ur("type",["menu"]),Cg,Hb,_d,qs("items",qv),...bx],D5=[...bx,Ur("type",["togglebutton"]),Oo("tooltip"),_d,Cg,mi("active",!1)],Ke=kn("type",{submit:vx,cancel:vx,custom:vx,menu:TT,togglebutton:D5}),An=[Ys,ou,Ur("level",["info","warn","error","success"]),a_,De("url","")],Qo=xt(An),Js=[Ys,ou,Sd,m2("button"),_d,iA,fl("buttonType",["primary","secondary","toolbar"]),Fb],Mi=xt(Js),Ri=[Ys,r_],ia=Ri.concat([zp]),rm=Ri.concat([Ib,Sd]),el=xt(rm),tl=Ve,hf=ia.concat([l_("auto")]),B5=xt(hf),nN=gn([B1,ou,a_]),c6=ia.concat([Ra("storageKey","default")]),d6=xt(c6),u6=ae,m6=xt(ia),g6=ae,h6=Ri.concat([Ra("tag","textarea"),Oo("scriptId"),Oo("scriptUrl"),Wr("settings",void 0,Mt)]),p6=Ri.concat([Ra("tag","textarea"),Ir("init")]),f6=Go(e=>oo("customeditor.old",Wn(p6),e).orThunk(()=>oo("customeditor.new",Wn(h6),e))),b6=ae,v6=xt(ia),y6=on(Zt),w6=e=>[Ys,xr("columns"),e],x6=[Ys,Oo("html"),zl("presets","presentation",["presentation","document"])],C6=xt(x6),_6=ia.concat([mi("sandboxed",!0),mi("transparent",!0)]),S6=xt(_6),k6=ae,E6=xt(Ri.concat([Pr("height")])),O6=xt([Oo("url"),os("zoom"),os("cachedWidth"),os("cachedHeight")]),T6=ia.concat([Pr("inputMode"),Pr("placeholder"),mi("maximized",!1),Sd]),A6=xt(T6),N6=ae,M6=e=>[Ys,Ib,e],R6=[ou,B1],D6=[ou,qs("items",Or(0,()=>rN))],rN=ur([xt(R6),xt(D6)]),B6=ia.concat([qs("items",rN),Sd]),L6=xt(B6),I6=ae,H6=ia.concat([pl("items",[ou,B1]),Ii("size",1),Sd]),P6=xt(H6),F6=ae,z6=ia.concat([mi("constrain",!0),Sd]),V6=xt(z6),sN=xt([Oo("width"),Oo("height")]),Z6=Ri.concat([Ib,Ii("min",0),Ii("max",0)]),j6=xt(Z6),U6=F,W6=[Ys,qs("header",ae),qs("cells",on(ae))],$6=xt(W6),q6=ia.concat([Pr("placeholder"),mi("maximized",!1),Sd]),G6=xt(q6),K6=ae,aN=[Ur("type",["directory","leaf"]),s_,Oo("id"),ga("menu",PO)],iN=xt(aN),X6=aN.concat([qs("children",Or(0,()=>mo("type",{directory:lN,leaf:iN})))]),lN=xt(X6),Y6=mo("type",{directory:lN,leaf:iN}),J6=[Ys,qs("items",Y6),ui("onLeafAction"),ui("onToggleExpand"),wc("defaultExpandedIds",[],ae),Pr("defaultSelectedId")],Q6=xt(J6),eM=ia.concat([zl("filetype","file",["image","media","file"]),Sd]),tM=xt(eM),oM=xt([B1,d2]),L5=e=>Yn("items","items",{tag:"required",process:{}},on(Go(r=>oo(`Checking item of ${e}`,I5,r).fold(a=>Mn.error(tt(a)),a=>Mn.value(a))))),I5=ro(()=>{return mo("type",{alertbanner:Qo,bar:xt((e=L5("bar"),[Ys,e])),button:Mi,checkbox:el,colorinput:d6,colorpicker:m6,dropzone:v6,grid:xt(w6(L5("grid"))),iframe:S6,input:A6,listbox:L6,selectbox:P6,sizeinput:V6,slider:j6,textarea:G6,urlinput:tM,customeditor:f6,htmlpanel:C6,imagepreview:E6,collection:B5,label:xt(M6(L5("label"))),table:$6,tree:Q6,panel:cN});var e}),nM=[Ys,De("classes",[]),qs("items",I5)],cN=xt(nM),rM=[m2("tab"),s_,qs("items",I5)],sM=[Ys,pl("tabs",rM)],aM=xt(sM),iM=o4,lM=Ke,cM=xt([Oo("title"),Vn("body",mo("type",{panel:cN,tabpanel:aM})),Ra("size","normal"),qs("buttons",lM),De("initialData",{}),Gs("onAction",At),Gs("onChange",At),Gs("onSubmit",At),Gs("onClose",At),Gs("onCancel",At),Gs("onTabChange",At)]),dM=xt([Ur("type",["cancel","custom"]),...iM]),uM=xt([Oo("title"),Oo("url"),os("height"),os("width"),Pd("buttons",dM),Gs("onAction",At),Gs("onCancel",At),Gs("onClose",At),Gs("onMessage",At)]),H5=e=>ps(e)?[e].concat(Yt(ls(e),H5)):Ar(e)?Yt(e,H5):[],mM=e=>No(e.type)&&No(e.name),gM={checkbox:tl,colorinput:u6,colorpicker:g6,dropzone:y6,input:N6,iframe:k6,imagepreview:O6,selectbox:F6,sizeinput:sN,slider:U6,listbox:I6,size:sN,textarea:K6,urlinput:oM,customeditor:b6,collection:nN,togglemenuitem:Pg},hM=e=>{const r=Ie(H5(e),mM),a=Yt(r,l=>{return(m=l,D.from(gM[m.type])).fold(()=>[],m=>[Vn(l.name,m)]);var m});return xt(a)},dN=e=>{var r;return{internalDialog:tr(oo("dialog",cM,e)),dataValidator:hM(e),initialData:null!==(r=e.initialData)&&void 0!==r?r:{}}},n4={open:(e,r)=>{const a=dN(r);return e(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(e,r)=>e(tr(oo("dialog",uM,r))),redial:e=>dN(e)};var pM=Object.freeze({__proto__:null,events:(e,r)=>{const a=(l,m)=>{e.updateState.each(h=>{const b=h(l,m);r.set(b)}),e.renderComponents.each(h=>{const b=h(m,r.get());(e.reuseDom?aC:V4)(l,b)})};return Mr([Ct(_u(),(l,m)=>{const h=m;h.universal||Do(h.channels,e.channel)&&a(l,h.data)}),ys((l,m)=>{e.initialData.each(h=>{a(l,h)})})])}}),fM=Object.freeze({__proto__:null,getState:(e,r,a)=>a}),bM=[je("channel"),Zn("renderComponents"),Zn("updateState"),Zn("initialData"),mi("reuseDom",!0)];const gu=pi({fields:bM,name:"reflecting",active:pM,apis:fM,state:Object.freeze({__proto__:null,init:()=>{const e=Io(D.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(D.none())}}})}),uN=e=>{const r=[],a={};return Pn(e,(l,m)=>{l.fold(()=>{r.push(m)},h=>{a[m]=h})}),r.length>0?Mn.error(r):Mn.value(a)},vM=(e,r,a)=>{const l=es(Qp.sketch(h=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Xe(e.items,b=>nO(h,b,r,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:Vt([Ho.config({mode:"acyclic",useTabstopAt:yo(tf)}),(m=l,dr.config({find:m.getOpt})),DE(l,{postprocess:h=>uN(h).fold(b=>(console.error(b),{}),it)})])};var m},yM=lc({name:"TabButton",configFields:[De("uid",void 0),je("value"),Yn("dom","dom",G(()=>({attributes:{role:"tab",id:bo("aria"),"aria-selected":"false"}})),W()),Zn("action"),De("domModification",{}),xa("tabButtonBehaviours",[nn,Ho,Ut]),je("view")],factory:(e,r)=>({uid:e.uid,dom:e.dom,components:e.components,events:Zu(e.action),behaviours:Aa(e.tabButtonBehaviours,[nn.config({}),Ho.config({mode:"execution",useSpace:!0,useEnter:!0}),Ut.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),wM=ne([je("tabs"),je("dom"),De("clickToDismiss",!1),xa("tabbarBehaviours",[Zr,Ho]),bd(["tabClass","selectedClass"])]),xM=wt({factory:yM,name:"tabs",unit:"tab",overrides:e=>{const r=(l,m)=>{Zr.dehighlight(l,m),Co(l,qh(),{tabbar:l,button:m})},a=(l,m)=>{Zr.highlight(l,m),Co(l,w0(),{tabbar:l,button:m})};return{action:l=>{const m=l.getSystem().getByUid(e.uid).getOrDie(),h=Zr.isHighlighted(m,l);(h&&e.clickToDismiss?r:h?At:a)(m,l)},domModification:{classes:[e.markers.tabClass]}}}}),CM=ne([xM]),mN=ul({name:"Tabbar",configFields:wM(),partFields:CM(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Aa(e.tabbarBehaviours,[Zr.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(m,h)=>{Bo(h.element,"aria-selected","true")},onDehighlight:(m,h)=>{Bo(h.element,"aria-selected","false")}}),Ho.config({mode:"flow",getInitial:m=>Zr.getHighlighted(m).map(h=>h.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),_M=lc({name:"Tabview",configFields:[xa("tabviewBehaviours",[pn])],factory:(e,r)=>({uid:e.uid,dom:e.dom,behaviours:Aa(e.tabviewBehaviours,[pn.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),SM=ne([De("selectFirst",!0),cr("onChangeTab"),cr("onDismissTab"),De("tabs",[]),xa("tabSectionBehaviours",[])]),kM=et({factory:mN,schema:[je("dom"),Yr("markers",[je("tabClass"),je("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),EM=et({factory:_M,name:"tabview"}),OM=ne([kM,EM]),yx=ul({name:"TabSection",configFields:SM(),partFields:OM(),factory:(e,r,a,l)=>{const m=(h,b)=>{En(h,e,"tabbar").each(y=>{b(y).each(pd)})};return{uid:e.uid,dom:e.dom,components:r,behaviours:p1(e.tabSectionBehaviours),events:Mr(en([e.selectFirst?[ys((h,b)=>{m(h,Zr.getFirst)})]:[],[Ct(w0(),(h,b)=>{(y=>{const x=Ut.getValue(y);En(y,e,"tabview").each(k=>{Ue(e.tabs,T=>T.value===x).each(T=>{const N=T.view();vs(y.element,"id").each(L=>{Bo(k.element,"aria-labelledby",L)}),pn.set(k,N),e.onChangeTab(k,y,N)})})})(b.event.button)}),Ct(qh(),(h,b)=>{e.onDismissTab(h,b.event.button)})]])),apis:{getViewItems:h=>En(h,e,"tabview").map(b=>pn.contents(b)).getOr([]),showTab:(h,b)=>{m(h,y=>{const x=Zr.getCandidates(y);return Ue(x,k=>Ut.getValue(k)===b).filter(k=>!Zr.isHighlighted(y,k))})}}}},apis:{getViewItems:(e,r)=>e.getViewItems(r),showTab:(e,r,a)=>{e.showTab(r,a)}}}),gN=(e,r)=>{qo(e,"height",r+"px"),qo(e,"flex-basis",r+"px")},AT=(e,r,a)=>{Mc(e,'[role="dialog"]').each(l=>{Oa(l,'[role="tablist"]').each(m=>{a.get().map(h=>(qo(r,"height","0"),qo(r,"flex-basis","0"),Math.min(h,((b,y,x)=>{const k=yt(b).dom,T=Mc(b,".tox-dialog-wrap").getOr(b);let N;N="fixed"===Ts(T,"position")?Math.max(k.clientHeight,window.innerHeight):Math.max(k.offsetHeight,k.scrollHeight);const L=Ns(y),z=y.dom.offsetLeft>=x.dom.offsetLeft+vr(x)?Math.max(Ns(x),L):L,U=parseInt(Ts(b,"margin-top"),10)||0,J=parseInt(Ts(b,"margin-bottom"),10)||0;return N-(Ns(b)+U+J-z)})(l,r,m)))).each(h=>{gN(r,h)})})})},P5=e=>Oa(e,'[role="tabpanel"]'),hN="send-data-to-section",pN="send-data-to-view",TM=(e,r,a)=>{const l=Io({}),m=k=>{const T=Ut.getValue(k),N=uN(T).getOr({}),L=l.get(),z=Un(L,N);l.set(z)},h=k=>{const T=l.get();Ut.setValue(k,T)},b=Io(null),y=Xe(e.tabs,k=>({value:k.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ks(a.shared.providers.translate(k.title))],view:()=>[Qp.sketch(T=>({dom:{tag:"div",classes:["tox-form"]},components:Xe(k.items,N=>nO(T,N,r,a)),formBehaviours:Vt([Ho.config({mode:"acyclic",useTabstopAt:yo(tf)}),On("TabView.form.events",[ys(h),Hi(m)]),Ki.config({channels:tc([{key:hN,value:{onReceive:m}},{key:pN,value:{onReceive:h}}])})])}))]})),x=(k=>{const T=Ds();return{extraEvents:[ys(L=>{const z=L.element;P5(z).each(U=>{var Q;qo(U,"visibility","hidden"),L.getSystem().getByDom(U).toOptional().each(J=>{var ce,ee,de;(ce=>qr(Ha(ce,(ee,de)=>ee>de?-1:ee<de?1:0)))((ee=U,de=J,Xe(ce=k,(me,xe)=>{pn.set(de,ce[xe].view());const Ne=ee.dom.getBoundingClientRect();return pn.set(de,[]),Ne.height}))).fold(T.clear,T.set)}),AT(z,U,T),Lr(U,"visibility"),Q=L,qr(k).each(re=>yx.showTab(Q,re.value)),requestAnimationFrame(()=>{AT(z,U,T)})})}),Ct(Jm(),L=>{const z=L.element;P5(z).each(U=>{AT(z,U,T)})}),Ct(Q3,(L,z)=>{const U=L.element;P5(U).each(J=>{const Q=Ud(Gr(J));qo(J,"visibility","hidden");const re=Br(J,"height").map(ee=>parseInt(ee,10));Lr(J,"height"),Lr(J,"flex-basis");const ce=J.dom.getBoundingClientRect().height;re.forall(ee=>ce>ee)?(T.set(ce),AT(U,J,T)):re.each(ee=>{gN(J,ee)}),Lr(J,"visibility"),Q.each(Ll)})})],selectFirst:!1}})(y);return yx.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(k,T,N)=>{const L=Ut.getValue(T);Co(k,tS,{name:L,oldName:b.get()}),b.set(L)},tabs:y,components:[yx.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[mN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Vt([fa.config({})])}),yx.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Vt([On("tabpanel",x.extraEvents),Ho.config({mode:"acyclic"}),dr.config({find:k=>qr(yx.getViewItems(k))}),ef(D.none(),k=>(k.getSystem().broadcastOn([hN],{}),l.get()),(k,T)=>{l.set(T),k.getSystem().broadcastOn([pN],{})})])})},F5=bo("update-dialog"),fN=bo("update-title"),bN=bo("update-body"),vN=bo("update-footer"),yN=bo("body-send-message"),wN=(e,r,a,l,m)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(h=>({id:h})).getOr({}),...m?{"aria-live":"polite"}:{}}},components:[],behaviours:Vt([lw(0),gu.config({channel:`${bN}-${r}`,updateState:(h,b)=>D.some({isTabPanel:()=>"tabpanel"===b.body.type}),renderComponents:h=>{const b=h.body;return"tabpanel"===b.type?[TM(b,h.initialData,l)]:[vM(b,h.initialData,l)]},initialData:e})])});function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function z5(e,r){return(z5=Object.setPrototypeOf||function(a,l){return a.__proto__=l,a})(e,r)}function V5(e,r,a){return(V5=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(l,m,h){var b=[null];b.push.apply(b,m);var y=new(Function.bind.apply(l,b));return h&&z5(y,h.prototype),y}).apply(null,arguments)}function Fg(e){return function(r){if(Array.isArray(r))return Z5(r)}(e)||function(r){if(typeof Symbol<"u"&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(r,a){if(r){if("string"==typeof r)return Z5(r,a);var l=Object.prototype.toString.call(r).slice(8,-1);return"Object"===l&&r.constructor&&(l=r.constructor.name),"Map"===l||"Set"===l?Array.from(r):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Z5(r,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z5(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=e[a];return l}var AM=Object.hasOwnProperty,xN=Object.setPrototypeOf,NM=Object.isFrozen,MM=Object.getPrototypeOf,RM=Object.getOwnPropertyDescriptor,Rd=Object.freeze,jh=Object.seal,DM=Object.create,CN=typeof Reflect<"u"&&Reflect,NT=CN.apply,j5=CN.construct;NT||(NT=function(e,r,a){return e.apply(r,a)}),Rd||(Rd=function(e){return e}),jh||(jh=function(e){return e}),j5||(j5=function(e,r){return V5(e,Fg(r))});var _N,BM=zg(Array.prototype.forEach),LM=zg(Array.prototype.pop),r4=zg(Array.prototype.push),MT=zg(String.prototype.toLowerCase),IM=zg(String.prototype.match),p0=zg(String.prototype.replace),HM=zg(String.prototype.indexOf),PM=zg(String.prototype.trim),Dd=zg(RegExp.prototype.test),U5=(_N=TypeError,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return j5(_N,r)});function zg(e){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),m=1;m<a;m++)l[m-1]=arguments[m];return NT(e,r,l)}}function Bs(e,r){xN&&xN(e,null);for(var a=r.length;a--;){var l=r[a];if("string"==typeof l){var m=MT(l);m!==l&&(NM(r)||(r[a]=m),l=m)}e[l]=!0}return e}function Kv(e){var r,a=DM(null);for(r in e)NT(AM,e,[r])&&(a[r]=e[r]);return a}function RT(e,r){for(;null!==e;){var a=RM(e,r);if(a){if(a.get)return zg(a.get);if("function"==typeof a.value)return zg(a.value)}e=MM(e)}return function(l){return console.warn("fallback value for",l),null}}var SN=Rd(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),W5=Rd(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$5=Rd(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),FM=Rd(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),q5=Rd(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),zM=Rd(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kN=Rd(["#text"]),EN=Rd(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G5=Rd(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ON=Rd(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),DT=Rd(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VM=jh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ZM=jh(/<%[\w\W]*|[\w\W]*%>/gm),jM=jh(/^data-[\-\w.\u00B7-\uFFFF]/),UM=jh(/^aria-[\-\w]+$/),WM=jh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$M=jh(/^(?:\w+script|data):/i),qM=jh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),GM=jh(/^html$/i),KM=function(){return typeof window>"u"?null:window},XM=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KM(),a=function(Ye){return e(Ye)};if(a.version="2.3.8",a.removed=[],!r||!r.document||9!==r.document.nodeType)return a.isSupported=!1,a;var l=r.document,m=r.document,h=r.DocumentFragment,b=r.HTMLTemplateElement,y=r.Node,x=r.Element,k=r.NodeFilter,T=r.NamedNodeMap,N=void 0===T?r.NamedNodeMap||r.MozNamedAttrMap:T,L=r.HTMLFormElement,z=r.DOMParser,U=r.trustedTypes,J=x.prototype,Q=RT(J,"cloneNode"),re=RT(J,"nextSibling"),ce=RT(J,"childNodes"),ee=RT(J,"parentNode");if("function"==typeof b){var de=m.createElement("template");de.content&&de.content.ownerDocument&&(m=de.content.ownerDocument)}var me=function(Ye,Hn){if("object"!==Gv(Ye)||"function"!=typeof Ye.createPolicy)return null;var an=null,la="data-tt-policy-suffix";Hn.currentScript&&Hn.currentScript.hasAttribute(la)&&(an=Hn.currentScript.getAttribute(la));var ol="dompurify"+(an?"#"+an:"");try{return Ye.createPolicy(ol,{createHTML:function(pc){return pc}})}catch{return console.warn("TrustedTypes policy "+ol+" could not be created."),null}}(U,l),xe=me?me.createHTML(""):"",Ne=m,Ge=Ne.implementation,Et=Ne.createNodeIterator,_t=Ne.createDocumentFragment,Ot=Ne.getElementsByTagName,so=l.importNode,_o={};try{_o=Kv(m).documentMode?m.documentMode:{}}catch{}var go={};a.isSupported="function"==typeof ee&&Ge&&void 0!==Ge.createHTMLDocument&&9!==_o;var Uo,Xo,Yo=VM,zr=ZM,hs=jM,Cn=UM,hr=$M,Cs=qM,_s=WM,Tr=null,hc=Bs({},[].concat(Fg(SN),Fg(W5),Fg($5),Fg(q5),Fg(kN))),Xa=null,wx=Bs({},[].concat(Fg(EN),Fg(G5),Fg(ON),Fg(DT))),Vi=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xv=null,s4=null,BT=!0,f0=!0,a4=!1,pf=!1,Uh=!1,xx=!1,i4=!1,b0=!1,Yv=!1,Jv=!1,l4=!0,Ls=!0,Vg=!1,Bd={},Cx=null,KN=Bs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),XN=null,YN=Bs({},["audio","video","img","source","image","track"]),J5=null,JN=Bs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q5="http://www.w3.org/1998/Math/MathML",eN="http://www.w3.org/2000/svg",v0="http://www.w3.org/1999/xhtml",LT=v0,QN=!1,r8=["application/xhtml+xml","text/html"],_x=null,s8=m.createElement("form"),e6=function(Ye){return Ye instanceof RegExp||Ye instanceof Function},tN=function(Ye){_x&&_x===Ye||(Ye&&"object"===Gv(Ye)||(Ye={}),Ye=Kv(Ye),Tr="ALLOWED_TAGS"in Ye?Bs({},Ye.ALLOWED_TAGS):hc,Xa="ALLOWED_ATTR"in Ye?Bs({},Ye.ALLOWED_ATTR):wx,J5="ADD_URI_SAFE_ATTR"in Ye?Bs(Kv(JN),Ye.ADD_URI_SAFE_ATTR):JN,XN="ADD_DATA_URI_TAGS"in Ye?Bs(Kv(YN),Ye.ADD_DATA_URI_TAGS):YN,Cx="FORBID_CONTENTS"in Ye?Bs({},Ye.FORBID_CONTENTS):KN,Xv="FORBID_TAGS"in Ye?Bs({},Ye.FORBID_TAGS):{},s4="FORBID_ATTR"in Ye?Bs({},Ye.FORBID_ATTR):{},Bd="USE_PROFILES"in Ye&&Ye.USE_PROFILES,BT=!1!==Ye.ALLOW_ARIA_ATTR,f0=!1!==Ye.ALLOW_DATA_ATTR,a4=Ye.ALLOW_UNKNOWN_PROTOCOLS||!1,pf=Ye.SAFE_FOR_TEMPLATES||!1,Uh=Ye.WHOLE_DOCUMENT||!1,b0=Ye.RETURN_DOM||!1,Yv=Ye.RETURN_DOM_FRAGMENT||!1,Jv=Ye.RETURN_TRUSTED_TYPE||!1,i4=Ye.FORCE_BODY||!1,l4=!1!==Ye.SANITIZE_DOM,Ls=!1!==Ye.KEEP_CONTENT,Vg=Ye.IN_PLACE||!1,_s=Ye.ALLOWED_URI_REGEXP||_s,LT=Ye.NAMESPACE||v0,Ye.CUSTOM_ELEMENT_HANDLING&&e6(Ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Vi.tagNameCheck=Ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ye.CUSTOM_ELEMENT_HANDLING&&e6(Ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Vi.attributeNameCheck=Ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ye.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Vi.allowCustomizedBuiltInElements=Ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Uo=Uo=-1===r8.indexOf(Ye.PARSER_MEDIA_TYPE)?"text/html":Ye.PARSER_MEDIA_TYPE,Xo="application/xhtml+xml"===Uo?function(Hn){return Hn}:MT,pf&&(f0=!1),Yv&&(b0=!0),Bd&&(Tr=Bs({},Fg(kN)),Xa=[],!0===Bd.html&&(Bs(Tr,SN),Bs(Xa,EN)),!0===Bd.svg&&(Bs(Tr,W5),Bs(Xa,G5),Bs(Xa,DT)),!0===Bd.svgFilters&&(Bs(Tr,$5),Bs(Xa,G5),Bs(Xa,DT)),!0===Bd.mathMl&&(Bs(Tr,q5),Bs(Xa,ON),Bs(Xa,DT))),Ye.ADD_TAGS&&(Tr===hc&&(Tr=Kv(Tr)),Bs(Tr,Ye.ADD_TAGS)),Ye.ADD_ATTR&&(Xa===wx&&(Xa=Kv(Xa)),Bs(Xa,Ye.ADD_ATTR)),Ye.ADD_URI_SAFE_ATTR&&Bs(J5,Ye.ADD_URI_SAFE_ATTR),Ye.FORBID_CONTENTS&&(Cx===KN&&(Cx=Kv(Cx)),Bs(Cx,Ye.FORBID_CONTENTS)),Ls&&(Tr["#text"]=!0),Uh&&Bs(Tr,["html","head","body"]),Tr.table&&(Bs(Tr,["tbody"]),delete Xv.tbody),Rd&&Rd(Ye),_x=Ye)},t6=Bs({},["mi","mo","mn","ms","mtext"]),o6=Bs({},["foreignobject","desc","title","annotation-xml"]),a8=Bs({},["title","style","font","a","script"]),IT=Bs({},W5);Bs(IT,$5),Bs(IT,FM);var oN=Bs({},q5);Bs(oN,zM);var ff=function(Ye){r4(a.removed,{element:Ye});try{Ye.parentNode.removeChild(Ye)}catch{try{Ye.outerHTML=xe}catch{Ye.remove()}}},HT=function(Ye,Hn){try{r4(a.removed,{attribute:Hn.getAttributeNode(Ye),from:Hn})}catch{r4(a.removed,{attribute:null,from:Hn})}if(Hn.removeAttribute(Ye),"is"===Ye&&!Xa[Ye])if(b0||Yv)try{ff(Hn)}catch{}else try{Hn.setAttribute(Ye,"")}catch{}},n6=function(Ye){var Hn,an;if(i4)Ye="<remove></remove>"+Ye;else{var la=IM(Ye,/^[\r\n\t ]+/);an=la&&la[0]}"application/xhtml+xml"===Uo&&(Ye='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ye+"</body></html>");var ol=me?me.createHTML(Ye):Ye;if(LT===v0)try{Hn=(new z).parseFromString(ol,Uo)}catch{}if(!Hn||!Hn.documentElement){Hn=Ge.createDocument(LT,"template",null);try{Hn.documentElement.innerHTML=QN?"":ol}catch{}}var pc=Hn.body||Hn.documentElement;return Ye&&an&&pc.insertBefore(m.createTextNode(an),pc.childNodes[0]||null),LT===v0?Ot.call(Hn,Uh?"html":"body")[0]:Uh?Hn.documentElement:pc},r6=function(Ye){return Et.call(Ye.ownerDocument||Ye,Ye,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},c4=function(Ye){return"object"===Gv(y)?Ye instanceof y:Ye&&"object"===Gv(Ye)&&"number"==typeof Ye.nodeType&&"string"==typeof Ye.nodeName},bf=function(Ye,Hn,an){go[Ye]&&BM(go[Ye],function(la){la.call(a,Hn,an,_x)})},s6=function(Ye){var Hn,an;if(bf("beforeSanitizeElements",Ye,null),(an=Ye)instanceof L&&("string"!=typeof an.nodeName||"string"!=typeof an.textContent||"function"!=typeof an.removeChild||!(an.attributes instanceof N)||"function"!=typeof an.removeAttribute||"function"!=typeof an.setAttribute||"string"!=typeof an.namespaceURI||"function"!=typeof an.insertBefore)||Dd(/[\u0080-\uFFFF]/,Ye.nodeName))return ff(Ye),!0;var la=Xo(Ye.nodeName);if(bf("uponSanitizeElement",Ye,{tagName:la,allowedTags:Tr}),Ye.hasChildNodes()&&!c4(Ye.firstElementChild)&&(!c4(Ye.content)||!c4(Ye.content.firstElementChild))&&Dd(/<[/\w]/g,Ye.innerHTML)&&Dd(/<[/\w]/g,Ye.textContent)||"select"===la&&Dd(/<template/i,Ye.innerHTML))return ff(Ye),!0;if(!Tr[la]||Xv[la]){if(!Xv[la]&&i6(la)&&(Vi.tagNameCheck instanceof RegExp&&Dd(Vi.tagNameCheck,la)||Vi.tagNameCheck instanceof Function&&Vi.tagNameCheck(la)))return!1;if(Ls&&!Cx[la]){var ol=ee(Ye)||Ye.parentNode,pc=ce(Ye)||Ye.childNodes;if(pc&&ol)for(var xl=pc.length-1;xl>=0;--xl)ol.insertBefore(Q(pc[xl],!0),re(Ye))}return ff(Ye),!0}return Ye instanceof x&&!function(Zg){var Cl=ee(Zg);Cl&&Cl.tagName||(Cl={namespaceURI:v0,tagName:"template"});var _l=MT(Zg.tagName),Qv=MT(Cl.tagName);return Zg.namespaceURI===eN?Cl.namespaceURI===v0?"svg"===_l:Cl.namespaceURI===Q5?"svg"===_l&&("annotation-xml"===Qv||t6[Qv]):Boolean(IT[_l]):Zg.namespaceURI===Q5?Cl.namespaceURI===v0?"math"===_l:Cl.namespaceURI===eN?"math"===_l&&o6[Qv]:Boolean(oN[_l]):Zg.namespaceURI===v0&&!(Cl.namespaceURI===eN&&!o6[Qv])&&!(Cl.namespaceURI===Q5&&!t6[Qv])&&!oN[_l]&&(a8[_l]||!IT[_l])}(Ye)?(ff(Ye),!0):"noscript"!==la&&"noembed"!==la||!Dd(/<\/no(script|embed)/i,Ye.innerHTML)?(pf&&3===Ye.nodeType&&(Hn=p0(Hn=Ye.textContent,Yo," "),Hn=p0(Hn,zr," "),Ye.textContent!==Hn&&(r4(a.removed,{element:Ye.cloneNode()}),Ye.textContent=Hn)),bf("afterSanitizeElements",Ye,null),!1):(ff(Ye),!0)},a6=function(Ye,Hn,an){if(l4&&("id"===Hn||"name"===Hn)&&(an in m||an in s8))return!1;if((!f0||s4[Hn]||!Dd(hs,Hn))&&(!BT||!Dd(Cn,Hn)))if(!Xa[Hn]||s4[Hn]){if(!(i6(Ye)&&(Vi.tagNameCheck instanceof RegExp&&Dd(Vi.tagNameCheck,Ye)||Vi.tagNameCheck instanceof Function&&Vi.tagNameCheck(Ye))&&(Vi.attributeNameCheck instanceof RegExp&&Dd(Vi.attributeNameCheck,Hn)||Vi.attributeNameCheck instanceof Function&&Vi.attributeNameCheck(Hn))||"is"===Hn&&Vi.allowCustomizedBuiltInElements&&(Vi.tagNameCheck instanceof RegExp&&Dd(Vi.tagNameCheck,an)||Vi.tagNameCheck instanceof Function&&Vi.tagNameCheck(an))))return!1}else if(!J5[Hn]&&!Dd(_s,p0(an,Cs,""))&&("src"!==Hn&&"xlink:href"!==Hn&&"href"!==Hn||"script"===Ye||0!==HM(an,"data:")||!XN[Ye])&&(!a4||Dd(hr,p0(an,Cs,"")))&&an)return!1;return!0},i6=function(Ye){return Ye.indexOf("-")>0},l6=function(Ye){var Hn,an,la,ol;bf("beforeSanitizeAttributes",Ye,null);var pc=Ye.attributes;if(pc){var xl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Xa};for(ol=pc.length;ol--;){var Zg=Hn=pc[ol],Cl=Zg.name,_l=Zg.namespaceURI;an="value"===Cl?Hn.value:PM(Hn.value),la=Xo(Cl);var Qv=an;if(xl.attrName=la,xl.attrValue=an,xl.keepAttr=!0,xl.forceKeepAttr=void 0,bf("uponSanitizeAttribute",Ye,xl),an=xl.attrValue,!xl.forceKeepAttr)if(xl.keepAttr)if(Dd(/\/>/i,an))HT(Cl,Ye);else{pf&&(an=p0(an,Yo," "),an=p0(an,zr," "));var l8=Xo(Ye.nodeName);if(a6(l8,la,an)){if(an!==Qv)try{_l?Ye.setAttributeNS(_l,Cl,an):Ye.setAttribute(Cl,an)}catch{HT(Cl,Ye)}}else HT(Cl,Ye)}else HT(Cl,Ye)}bf("afterSanitizeAttributes",Ye,null)}},i8=function Ye(Hn){var an,la=r6(Hn);for(bf("beforeSanitizeShadowDOM",Hn,null);an=la.nextNode();)bf("uponSanitizeShadowNode",an,null),s6(an)||(an.content instanceof h&&Ye(an.content),l6(an));bf("afterSanitizeShadowDOM",Hn,null)};return a.sanitize=function(Ye,Hn){var an,la,ol,pc,xl;if((QN=!Ye)&&(Ye="\x3c!--\x3e"),"string"!=typeof Ye&&!c4(Ye)){if("function"!=typeof Ye.toString)throw U5("toString is not a function");if("string"!=typeof(Ye=Ye.toString()))throw U5("dirty is not a string, aborting")}if(!a.isSupported){if("object"===Gv(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof Ye)return r.toStaticHTML(Ye);if(c4(Ye))return r.toStaticHTML(Ye.outerHTML)}return Ye}if(xx||tN(Hn),a.removed=[],"string"==typeof Ye&&(Vg=!1),Vg){if(Ye.nodeName){var Zg=Xo(Ye.nodeName);if(!Tr[Zg]||Xv[Zg])throw U5("root node is forbidden and cannot be sanitized in-place")}}else if(Ye instanceof y)1===(la=(an=n6("\x3c!----\x3e")).ownerDocument.importNode(Ye,!0)).nodeType&&"BODY"===la.nodeName||"HTML"===la.nodeName?an=la:an.appendChild(la);else{if(!b0&&!pf&&!Uh&&-1===Ye.indexOf("<"))return me&&Jv?me.createHTML(Ye):Ye;if(!(an=n6(Ye)))return b0?null:Jv?xe:""}an&&i4&&ff(an.firstChild);for(var Cl=r6(Vg?Ye:an);ol=Cl.nextNode();)3===ol.nodeType&&ol===pc||s6(ol)||(ol.content instanceof h&&i8(ol.content),l6(ol),pc=ol);if(pc=null,Vg)return Ye;if(b0){if(Yv)for(xl=_t.call(an.ownerDocument);an.firstChild;)xl.appendChild(an.firstChild);else xl=an;return Xa.shadowroot&&(xl=so.call(l,xl,!0)),xl}var _l=Uh?an.outerHTML:an.innerHTML;return Uh&&Tr["!doctype"]&&an.ownerDocument&&an.ownerDocument.doctype&&an.ownerDocument.doctype.name&&Dd(GM,an.ownerDocument.doctype.name)&&(_l="<!DOCTYPE "+an.ownerDocument.doctype.name+">\n"+_l),pf&&(_l=p0(_l,Yo," "),_l=p0(_l,zr," ")),me&&Jv?me.createHTML(_l):_l},a.setConfig=function(Ye){tN(Ye),xx=!0},a.clearConfig=function(){_x=null,xx=!1},a.isValidAttribute=function(Ye,Hn,an){_x||tN({});var la=Xo(Ye),ol=Xo(Hn);return a6(la,ol,an)},a.addHook=function(Ye,Hn){"function"==typeof Hn&&(go[Ye]=go[Ye]||[],r4(go[Ye],Hn))},a.removeHook=function(Ye){if(go[Ye])return LM(go[Ye])},a.removeHooks=function(Ye){go[Ye]&&(go[Ye]=[])},a.removeAllHooks=function(){go={}},a}();const YM=e=>XM().sanitize(e),JM=Hl.deviceType.isTouch(),TN=(e,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,r]}),AN=(e,r)=>ri.parts.close(Fi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:e,buttonBehaviours:Vt([fa.config({})])})),NN=()=>ri.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),MN=(e,r)=>ri.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Dg(`<p>${YM(r.translate(e))}</p>`)}]}]}),RN=e=>ri.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),DN=(e,r)=>[Xu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Xu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],K5=e=>{const r="tox-dialog",a=r+"-wrap",l=a+"__backdrop",m=r+"__disable-scroll";return ri.sketch({lazySink:e.lazySink,onEscape:h=>(e.onEscape(h),D.some(!0)),useTabstopAt:h=>!tf(h),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[r].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:Dg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:JM?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:Vt([nn.config({}),On("dialog-events",e.dialogEvents.concat([dm(_c(),(h,b)=>{Ho.focusIn(h)})])),On("scroll-lock",[ys(()=>{Us(da(),m)}),Hi(()=>{Ws(da(),m)})]),...e.extraBehaviours]),eventOrder:{[bl()]:["dialog-events"],[nc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Qm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},BN=e=>Fi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:Vt([fa.config({})]),components:[tu("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:r=>{Fr(r,kg)}}),LN=(e,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:Vt([gu.config({channel:`${fN}-${r}`,initialData:e,renderComponents:m=>[Ks(l.translate(m.title))]})])}),IN=()=>({dom:Dg('<div class="tox-dialog__draghandle"></div>')}),HN=(e,r,a)=>((l,m,h)=>{const b=ri.parts.title(LN(l,m,D.none(),h)),y=ri.parts.draghandle(IN()),x=ri.parts.close(BN(h)),k=[b].concat(l.draggable?[y]:[]).concat([x]);return Xu.sketch({dom:Dg('<div class="tox-dialog__header"></div>'),components:k})})({title:a.shared.providers.translate(e),draggable:a.dialog.isDraggableModal()},r,a.shared.providers),PN=(e,r,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:r,components:[{dom:Dg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),FN=(e,r,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{ri.setBusy(e(),(m,h)=>PN(l.message,h,r))},onUnblock:()=>{ri.setIdle(e())}}),zN=(e,r,a,l)=>ja(K5({...e,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[gu.config({channel:`${F5}-${e.id}`,updateState:(m,h)=>D.some(h),initialData:r}),Tn({}),...e.extraBehaviours],onEscape:m=>{Fr(m,kg)},dialogEvents:a,eventOrder:{[_u()]:[gu.name(),Ki.name()],[nc()]:["scroll-lock",gu.name(),"messages","dialog-events","alloy.base.behaviour"],[Qm()]:["alloy.base.behaviour","dialog-events","messages",gu.name(),"scroll-lock"]}})),X5=(e,r={})=>Xe(e,a=>"menu"===a.type?(l=>{const m=Xe(l.items,h=>{const b=Kt(r,h.name).getOr(Io(!1));return{...h,storage:b}});return{...l,items:m}})(a):a),VN=e=>Gt(e,(r,a)=>"menu"===a.type?Gt(a.items,(l,m)=>(l[m.name]=m.storage,l),r):r,{}),ZN=(e,r)=>[Sf(_c(),IE),e(q1,(a,l,m,h)=>{Ud(Gr(h.element)).fold(At,dp),r.onClose(),l.onClose()}),e(kg,(a,l,m,h)=>{l.onCancel(a),Fr(h,q1)}),Ct(Z2,(a,l)=>r.onUnblock()),Ct(Pc,(a,l)=>r.onBlock(l.event))],jN=(e,r,a)=>{const l=(h,b)=>Ct(h,(y,x)=>{m(y,(k,T)=>{b(e(),k,x.event,y)})}),m=(h,b)=>{gu.getState(h).get().each(y=>{b(y.internalDialog,h)})};return[...ZN(l,r),l(qp,(h,b)=>b.onSubmit(h)),l(Hc,(h,b,y)=>{b.onChange(h,{name:y.name})}),l(au,(h,b,y,x)=>{const k=()=>Ho.focusIn(x),T=z=>ji(z,"disabled")||vs(z,"aria-disabled").exists(U=>"true"===U),N=Gr(x.element),L=Ud(N);b.onAction(h,{name:y.name,value:y.value}),Ud(N).fold(k,z=>{T(z)||L.exists(U=>ue(z,U)&&T(U))?k():a().toOptional().filter(U=>!ue(U.element,z)).each(k)})}),l(tS,(h,b,y)=>{b.onTabChange(h,{newTabName:y.name,oldTabName:y.oldName})}),Hi(h=>{const b=e();Ut.setValue(h,b.getData())})]},QM=(e,r)=>{const a=r.map(h=>h.footerButtons).getOr([]),l=Po(a,h=>"start"===h.align),m=(h,b)=>Xu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${h}`]},components:Xe(b,y=>y.memento.asSpec())});return[m("start",l.pass),m("end",l.fail)]},UN=(e,r,a)=>({dom:Dg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Vt([gu.config({channel:`${vN}-${r}`,initialData:e,updateState:(l,m)=>{const h=Xe(m.buttons,b=>{const y=es(kw(x=b,x.type,a));var x;return{name:b.name,align:b.align,memento:y}});return D.some({lookupByName:b=>{return y=l,k=b,Ue(h,T=>T.name===k).bind(T=>T.memento.getOpt(y));var y,k},footerButtons:h})},renderComponents:QM})])}),WN=(e,r,a)=>ri.parts.footer(UN(e,r,a)),$N=(e,r)=>{if(e.getRoot().getSystem().isConnected()){const a=dr.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return Qp.getField(a,r).orThunk(()=>{const l=e.getFooter();return gu.getState(l).get().bind(m=>m.lookupByName(r))})}return D.none()},qN=(e,r,a)=>{const l=h=>{const b=e.getRoot();b.getSystem().isConnected()&&h(b)},m={getData:()=>{const h=e.getRoot(),b=h.getSystem().isConnected()?e.getFormWrapper():h;return{...Ut.getValue(b),...Gn(a,y=>y.get())}},setData:h=>{l(b=>{const y=m.getData(),x=Un(y,h),k=((N,L)=>{const z=N.getRoot();return gu.getState(z).get().map(U=>tr(oo("data",U.dataValidator,L))).getOr(L)})(e,x),T=e.getFormWrapper();Ut.setValue(T,k),Pn(a,(N,L)=>{Wo(x,L)&&N.set(x[L])})})},setEnabled:(h,b)=>{$N(e,h).each(b?Ko.enable:Ko.disable)},focus:h=>{$N(e,h).each(nn.focus)},block:h=>{if(!No(h))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(b=>{Co(b,Pc,{message:h})})},unblock:()=>{l(h=>{Fr(h,Z2)})},showTab:h=>{l(b=>{const y=e.getBody();gu.getState(y).get().exists(x=>x.isTabPanel())&&dr.getCurrent(y).each(x=>{yx.showTab(x,h)})})},redial:h=>{l(b=>{const y=e.getId(),x=r(h),k=X5(x.internalDialog.buttons,a);b.getSystem().broadcastOn([`${F5}-${y}`],x),b.getSystem().broadcastOn([`${fN}-${y}`],x.internalDialog),b.getSystem().broadcastOn([`${bN}-${y}`],x.internalDialog),b.getSystem().broadcastOn([`${vN}-${y}`],{...x.internalDialog,buttons:k}),m.setData(x.initialData)})},close:()=>{l(h=>{Fr(h,q1)})},toggleFullscreen:e.toggleFullscreen};return m};var Y5=tinymce.util.Tools.resolve("tinymce.util.URI");const e8=["insertContent","setContent","execCommand","close","block","unblock"],GN=e=>ps(e)&&-1!==e8.indexOf(e.mceAction),o8=(e,r,a)=>r&&a?[]:[Ka.config({contextual:{lazyContext:()=>D.some(ma(pe(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>W1(e,l.element).map(m=>({bounds:tv(m),optScrollEnv:D.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:Ms(m.element).top})})).getOrThunk(()=>({bounds:$s(),optScrollEnv:D.none()}))})],n8=e=>{const r=e.editor,a=Ob(r),l=(y=>{const x=y.shared;return{open:(k,T)=>{const N=()=>{ri.hide(J),T()},L=es(kw({name:"close-alert",text:"OK",primary:!0,buttonType:D.some("primary"),align:"end",enabled:!0,icon:D.none()},"cancel",y)),z=NN(),U=AN(N,x.providers),J=ja(K5({lazySink:()=>x.getSink(),header:TN(z,U),body:MN(k,x.providers),footer:D.some(RN(DN([],[L.asSpec()]))),onEscape:N,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ct(kg,N)],eventOrder:{}}));ri.show(J);const Q=L.get(J);nn.focus(Q)}}})(e.backstages.dialog),m=(y=>{const x=y.shared;return{open:(k,T)=>{const N=ce=>{ri.hide(Q),T(ce)},L=es(kw({name:"yes",text:"Yes",primary:!0,buttonType:D.some("primary"),align:"end",enabled:!0,icon:D.none()},"submit",y)),z=kw({name:"no",text:"No",primary:!1,buttonType:D.some("secondary"),align:"end",enabled:!0,icon:D.none()},"cancel",y),U=NN(),J=AN(()=>N(!1),x.providers),Q=ja(K5({lazySink:()=>x.getSink(),header:TN(U,J),body:MN(k,x.providers),footer:D.some(RN(DN([],[z,L.asSpec()]))),onEscape:()=>N(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ct(kg,()=>N(!1)),Ct(qp,()=>N(!0))],eventOrder:{}}));ri.show(Q);const re=L.get(Q);nn.focus(re)}}})(e.backstages.dialog),b=(y,x,k,T=!1)=>n4.open((N,L,z)=>{const U=tr(oo("data",z,L)),J=Ds(),Q=e.backstages.popup.shared.header.isPositionedAtTop(),re=()=>J.on(de=>{Na.reposition(de),Ka.refresh(de)}),ce=((de,me,xe,Ne)=>{const Ge=bo("dialog"),Et=bo("dialog-label"),_t=bo("dialog-content"),Ot=de.internalDialog,so=es((hr={title:Ot.title,draggable:!0},Cs=Ge,_s=Et,Tr=xe.shared.providers,Xu.sketch({dom:Dg('<div class="tox-dialog__header"></div>'),components:[LN(hr,Cs,D.some(_s),Tr),IN(),BN(Tr)],containerBehaviours:Vt([Md.config({mode:"mouse",blockerClass:"blocker",getTarget:hc=>Bl(hc,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),_o=es(((hr,Cs,_s,Tr,hc)=>wN(hr,Cs,D.some(_s),Tr,hc))({body:Ot.body,initialData:Ot.initialData},Ge,_t,xe,Ne)),go=X5(Ot.buttons),Uo=VN(go),Xo=es(((hr,Cs,_s)=>UN(hr,Cs,_s))({buttons:go},Ge,xe)),Yo=jN(()=>Cn,{onBlock:hr=>{nm.block(hs,(Cs,_s)=>PN(hr.message,_s,xe.shared.providers))},onUnblock:()=>{nm.unblock(hs)},onClose:()=>me.closeWindow()},xe.shared.getSink),zr="tox-dialog-inline",hs=ja({dom:{tag:"div",classes:["tox-dialog",zr],attributes:{role:"dialog","aria-labelledby":Et}},eventOrder:{[_u()]:[gu.name(),Ki.name()],[bl()]:["execute-on-form"],[nc()]:["reflecting","execute-on-form"]},behaviours:Vt([Ho.config({mode:"cyclic",onEscape:hr=>(Fr(hr,q1),D.some(!0)),useTabstopAt:hr=>!tf(hr)&&("button"!==Wt(hr)||"disabled"!==Xr(hr,"disabled")),firstTabstop:1}),gu.config({channel:`${F5}-${Ge}`,updateState:(hr,Cs)=>D.some(Cs),initialData:de}),nn.config({}),On("execute-on-form",Yo.concat([dm(_c(),(hr,Cs)=>{Ho.focusIn(hr)})])),nm.config({getRoot:()=>D.some(hs)}),pn.config({}),Tn({})]),components:[so.asSpec(),_o.asSpec(),Xo.asSpec()]}),Cn=qN({getId:ne(Ge),getRoot:ne(hs),getFooter:()=>Xo.get(hs),getBody:()=>_o.get(hs),getFormWrapper:()=>{const hr=_o.get(hs);return dr.getCurrent(hr).getOr(hr)},toggleFullscreen:()=>{const hr="tox-dialog--fullscreen",Cs=pe(hs.element.dom);mm(Cs,[hr])?(Oi(Cs,[hr]),jl(Cs,[zr])):(Oi(Cs,[zr]),jl(Cs,[hr]))}},me.redial,Uo);var hr,Cs,_s,Tr;return{dialog:hs,instanceApi:Cn}})({dataValidator:z,initialData:U,internalDialog:N},{redial:n4.redial,closeWindow:()=>{J.on(Na.hide),r.off("ResizeEditor",re),J.clear(),k(ce.instanceApi)}},e.backstages.popup,T),ee=ja(Na.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Q?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Vt([On("window-manager-inline-events",[Ct(cm(),(de,me)=>{Fr(ce.dialog,kg)})]),...o8(r,a,Q)]),isExtraPart:(de,me)=>{return $1(xe=me,".tox-alert-dialog")||$1(xe,".tox-confirm-dialog");var xe}}));return J.set(ee),Na.showWithinBounds(ee,sc(ce.dialog),{anchor:x},()=>{const de=r.inline?da():pe(r.getContainer()),me=ma(de);return D.some(me)}),a&&Q||(Ka.refresh(ee),r.on("ResizeEditor",re)),ce.instanceApi.setData(U),Ho.focusIn(ce.dialog),ce.instanceApi},y);return{open:(y,x,k)=>void 0!==x&&"toolbar"===x.inline?b(y,e.backstages.popup.shared.anchors.inlineDialog(),k,x.ariaAttrs):void 0!==x&&"cursor"===x.inline?b(y,e.backstages.popup.shared.anchors.cursor(),k,x.ariaAttrs):((y,x)=>n4.open((k,T,N)=>{const L=T,z=((U,J,Q)=>{const re=bo("dialog"),ce=U.internalDialog,ee=HN(ce.title,re,Q),de=((go,Uo,Xo)=>{const Yo=wN(go,Uo,D.none(),Xo,!1);return ri.parts.body(Yo)})({body:ce.body,initialData:ce.initialData},re,Q),me=X5(ce.buttons),xe=VN(me),Ne=WN({buttons:me},re,Q),Ge=jN(()=>_o,FN(()=>Ot,Q.shared.providers,J),Q.shared.getSink),Et=(go=>{switch(go){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(ce.size),_t={id:re,header:ee,body:de,footer:D.some(Ne),extraClasses:Et,extraBehaviours:[],extraStyles:{}},Ot=zN(_t,U,Ge,Q),so={getId:ne(re),getRoot:ne(Ot),getBody:()=>ri.getBody(Ot),getFooter:()=>ri.getFooter(Ot),getFormWrapper:()=>{const go=ri.getBody(Ot);return dr.getCurrent(go).getOr(go)},toggleFullscreen:()=>{const go="tox-dialog--fullscreen",Uo=pe(Ot.element.dom);Gi(Uo,go)?(Ws(Uo,go),jl(Uo,Et)):(Oi(Uo,Et),Us(Uo,go))}},_o=qN(so,J.redial,xe);return{dialog:Ot,instanceApi:_o}})({dataValidator:N,initialData:L,internalDialog:k},{redial:n4.redial,closeWindow:()=>{ri.hide(z.dialog),x(z.instanceApi)}},e.backstages.dialog);return ri.show(z.dialog),z.instanceApi.setData(L),z.instanceApi},y))(y,k),openUrl:(y,x)=>{return T=x,n4.openUrl(N=>{const L=((e,r,a,l)=>{const m=bo("dialog"),h=HN(e.title,m,l),b=(re=>{const ce={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Q1({dom:{tag:"iframe",attributes:{src:re.url}},behaviours:Vt([fa.config({}),nn.config({})])})]}],behaviours:Vt([Ho.config({mode:"acyclic",useTabstopAt:yo(tf)})])};return ri.parts.body(ce)})(e),y=e.buttons.bind(re=>0===re.length?D.none():D.some(WN({buttons:re},m,l))),x=((re,ce)=>{const ee=(me,xe)=>Ct(me,(Ne,Ge)=>{de(Ne,(Et,_t)=>{xe(Q,Et,Ge.event,Ne)})}),de=(me,xe)=>{gu.getState(me).get().each(Ne=>{xe(Ne,me)})};return[...ZN(ee,ce),ee(au,(me,xe,Ne)=>{xe.onAction(me,{name:Ne.name})})]})(0,FN(()=>J,l.shared.providers,r)),k={...e.height.fold(()=>({}),re=>({height:re+"px","max-height":re+"px"})),...e.width.fold(()=>({}),re=>({width:re+"px","max-width":re+"px"}))},T=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],N=new Y5(e.url,{base_uri:new Y5(window.location.href)}),L=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,z=sg(),U=[On("messages",[ys(()=>{const re=oi(pe(window),"message",ce=>{if(N.isSameOrigin(new Y5(ce.raw.origin))){const ee=ce.raw.data;GN(ee)?((de,me,xe)=>{switch(xe.mceAction){case"insertContent":de.insertContent(xe.content);break;case"setContent":de.setContent(xe.content);break;case"execCommand":const Ne=!!Is(xe.ui)&&xe.ui;de.execCommand(xe.cmd,Ne,xe.value);break;case"close":me.close();break;case"block":me.block(xe.message);break;case"unblock":me.unblock()}})(a,Q,ee):!GN(de=ee)&&ps(de)&&Wo(de,"mceAction")&&e.onMessage(Q,ee)}var de});z.set(re)}),Hi(z.clear)]),Ki.config({channels:{[yN]:{onReceive:(re,ce)=>{Oa(re.element,"iframe").each(ee=>{const de=ee.dom.contentWindow;ut(de)&&de.postMessage(ce,L)})}}}})],J=zN({id:m,header:h,body:b,footer:y,extraClasses:T,extraBehaviours:U,extraStyles:k},e,x,l),Q=(re=>{const ce=ee=>{re.getSystem().isConnected()&&ee(re)};return{block:ee=>{if(!No(ee))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");ce(de=>{Co(de,Pc,{message:ee})})},unblock:()=>{ce(ee=>{Fr(ee,Z2)})},close:()=>{ce(ee=>{Fr(ee,q1)})},sendMessage:ee=>{ce(de=>{de.getSystem().broadcastOn([yN],ee)})}}})(J);return{dialog:J,instanceApi:Q}})(N,{closeWindow:()=>{ri.hide(L.dialog),T(L.instanceApi)}},r,e.backstages.dialog);return ri.show(L.dialog),L.instanceApi},y);var T},alert:(y,x)=>{l.open(y,x)},close:y=>{y.close()},confirm:(y,x)=>{m.open(y,x)}}};Li.add("silver",e=>{var b;MC(b=e),(y=>{const x=y.options.register,k=T=>jn(T,No)?{value:N3(T),valid:!0}:{valid:!1,message:"Must be an array of strings."};x("color_map",{processor:k,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),x("color_map_background",{processor:k}),x("color_map_foreground",{processor:k}),x("color_cols",{processor:"number",default:A2(V1(y,"default").length)}),x("color_cols_foreground",{processor:"number",default:Xb(y,V1(y,T2).length)}),x("color_cols_background",{processor:"number",default:Xb(y,V1(y,Kb).length)}),x("custom_colors",{processor:"boolean",default:!0}),x("color_default_foreground",{processor:"string",default:su}),x("color_default_background",{processor:"string",default:su})})(b),(y=>{const x=y.options.register;x("contextmenu_avoid_overlap",{processor:"string",default:""}),x("contextmenu_never_use_native",{processor:"boolean",default:!1}),x("contextmenu",{processor:k=>!1===k?{value:[],valid:!0}:No(k)||jn(k,No)?{value:w(k),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(b);let r=()=>$s();const{dialogs:a,popups:l,renderUI:m}=t4(e,{getPopupSinkBounds:()=>r()});((e,r)=>{const a=Io(!1),l=Io(!1),m=ja(Na.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Vt([On("dismissAutocompleter",[Ct(cm(),()=>k())])]),lazySink:r.getSink})),h=()=>Na.isOpen(m),b=l.get,y=()=>{h()&&Na.hide(m)},x=()=>Na.getContent(m).bind(N=>ks(N.components(),0)),k=()=>e.execCommand("mceAutocompleterClose"),T=N=>{const L=(z=>{const U=is(z,J=>D.from(J.columns)).getOr(1);return Yt(z,J=>((e,r,a,l,m,h,b)=>{const y=1===l,x=!y||Lb(e);return Dt(Xe(e,k=>{switch(k.type){case"separator":return(T=k,oo("Autocompleter.Separator",c_,T)).fold(Wu,N=>D.some(Yb(N)));case"cardmenuitem":return(N=k,oo("cardmenuitem",hA,N)).fold(Wu,N=>D.some(((L,z,U,J)=>{const Q={dom:_3(L.label),optComponents:[D.some({dom:{tag:"div",classes:[Uu,r2]},components:S3(L.items,J)})]};return H1({data:P1({text:D.none(),...L}),enabled:L.enabled,getApi:re=>({isEnabled:()=>!Ko.isDisabled(re),setEnabled:ce=>{Ko.set(re,!ce),Tt(Xi(re.element,"*"),ee=>{re.getSystem().getByDom(ee).each(de=>{de.hasConfigured(Ko)&&Ko.set(de,!ce)})})}}),onAction:L.onAction,onSetup:L.onSetup,triggersSubmenu:!1,itemBehaviours:D.from(J.itemBehaviours).getOr([])},Q,z,U.providers)})({...N,onAction:L=>{N.onAction(L),a(N.value,N.meta)}},m,h,{itemBehaviours:__(N.meta,h),cardText:{matchText:r,highlightOn:b}})));default:return(N=>oo("Autocompleter.Item",lA,N))(k).fold(Wu,N=>D.some(((L,z,U,J,Q,re,ce,ee=!0)=>{const de=Wb({presets:"normal",textContent:D.none(),htmlContent:U?L.text.map(me=>ru(me,z)):D.none(),ariaLabel:L.text,iconContent:L.icon,shortcutContent:D.none(),checkMark:D.none(),caret:D.none(),value:L.value},ce.providers,ee,L.icon);return H1({data:P1(L),enabled:L.enabled,getApi:ne({}),onAction:me=>Q(L.value,L.meta),onSetup:ne(At),triggersSubmenu:!1,itemBehaviours:__(L.meta,ce)},de,re,ce.providers)})(N,r,y,0,a,m,h,x)))}var N,T}))})(J.items,J.matchText,(re,ce)=>{const ee=e.selection.getRng();var de,me;(de=e.dom,me=ee,t2(pe(me.startContainer)).map(xe=>{const Ne=de.createRng();return Ne.selectNode(xe.dom),Ne})).each(de=>{const me={hide:()=>k(),reload:xe=>{y(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:xe})}};a.set(!0),J.onAction(me,de,re,ce),a.set(!1)})},U,nd.BUBBLE_TO_SANDBOX,r,J.highlightOn))})(N);var z,U,J;L.length>0?(z=N,U=L,(J=pe(e.getBody()),Oa(J,n3)).each(Q=>{const re=is(z,ce=>D.from(ce.columns)).getOr(1);Na.showMenuAt(m,{anchor:{type:"node",root:pe(e.getBody()),node:D.from(Q)}},((ce,ee,de,me)=>{const xe=L2(ee,me),Ne=xg(me);return{data:ev({...ce,movement:xe,menuBehaviours:nu("auto"!==ee?[]:[ys((Ge,Et)=>{v_(Ge,4,Ne.item).each(({numColumns:_t,numRows:Ot})=>{Ho.setGridSize(Ge,Ot,_t)})})])}),menu:{markers:xg(me),fakeFocus:de===P2.ContentFocus}}})(l2("autocompleter-value",!0,U,re,{menuType:"normal"}),re,P2.ContentFocus,"normal"))}),x().each(Zr.highlightFirst)):y()};e.on("AutocompleterStart",({lookupData:N})=>{l.set(!0),a.set(!1),T(N)}),e.on("AutocompleterUpdate",({lookupData:N})=>T(N)),e.on("AutocompleterEnd",()=>{y(),l.set(!1),a.set(!1)}),((N,L)=>{const z=(J,Q)=>{Co(J,Gc(),{raw:Q})},U=()=>N.getMenu().bind(Zr.getHighlighted);L.on("keydown",J=>{const Q=J.which;N.isActive()&&(N.isMenuOpen()?13===Q?(U().each(pd),J.preventDefault()):40===Q?(U().fold(()=>{N.getMenu().each(Zr.highlightFirst)},re=>{z(re,J)}),J.preventDefault(),J.stopImmediatePropagation()):37!==Q&&38!==Q&&39!==Q||U().each(re=>{z(re,J),J.preventDefault(),J.stopImmediatePropagation()}):13!==Q&&38!==Q&&40!==Q||N.cancelIfNecessary())}),L.on("NodeChange",J=>{N.isActive()&&!N.isProcessingAction()&&t2(pe(J.element)).isNone()&&N.cancelIfNecessary()})})({cancelIfNecessary:k,isMenuOpen:h,isActive:b,isProcessingAction:a.get,getMenu:x},e)})(e,l.backstage.shared);const h=n8({editor:e,backstages:{popup:l.backstage,dialog:a.backstage}});return{renderUI:async()=>{const b=await m();return W1(e,l.getMothership().element).each(y=>{r=()=>tv(y)}),b},getWindowManagerImpl:ne(h),getNotificationManagerImpl:()=>((b,y,x)=>{const k=y.backstage.shared,T=()=>{const N=ma(pe(b.getContentAreaContainer())),L=$s(),z=Ul(L.x,N.x,N.right),U=Ul(L.y,N.y,N.bottom),J=Math.max(N.right,L.right),Q=Math.max(N.bottom,L.bottom);return D.some(us(z,U,J-z,Q-U))};return{open:(N,L)=>{const z=()=>{L(),Na.hide(J)},U=ja(wg.sketch({text:N.text,level:Do(["success","error","warning","warn","info"],N.type)?N.type:void 0,progress:!0===N.progressBar,icon:N.icon,closeButton:N.closeButton,onAction:z,iconProvider:k.providers.icons,translationProvider:k.providers.translate})),J=ja(Na.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:k.getSink,fireDismissalEventInstead:{},...k.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));x.add(J),lo(N.timeout)&&N.timeout>0&&fb.setEditorTimeout(b,()=>{z()},N.timeout);const Q={close:z,reposition:()=>{const re=sc(U),ce={maxHeightFunction:nh()},ee=b.notificationManager.getNotifications();if(ee[0]===Q){const de={...k.anchors.banner(),overrides:ce};Na.showWithinBounds(J,re,{anchor:de},T)}else Nt(ee,Q).each(de=>{const me=ee[de-1].getEl(),xe={type:"node",root:da(),node:D.some(pe(me)),overrides:ce,layouts:{onRtl:()=>[ha],onLtr:()=>[ha]}};Na.showWithinBounds(J,re,{anchor:xe},T)})},text:re=>{wg.updateText(U,re)},settings:N,getEl:()=>U.element.dom,progressBar:{value:re=>{wg.updateProgress(U,re)}}};return Q},close:N=>{N.close()},getArgs:N=>N.settings}})(e,{backstage:l.backstage},l.getMothership())}})}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}}),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ss=Y=>le=>(Ce=>{const Le=typeof Ce;return null===Ce?"null":"object"===Le&&Array.isArray(Ce)?"array":"object"===Le&&(ke=lt=Ce,(ct=String).prototype.isPrototypeOf(ke)||(null===(Rt=lt.constructor)||void 0===Rt?void 0:Rt.name)===ct.name)?"string":Le;var ke,lt,ct,Rt})(le)===Y,va=Y=>le=>typeof le===Y,ns=Ss("string"),Qs=Ss("object"),No=Ss("array"),ps=va("boolean"),as=Y=>!(null==Y),Ar=va("function"),Ya=va("number"),Is=()=>{},_n=(Y,le)=>Y===le,uo=Y=>le=>!Y(le),ut=()=>!1;class pt{constructor(le,Ce){this.tag=le,this.value=Ce}static some(le){return new pt(!0,le)}static none(){return pt.singletonNone}fold(le,Ce){return this.tag?Ce(this.value):le()}isSome(){return this.tag}isNone(){return!this.tag}map(le){return this.tag?pt.some(le(this.value)):pt.none()}bind(le){return this.tag?le(this.value):pt.none()}exists(le){return this.tag&&le(this.value)}forall(le){return!this.tag||le(this.value)}filter(le){return!this.tag||le(this.value)?this:pt.none()}getOr(le){return this.tag?this.value:le}or(le){return this.tag?this:le}getOrThunk(le){return this.tag?this.value:le()}orThunk(le){return this.tag?this:le()}getOrDie(le){if(this.tag)return this.value;throw new Error(le??"Called getOrDie on None")}static from(le){return as(le)?pt.some(le):pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(le){this.tag&&le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pt.singletonNone=new pt(!1);const lo=Array.prototype.slice,jn=Array.prototype.indexOf,At=Array.prototype.push,Ft=(Y,le)=>jn.call(Y,le)>-1,eo=(Y,le)=>{for(let Ce=0,Le=Y.length;Ce<Le;Ce++)if(le(Y[Ce],Ce))return!0;return!1},ne=(Y,le)=>{const Ce=Y.length,Le=new Array(Ce);for(let ke=0;ke<Ce;ke++)Le[ke]=le(Y[ke],ke);return Le},it=(Y,le)=>{for(let Ce=0,Le=Y.length;Ce<Le;Ce++)le(Y[Ce],Ce)},Oe=(Y,le)=>{const Ce=[];for(let Le=0,ke=Y.length;Le<ke;Le++){const lt=Y[Le];le(lt,Le)&&Ce.push(lt)}return Ce},$n=(Y,le,Ce)=>(it(Y,(Le,ke)=>{Ce=le(Ce,Le,ke)}),Ce),yo=(Y,le,Ce)=>{for(let Le=0,ke=Y.length;Le<ke;Le++){const lt=Y[Le];if(le(lt,Le))return pt.some(lt);if(Ce(lt,Le))break}return pt.none()},Dr=(Y,le)=>yo(Y,le,ut),lr=(Y,le)=>(Ce=>{const Le=[];for(let ke=0,lt=Ce.length;ke<lt;++ke){if(!No(Ce[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+Ce);At.apply(Le,Ce[ke])}return Le})(ne(Y,le)),ot=Y=>{const le=lo.call(Y,0);return le.reverse(),le},mn=(Y,le)=>le>=0&&le<Y.length?pt.some(Y[le]):pt.none(),D=Y=>mn(Y,0),mt=Y=>mn(Y,Y.length-1),Ma=(Y,le)=>{const Ce=[],Le=Ar(le)?ke=>eo(Ce,lt=>le(lt,ke)):ke=>Ft(Ce,ke);for(let ke=0,lt=Y.length;ke<lt;ke++){const ct=Y[ke];Le(ct)||Ce.push(ct)}return Ce},qn=(Y,le,Ce=_n)=>Y.exists(Le=>Ce(Le,le)),fr=(Y,le,Ce)=>Y.isSome()&&le.isSome()?pt.some(Ce(Y.getOrDie(),le.getOrDie())):pt.none(),Nt=Y=>{if(null==Y)throw new Error("Node cannot be null or undefined");return{dom:Y}},Do=(Y,le)=>{const Ce=(le||document).createElement(Y);return Nt(Ce)},Jo=Nt,X=(Y,le)=>Y.dom===le.dom;typeof window<"u"||Function("return this;")();const sr=Y=>Y.dom.nodeName.toLowerCase(),Xe=Y=>1===Y.dom.nodeType,Tt=Y=>le=>Xe(le)&&sr(le)===Y,Po=Y=>pt.from(Y.dom.parentNode).map(Jo),Ie=Y=>ne(Y.dom.childNodes,Jo),To=(Y,le)=>pt.from(Y.dom.childNodes[le]).map(Jo),Gt=Y=>To(Y,0),Ue=Y=>To(Y,Y.dom.childNodes.length-1),Hs=(Y,le,Ce)=>{let Le=Y.dom;const ke=Ar(Ce)?Ce:ut;for(;Le.parentNode;){Le=Le.parentNode;const lt=Jo(Le);if(le(lt))return pt.some(lt);if(ke(lt))break}return pt.none()},en=(Y,le,Ce)=>{return ke=Hs,Rt=Ce,(ct=le)(lt=Y)?pt.some(lt):Ar(Rt)&&Rt(lt)?pt.none():ke(lt,ct,Rt);var ke,lt,ct,Rt},Yt=(Y,le)=>{Po(Y).each(Ce=>{Ce.dom.insertBefore(le.dom,Y.dom)})},ts=(Y,le)=>{Y.dom.appendChild(le.dom)},Jn=(Y,le)=>{it(le,Ce=>{ts(Y,Ce)})},fs=Y=>{Y.dom.textContent="",it(Ie(Y),le=>{or(le)})},or=Y=>{const le=Y.dom;null!==le.parentNode&&le.parentNode.removeChild(le)};var Ps=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ha=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ks=tinymce.util.Tools.resolve("tinymce.util.VK");const qr=Y=>ne(Y,Jo),Cr=Object.keys,_a=(Y,le)=>{const Ce=Cr(Y);for(let Le=0,ke=Ce.length;Le<ke;Le++){const lt=Ce[Le];le(Y[lt],lt)}},is=(Y,le)=>{const Ce=Y.dom;_a(le,(Le,ke)=>{((lt,ct,Rt)=>{if(!(ns(Rt)||ps(Rt)||Ya(Rt)))throw console.error("Invalid call to Attribute.set. Key ",ct,":: Value ",Rt,":: Element ",lt),new Error("Attribute value was not simple");lt.setAttribute(ct,Rt+"")})(Ce,ke,Le)})},_r=Y=>$n(Y.dom.attributes,(le,Ce)=>(le[Ce.name]=Ce.value,le),{}),Zi=Y=>Jo(Y.dom.cloneNode(!0)),Pn=(Y,le)=>{const Ce=((ct,Rt)=>{const wo=Do(Rt),Jt=_r(ct);return is(wo,Jt),wo})(Y,le);var Le,ke,ct;ke=Ce,(ct=Le=Y,pt.from(ct.dom.nextSibling).map(Jo)).fold(()=>{Po(Le).each(ct=>{ts(ct,ke)})},ct=>{Yt(ct,ke)});const lt=Ie(Y);return Jn(Ce,lt),or(Y),Ce};var Gn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),nr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Di=Y=>le=>as(le)&&le.nodeName.toLowerCase()===Y,Sr=Y=>le=>as(le)&&Y.test(le.nodeName),zs=Y=>as(Y)&&3===Y.nodeType,Ao=Y=>as(Y)&&1===Y.nodeType,Nr=Sr(/^(OL|UL|DL)$/),ls=Sr(/^(OL|UL)$/),Kt=Di("ol"),Wo=Sr(/^(LI|DT|DD)$/),bs=Sr(/^(DT|DD)$/),cs=Sr(/^(TH|TD)$/),Dt=Di("br"),Nn=(Y,le)=>as(le)&&le.nodeName in Y.schema.getTextBlockElements(),Vo=(Y,le)=>as(Y)&&Y.nodeName in le,Vs=(Y,le)=>as(le)&&le.nodeName in Y.schema.getVoidElements(),ar=(Y,le,Ce)=>{const Le=Y.isEmpty(le);return!(Ce&&Y.select("span[data-mce-type=bookmark]",le).length>0)&&Le},Bi=(Y,le)=>Y.isChildOf(le,Y.getRoot()),Es=Y=>le=>le.options.get(Y),Ja=Es("lists_indent_on_tab"),si=Es("forced_root_block"),Sa=Es("forced_root_block_attrs"),ai=(Y,le)=>{const Ce=Y.dom,Le=Y.schema.getBlockElements(),ke=Ce.createFragment(),lt=si(Y),ct=Sa(Y);let Rt,wo,Jt=!1;for(wo=Ce.create(lt,ct),Vo(le.firstChild,Le)||ke.appendChild(wo);Rt=le.firstChild;){const ko=Rt.nodeName;Jt||"SPAN"===ko&&"bookmark"===Rt.getAttribute("data-mce-type")||(Jt=!0),Vo(Rt,Le)?(ke.appendChild(Rt),wo=null):(wo||(wo=Ce.create(lt,ct),ke.appendChild(wo)),wo.appendChild(Rt))}return!Jt&&wo&&wo.appendChild(Ce.create("br",{"data-mce-bogus":"1"})),ke},ta=Gn.DOM,ya=Tt("dd"),Pa=Tt("dt"),Fa=Y=>{Pa(Y)&&Pn(Y,"dd")},pe=(Y,le)=>{if(zs(Y))return{container:Y,offset:le};const Ce=Ps.getNode(Y,le);return zs(Ce)?{container:Ce,offset:le>=Y.childNodes.length?Ce.data.length:0}:Ce.previousSibling&&zs(Ce.previousSibling)?{container:Ce.previousSibling,offset:Ce.previousSibling.data.length}:Ce.nextSibling&&zs(Ce.nextSibling)?{container:Ce.nextSibling,offset:0}:{container:Y,offset:le}},Be=Y=>{const le=Y.cloneRange(),Ce=pe(Y.startContainer,Y.startOffset);le.setStart(Ce.container,Ce.offset);const Le=pe(Y.endContainer,Y.endOffset);return le.setEnd(Le.container,Le.offset),le},nt=["OL","UL","DL"],Qe=nt.join(","),Bt=(Y,le)=>{const Ce=le||Y.selection.getStart(!0);return Y.dom.getParent(Ce,Qe,Eo(Y,Ce))},Wt=Y=>{const le=Y.selection.getSelectedBlocks();return Oe(((Ce,Le)=>{const ke=nr.map(Le,lt=>Ce.dom.getParent(lt,"li,dd,dt",Eo(Ce,lt))||lt);return Ma(ke)})(Y,le),Wo)},jt=(Y,le)=>{const Ce=Y.dom.getParents(le,"TD,TH");return Ce.length>0?Ce[0]:Y.getBody()},Eo=(Y,le)=>{const Ce=Y.dom.getParents(le,Y.dom.isBlock);return Dr(Ce,ke=>{return lt=Y.schema,!Nr(ct=ke)&&!Wo(ct)&&eo(nt,Rt=>lt.isValidChild(ct.nodeName,Rt));var lt,ct}).getOr(Y.getBody())},ho=(Y,le)=>{const Ce=Y.dom.getParents(le,"ol,ul",Eo(Y,le));return mt(Ce)},Qn=Y=>/\btox\-/.test(Y.className),Rn=(Y,le)=>yo(Y,Nr,cs).exists(Ce=>Ce.nodeName===le&&!Qn(Ce)),fn=(Y,le)=>null!==le&&!Y.dom.isEditable(le),br=(Y,le)=>{const Ce=Y.dom.getParent(le,"ol,ul,dl");return fn(Y,Ce)},Zs=(Y,le)=>{const Ce=Y.selection.getNode();return le({parents:Y.dom.getParents(Ce),element:Ce}),Y.on("NodeChange",le),()=>Y.off("NodeChange",le)},Zo=(Y,le,Ce)=>Y.dispatch("ListMutation",{action:le,element:Ce}),ue=(_e=/^\s+|\s+$/g,Y=>Y.replace(_e,""));var _e;const We=(Y,le,Ce)=>{((Le,ke,lt)=>{if(!ns(lt))throw console.error("Invalid call to CSS.set. Property ",ke,":: Value ",lt,":: Element ",Le),new Error("CSS value must be a string: "+lt);var ct;void 0!==(ct=Le).style&&Ar(ct.style.getPropertyValue)&&Le.style.setProperty(ke,lt)})(Y.dom,le,Ce)},yt=(Y,le)=>{ts(Y.item,le.list)},ft=(Y,le)=>{const Ce={list:Do(le,Y),item:Do("li",Y)};return ts(Ce.list,Ce.item),Ce},Lt=Y=>((le,Ce)=>{const Le=le.dom;if(1!==Le.nodeType)return!1;{const ke=Le;if(void 0!==ke.matches)return ke.matches(Ce);if(void 0!==ke.msMatchesSelector)return ke.msMatchesSelector(Ce);if(void 0!==ke.webkitMatchesSelector)return ke.webkitMatchesSelector(Ce);if(void 0!==ke.mozMatchesSelector)return ke.mozMatchesSelector(Ce);throw new Error("Browser lacks native selectors")}})(Y,"OL,UL"),Fo=Y=>Gt(Y).exists(Lt),So=Y=>Y.depth>0,tn=Y=>Y.isSelected,Dn=Y=>{const le=Ie(Y),Ce=Ue(Y).exists(Lt)?le.slice(0,-1):le;return ne(Ce,Zi)},rr=Y=>(it(Y,(le,Ce)=>{((Le,ke)=>{const lt=Le[ke].depth,ct=wo=>wo.depth===lt&&!wo.dirty,Rt=wo=>wo.depth<lt;return yo(ot(Le.slice(0,ke)),ct,Rt).orThunk(()=>yo(Le.slice(ke+1),ct,Rt))})(Y,Ce).fold(()=>{var Le;le.dirty&&((Le=le).listAttributes=((ke,lt)=>{const ct={};var Rt,Jt,ko,Sn;return Jt=(ke,lt)=>"start"!==lt,Rt=ct,ko=(wo,Jt)=>{Rt[Jt]=wo},Sn=Is,_a(ke,(cn,Xn)=>{(Jt(0,Xn)?ko:Sn)(cn,Xn)}),ct})(Le.listAttributes))},Le=>{return(ke=le).listType=(lt=Le).listType,void(ke.listAttributes={...lt.listAttributes});var ke,lt})}),Y),ln=(Y,le,Ce,Le)=>Gt(Le).filter(Lt).fold(()=>{le.each(ct=>{X(ct.start,Le)&&Ce.set(!0)});const ke=(ct=Le,Rt=Y,wo=Ce.get(),Po(ct).filter(Xe).map(Jt=>({depth:Rt,dirty:!1,isSelected:wo,content:Dn(ct),itemAttributes:_r(ct),listAttributes:_r(Jt),listType:sr(Jt)})));var ct,Rt,wo;le.each(ct=>{X(ct.end,Le)&&Ce.set(!1)});const lt=Ue(Le).filter(Lt).map(ct=>kr(Y,le,Ce,ct)).getOr([]);return ke.toArray().concat(lt)},ke=>kr(Y,le,Ce,ke)),kr=(Y,le,Ce,Le)=>lr(Ie(Le),ke=>(Lt(ke)?kr:ln)(Y+1,le,Ce,ke)),ii=(Y,le)=>{const Ce=qr(((Y,le)=>{const Ce=ne(le,Le=>ho(Y,Le).getOr(Le));return Ma(Ce)})(lt=Y,(Rt=>{const wo=ho(Rt,Rt.selection.getStart()),Jt=Oe(Rt.selection.getSelectedBlocks(),ls);return wo.toArray().concat(Jt)})(lt))),Le=qr((lt=>Oe(Wt(lt),bs))(Y));var lt;let ke=!1;if(Ce.length||Le.length){const lt=Y.selection.getBookmark();((Y,le,Ce)=>{const Le=((ke,lt)=>{const ct=(Rt=>{let wo=!1;return{get:()=>wo,set:Jt=>{wo=Jt}}})();return ne(ke,Rt=>({sourceList:Rt,entries:kr(0,lt,ct,Rt)}))})(le,(ke=>{const lt=ne(Wt(ke),Jo);return fr(Dr(lt,uo(Fo)),Dr(ot(lt),uo(Fo)),(ct,Rt)=>({start:ct,end:Rt}))})(Y));it(Le,ke=>{var wo;wo=Ce,it(Oe(ke.entries,tn),Jt=>((ko,Sn)=>{switch(ko){case"Indent":Sn.depth++;break;case"Outdent":Sn.depth--;break;case"Flatten":Sn.depth=0}Sn.dirty=!0})(wo,Jt));const lt=((Rt,wo)=>lr(((Jt,ko)=>{if(0===Jt.length)return[];{let Sn=ko(Jt[0]);const cn=[];let Xn=[];for(let zn=0,bn=Jt.length;zn<bn;zn++){const vn=Jt[zn],ir=ko(vn);ir!==Sn&&(cn.push(Xn),Xn=[]),Sn=ir,Xn.push(vn)}return 0!==Xn.length&&cn.push(Xn),cn}})(wo,So),Jt=>D(Jt).exists(So)?((Y,le)=>{const Ce=rr(le);return((Le,ke)=>{const lt=$n(ke,(ct,Rt)=>Rt.depth>ct.length?((wo,Jt,ko)=>{const Sn=((Xn,zn,bn)=>{const vn=[];for(let ir=0;ir<bn;ir++)vn.push(ft(Xn,zn.listType));return vn})(wo,ko,ko.depth-Jt.length);var cn;return(Xn=>{for(let zn=1;zn<Xn.length;zn++)yt(Xn[zn-1],Xn[zn])})(Sn),((Xn,zn)=>{for(let bn=0;bn<Xn.length-1;bn++)We(Xn[bn].item,"list-style-type","none");mt(Xn).each(bn=>{is(bn.list,zn.listAttributes),is(bn.item,zn.itemAttributes),Jn(bn.item,zn.content)})})(Sn,ko),cn=Sn,fr(mt(Jt),D(cn),yt),Jt.concat(Sn)})(Le,ct,Rt):((wo,Jt,ko)=>{const Sn=Jt.slice(0,ko.depth);return mt(Sn).each(cn=>{const Xn=((zn,bn,vn)=>{const ir=Do("li",zn);return is(ir,bn),Jn(ir,vn),ir})(wo,ko.itemAttributes,ko.content);var zn,bn;ts((zn=cn).list,bn=Xn),zn.item=bn,((zn,bn)=>{sr(zn.list)!==bn.listType&&(zn.list=Pn(zn.list,bn.listType)),is(zn.list,bn.listAttributes)})(cn,ko)}),Sn})(Le,ct,Rt),[]);return D(lt).map(ct=>ct.list)})(Y.contentDocument,Ce).toArray()})(Rt,Jt):((ko,Sn)=>{const cn=rr(Sn);return ne(cn,Xn=>{const zn=((bn,vn)=>{const ir=document.createDocumentFragment();return it(bn,fe=>{ir.appendChild(fe.dom)}),Jo(ir)})(Xn.content);return Jo(ai(ko,zn.dom))})})(Rt,Jt)))(Y,ke.entries);var ct;it(lt,Rt=>{Zo(Y,"Indent"===Ce?"IndentList":"OutdentList",Rt.dom)}),ct=ke.sourceList,it(lt,Rt=>{Yt(ct,Rt)}),or(ke.sourceList)})})(Y,Ce,le),ct=Y,it(Le,"Indent"===le?Fa:Jt=>((Y,le)=>{var Ce;ya(le)?Pn(le,"dt"):Pa(le)&&(Ce=le,pt.from(Ce.dom.parentElement).map(Jo)).each(Le=>((ke,lt,ct)=>{const Rt=ta.select('span[data-mce-type="bookmark"]',lt),wo=ai(ke,ct),Jt=ta.createRng();Jt.setStartAfter(ct),Jt.setEndAfter(lt);const ko=Jt.extractContents();for(let cn=ko.firstChild;cn;cn=cn.firstChild)if("LI"===cn.nodeName&&ke.dom.isEmpty(cn)){ta.remove(cn);break}ke.dom.isEmpty(ko)||ta.insertAfter(ko,lt),ta.insertAfter(wo,lt);const Sn=ct.parentElement;Sn&&ar(ke.dom,Sn)&&(cn=>{const Xn=cn.parentNode;Xn&&nr.each(Rt,zn=>{Xn.insertBefore(zn,ct.parentNode)}),ta.remove(cn)})(Sn),ta.remove(ct),ar(ke.dom,lt)&&ta.remove(lt)})(Y,Le.dom,le.dom))})(ct,Jt)),Y.selection.moveToBookmark(lt),Y.selection.setRng(Be(Y.selection.getRng())),Y.nodeChanged(),ke=!0}var ct;return ke},Gr=(Y,le)=>!(Ce=>{const Le=Bt(Ce);return fn(Ce,Le)})(Y)&&ii(Y,le),rs=Y=>Gr(Y,"Indent"),Fs=Y=>Gr(Y,"Outdent"),Kr=Y=>Gr(Y,"Flatten"),na=Y=>"\ufeff"===Y;var da=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const nl=Gn.DOM,za=Y=>{const le={},Ce=Le=>{let ke=Y[Le?"startContainer":"endContainer"],lt=Y[Le?"startOffset":"endOffset"];if(Ao(ke)){const ct=nl.create("span",{"data-mce-type":"bookmark"});ke.hasChildNodes()?(lt=Math.min(lt,ke.childNodes.length-1),Le?ke.insertBefore(ct,ke.childNodes[lt]):nl.insertAfter(ct,ke.childNodes[lt])):ke.appendChild(ct),ke=ct,lt=0}le[Le?"startContainer":"endContainer"]=ke,le[Le?"startOffset":"endOffset"]=lt};return Ce(!0),Y.collapsed||Ce(),le},Bo=Y=>{const le=Le=>{let ke=Y[Le?"startContainer":"endContainer"],lt=Y[Le?"startOffset":"endOffset"];if(ke){if(Ao(ke)&&ke.parentNode){const ct=ke;lt=(Rt=>{var wo;let Jt=null===(wo=Rt.parentNode)||void 0===wo?void 0:wo.firstChild,ko=0;for(;Jt;){if(Jt===Rt)return ko;Ao(Jt)&&"bookmark"===Jt.getAttribute("data-mce-type")||ko++,Jt=Jt.nextSibling}return-1})(ke),ke=ke.parentNode,nl.remove(ct),!ke.hasChildNodes()&&nl.isBlock(ke)&&ke.appendChild(nl.create("br"))}Y[Le?"startContainer":"endContainer"]=ke,Y[Le?"startOffset":"endOffset"]=lt}};le(!0),le();const Ce=nl.createRng();return Ce.setStart(Y.startContainer,Y.startOffset),Y.endContainer&&Ce.setEnd(Y.endContainer,Y.endOffset),Be(Ce)},rl=Y=>{switch(Y){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Xr=(Y,le)=>{nr.each(le,(Ce,Le)=>{Y.setAttribute(Le,Ce)})},vs=(Y,le,Ce)=>{var lt;Y.setStyle(le,"list-style-type",(lt=Ce)["list-style-type"]?lt["list-style-type"]:null),((Le,ke,lt)=>{Xr(ke,lt["list-attributes"]),nr.each(Le.select("li",ke),ct=>{Xr(ct,lt["list-item-attributes"])})})(Y,le,Ce)},ji=(Y,le)=>as(le)&&!Vo(le,Y.schema.getBlockElements()),jr=(Y,le,Ce,Le)=>{let ke=le[Ce?"startContainer":"endContainer"];const lt=le[Ce?"startOffset":"endOffset"];Ao(ke)&&(ke=ke.childNodes[Math.min(lt,ke.childNodes.length-1)]||ke),!Ce&&Dt(ke.nextSibling)&&(ke=ke.nextSibling);const ct=(Rt,wo)=>{var Jt;const ko=new Ha(Rt,Le),Sn=wo?"next":"prev";let cn;for(;cn=ko[Sn]();)if(!Vs(Y,cn)&&!na(cn.textContent)&&0!==(null===(Jt=cn.textContent)||void 0===Jt?void 0:Jt.length))return pt.some(cn);return pt.none()};if(Ce&&zs(ke))if(na(ke.textContent))ke=ct(ke,!1).getOr(ke);else for(null!==ke.parentNode&&ji(Y,ke.parentNode)&&(ke=ke.parentNode);null!==ke.previousSibling&&(ji(Y,ke.previousSibling)||zs(ke.previousSibling));)ke=ke.previousSibling;if(!Ce&&zs(ke))if(na(ke.textContent))ke=ct(ke,!0).getOr(ke);else for(null!==ke.parentNode&&ji(Y,ke.parentNode)&&(ke=ke.parentNode);null!==ke.nextSibling&&(ji(Y,ke.nextSibling)||zs(ke.nextSibling));)ke=ke.nextSibling;for(;ke.parentNode!==Le;){const Rt=ke.parentNode;if(Nn(Y,ke)||/^(TD|TH)$/.test(Rt.nodeName))return ke;ke=Rt}return ke},er=(Y,le,Ce)=>{const Le=Y.selection.getRng();let ke="LI";const lt=Eo(Y,Y.selection.getStart(!0)),ct=Y.dom;if("false"===ct.getContentEditable(Y.selection.getNode()))return;"DL"===(le=le.toUpperCase())&&(ke="DT");const Rt=za(Le),wo=Oe(((Jt,ko,Sn)=>{const cn=[],Xn=Jt.dom,zn=jr(Jt,ko,!0,Sn),bn=jr(Jt,ko,!1,Sn);let vn;const ir=[];for(let fe=zn;fe&&(ir.push(fe),fe!==bn);fe=fe.nextSibling);return nr.each(ir,fe=>{var Qa;if(Nn(Jt,fe))return cn.push(fe),void(vn=null);if(Xn.isBlock(fe)||Dt(fe))return Dt(fe)&&Xn.remove(fe),void(vn=null);const gl=fe.nextSibling;da.isBookmarkNode(fe)&&(Nr(gl)||Nn(Jt,gl)||!gl&&fe.parentNode===Sn)?vn=null:(vn||(vn=Xn.create("p"),null===(Qa=fe.parentNode)||void 0===Qa||Qa.insertBefore(vn,fe),cn.push(vn)),vn.appendChild(fe))}),cn})(Y,Le,lt),Y.dom.isEditable);nr.each(wo,Jt=>{let ko;const Sn=Jt.previousSibling,cn=Jt.parentNode;var Xn,zn;Wo(cn)||(Sn&&Nr(Sn)&&Sn.nodeName===le&&((Xn,zn,bn)=>{const vn=Xn.getStyle(zn,"list-style-type");let ir=bn?bn["list-style-type"]:"";return ir=null===ir?"":ir,vn===ir})(ct,Sn,Ce)?(ko=Sn,Jt=ct.rename(Jt,ke),Sn.appendChild(Jt)):(ko=ct.create(le),cn.insertBefore(ko,Jt),ko.appendChild(Jt),Jt=ct.rename(Jt,ke)),Xn=ct,zn=Jt,nr.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],vn=>Xn.setStyle(zn,vn,"")),vs(ct,ko,Ce),qo(Y.dom,ko))}),Y.selection.setRng(Bo(Rt))},ra=(Y,le,Ce)=>{return lt=Ce,Nr(ke=le)&&ke.nodeName===lt?.nodeName&&((ke,lt,ct)=>ke.getStyle(lt,"list-style-type",!0)===ke.getStyle(ct,"list-style-type",!0))(Y,le,Ce)&&le.className===Ce.className;var ke,lt},qo=(Y,le)=>{let Ce,Le=le.nextSibling;if(ra(Y,le,Le)){const ke=Le;for(;Ce=ke.firstChild;)le.appendChild(Ce);Y.remove(ke)}if(Le=le.previousSibling,ra(Y,le,Le)){const ke=Le;for(;Ce=ke.lastChild;)le.insertBefore(Ce,le.firstChild);Y.remove(ke)}},xi=Y=>"list-style-type"in Y,It=(Y,le,Ce)=>{const Le=Bt(Y);if(br(Y,Le)||!Y.hasEditableRoot())return;const ke=(ct=>{const Rt=Bt(ct),wo=ct.selection.getSelectedBlocks();return ko=wo,as(Jt=Rt)&&1===ko.length&&ko[0]===Jt?(Jt=>Oe(Jt.querySelectorAll(Qe),Nr))(Rt):Oe(wo,Jt=>Nr(Jt)&&Rt!==Jt);var Jt,ko})(Y),lt=Qs(Ce)?Ce:{};ke.length>0?((ct,Rt,wo,Jt,ko)=>{const Sn=Nr(Rt);if(Sn&&Rt.nodeName===Jt&&!xi(ko))Kr(ct);else{er(ct,Jt,ko);const cn=za(ct.selection.getRng()),Xn=Sn?[Rt,...wo]:wo;nr.each(Xn,zn=>{((bn,vn,ir,fe)=>{if(vn.nodeName!==ir){const Qa=bn.dom.rename(vn,ir);vs(bn.dom,Qa,fe),Zo(bn,rl(ir),Qa)}else vs(bn.dom,vn,fe),Zo(bn,rl(ir),vn)})(ct,zn,Jt,ko)}),ct.selection.setRng(Bo(cn))}})(Y,Le,ke,le,lt):((ct,Rt,wo,Jt)=>{if(Rt!==ct.getBody())if(Rt)if(Rt.nodeName!==wo||xi(Jt)||Qn(Rt)){const ko=za(ct.selection.getRng());vs(ct.dom,Rt,Jt);const Sn=ct.dom.rename(Rt,wo);qo(ct.dom,Sn),ct.selection.setRng(Bo(ko)),er(ct,wo,Jt),Zo(ct,rl(wo),Sn)}else Kr(ct);else er(ct,wo,Jt),Zo(ct,rl(wo),Rt)})(Y,Le,le,lt)},Ts=Gn.DOM,As=(Y,le)=>{const Ce=nr.grep(Y.select("ol,ul",le));nr.each(Ce,Le=>{((ke,lt)=>{const ct=lt.parentElement;if(ct&&"LI"===ct.nodeName&&ct.firstChild===lt){const Rt=ct.previousSibling;Rt&&"LI"===Rt.nodeName?(Rt.appendChild(lt),ar(ke,ct)&&Ts.remove(ct)):Ts.setStyle(ct,"listStyleType","none")}if(Nr(ct)){const Rt=ct.previousSibling;Rt&&"LI"===Rt.nodeName&&Rt.appendChild(lt)}})(Y,Le)})},Br=(Y,le,Ce,Le)=>{let ke=le.startContainer;const lt=le.startOffset;if(zs(ke)&&(Ce?lt<ke.data.length:lt>0))return ke;const ct=Y.schema.getNonEmptyElements();Ao(ke)&&(ke=Ps.getNode(ke,lt));const Rt=new Ha(ke,Le);var Jt,ko;Ce&&(Jt=Y.dom,Dt(ko=ke)&&Jt.isBlock(ko.nextSibling)&&!Dt(ko.previousSibling))&&Rt.next();const wo=Ce?Rt.next.bind(Rt):Rt.prev2.bind(Rt);for(;ke=wo();)if("LI"===ke.nodeName&&!ke.hasChildNodes()||ct[ke.nodeName]||zs(ke)&&ke.data.length>0)return ke;return null},zc=(Y,le)=>{const Ce=le.childNodes;return 1===Ce.length&&!Nr(Ce[0])&&Y.isBlock(Ce[0])},Xl=(Y,le,Ce)=>{let Le;const ke=le.parentNode;if(!Bi(Y,le)||!Bi(Y,Ce))return;Nr(Ce.lastChild)&&(Le=Ce.lastChild),ke===Ce.lastChild&&Dt(ke.previousSibling)&&Y.remove(ke.previousSibling);const lt=Ce.lastChild;lt&&Dt(lt)&&le.hasChildNodes()&&Y.remove(lt),ar(Y,Ce,!0)&&fs(Jo(Ce)),((Rt,wo,Jt)=>{let ko;const Sn=zc(Rt,Jt)?Jt.firstChild:Jt;if(zc(cn=Rt,Xn=wo)&&cn.remove(Xn.firstChild,!0),!ar(Rt,wo,!0))for(;ko=wo.firstChild;)Sn.appendChild(ko);var cn,Xn})(Y,le,Ce),Le&&Ce.appendChild(Le);const ct=((Rt,wo)=>{const Jt=Rt.dom,ko=wo.dom;return Jt!==ko&&Jt.contains(ko)})(Jo(Ce),Jo(le))?Y.getParents(le,Nr,Ce):[];Y.remove(le),it(ct,Rt=>{ar(Y,Rt)&&Rt!==Y.getRoot()&&Y.remove(Rt)})},Sl=Y=>{const le=Y.selection.getStart(),Ce=jt(Y,le);return Y.dom.getParent(le,"LI,DT,DD",Ce)||Wt(Y).length>0},Er=(Y,le)=>{const Ce=Y.selection;return!br(Y,Ce.getNode())&&(Ce.isCollapsed()?((Y,le)=>{const Ce=Y.dom,Le=Y.selection,ke=Le.getStart(),lt=jt(Y,ke),ct=Ce.getParent(Le.getStart(),"LI",lt);if(ct){const Rt=ct.parentElement;if(Rt===Y.getBody()&&ar(Ce,Rt))return!0;const wo=Be(Le.getRng()),Jt=Ce.getParent(Br(Y,wo,le,lt),"LI",lt);if(Jt&&Jt!==ct)return Y.undoManager.transact(()=>{var ko,Sn;le?((cn,Xn,zn,bn)=>{const vn=cn.dom;if(vn.isEmpty(bn))ir=cn,fe=zn,fs(Jo(Qa=bn)),Xl(ir.dom,fe,Qa),ir.selection.setCursorLocation(Qa,0);else{const ir=za(Xn);Xl(vn,zn,bn),cn.selection.setRng(Bo(ir))}var ir,fe,Qa})(Y,wo,Jt,ct):(null===(Sn=(ko=ct).parentNode)||void 0===Sn?void 0:Sn.firstChild)===ko?Fs(Y):((cn,Xn,zn,bn)=>{const vn=za(Xn);Xl(cn.dom,zn,bn);const ir=Bo(vn);cn.selection.setRng(ir)})(Y,wo,ct,Jt)}),!0;if(!Jt&&!le&&0===wo.startOffset&&0===wo.endOffset)return Y.undoManager.transact(()=>{Kr(Y)}),!0}return!1})(Le=Y,ke=le)||((lt,ct)=>{const Rt=lt.dom,wo=lt.selection.getStart(),Jt=jt(lt,wo),ko=Rt.getParent(wo,Rt.isBlock,Jt);if(ko&&Rt.isEmpty(ko)){const Sn=Be(lt.selection.getRng()),cn=Rt.getParent(Br(lt,Sn,ct,Jt),"LI",Jt);if(cn){const Xn=bn=>Ft(["td","th","caption"],sr(bn)),zn=bn=>bn.dom===Jt;return!!((bn,vn,ir=_n)=>fr(bn,vn,ir).getOr(bn.isNone()&&vn.isNone()))(en(Jo(cn),Xn,zn),en(Jo(Sn.startContainer),Xn,zn),X)&&(lt.undoManager.transact(()=>{((bn,vn,ir)=>{const fe=bn.getParent(vn.parentNode,bn.isBlock,ir);bn.remove(vn),fe&&bn.isEmpty(fe)&&bn.remove(fe)})(Rt,ko,Jt),qo(Rt,cn.parentNode),lt.selection.select(cn,!0),lt.selection.collapse(ct)}),!0)}}return!1})(Le,ke):(Le=>!!Sl(Le)&&(Le.undoManager.transact(()=>{Le.execCommand("Delete"),As(Le.dom,Le.getBody())}),!0))(Y));var Le,ke},fc=Y=>{const le=ot(ue(Y).split("")),Ce=ne(le,(Le,ke)=>{const lt=Le.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,ke)*lt});return $n(Ce,(Le,ke)=>Le+ke,0)},Ns=Y=>{if(--Y<0)return"";{const le=Y%26,Ce=Math.floor(Y/26);return Ns(Ce)+String.fromCharCode("A".charCodeAt(0)+le)}},Ui=Y=>{const le=parseInt(Y.start,10);return qn(Y.listStyleType,"upper-alpha")?Ns(le):qn(Y.listStyleType,"lower-alpha")?Ns(le).toLowerCase():Y.start},ka=(Y,le)=>()=>{const Ce=Bt(Y);return as(Ce)&&Ce.nodeName===le},Kn=Y=>{Y.addCommand("mceListProps",()=>{(le=>{const Ce=Bt(le);Kt(Ce)&&!br(le,Ce)&&le.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ui({start:le.dom.getAttrib(Ce,"start","1"),listStyleType:pt.from(le.dom.getStyle(Ce,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Le=>{(ke=>{switch(/^[0-9]+$/.test(lt=ke)?2:/^[A-Z]+$/.test(lt)?0:/^[a-z]+$/.test(lt)?1:lt.length>0?4:3){case 2:return pt.some({listStyleType:pt.none(),start:ke});case 0:return pt.some({listStyleType:pt.some("upper-alpha"),start:fc(ke).toString()});case 1:return pt.some({listStyleType:pt.some("lower-alpha"),start:fc(ke).toString()});case 3:return pt.some({listStyleType:pt.none(),start:""});case 4:return pt.none()}var lt})(Le.getData().start).each(ke=>{le.execCommand("mceListUpdate",!1,{attrs:{start:"1"===ke.start?"":ke.start},styles:{"list-style-type":ke.listStyleType.getOr("")}})}),Le.close()}})})(Y)})};var Yl=tinymce.util.Tools.resolve("tinymce.html.Node");const Ms=Y=>3===Y.type,kl=Y=>0===Y.length,Fl=Y=>{const le=(Le,ke)=>{const lt=Yl.create("li");it(Le,ct=>lt.append(ct)),ke?Y.insert(lt,ke,!0):Y.append(lt)},Ce=$n(Y.children(),(Le,ke)=>Ms(ke)?[...Le,ke]:kl(Le)||Ms(ke)?Le:(le(Le,ke),[]),[]);kl(Ce)||le(Ce)},vr=(Y,le)=>Ce=>(Ce.setEnabled(Y.selection.isEditable()),Zs(Y,Le=>{Ce.setActive(Rn(Le.parents,le)),Ce.setEnabled(!br(Y,Le.element)&&Y.selection.isEditable())})),wa=(Y,le)=>Ce=>Zs(Y,Le=>Ce.setEnabled(Rn(Le.parents,le)&&!br(Y,Le.element)));Ca.add("lists",Y=>{return(0,Y.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0}),(le=Y).on("PreInit",()=>{const{parser:Ce}=le;Ce.addNodeFilter("ul,ol",Le=>it(Le,Fl))}),Y.hasPlugin("rtc",!0)?Kn(Y):((le=>{var Ce;Ja(le)&&(Ce=le).on("keydown",Le=>{Le.keyCode!==ks.TAB||ks.metaKeyPressed(Le)||Ce.undoManager.transact(()=>{(Le.shiftKey?Fs(Ce):rs(Ce))&&Le.preventDefault()})}),(Ce=>{Ce.on("ExecCommand",Le=>{const ke=Le.command.toLowerCase();"delete"!==ke&&"forwarddelete"!==ke||!Sl(Ce)||As(Ce.dom,Ce.getBody())}),Ce.on("keydown",Le=>{Le.keyCode===ks.BACKSPACE?Er(Ce,!1)&&Le.preventDefault():Le.keyCode===ks.DELETE&&Er(Ce,!0)&&Le.preventDefault()})})(le)})(Y),(le=>{le.on("BeforeExecCommand",Ce=>{const Le=Ce.command.toLowerCase();"indent"===Le?rs(le):"outdent"===Le&&Fs(le)}),le.addCommand("InsertUnorderedList",(Ce,Le)=>{It(le,"UL",Le)}),le.addCommand("InsertOrderedList",(Ce,Le)=>{It(le,"OL",Le)}),le.addCommand("InsertDefinitionList",(Ce,Le)=>{It(le,"DL",Le)}),le.addCommand("RemoveList",()=>{Kr(le)}),Kn(le),le.addCommand("mceListUpdate",(Ce,Le)=>{Qs(Le)&&((ke,lt)=>{const ct=Bt(ke);null===ct||br(ke,ct)||ke.undoManager.transact(()=>{Qs(lt.styles)&&ke.dom.setStyles(ct,lt.styles),Qs(lt.attrs)&&_a(lt.attrs,(Rt,wo)=>ke.dom.setAttrib(ct,wo,Rt))})})(le,Le)}),le.addQueryStateHandler("InsertUnorderedList",ka(le,"UL")),le.addQueryStateHandler("InsertOrderedList",ka(le,"OL")),le.addQueryStateHandler("InsertDefinitionList",ka(le,"DL"))})(Y)),(le=>{const Ce=Le=>()=>le.execCommand(Le);le.hasPlugin("advlist")||(le.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:Ce("InsertOrderedList"),onSetup:vr(le,"OL")}),le.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:Ce("InsertUnorderedList"),onSetup:vr(le,"UL")}))})(Y),(le=>{const Ce={text:"List properties...",icon:"ordered-list",onAction:()=>le.execCommand("mceListProps"),onSetup:wa(le,"OL")};le.ui.registry.addMenuItem("listprops",Ce),le.ui.registry.addContextMenu("lists",{update:Le=>{const ke=Bt(le,Le);return Kt(ke)?["listprops"]:[]}})})(Y),(le=>({backspaceDelete:Ce=>{Er(le,Ce)}}))(Y);var le})}(),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ss=pe=>Be=>(nt=>{const Qe=typeof nt;return null===nt?"null":"object"===Qe&&Array.isArray(nt)?"array":"object"===Qe&&(Bt=Wt=nt,(jt=String).prototype.isPrototypeOf(Bt)||(null===(Eo=Wt.constructor)||void 0===Eo?void 0:Eo.name)===jt.name)?"string":Qe;var Bt,Wt,jt,Eo})(Be)===pe,va=pe=>Be=>typeof Be===pe,ns=Ss("string"),Qs=Ss("object"),No=Ss("array"),as=va("boolean"),Ar=pe=>!(null==pe),Ya=va("function"),Is=(pe,Be)=>{if(No(pe)){for(let nt=0,Qe=pe.length;nt<Qe;++nt)if(!Be(pe[nt]))return!1;return!0}return!1},_n=()=>{},uo=(pe,Be)=>pe===Be;class ut{constructor(Be,nt){this.tag=Be,this.value=nt}static some(Be){return new ut(!0,Be)}static none(){return ut.singletonNone}fold(Be,nt){return this.tag?nt(this.value):Be()}isSome(){return this.tag}isNone(){return!this.tag}map(Be){return this.tag?ut.some(Be(this.value)):ut.none()}bind(Be){return this.tag?Be(this.value):ut.none()}exists(Be){return this.tag&&Be(this.value)}forall(Be){return!this.tag||Be(this.value)}filter(Be){return!this.tag||Be(this.value)?this:ut.none()}getOr(Be){return this.tag?this.value:Be}or(Be){return this.tag?this:Be}getOrThunk(Be){return this.tag?this.value:Be()}orThunk(Be){return this.tag?this:Be()}getOrDie(Be){if(this.tag)return this.value;throw new Error(Be??"Called getOrDie on None")}static from(Be){return Ar(Be)?ut.some(Be):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Be){this.tag&&Be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ut.singletonNone=new ut(!1);const pt=Array.prototype.indexOf,lo=Array.prototype.push,jn=pe=>{const Be=[];for(let nt=0,Qe=pe.length;nt<Qe;++nt){if(!No(pe[nt]))throw new Error("Arr.flatten item "+nt+" was not an array, input: "+pe);lo.apply(Be,pe[nt])}return Be},At=(pe,Be)=>{for(let nt=0;nt<pe.length;nt++){const Qe=Be(pe[nt],nt);if(Qe.isSome())return Qe}return ut.none()},Ft=(pe,Be,nt=uo)=>pe.exists(Qe=>nt(Qe,Be)),eo=pe=>{const Be=[],nt=Qe=>{Be.push(Qe)};for(let Qe=0;Qe<pe.length;Qe++)pe[Qe].each(nt);return Be},ne=(pe,Be)=>pe?ut.some(Be):ut.none(),it=pe=>Be=>Be.options.get(pe),Oe=it("link_assume_external_targets"),$n=it("link_context_toolbar"),yo=it("link_list"),Dr=it("link_default_target"),lr=it("link_default_protocol"),ot=it("link_target_list"),mn=it("link_rel_list"),D=it("link_class_list"),mt=it("link_title"),Ma=it("allow_unsafe_link_target"),qn=it("link_quicklink");var fr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Nt=pe=>ns(pe.value)?pe.value:"",Do=(pe,Be)=>{const nt=[];return fr.each(pe,Qe=>{const Bt=ns((Wt=Qe).text)?Wt.text:ns(Wt.title)?Wt.title:"";var Wt;if(void 0!==Qe.menu){const Wt=Do(Qe.menu,Be);nt.push({text:Bt,items:Wt})}else{const Wt=Be(Qe);nt.push({text:Bt,value:Wt})}}),nt},Jo=(pe=Nt)=>Be=>ut.from(Be).map(nt=>Do(nt,pe)),X=pe=>Jo(Nt)(pe),sr=Jo,Xe=(pe,Be)=>nt=>({name:pe,type:"listbox",label:Be,items:nt}),Tt=Nt,Po=Object.keys,Ie=Object.hasOwnProperty,To=(pe,Be)=>Ie.call(pe,Be);var Gt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ue=tinymce.util.Tools.resolve("tinymce.util.URI");const Hs=pe=>Ar(pe)&&"a"===pe.nodeName.toLowerCase(),en=pe=>Hs(pe)&&!!Jn(pe),Yt=(pe,Be)=>{if(pe.collapsed)return[];{const nt=pe.cloneContents(),Qe=nt.firstChild,Bt=new Gt(Qe,nt),Wt=[];let jt=Qe;do{Be(jt)&&Wt.push(jt)}while(jt=Bt.next());return Wt}},ts=pe=>/^\w+:/i.test(pe),Jn=pe=>{var Be,nt;return null!==(nt=null!==(Be=pe.getAttribute("data-mce-href"))&&void 0!==Be?Be:pe.getAttribute("href"))&&void 0!==nt?nt:""},fs=(pe,Be)=>{const nt=["noopener"],Qe=pe?pe.split(/\s+/):[],Bt=jt=>jt.filter(Eo=>-1===fr.inArray(nt,Eo)),Wt=Be?(jt=Bt(jt=Qe)).length>0?jt.concat(nt):nt:Bt(Qe);var jt;return Wt.length>0?(jt=>fr.trim(jt.sort().join(" ")))(Wt):""},or=(pe,Be)=>(Be=Be||ks(pe.selection.getRng())[0]||pe.selection.getNode(),is(Be)?ut.from(pe.dom.select("a[href]",Be)[0]):ut.from(pe.dom.getParent(Be,"a[href]"))),Ps=(pe,Be)=>or(pe,Be).isSome(),Ha=(pe,Be)=>Be.fold(()=>pe.getContent({format:"text"}),nt=>nt.innerText||nt.textContent||"").replace(/\uFEFF/g,""),ks=pe=>Yt(pe,en),qr=pe=>fr.grep(pe,en),Cr=pe=>qr(pe).length>0,_a=pe=>{const Be=pe.schema.getTextInlineElements();if(or(pe).exists(Qe=>Qe.hasAttribute("data-mce-block")))return!1;const nt=pe.selection.getRng();return!!nt.collapsed||0===Yt(nt,Qe=>1===Qe.nodeType&&!Hs(Qe)&&!To(Be,Qe.nodeName.toLowerCase())).length},is=pe=>Ar(pe)&&"FIGURE"===pe.nodeName&&/\bimage\b/i.test(pe.className),Pn=(pe,Be,nt)=>{const Qe=((Bt,Wt)=>{const jt=Bt.options.get,Eo={allow_html_data_urls:jt("allow_html_data_urls"),allow_script_urls:jt("allow_script_urls"),allow_svg_data_urls:jt("allow_svg_data_urls")},ho=Wt.href;return{...Wt,href:Ue.isDomSafe(ho,"a",Eo)?ho:""}})(pe,nt);pe.hasPlugin("rtc",!0)?pe.execCommand("createlink",!1,(pe=>{const{class:Be,href:nt,rel:Qe,target:Bt,text:Wt,title:jt}=pe;return((Eo,ho)=>{const Fn={};var Qn,br,Zs;return Qn=Fn,br=(Rn,fn)=>{Qn[fn]=Rn},Zs=_n,((Zo,ue)=>{const _e=Po(Zo);for(let We=0,yt=_e.length;We<yt;We++){const ft=_e[We];ue(Zo[ft],ft)}})(Eo,(Zo,ue)=>{(!1===(pe=>null===pe)(Zo)?br:Zs)(Zo,ue)}),Fn})({class:Be.getOrNull(),href:nt,rel:Qe.getOrNull(),target:Bt.getOrNull(),text:Wt.getOrNull(),title:jt.getOrNull()})})(Qe)):((pe,Be,nt)=>{const Qe=pe.selection.getNode(),Bt=or(pe,Qe),Wt=((jt,Eo)=>{const ho={...Eo};if(0===mn(jt).length&&!Ma(jt)){const Fn=fs(ho.rel,"_blank"===ho.target);ho.rel=Fn||null}return ut.from(ho.target).isNone()&&!1===ot(jt)&&(ho.target=Dr(jt)),ho.href=(Fn=ho.href,"http"!==(Qn=Oe(jt))&&"https"!==Qn||ts(Fn)?Fn:Qn+"://"+Fn),ho;var Fn,Qn})(pe,(ho=(Qn,Rn)=>(jt[Rn].each(fn=>{Qn[Rn]=fn.length>0?fn:null}),Qn),Fn={href:(jt=nt).href},((Qn,Rn)=>{for(let fn=0,br=Qn.length;fn<br;fn++)Rn(Qn[fn])})(["title","rel","class","target"],(Qn,Rn)=>{Fn=ho(Fn,Qn)}),Fn));var jt,ho,Fn;pe.undoManager.transact(()=>{nt.href===Be.href&&Be.attach(),Bt.fold(()=>{((jt,Eo,ho,Fn)=>{const Qn=jt.dom;is(Eo)?Di(Qn,Eo,Fn):ho.fold(()=>{jt.execCommand("mceInsertLink",!1,Fn)},Rn=>{jt.insertContent(Qn.createHTML("a",Fn,Qn.encode(Rn)))})})(pe,Qe,nt.text,Wt)},jt=>{pe.focus(),((Eo,ho,Fn,Qn)=>{Fn.each(Rn=>{To(ho,"innerText")?ho.innerText=Rn:ho.textContent=Rn}),Eo.dom.setAttribs(ho,Qn),Eo.selection.select(ho)})(pe,jt,nt.text,Wt)})})})(pe,Be,Qe)},Gn=pe=>{var Be;pe.hasPlugin("rtc",!0)?pe.execCommand("unlink"):(Be=pe).undoManager.transact(()=>{const nt=Be.selection.getNode();is(nt)?nr(Be,nt):(Qe=>{const Bt=Qe.dom,Wt=Qe.selection,jt=Wt.getBookmark(),Eo=Wt.getRng().cloneRange(),ho=Bt.getParent(Eo.startContainer,"a[href]",Qe.getBody()),Fn=Bt.getParent(Eo.endContainer,"a[href]",Qe.getBody());ho&&Eo.setStartBefore(ho),Fn&&Eo.setEndAfter(Fn),Wt.setRng(Eo),Qe.execCommand("unlink"),Wt.moveToBookmark(jt)})(Be),Be.focus()})},nr=(pe,Be)=>{var nt;const Qe=pe.dom.select("img",Be)[0];if(Qe){const Bt=pe.dom.getParents(Qe,"a[href]",Be)[0];Bt&&(null===(nt=Bt.parentNode)||void 0===nt||nt.insertBefore(Qe,Bt),pe.dom.remove(Bt))}},Di=(pe,Be,nt)=>{var Qe;const Bt=pe.select("img",Be)[0];if(Bt){const Wt=pe.create("a",nt);null===(Qe=Bt.parentNode)||void 0===Qe||Qe.insertBefore(Wt,Bt),Wt.appendChild(Bt)}},Sr=(pe,Be)=>At(Be,nt=>{return To(Bt=nt,"items")&&null!=Bt.items?Sr(pe,nt.items):ne(nt.value===pe,nt);var Bt});var Ao=tinymce.util.Tools.resolve("tinymce.util.Delay");const Nr=pe=>{const Be=pe.href;return Be.indexOf("@")>0&&-1===Be.indexOf("/")&&-1===Be.indexOf("mailto:")?ut.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:nt=>({...nt,href:"mailto:"+Be})}):ut.none()},ls=(pe,Be)=>nt=>{const Qe=nt.href;return 1===pe&&!ts(Qe)||0===pe&&/^\s*www(\.|\d\.)/i.test(Qe)?ut.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Be}:// prefix?`,preprocess:Bt=>({...Bt,href:Be+"://"+Qe})}):ut.none()},Kt=pe=>{const Be=pe.dom.select("a:not([href])"),nt=jn(((Qe,Bt)=>{const Wt=Qe.length,jt=new Array(Wt);for(let Eo=0;Eo<Wt;Eo++)jt[Eo]=Bt(Qe[Eo]);return jt})(Be,Qe=>{const Bt=Qe.name||Qe.id;return Bt?[{text:Bt,value:"#"+Bt}]:[]}));return nt.length>0?ut.some([{text:"None",value:""}].concat(nt)):ut.none()},Wo=pe=>{const Be=D(pe);return Be.length>0?X(Be):ut.none()},bs=pe=>{try{return ut.some(JSON.parse(pe))}catch{return ut.none()}},cs=(pe,Be)=>{const nt=mn(pe);if(nt.length>0){const Qe=Ft(Be,"_blank"),Bt=Wt=>fs(Tt(Wt),Qe);return(!1===Ma(pe)?sr(Bt):X)(nt)}return ut.none()},Dt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Nn=pe=>{const Be=ot(pe);return No(Be)?X(Be).orThunk(()=>ut.some(Dt)):!1===Be?ut.none():ut.some(Dt)},Vo=(pe,Be,nt)=>{const Qe=pe.getAttrib(Be,nt);return null!==Qe&&Qe.length>0?ut.some(Qe):ut.none()},ar=pe=>{var nt;(nt=pe,((pe,Be)=>(nt=>{const Qe=Wt=>nt.convertURL(Wt.value||Wt.url||"","href"),Bt=yo(nt);return new Promise(Wt=>{ns(Bt)?fetch(Bt).then(jt=>jt.ok?jt.text().then(bs):Promise.reject()).then(Wt,()=>Wt(ut.none())):Ya(Bt)?Bt(jt=>Wt(ut.some(jt))):Wt(ut.from(Bt))}).then(Wt=>Wt.bind(sr(Qe)).map(jt=>jt.length>0?[{text:"None",value:""}].concat(jt):jt))})(pe).then(nt=>{const Qe=((Bt,Wt)=>{const jt=Bt.dom,Eo=_a(Bt)?ut.some(Ha(Bt.selection,Wt)):ut.none(),ho=Wt.bind(fn=>ut.from(jt.getAttrib(fn,"href"))),Fn=Wt.bind(fn=>ut.from(jt.getAttrib(fn,"target"))),Qn=Wt.bind(fn=>Vo(jt,fn,"rel")),Rn=Wt.bind(fn=>Vo(jt,fn,"class"));return{url:ho,text:Eo,title:Wt.bind(fn=>Vo(jt,fn,"title")),target:Fn,rel:Qn,linkClass:Rn}})(pe,Be);return{anchor:Qe,catalogs:{targets:Nn(pe),rels:cs(pe,Qe.target),classes:Wo(pe),anchor:Kt(pe),link:nt},optNode:Be,flags:{titleEnabled:mt(pe)}}}))(nt,or(nt))).then(nt=>{var Bt,Wt;return((Bt,Wt,jt)=>{const Eo=Bt.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),ho=Bt.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Fn=((fn,br)=>{const Zs=fn.anchor,Zo=Zs.url.getOr("");return{url:{value:Zo,meta:{original:{value:Zo}}},text:Zs.text.getOr(""),title:Zs.title.getOr(""),anchor:Zo,link:Zo,rel:Zs.rel.getOr(""),target:Zs.target.or(br).getOr(""),linkClass:Zs.linkClass.getOr("")}})(Bt,ut.from(Dr(jt))),Qn=Bt.catalogs,Rn=((pe,Be)=>{const nt={text:pe.text,title:pe.title};return{onChange:(Bt,Wt)=>{const jt=Wt.name;return"url"===jt?(Eo=>{const ho=ne(nt.text.length<=0,ut.from(null===(Qn=(Fn=Eo.url).meta)||void 0===Qn?void 0:Qn.text).getOr(Fn.value));var Fn,Qn;const Rn=ne(nt.title.length<=0,ut.from(null===(br=Eo.url.meta)||void 0===br?void 0:br.title).getOr(""));var br;return ho.isSome()||Rn.isSome()?ut.some({...ho.map(fn=>({text:fn})).getOr({}),...Rn.map(fn=>({title:fn})).getOr({})}):ut.none()})(Bt()):pt.call(["anchor","link"],jt)>-1?((Bt,Wt)=>{const jt=(Eo=Be,ho=Wt,"link"===ho?Eo.link:"anchor"===ho?Eo.anchor:ut.none()).getOr([]);var Eo,ho;return((Fn,Qn,Rn,fn)=>{const br=fn[Qn],Zs=Fn.length>0;return void 0!==br?Sr(br,Rn).map(Zo=>({url:{value:Zo.value,meta:{text:Zs?Fn:Zo.text,attach:_n}},text:Zs?Fn:Zo.text})):ut.none()})(nt.text,Wt,jt,Bt)})(Bt(),jt):(("text"===jt||"title"===jt)&&(nt[jt]=Bt()[jt]),ut.none())}}})(Fn,Qn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:jn([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Eo,ho,eo([Qn.anchor.map(Xe("anchor","Anchors")),Qn.rels.map(Xe("rel","Rel")),Qn.targets.map(Xe("target","Open link in...")),Qn.link.map(Xe("link","Link list")),Qn.classes.map(Xe("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Fn,onChange:(fn,{name:br})=>{Rn.onChange(fn.getData,{name:br}).each(Zs=>{fn.setData(Zs)})},onSubmit:Wt}})(nt,(Bt=pe,Wt=nt,jt=>{const Eo=jt.getData();if(!Eo.url.value)return Gn(Bt),void jt.close();const ho=Rn=>ut.from(Eo[Rn]).filter(fn=>!Ft(Wt.anchor[Rn],fn)),Fn={href:Eo.url.value,text:ho("text"),target:ho("target"),rel:ho("rel"),class:ho("linkClass"),title:ho("title")},Qn={href:Eo.url.value,attach:void 0!==Eo.url.meta&&Eo.url.meta.attach?Eo.url.meta.attach:_n};var Rn,fn;(Rn=Bt,fn=Fn,At([Nr,ls(Oe(Rn),lr(Rn))],br=>br(fn)).fold(()=>Promise.resolve(fn),br=>new Promise(Zs=>{((Zo,ue,_e)=>{const We=Zo.selection.getRng();Ao.setEditorTimeout(Zo,()=>{Zo.windowManager.confirm(ue,yt=>{Zo.selection.setRng(We),(Zo=>{Zs(Zo?br.preprocess(fn):fn)})(yt)})})})(Rn,br.message)}))).then(Rn=>{Pn(Bt,Qn,Rn)}),jt.close()}),pe)}).then(nt=>{pe.windowManager.open(nt)})};var Bi=tinymce.util.Tools.resolve("tinymce.util.VK");const Es=(pe,Be)=>pe.dom.getParent(Be,"a[href]"),Ja=pe=>Es(pe,pe.selection.getStart()),si=(pe,Be)=>{if(Be){const nt=Jn(Be);if(/^#/.test(nt)){const Qe=pe.dom.select(nt);Qe.length&&pe.selection.scrollIntoView(Qe[0],!0)}else(Qe=>{const Bt=document.createElement("a");Bt.target="_blank",Bt.href=Qe,Bt.rel="noreferrer noopener";const Wt=document.createEvent("MouseEvents");var jt,Eo;Wt.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),jt=Bt,Eo=Wt,document.body.appendChild(jt),jt.dispatchEvent(Eo),document.body.removeChild(jt)})(Be.href)}},Sa=pe=>()=>{pe.execCommand("mceLink",!1,{dialog:!0})},ai=pe=>()=>{si(pe,Ja(pe))},ta=(pe,Be)=>(pe.on("NodeChange",Be),()=>pe.off("NodeChange",Be)),ya=pe=>Be=>{const nt=()=>{Be.setActive(!pe.mode.isReadOnly()&&Ps(pe,pe.selection.getNode())),Be.setEnabled(pe.selection.isEditable())};return nt(),ta(pe,nt)},Pa=pe=>Be=>{const nt=()=>{Be.setEnabled(pe.selection.isEditable())};return nt(),ta(pe,nt)},Os=pe=>Be=>{const nt=()=>{return Be.setEnabled(1===((Qe=pe).selection.isCollapsed()?qr(Qe.dom.getParents(Qe.selection.getStart())):ks(Qe.selection.getRng())).length);var Qe};return nt(),ta(pe,nt)},Fa=pe=>Be=>{const nt=pe.dom.getParents(pe.selection.getStart()),Qe=Bt=>{var jt;Be.setEnabled((Cr(Bt)||(jt=pe.selection.getRng(),ks(jt).length>0))&&pe.selection.isEditable())};return Qe(nt),ta(pe,Bt=>Qe(Bt.parents))};Ca.add("link",pe=>{var Be;(Be=>{const nt=Be.options.register;nt("link_assume_external_targets",{processor:Qe=>{const Bt=ns(Qe)||as(Qe);return Bt?!0===Qe?{value:1,valid:Bt}:"http"===Qe||"https"===Qe?{value:Qe,valid:Bt}:{value:0,valid:Bt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),nt("link_context_toolbar",{processor:"boolean",default:!1}),nt("link_list",{processor:Qe=>ns(Qe)||Ya(Qe)||Is(Qe,Qs)}),nt("link_default_target",{processor:"string"}),nt("link_default_protocol",{processor:"string",default:"https"}),nt("link_target_list",{processor:Qe=>as(Qe)||Is(Qe,Qs),default:!0}),nt("link_rel_list",{processor:"object[]",default:[]}),nt("link_class_list",{processor:"object[]",default:[]}),nt("link_title",{processor:"boolean",default:!0}),nt("allow_unsafe_link_target",{processor:"boolean",default:!1}),nt("link_quicklink",{processor:"boolean",default:!1})})(pe),(Be=pe).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Sa(Be),onSetup:ya(Be)}),Be.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ai(Be),onSetup:Os(Be)}),Be.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Gn(Be),onSetup:Fa(Be)}),(Be=>{Be.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ai(Be),onSetup:Os(Be)}),Be.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Pa(Be),onAction:Sa(Be)}),Be.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Gn(Be),onSetup:Fa(Be)})})(pe),(Be=>{Be.ui.registry.addContextMenu("link",{update:nt=>Be.dom.isEditable(nt)?Cr(Be.dom.getParents(nt,"a"))?"link unlink openlink":"link":""})})(pe),(Be=>{const nt=Qe=>{const Bt=Be.selection.getNode();return Qe.setEnabled(Ps(Be,Bt)),_n};Be.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ya(Be)},label:"Link",predicate:Qe=>$n(Be)&&Ps(Be,Qe),initValue:()=>or(Be).fold(()=>"",Jn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Qe=>{const Bt=Be.selection.getNode();return Qe.setActive(Ps(Be,Bt)),ya(Be)(Qe)},onAction:Qe=>{const Bt=Qe.getValue(),Wt=(jt=>{const Eo=or(Be),ho=_a(Be);if(Eo.isNone()&&ho){const Fn=Ha(Be.selection,Eo);return ne(0===Fn.length,jt)}return ut.none()})(Bt);Pn(Be,{href:Bt,attach:_n},{href:Bt,text:Wt,title:ut.none(),rel:ut.none(),target:ut.none(),class:ut.none()}),Be.selection.collapse(!1),Qe.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:nt,onAction:Qe=>{Gn(Be),Qe.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:nt,onAction:Qe=>{ai(Be)(),Qe.hide()}}]})})(pe),(Be=>{Be.on("click",nt=>{const Qe=Es(Be,nt.target);Qe&&Bi.metaKeyPressed(nt)&&(nt.preventDefault(),si(Be,Qe))}),Be.on("keydown",nt=>{if(!nt.isDefaultPrevented()&&13===nt.keyCode&&!0===(Qe=nt).altKey&&!1===Qe.shiftKey&&!1===Qe.ctrlKey&&!1===Qe.metaKey){const Qe=Ja(Be);Qe&&(nt.preventDefault(),si(Be,Qe))}var Qe})})(pe),(Be=>{Be.addCommand("mceLink",(nt,Qe)=>{!0!==Qe?.dialog&&qn(Be)?Be.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):ar(Be)})})(pe),(Be=>{Be.addShortcut("Meta+K","",()=>{Be.execCommand("mceLink")})})(pe)})}(),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ss=Object.getPrototypeOf,va=(ue,_e,We)=>{var yt;return!!We(ue,_e.prototype)||(null===(yt=ue.constructor)||void 0===yt?void 0:yt.name)===_e.name},ns=ue=>_e=>(We=>{const yt=typeof We;return null===We?"null":"object"===yt&&Array.isArray(We)?"array":"object"===yt&&va(We,String,(ft,Lt)=>Lt.isPrototypeOf(ft))?"string":yt})(_e)===ue,Qs=ue=>_e=>typeof _e===ue,No=ns("string"),ps=ns("object"),as=ue=>{return _e=ue,We=Object,ps(_e)&&va(_e,We,(yt,ft)=>Ss(yt)===ft);var _e,We},Ar=ns("array"),Is=Qs("boolean"),_n=ue=>!(null==ue),uo=Qs("function"),ut=Qs("number"),pt=()=>{};class lo{constructor(_e,We){this.tag=_e,this.value=We}static some(_e){return new lo(!0,_e)}static none(){return lo.singletonNone}fold(_e,We){return this.tag?We(this.value):_e()}isSome(){return this.tag}isNone(){return!this.tag}map(_e){return this.tag?lo.some(_e(this.value)):lo.none()}bind(_e){return this.tag?_e(this.value):lo.none()}exists(_e){return this.tag&&_e(this.value)}forall(_e){return!this.tag||_e(this.value)}filter(_e){return!this.tag||_e(this.value)?this:lo.none()}getOr(_e){return this.tag?this.value:_e}or(_e){return this.tag?this:_e}getOrThunk(_e){return this.tag?this.value:_e()}orThunk(_e){return this.tag?this:_e()}getOrDie(_e){if(this.tag)return this.value;throw new Error(_e??"Called getOrDie on None")}static from(_e){return _n(_e)?lo.some(_e):lo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_e){this.tag&&_e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}lo.singletonNone=new lo(!1);const jn=Object.keys,At=Object.hasOwnProperty,Ft=(ue,_e)=>At.call(ue,_e),eo=Array.prototype.push,ne=ue=>{const _e=[];for(let We=0,yt=ue.length;We<yt;++We){if(!Ar(ue[We]))throw new Error("Arr.flatten item "+We+" was not an array, input: "+ue);eo.apply(_e,ue[We])}return _e};typeof window<"u"||Function("return this;")();const it=(ue,_e,We)=>{((yt,ft,Lt)=>{if(!(No(Lt)||Is(Lt)||ut(Lt)))throw console.error("Invalid call to Attribute.set. Key ",ft,":: Value ",Lt,":: Element ",yt),new Error("Attribute value was not simple");yt.setAttribute(ft,Lt+"")})(ue.dom,_e,We)},$n=ue=>{if(null==ue)throw new Error("Node cannot be null or undefined");return{dom:ue}};var yo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Dr=tinymce.util.Tools.resolve("tinymce.util.URI");const lr=ue=>ue.length>0,ot=ue=>_e=>_e.options.get(ue),mn=ot("image_dimensions"),D=ot("image_advtab"),mt=ot("image_uploadtab"),Ma=ot("image_prepend_url"),qn=ot("image_class_list"),fr=ot("image_description"),Nt=ot("image_title"),Do=ot("image_caption"),Jo=ot("image_list"),X=ot("a11y_advanced_options"),sr=ot("automatic_uploads"),Xe=(ue,_e)=>Math.max(parseInt(ue,10),parseInt(_e,10)),Tt=ue=>(ue&&(ue=ue.replace(/px$/,"")),ue),Po=ue=>(ue.length>0&&/^[0-9]+$/.test(ue)&&(ue+="px"),ue),Ie=ue=>"IMG"===ue.nodeName&&(ue.hasAttribute("data-mce-object")||ue.hasAttribute("data-mce-placeholder")),To=(ue,_e)=>{const We=ue.options.get;return Dr.isDomSafe(_e,"img",{allow_html_data_urls:We("allow_html_data_urls"),allow_script_urls:We("allow_script_urls"),allow_svg_data_urls:We("allow_svg_data_urls")})},Gt=yo.DOM,Ue=ue=>ue.style.marginLeft&&ue.style.marginRight&&ue.style.marginLeft===ue.style.marginRight?Tt(ue.style.marginLeft):"",Hs=ue=>ue.style.marginTop&&ue.style.marginBottom&&ue.style.marginTop===ue.style.marginBottom?Tt(ue.style.marginTop):"",en=ue=>ue.style.borderWidth?Tt(ue.style.borderWidth):"",Yt=(ue,_e)=>{var We;return ue.hasAttribute(_e)&&null!==(We=ue.getAttribute(_e))&&void 0!==We?We:""},ts=ue=>null!==ue.parentNode&&"FIGURE"===ue.parentNode.nodeName,Jn=(ue,_e,We)=>{""===We||null===We?ue.removeAttribute(_e):ue.setAttribute(_e,We)},fs=(ue,_e)=>{const We=ue.getAttribute("style"),yt=_e(null!==We?We:"");yt.length>0?(ue.setAttribute("style",yt),ue.setAttribute("data-mce-style",yt)):ue.removeAttribute("style")},or=(ue,_e)=>(We,yt,ft)=>{const Lt=We.style;Lt[yt]?(Lt[yt]=Po(ft),fs(We,_e)):Jn(We,yt,ft)},Ps=(ue,_e)=>ue.style[_e]?Tt(ue.style[_e]):Yt(ue,_e),Ha=(ue,_e)=>{const We=Po(_e);ue.style.marginLeft=We,ue.style.marginRight=We},ks=(ue,_e)=>{const We=Po(_e);ue.style.marginTop=We,ue.style.marginBottom=We},qr=(ue,_e)=>{const We=Po(_e);ue.style.borderWidth=We},Cr=(ue,_e)=>{ue.style.borderStyle=_e},_a=ue=>{var _e;return null!==(_e=ue.style.borderStyle)&&void 0!==_e?_e:""},is=ue=>_n(ue)&&"FIGURE"===ue.nodeName,_r=ue=>0===Gt.getAttrib(ue,"alt").length&&"presentation"===Gt.getAttrib(ue,"role"),Zi=ue=>_r(ue)?"":Yt(ue,"alt"),Pn=(ue,_e)=>{var We;const yt=document.createElement("img");return Jn(yt,"style",_e.style),(Ue(yt)||""!==_e.hspace)&&Ha(yt,_e.hspace),(Hs(yt)||""!==_e.vspace)&&ks(yt,_e.vspace),(en(yt)||""!==_e.border)&&qr(yt,_e.border),(_a(yt)||""!==_e.borderStyle)&&Cr(yt,_e.borderStyle),ue(null!==(We=yt.getAttribute("style"))&&void 0!==We?We:"")},Gn=(ue,_e)=>({src:Yt(_e,"src"),alt:Zi(_e),title:Yt(_e,"title"),width:Ps(_e,"width"),height:Ps(_e,"height"),class:Yt(_e,"class"),style:ue(Yt(_e,"style")),caption:ts(_e),hspace:Ue(_e),vspace:Hs(_e),border:en(_e),borderStyle:_a(_e),isDecorative:_r(_e)}),nr=(ue,_e,We,yt,ft)=>{We[yt]!==_e[yt]&&ft(ue,yt,String(We[yt]))},Di=(ue,_e,We)=>{if(We){Gt.setAttrib(ue,"role","presentation");const yt=$n(ue);it(yt,"alt","")}else{if((ue=>null===ue)(_e))$n(ue).dom.removeAttribute("alt");else{const yt=$n(ue);it(yt,"alt",_e)}"presentation"===Gt.getAttrib(ue,"role")&&Gt.setAttrib(ue,"role","")}},Sr=(ue,_e)=>(We,yt,ft)=>{ue(We,ft),fs(We,_e)},zs=(ue,_e,We)=>{const yt=Gn(ue,We);var Lt,Fo;nr(We,yt,_e,"caption",(ft,Lt,Fo)=>{var So;ts(So=ft)?(tn=>{const Dn=tn.parentNode;_n(Dn)&&(Gt.insertAfter(tn,Dn),Gt.remove(Dn))})(So):(tn=>{const Dn=Gt.create("figure",{class:"image"});Gt.insertAfter(Dn,tn),Dn.appendChild(tn),Dn.appendChild(Gt.create("figcaption",{contentEditable:"true"},"Caption")),Dn.contentEditable="false"})(So)}),nr(We,yt,_e,"src",Jn),nr(We,yt,_e,"title",Jn),nr(We,yt,_e,"width",or(0,ue)),nr(We,yt,_e,"height",or(0,ue)),nr(We,yt,_e,"class",Jn),nr(We,yt,_e,"style",Sr((ft,Lt)=>Jn(ft,"style",Lt),ue)),nr(We,yt,_e,"hspace",Sr(Ha,ue)),nr(We,yt,_e,"vspace",Sr(ks,ue)),nr(We,yt,_e,"border",Sr(qr,ue)),nr(We,yt,_e,"borderStyle",Sr(Cr,ue)),(Fo=_e).alt===(Lt=yt).alt&&Fo.isDecorative===Lt.isDecorative||Di(We,Fo.alt,Fo.isDecorative)},Ao=(ue,_e)=>{const We=(ft=>{if(ft.margin){const Lt=String(ft.margin).split(" ");switch(Lt.length){case 1:ft["margin-top"]=ft["margin-top"]||Lt[0],ft["margin-right"]=ft["margin-right"]||Lt[0],ft["margin-bottom"]=ft["margin-bottom"]||Lt[0],ft["margin-left"]=ft["margin-left"]||Lt[0];break;case 2:ft["margin-top"]=ft["margin-top"]||Lt[0],ft["margin-right"]=ft["margin-right"]||Lt[1],ft["margin-bottom"]=ft["margin-bottom"]||Lt[0],ft["margin-left"]=ft["margin-left"]||Lt[1];break;case 3:ft["margin-top"]=ft["margin-top"]||Lt[0],ft["margin-right"]=ft["margin-right"]||Lt[1],ft["margin-bottom"]=ft["margin-bottom"]||Lt[2],ft["margin-left"]=ft["margin-left"]||Lt[1];break;case 4:ft["margin-top"]=ft["margin-top"]||Lt[0],ft["margin-right"]=ft["margin-right"]||Lt[1],ft["margin-bottom"]=ft["margin-bottom"]||Lt[2],ft["margin-left"]=ft["margin-left"]||Lt[3]}delete ft.margin}return ft})(ue.dom.styles.parse(_e)),yt=ue.dom.styles.parse(ue.dom.styles.serialize(We));return ue.dom.styles.serialize(yt)},Nr=ue=>{const _e=ue.selection.getNode(),We=ue.dom.getParent(_e,"figure.image");return We?ue.dom.select("img",We)[0]:_e&&("IMG"!==_e.nodeName||Ie(_e))?null:_e},ls=(ue,_e)=>{var We;const yt=ue.dom,ft=((Fo,So)=>{const tn={};var Dn,kr,oa;return Dn=tn,kr=(rr,ln)=>{Dn[ln]=rr},oa=pt,((ca,ii)=>{const Gr=jn(ca);for(let rs=0,Fs=Gr.length;rs<Fs;rs++){const Kr=Gr[rs];ii(ca[Kr],Kr)}})(Fo,(ca,ii)=>{(ue.schema.isValidChild(ii,"figure")?oa:kr)(ca,ii)}),tn})(ue.schema.getTextBlockElements()),Lt=yt.getParent(_e.parentNode,Fo=>{return Ft(So=ft,tn=Fo.nodeName)&&null!=So[tn];var So,tn},ue.getBody());return Lt&&null!==(We=yt.split(Lt,_e))&&void 0!==We?We:_e},bs=(cs=(ue,_e)=>as(ue)&&as(_e)?bs(ue,_e):_e,(...ue)=>{if(0===ue.length)throw new Error("Can't merge zero objects");const _e={};for(let We=0;We<ue.length;We++){const yt=ue[We];for(const ft in yt)Ft(yt,ft)&&(_e[ft]=cs(_e[ft],yt[ft]))}return _e});var cs,Dt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Nn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Vo=ue=>No(ue.value)?ue.value:"",Vs=(ue,_e)=>{const We=[];return Nn.each(ue,yt=>{const ft=No((Lt=yt).text)?Lt.text:No(Lt.title)?Lt.title:"";var Lt;if(void 0!==yt.menu){const Lt=Vs(yt.menu,_e);We.push({text:ft,items:Lt})}else{const Lt=_e(yt);We.push({text:ft,value:Lt})}}),We},ar=(ue=Vo)=>_e=>_e?lo.from(_e).map(We=>Vs(We,ue)):lo.none(),Bi=(ue,_e)=>((We,yt)=>{for(let Lt=0;Lt<We.length;Lt++){const Fo=(So=ft=We[Lt],Ft(So,"items")?Bi(ft.items,_e):ft.value===_e?lo.some(ft):lo.none());if(Fo.isSome())return Fo}var So,ft;return lo.none()})(ue),Es=ar,Ja=(ue,_e)=>ue.bind(We=>Bi(We,_e)),Sa=ue=>{const _e=ue.imageList.map(Lt=>({name:"images",type:"listbox",label:"Image list",items:Lt})),We={name:"alt",type:"input",label:"Alternative description",enabled:!(ue.hasAccessibilityOptions&&ue.image.isDecorative)},yt=ue.classList.map(Lt=>({name:"classes",type:"listbox",label:"Class",items:Lt}));return ne([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],_e.toArray(),ue.hasAccessibilityOptions&&ue.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],ue.hasDescription?[We]:[],ue.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],ue.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(ft=ue.classList.isSome()&&ue.hasImageCaption,ft?{type:"grid",columns:2}:{type:"panel"}),items:ne([yt.toArray(),ue.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var ft},ai=ue=>({title:"General",name:"general",items:Sa(ue)}),ta=Sa,ya=ue=>({src:{value:ue.src,meta:{}},images:ue.src,alt:ue.alt,title:ue.title,dimensions:{width:ue.width,height:ue.height},classes:ue.class,caption:ue.caption,style:ue.style,vspace:ue.vspace,border:ue.border,hspace:ue.hspace,borderstyle:ue.borderStyle,fileinput:[],isDecorative:ue.isDecorative}),Pa=(ue,_e)=>({src:ue.src.value,alt:null!==ue.alt&&0!==ue.alt.length||!_e?ue.alt:null,title:ue.title,width:ue.dimensions.width,height:ue.dimensions.height,class:ue.classes,style:ue.style,caption:ue.caption,hspace:ue.hspace,vspace:ue.vspace,border:ue.border,borderStyle:ue.borderstyle,isDecorative:ue.isDecorative}),Os=(ue,_e,We,yt)=>{((ft,Lt)=>{const Fo=Lt.getData();var So,tn;(So=ft,tn=Fo.src.value,/^(?:[a-zA-Z]+:)?\/\//.test(tn)?lo.none():So.prependURL.bind(Dn=>tn.substring(0,Dn.length)!==Dn?lo.some(Dn+tn):lo.none())).each(So=>{Lt.setData({src:{value:So,meta:Fo.src.meta}})})})(_e,yt),((ft,Lt)=>{const Fo=Lt.getData(),So=Fo.src.meta;if(void 0!==So){const tn=bs({},Fo);rr=tn,ln=So,(Dn=ft).hasDescription&&No(ln.alt)&&(rr.alt=ln.alt),Dn.hasAccessibilityOptions&&(rr.isDecorative=ln.isDecorative||rr.isDecorative||!1),Dn.hasImageTitle&&No(ln.title)&&(rr.title=ln.title),Dn.hasDimensions&&(No(ln.width)&&(rr.dimensions.width=ln.width),No(ln.height)&&(rr.dimensions.height=ln.height)),No(ln.class)&&Ja(Dn.classList,ln.class).each(kr=>{rr.classes=kr.value}),Dn.hasImageCaption&&Is(ln.caption)&&(rr.caption=ln.caption),Dn.hasAdvTab&&(No(ln.style)&&(rr.style=ln.style),No(ln.vspace)&&(rr.vspace=ln.vspace),No(ln.border)&&(rr.border=ln.border),No(ln.hspace)&&(rr.hspace=ln.hspace),No(ln.borderstyle)&&(rr.borderstyle=ln.borderstyle)),Lt.setData(tn)}var Dn,rr,ln})(_e,yt),((ft,Lt,Fo,So)=>{const tn=So.getData(),Dn=tn.src.value,rr=tn.src.meta||{};rr.width||rr.height||!Lt.hasDimensions||(lr(Dn)?ft.imageSize(Dn).then(ln=>{Fo.open&&So.setData({dimensions:ln})}).catch(ln=>console.error(ln)):So.setData({dimensions:{width:"",height:""}}))})(ue,_e,We,yt),((ft,Lt,Fo)=>{const So=Fo.getData(),tn=Ja(ft.imageList,So.src.value);Lt.prevImage=tn,Fo.setData({images:tn.map(Dn=>Dn.value).getOr("")})})(_e,We,yt)},pe=(ue,_e,We)=>(yt,ft)=>{"src"===ft.name?Os(ue,_e,We,yt):"images"===ft.name?((Lt,Fo,So,tn)=>{const Dn=tn.getData(),rr=Ja(Fo.imageList,Dn.images);rr.each(ln=>{""===Dn.alt||So.prevImage.map(oa=>oa.text===Dn.alt).getOr(!1)?tn.setData(""===ln.value?{src:ln,alt:So.prevAlt}:{src:ln,alt:ln.text}):tn.setData({src:ln})}),So.prevImage=rr,Os(Lt,Fo,So,tn)})(ue,_e,We,yt):"alt"===ft.name?We.prevAlt=yt.getData().alt:"fileinput"===ft.name?((ue,_e,We,yt)=>{const ft=yt.getData();var Lt,Fo;yt.block("Uploading image"),(Lt=ft.fileinput,Fo=Lt,0<Fo.length?lo.some(Fo[0]):lo.none()).fold(()=>{yt.unblock()},Fo=>{const So=URL.createObjectURL(Fo),tn=()=>{yt.unblock(),URL.revokeObjectURL(So)},Dn=ln=>{yt.setData({src:{value:ln,meta:{}}}),yt.showTab("general"),Os(ue,_e,We,yt)};var rr;(rr=Fo,new Promise((ln,kr)=>{const oa=new FileReader;oa.onload=()=>{ln(oa.result)},oa.onerror=()=>{var ca;kr(null===(ca=oa.error)||void 0===ca?void 0:ca.message)},oa.readAsDataURL(rr)})).then(ln=>{const kr=ue.createBlobCache(Fo,So,ln);_e.automaticUploads?ue.uploadImage(kr).then(oa=>{Dn(oa.url),tn()}).catch(oa=>{tn(),ue.alertErr(oa)}):(ue.addToBlobCache(kr),Dn(kr.blobUri()),yt.unblock())})})})(ue,_e,We,yt):"isDecorative"===ft.name&&yt.setEnabled("alt",!yt.getData().isDecorative)},Be=ue=>()=>{ue.open=!1},nt=ue=>ue.hasAdvTab||ue.hasUploadUrl||ue.hasUploadHandler?{type:"tabpanel",tabs:ne([[ai(ue)],ue.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],ue.hasUploadTab&&(ue.hasUploadUrl||ue.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:ta(ue)},Qe=(ue,_e,We)=>yt=>{const ft=bs(ya(_e.image),yt.getData()),Lt={...ft,style:Pn(We.normalizeCss,Pa(ft,!1))};ue.execCommand("mceUpdateImage",!1,Pa(Lt,_e.hasAccessibilityOptions)),ue.editorUpload.uploadImagesAuto(),yt.close()},Bt=ue=>_e=>{return To(ue,_e)?(We=ue.documentBaseURI.toAbsolute(_e),new Promise(yt=>{const ft=document.createElement("img"),Lt=So=>{ft.onload=ft.onerror=null,ft.parentNode&&ft.parentNode.removeChild(ft),yt(So)};ft.onload=()=>{const So={width:Xe(ft.width,ft.clientWidth),height:Xe(ft.height,ft.clientHeight)};Lt(Promise.resolve(So))},ft.onerror=()=>{Lt(Promise.reject(`Failed to get image dimensions for: ${We}`))};const Fo=ft.style;Fo.visibility="hidden",Fo.position="fixed",Fo.bottom=Fo.left="0px",Fo.width=Fo.height="auto",document.body.appendChild(ft),ft.src=We})).then(We=>({width:String(We.width),height:String(We.height)})):Promise.resolve({width:"",height:""});var We},Wt=ue=>(_e,We,yt)=>{var ft;return ue.editorUpload.blobCache.create({blob:_e,blobUri:We,name:null===(ft=_e.name)||void 0===ft?void 0:ft.replace(/\.[^\.]+$/,""),filename:_e.name,base64:yt.split(",")[1]})},jt=ue=>_e=>{ue.editorUpload.blobCache.add(_e)},Eo=ue=>_e=>{ue.windowManager.alert(_e)},ho=ue=>_e=>Ao(ue,_e),Fn=ue=>_e=>ue.dom.parseStyle(_e),Qn=ue=>(_e,We)=>ue.dom.serializeStyle(_e,We),Rn=ue=>_e=>Dt(ue).upload([_e],!1).then(We=>{var yt;return 0===We.length?Promise.reject("Failed to upload image"):!1===We[0].status?Promise.reject(null===(yt=We[0].error)||void 0===yt?void 0:yt.message):We[0]}),fn=ue=>{const _e={imageSize:Bt(ue),addToBlobCache:jt(ue),createBlobCache:Wt(ue),alertErr:Eo(ue),normalizeCss:ho(ue),parseStyle:Fn(ue),serializeStyle:Qn(ue),uploadImage:Rn(ue)};return{open:()=>{(ue=>{const _e=Es(rs=>ue.convertURL(rs.value||rs.url||"","src")),We=new Promise(rs=>{((Fs,Kr)=>{const na=Jo(Fs);No(na)?fetch(na).then(da=>{da.ok&&da.json().then(Kr)}):uo(na)?na(Kr):Kr(na)})(ue,Fs=>{rs(_e(Fs).map(Kr=>ne([[{text:"None",value:""}],Kr])))})}),yt=(Gr=qn(ue),ar(Vo)(Gr)),ft=D(ue),Lt=mt(ue),Fo=lr(ue.options.get("images_upload_url")),So=_n(ue.options.get("images_upload_handler")),tn=(rs=>{const Fs=Nr(rs);return Fs?Gn(Kr=>Ao(rs,Kr),Fs):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(ue),Dn=fr(ue),rr=Nt(ue),ln=mn(ue),kr=Do(ue),oa=X(ue),ca=sr(ue),ii=lo.some(Ma(ue)).filter(rs=>No(rs)&&rs.length>0);var Gr;return We.then(rs=>({image:tn,imageList:rs,classList:yt,hasAdvTab:ft,hasUploadTab:Lt,hasUploadUrl:Fo,hasUploadHandler:So,hasDescription:Dn,hasImageTitle:rr,hasDimensions:ln,hasImageCaption:kr,prependURL:ii,hasAccessibilityOptions:oa,automaticUploads:ca}))})(ue).then(We=>{const yt={prevImage:Ja((ft=We).imageList,ft.image.src),prevAlt:ft.image.alt,open:!0};var ft;return{title:"Insert/Edit Image",size:"normal",body:nt(We),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ya(We.image),onSubmit:Qe(ue,We,_e),onChange:pe(_e,We,yt),onClose:Be(yt)}}).then(ue.windowManager.open)}}},br=ue=>{const _e=ue.attr("class");return _n(_e)&&/\bimage\b/.test(_e)},Zs=ue=>_e=>{let We=_e.length;const yt=ft=>{ft.attr("contenteditable",ue?"true":null)};for(;We--;){const ft=_e[We];br(ft)&&(ft.attr("contenteditable",ue?"false":null),Nn.each(ft.getAll("figcaption"),yt))}},Zo=ue=>_e=>{const We=()=>{_e.setEnabled(ue.selection.isEditable())};return ue.on("NodeChange",We),We(),()=>{ue.off("NodeChange",We)}};Ca.add("image",ue=>{var _e;(_e=>{const We=_e.options.register;We("image_dimensions",{processor:"boolean",default:!0}),We("image_advtab",{processor:"boolean",default:!1}),We("image_uploadtab",{processor:"boolean",default:!0}),We("image_prepend_url",{processor:"string",default:""}),We("image_class_list",{processor:"object[]"}),We("image_description",{processor:"boolean",default:!0}),We("image_title",{processor:"boolean",default:!1}),We("image_caption",{processor:"boolean",default:!1}),We("image_list",{processor:yt=>{const ft=!1===yt||No(yt)||((Lt,Fo)=>{if(Ar(Lt)){for(let So=0,tn=Lt.length;So<tn;++So)if(!Fo(Lt[So]))return!1;return!0}return!1})(yt,ps)||uo(yt);return ft?{value:yt,valid:ft}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})})(ue),(_e=ue).on("PreInit",()=>{_e.parser.addNodeFilter("figure",Zs(!0)),_e.serializer.addNodeFilter("figure",Zs(!1))}),(_e=>{_e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:fn(_e).open,onSetup:We=>{We.setActive(_n(Nr(_e)));const yt=_e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",We.setActive).unbind,ft=Zo(_e)(We);return()=>{yt(),ft()}}}),_e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:fn(_e).open,onSetup:Zo(_e)}),_e.ui.registry.addContextMenu("image",{update:We=>is(We)||"IMG"===We.nodeName&&!Ie(We)?["image"]:[]})})(ue),(_e=>{_e.addCommand("mceImage",fn(_e).open),_e.addCommand("mceUpdateImage",(We,yt)=>{_e.undoManager.transact(()=>((ue,_e)=>{const We=Nr(ue);if(We){const yt={...Gn(Lt=>Ao(ue,Lt),We),..._e},ft=((Lt,Fo)=>{const So=Fo.src;return{...Fo,src:To(Lt,So)?So:""}})(ue,yt);yt.src?((Lt,Fo)=>{const So=Nr(Lt);var Dn;So&&(zs(tn=>Ao(Lt,tn),Fo,So),Lt.dom.setAttrib(Dn=So,"src",Dn.getAttribute("src")),is(So.parentNode)?(ls(Lt,So.parentNode),Lt.selection.select(So.parentNode)):(Lt.selection.select(So),((tn,Dn,rr)=>{const ln=()=>{rr.onload=rr.onerror=null,tn.selection&&(tn.selection.select(rr),tn.nodeChanged())};rr.onload=()=>{Dn.width||Dn.height||!mn(tn)||tn.dom.setAttribs(rr,{width:String(rr.clientWidth),height:String(rr.clientHeight)}),ln()},rr.onerror=ln})(Lt,Fo,So)))})(ue,ft):((Lt,Fo)=>{if(Fo){const So=Lt.dom.is(Fo.parentNode,"figure.image")?Fo.parentNode:Fo;Lt.dom.remove(So),Lt.focus(),Lt.nodeChanged(),Lt.dom.isEmpty(Lt.getBody())&&(Lt.setContent(""),Lt.selection.setCursorLocation())}})(ue,We)}else _e.src&&((ue,_e)=>{const We=((ft,Lt)=>{const Fo=document.createElement("img");if(zs(So=>Ao(ue,So),{...Lt,caption:!1},Fo),Di(Fo,Lt.alt,Lt.isDecorative),Lt.caption){const So=Gt.create("figure",{class:"image"});return So.appendChild(Fo),So.appendChild(Gt.create("figcaption",{contentEditable:"true"},"Caption")),So.contentEditable="false",So}return Fo})(0,_e);ue.dom.setAttrib(We,"data-mce-id","__mcenew"),ue.focus(),ue.selection.setContent(We.outerHTML);const yt=ue.dom.select('*[data-mce-id="__mcenew"]')[0];if(ue.dom.setAttrib(yt,"data-mce-id",null),is(yt)){const ft=ls(ue,yt);ue.selection.select(ft)}else ue.selection.select(yt)})(ue,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,..._e})})(_e,yt))})})(ue)})}(),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ss=Xe=>null===Xe,va=Xe=>Xe,ns=(Xe,Tt)=>{const Po=Xe.length,Ie=new Array(Po);for(let To=0;To<Po;To++)Ie[To]=Tt(Xe[To],To);return Ie},At=[new RegExp("[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),new RegExp("[-'\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]"),new RegExp("[:\xb7\xb7\u05f4\u2027\ufe13\ufe55\uff1a]"),new RegExp("[\xb1+*/,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b]"),new RegExp("[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]"),new RegExp("\\r"),new RegExp("\\n"),new RegExp("[\v\f\x85\u2028\u2029]"),new RegExp("[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]"),new RegExp("[\xad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]"),new RegExp("[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]"),new RegExp("[=_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f\u2200-\u22ff<>]"),new RegExp("@")],Ft=new RegExp("^[~\u2116|!-*+-\\/:;?@\\[-`{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]$"),eo=At,ne=Xe=>{let Tt=13;const Po=eo.length;for(let Ie=0;Ie<Po;++Ie){const To=eo[Ie];if(To&&To.test(Xe)){Tt=Ie;break}}return Tt},it=(Xe,Tt)=>{const Po=Xe[Tt],Ie=Xe[Tt+1];if(Tt<0||Tt>Xe.length-1&&0!==Tt||0===Po&&0===Ie)return!1;const To=Xe[Tt+2];if(0===Po&&(2===Ie||1===Ie||12===Ie)&&0===To)return!1;const Gt=Xe[Tt-1];return(2!==Po&&1!==Po&&12!==Ie||0!==Ie||0!==Gt)&&(4!==Po&&0!==Po||4!==Ie&&0!==Ie)&&(3!==Po&&1!==Po||4!==Ie||4!==Gt)&&(4!==Po||3!==Ie&&1!==Ie||4!==To)&&(8!==Po&&9!==Po||0!==Ie&&4!==Ie&&10!==Ie&&8!==Ie&&9!==Ie)&&(8!==Ie&&(9!==Ie||0!==To&&4!==To&&10!==To&&8!==To&&9!==To)||0!==Po&&4!==Po&&10!==Po&&8!==Po&&9!==Po)&&(5!==Po||6!==Ie)&&(7===Po||5===Po||6===Po||7===Ie||5===Ie||6===Ie||(10!==Po||10!==Ie)&&(11!==Ie||0!==Po&&4!==Po&&10!==Po&&11!==Po)&&(11!==Po||0!==Ie&&4!==Ie&&10!==Ie)&&12!==Po)},Oe=/^\s+$/,$n=Ft,yo=Xe=>"http"===Xe||"https"===Xe,Dr=(Xe,Tt)=>{const Po=((Ie,To)=>{let Gt;for(Gt=To;Gt<Ie.length&&!Oe.test(Ie[Gt]);Gt++);return Gt})(Xe,Tt+1);return"://"===Xe.slice(Tt+1,Po).join("").substr(0,3)?Po:Tt};var ot=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const mn=(Xe,Tt)=>{const Po=Tt.getBlockElements(),Ie=Tt.getVoidElements(),Gt=[];let Ue="";const Hs=new ot(Xe,Xe);let en;for(;en=Hs.next();)3===en.nodeType?Ue+=en.data.replace(/\uFEFF/g,""):(Po[(Yt=en).nodeName]||Ie[Yt.nodeName])&&Ue.length&&(Gt.push(Ue),Ue="");var Yt;return Ue.length&&Gt.push(Ue),Gt},D=Xe=>Xe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,mt=(Xe,Tt)=>((Xe,Tt,Po)=>((Ie,To,Gt)=>{Gt={includeWhitespace:!1,includePunctuation:!1,...Gt};const Ue=ns(Ie,To);return((Hs,en,Yt,ts)=>{const Jn=[],fs=[];let or=[];for(let Ps=0;Ps<Yt.length;++Ps)if(or.push(Hs[Ps]),it(Yt,Ps)){const Ha=en[Ps];if((ts.includeWhitespace||!Oe.test(Ha))&&(ts.includePunctuation||!$n.test(Ha))){const ks=Ps-or.length+1,qr=Ps+1,Cr=en.slice(ks,qr).join("");if(yo(Cr)){const _a=Dr(en,Ps),is=Hs.slice(qr,_a);Array.prototype.push.apply(or,is),Ps=_a}Jn.push(or),fs.push({start:ks,end:qr})}or=[]}return{words:Jn,indices:fs}})(Ie,Ue,(Hs=>{const en=(Yt=>{const ts={};return Jn=>{if(ts[Jn])return ts[Jn];{const fs=Yt(Jn);return ts[Jn]=fs,fs}}})(ne);return ns(Hs,en)})(Ue),Gt)})(Xe,Tt,void 0).words)(mn(Xe,Tt).join("\n").replace(/\u200B/g,"").split(""),va).length,Ma=(Xe,Tt)=>{const Po=mn(Xe,Tt).join("");return D(Po)},qn=(Xe,Tt)=>{const Po=mn(Xe,Tt).join("").replace(/\s/g,"");return D(Po)},fr=(Xe,Tt)=>()=>Tt(Xe.getBody(),Xe.schema),Nt=(Xe,Tt)=>()=>Tt(Xe.selection.getRng().cloneContents(),Xe.schema),Do=Xe=>fr(Xe,mt);var Jo=tinymce.util.Tools.resolve("tinymce.util.Delay");const X=(Xe,Tt)=>{var Ie;Xe.dispatch("wordCountUpdate",{wordCount:{words:(Ie=Tt).body.getWordCount(),characters:Ie.body.getCharacterCount(),charactersWithoutSpaces:Ie.body.getCharacterCountWithoutSpaces()}})},sr=(Xe,Tt,Po)=>{const Ie=((To,Gt)=>{let Ue=null;return{cancel:()=>{Ss(Ue)||(clearTimeout(Ue),Ue=null)},throttle:(...Hs)=>{Ss(Ue)&&(Ue=setTimeout(()=>{Ue=null,To.apply(null,Hs)},Gt))}}})(()=>X(Xe,Tt),Po);Xe.on("init",()=>{X(Xe,Tt),Jo.setEditorTimeout(Xe,()=>{Xe.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",Ie.throttle)},0),Xe.on("remove",Ie.cancel)})};((Xe=300)=>{Ca.add("wordcount",Tt=>{const Po={body:{getWordCount:Do(Ie=Tt),getCharacterCount:fr(Ie,Ma),getCharacterCountWithoutSpaces:fr(Ie,qn)},selection:{getWordCount:Nt(Ie,mt),getCharacterCount:Nt(Ie,Ma),getCharacterCountWithoutSpaces:Nt(Ie,qn)},getCount:Do(Ie)};var Ie;return((Ie,To)=>{Ie.addCommand("mceWordCount",()=>{return Ue=To,void Ie.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Ue.body.getWordCount()),String(Ue.selection.getWordCount())],["Characters (no spaces)",String(Ue.body.getCharacterCountWithoutSpaces()),String(Ue.selection.getCharacterCountWithoutSpaces())],["Characters",String(Ue.body.getCharacterCount()),String(Ue.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]});var Ue})})(Tt,Po),(Ie=>{const To=()=>Ie.execCommand("mceWordCount");Ie.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:To}),Ie.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:To})})(Tt),sr(Tt,Po,Xe),Po})})()}(),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.PluginManager");const Ss=V=>K=>(G=>{const se=typeof G;return null===G?"null":"object"===se&&Array.isArray(G)?"array":"object"===se&&(He=Fe=G,(gt=String).prototype.isPrototypeOf(He)||(null===(Zt=Fe.constructor)||void 0===Zt?void 0:Zt.name)===gt.name)?"string":se;var He,Fe,gt,Zt})(K)===V,va=V=>K=>typeof K===V,ns=Ss("string"),Qs=Ss("array"),No=va("boolean"),ps=V=>void 0===V,as=V=>!(null==V),Ar=va("function"),Ya=va("number"),Is=()=>{},_n=V=>()=>V,uo=V=>V,ut=(V,K)=>V===K;function pt(V,...K){return(...G)=>{const se=K.concat(G);return V.apply(null,se)}}const lo=V=>{V()},jn=_n(!1),At=_n(!0);class Ft{constructor(K,G){this.tag=K,this.value=G}static some(K){return new Ft(!0,K)}static none(){return Ft.singletonNone}fold(K,G){return this.tag?G(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?Ft.some(K(this.value)):Ft.none()}bind(K){return this.tag?K(this.value):Ft.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:Ft.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return as(K)?Ft.some(K):Ft.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ft.singletonNone=new Ft(!1);const eo=Object.keys,ne=Object.hasOwnProperty,it=(V,K)=>{const G=eo(V);for(let se=0,He=G.length;se<He;se++){const Fe=G[se];K(V[Fe],Fe)}},Oe=(V,K)=>{const G={};var se,Fe,gt,Zt;return Fe=K,se=G,gt=(He,Fe)=>{se[Fe]=He},Zt=Is,it(V,(Pt,zt)=>{(Fe(Pt,zt)?gt:Zt)(Pt,zt)}),G},$n=V=>eo(V).length,yo=(V,K)=>Dr(V,K)?Ft.from(V[K]):Ft.none(),Dr=(V,K)=>ne.call(V,K),lr=(V,K)=>Dr(V,K)&&null!=V[K],ot=Array.prototype.indexOf,mn=Array.prototype.push,D=(V,K)=>ot.call(V,K)>-1,mt=(V,K)=>{for(let G=0,se=V.length;G<se;G++)if(K(V[G],G))return!0;return!1},Ma=(V,K)=>{const G=[];for(let se=0;se<V;se++)G.push(K(se));return G},qn=(V,K)=>{const G=V.length,se=new Array(G);for(let He=0;He<G;He++)se[He]=K(V[He],He);return se},fr=(V,K)=>{for(let G=0,se=V.length;G<se;G++)K(V[G],G)},Nt=(V,K)=>{const G=[];for(let se=0,He=V.length;se<He;se++){const Fe=V[se];K(Fe,se)&&G.push(Fe)}return G},Do=(V,K,G)=>(fr(V,(se,He)=>{G=K(G,se,He)}),G),Jo=(V,K)=>((G,se,He)=>{for(let Fe=0,gt=G.length;Fe<gt;Fe++){const Zt=G[Fe];if(se(Zt,Fe))return Ft.some(Zt);if(He(Zt,Fe))break}return Ft.none()})(V,K,jn),X=(V,K)=>(G=>{const se=[];for(let He=0,Fe=G.length;He<Fe;++He){if(!Qs(G[He]))throw new Error("Arr.flatten item "+He+" was not an array, input: "+G);mn.apply(se,G[He])}return se})(qn(V,K)),sr=(V,K)=>{for(let G=0,se=V.length;G<se;++G)if(!0!==K(V[G],G))return!1;return!0},Xe=(V,K)=>K>=0&&K<V.length?Ft.some(V[K]):Ft.none(),Tt=(V,K)=>{for(let G=0;G<V.length;G++){const se=K(V[G],G);if(se.isSome())return se}return Ft.none()},Po=V=>{if(null==V)throw new Error("Node cannot be null or undefined");return{dom:V}},Ie={fromHtml:(V,K)=>{const G=(K||document).createElement("div");if(G.innerHTML=V,!G.hasChildNodes()||G.childNodes.length>1){const se="HTML does not have a single root node";throw console.error(se,V),new Error(se)}return Po(G.childNodes[0])},fromTag:(V,K)=>{const G=(K||document).createElement(V);return Po(G)},fromText:(V,K)=>{const G=(K||document).createTextNode(V);return Po(G)},fromDom:Po,fromPoint:(V,K,G)=>Ft.from(V.dom.elementFromPoint(K,G)).map(Po)},To=(V,K)=>{const G=V.dom;if(1!==G.nodeType)return!1;{const se=G;if(void 0!==se.matches)return se.matches(K);if(void 0!==se.msMatchesSelector)return se.msMatchesSelector(K);if(void 0!==se.webkitMatchesSelector)return se.webkitMatchesSelector(K);if(void 0!==se.mozMatchesSelector)return se.mozMatchesSelector(K);throw new Error("Browser lacks native selectors")}},Gt=V=>1!==V.nodeType&&9!==V.nodeType&&11!==V.nodeType||0===V.childElementCount,Ue=(V,K)=>V.dom===K.dom,Hs=To;typeof window<"u"||Function("return this;")();const en=V=>V.dom.nodeName.toLowerCase(),Yt=V=>V.dom.nodeType,ts=V=>K=>Yt(K)===V,Jn=ts(1),fs=ts(3),or=ts(9),Ps=ts(11),Ha=V=>K=>Jn(K)&&en(K)===V,ks=V=>or(V)?V:Ie.fromDom(V.dom.ownerDocument),qr=V=>Ft.from(V.dom.parentNode).map(Ie.fromDom),Cr=V=>Ft.from(V.dom.nextSibling).map(Ie.fromDom),_a=V=>qn(V.dom.childNodes,Ie.fromDom),is=Ar(Element.prototype.attachShadow)&&Ar(Node.prototype.getRootNode)?V=>Ie.fromDom(V.dom.getRootNode()):ks,_r=V=>Ie.fromDom(V.dom.host),Zi=V=>{const K=fs(V)?V.dom.parentNode:V.dom;if(null==K||null===K.ownerDocument)return!1;const G=K.ownerDocument;return(Fe=>{const gt=is(Fe);return Ps(Zt=gt)&&as(Zt.dom.host)?Ft.some(gt):Ft.none();var Zt})(Ie.fromDom(K)).fold(()=>G.body.contains(K),(se=Zi,He=_r,Fe=>se(He(Fe))));var se,He};var Pn=(V,K,G,se,He)=>V(G,se)?Ft.some(G):Ar(He)&&He(G)?Ft.none():K(G,se,He);const Gn=(V,K,G)=>{let se=V.dom;const He=Ar(G)?G:jn;for(;se.parentNode;){se=se.parentNode;const Fe=Ie.fromDom(se);if(K(Fe))return Ft.some(Fe);if(He(Fe))break}return Ft.none()},nr=(V,K,G)=>Gn(V,se=>To(se,K),G),Sr=(V,K)=>((G,se)=>{const He=void 0===se?document:se.dom;return Gt(He)?Ft.none():Ft.from(He.querySelector(G)).map(Ie.fromDom)})(K,V),zs=(V,K,G)=>Pn((se,He)=>To(se,He),nr,V,K,G),Ao=(V,K=!1)=>{return Zi(V)?V.dom.isContentEditable:(G=V,zs(G,"[contenteditable]")).fold(_n(K),se=>"true"===Nr(se));var G},Nr=V=>V.dom.contentEditable,ls=V=>K=>Ue(K,Ie.fromDom(V.getBody())),Kt=V=>/^\d+(\.\d+)?$/.test(V)?V+"px":V,Wo=V=>Ie.fromDom(V.selection.getStart()),bs=(V,K)=>{let G=[];return fr(_a(V),se=>{K(se)&&(G=G.concat([se])),G=G.concat(bs(se,K))}),G},cs=(V,K)=>Nt(_a(V),He=>To(He,K)),Dt=(V,K)=>((G,se)=>{const He=void 0===se?document:se.dom;return Gt(He)?[]:qn(He.querySelectorAll(G),Ie.fromDom)})(K,V),Nn=(V,K,G)=>{if(!(ns(G)||No(G)||Ya(G)))throw console.error("Invalid call to Attribute.set. Key ",K,":: Value ",G,":: Element ",V),new Error("Attribute value was not simple");V.setAttribute(K,G+"")},Vo=(V,K)=>{const G=V.dom.getAttribute(K);return null===G?void 0:G},Vs=(V,K)=>Ft.from(Vo(V,K)),ar=(V,K)=>{V.dom.removeAttribute(K)},Bi=(V,K,G=ut)=>V.exists(se=>G(se,K)),Es=(V,K,G)=>V.isSome()&&K.isSome()?Ft.some(G(V.getOrDie(),K.getOrDie())):Ft.none(),Ja=(V,K)=>{return G=V,""===(se=K)||G.length>=se.length&&G.substr(0,0+se.length)===se;var G,se},si=(Sa=/^\s+|\s+$/g,V=>V.replace(Sa,""));var Sa;const ai=V=>V.length>0,ta=(V,K=10)=>{const G=parseInt(V,K);return isNaN(G)?Ft.none():Ft.some(G)},ya=V=>void 0!==V.style&&Ar(V.style.getPropertyValue),Pa=(V,K)=>{const G=V.dom,se=window.getComputedStyle(G).getPropertyValue(K);return""!==se||Zi(V)?se:Os(G,K)},Os=(V,K)=>ya(V)?V.style.getPropertyValue(K):"",Fa=(V,K)=>{const se=Os(V.dom,K);return Ft.from(se).filter(He=>He.length>0)},pe=(V,K,G=0)=>Vs(V,K).map(se=>parseInt(se,10)).getOr(G),Be=(V,K)=>nt(V,K,At),nt=(V,K,G)=>X(_a(V),se=>To(se,K)?G(se)?[se]:[]:nt(se,K,G)),Qe=["tfoot","thead","tbody","colgroup"],Bt=(V,K,G)=>({element:V,rowspan:K,colspan:G}),Wt=(V,K,G)=>({element:V,cells:K,section:G}),jt=(V,K)=>zs(V,"table",K),Eo=V=>Be(V,"tr"),ho=V=>jt(V).fold(_n([]),K=>cs(K,"colgroup")),Fn=V=>qr(V).map(K=>{const G=en(K);return D(Qe,G)?G:"tbody"}).getOr("tbody"),Qn=V=>Vs(V,"data-snooker-locked-cols").bind(K=>Ft.from(K.match(/\d+/g))).map(K=>((G,se)=>{const He={};for(let Fe=0,gt=G.length;Fe<gt;Fe++){const Zt=G[Fe];He[String(Zt)]=se(Zt,Fe)}return He})(K,At)),Rn=(V,K)=>V+","+K,br=V=>(V=>{const K={},G=[];var se;const He=(se=V,Xe(se,0)).map(xt=>xt.element).bind(jt).bind(Qn).getOr({});let Fe=0,gt=0,Zt=0;const{pass:Pt,fail:zt}=((xt,on)=>{const ur=[],xo=[];for(let W=0,S=xt.length;W<S;W++){const F=xt[W];(gn=F,"colgroup"===gn.section?ur:xo).push(F)}var gn;return{pass:ur,fail:xo}})(V);fr(zt,xt=>{const on=[];fr(xt.cells,ur=>{let xo=0;for(;void 0!==K[Rn(Zt,xo)];)xo++;const gn=lr(He,xo.toString()),W={element:ur.element,rowspan:ur.rowspan,colspan:ur.colspan,row:Zt,column:xo,isLocked:gn};for(let S=0;S<ur.colspan;S++)for(let F=0;F<ur.rowspan;F++){const ae=xo+S,Ve=Rn(Zt+F,ae);K[Ve]=W,gt=Math.max(gt,ae+1)}on.push(W)}),Fe++,G.push(Wt(xt.element,on,xt.section)),Zt++});const{columns:ro,colgroups:co}=(xt=Pt,Xe(xt,xt.length-1)).map(xt=>{const on=(xo=>{const gn={};let W=0;return fr(xo.cells,S=>{const F=S.colspan;Ma(F,ae=>{const Ve=W+ae;gn[Ve]={element:S.element,colspan:F,column:Ve}}),W+=F}),gn})(xt);return{colgroups:[(xo=xt.element,gn=((xo,gn)=>{const W=[];return it(xo,(S,F)=>{W.push(gn(S,F))}),W})(on,uo),{element:xo,columns:gn})],columns:on};var xo,gn}).getOrThunk(()=>({colgroups:[],columns:{}}));var xt;return{grid:((xt,on)=>({rows:xt,columns:on}))(Fe,gt),access:K,all:G,columns:ro,colgroups:co}})((G=>{const se=Eo(G);return He=[...ho(G),...se],Fe=Fn,qn(He,gt=>{if("colgroup"===en(gt)){const Zt=qn(To(Pt=gt,"colgroup")?cs(Pt,"col"):X(ho(Pt),zt=>cs(zt,"col")),Pt=>{const zt=pe(Pt,"span",1);return Bt(Pt,1,zt)});return Wt(gt,Zt,"colgroup")}var Pt;{const Zt=qn((Pt=>Be(Pt,"th,td"))(gt),Pt=>{const zt=pe(Pt,"rowspan",1),ro=pe(Pt,"colspan",1);return Bt(Pt,zt,ro)});return Wt(gt,Zt,Fe(gt))}});var He,Fe})(V)),Zs=(V,K,G)=>Ft.from(V.access[Rn(K,G)]),Zo=(V,K,G)=>{const se=((He,Fe)=>{const gt=X(He.all,Zt=>Zt.cells);return Nt(gt,He=>G(K,He.element))})(V);return se.length>0?Ft.some(se[0]):Ft.none()},ue=(V,K)=>Ft.from(V.columns[K]);var _e=tinymce.util.Tools.resolve("tinymce.util.Tools");const We=(V,K,G)=>{const se=V.select("td,th",K);let He;for(let Fe=0;Fe<se.length;Fe++){const gt=V.getStyle(se[Fe],G);if(ps(He)&&(He=gt),He!==gt)return""}return He},yt=(V,K,G)=>{_e.each("left center right".split(" "),se=>{se!==G&&V.formatter.remove("align"+se,{},K)}),G&&V.formatter.apply("align"+G,{},K)},ft=(V,K,G)=>{V.dispatch("TableModified",{...G,table:K})},Lt=(V,K,G)=>{return He=G,(Fe=>{const gt=parseFloat(Fe);return isNaN(gt)?Ft.none():Ft.some(gt)})(Pa(V,K)).getOr(He);var He};var So=tinymce.util.Tools.resolve("tinymce.Env");const tn=Ma(5,V=>{const K=`${V+1}px`;return{title:K,value:K}}),Dn=qn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],V=>({title:V,value:V.toLowerCase()})),ln=V=>{var K;const G=V.dom,se=null!==(K=G.getParent(V.selection.getStart(),G.isBlock))&&void 0!==K?K:V.getBody();return(V=>((K,G)=>{const se=K.dom;return(se.getBoundingClientRect().width||se.offsetWidth)-Lt(Fe=K,"padding-left",0)-Lt(Fe,"padding-right",0)-Lt(Fe,"border-left-width",0)-Lt(Fe,"border-right-width",0);var Fe})(V))(Ie.fromDom(se))+"px"},kr=V=>K=>K.options.get(V),oa=kr("table_sizing_mode"),ca=kr("table_border_widths"),ii=kr("table_border_styles"),Gr=kr("table_cell_advtab"),rs=kr("table_row_advtab"),Fs=kr("table_advtab"),Kr=kr("table_appearance_options"),na=kr("table_grid"),da=kr("table_style_by_css"),nl=kr("table_cell_class_list"),za=kr("table_row_class_list"),Bo=kr("table_class_list"),rl=kr("table_toolbar"),Xr=kr("table_background_color_map"),vs=kr("table_border_color_map"),ji=V=>"fixed"===oa(V),jr=V=>"responsive"===oa(V),er=V=>{const K=V.options,G=K.get("table_default_styles");return K.isSet("table_default_styles")?G:(He=G,jr(se=V)||!da(se)?He:ji(se)?{...He,width:ln(se)}:{...He,width:"100%"});var se,He},ra=V=>{const K=V.options,G=K.get("table_default_attributes");return K.isSet("table_default_attributes")?G:(He=G,jr(se=V)||da(se)?He:ji(se)?{...He,width:ln(se)}:{...He,width:"100%"});var se,He},qo=(V,K)=>K.column>=V.startCol&&K.column+K.colspan-1<=V.finishCol&&K.row>=V.startRow&&K.row+K.rowspan-1<=V.finishRow,It=br,Ts=(V,K)=>{qr(V).each(G=>{G.dom.insertBefore(K.dom,V.dom)})},As=(V,K)=>{Cr(V).fold(()=>{qr(V).each(G=>{Br(G,K)})},G=>{Ts(G,K)})},Br=(V,K)=>{V.dom.appendChild(K.dom)},zc=(V,K)=>{fr(K,(G,se)=>{As(0===se?V:K[se-1],G)})},Xl=V=>{const K=V.dom;null!==K.parentNode&&K.parentNode.removeChild(K)},Lr=((V,K)=>{const G=se=>V(se)?Ft.from(se.dom.nodeValue):Ft.none();return{get:se=>{if(!V(se))throw new Error("Can only get text value of a text node");return G(se).getOr("")},getOption:G,set:(se,He)=>{if(!V(se))throw new Error("Can only set raw text value of a text node");se.dom.nodeValue=He}}})(fs);var Sl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const fc=(V,K,G)=>K.bind(se=>G.filter(pt(V.eq,se))),Ns={up:_n({selector:nr,closest:zs,predicate:Gn,all:(V,K)=>{const G=Ar(K)?K:jn;let se=V.dom;const He=[];for(;null!=se.parentNode;){const Fe=se.parentNode,gt=Ie.fromDom(Fe);if(He.push(gt),!0===G(gt))break;se=Fe}return He}}),down:_n({selector:Dt,predicate:bs}),styles:_n({get:Pa,getRaw:Fa,set:(V,K,G)=>{((se,He,Fe)=>{if(!ns(Fe))throw console.error("Invalid call to CSS.set. Property ",He,":: Value ",Fe,":: Element ",se),new Error("CSS value must be a string: "+Fe);ya(se)&&se.style.setProperty(He,Fe)})(V.dom,K,G)},remove:(V,K)=>{var G,se;se=K,ya(G=V.dom)&&G.style.removeProperty(se),Bi(Vs(V,"style").map(si),"")&&ar(V,"style")}}),attrs:_n({get:Vo,set:(V,K,G)=>{Nn(V.dom,K,G)},remove:ar,copyTo:(V,K)=>{((G,se)=>{const He=G.dom;it(se,(Fe,gt)=>{Nn(He,gt,Fe)})})(K,Do(V.dom.attributes,(G,se)=>(G[se.name]=se.value,G),{}))}}),insert:_n({before:Ts,after:As,afterAll:zc,append:Br,appendAll:(V,K)=>{fr(K,G=>{Br(V,G)})},prepend:(V,K)=>{var G;(G=V,Ft.from(G.dom.childNodes[0]).map(Ie.fromDom)).fold(()=>{Br(V,K)},G=>{V.dom.insertBefore(K.dom,G.dom)})},wrap:(V,K)=>{Ts(V,K),Br(K,V)}}),remove:_n({unwrap:V=>{const K=_a(V);K.length>0&&zc(V,K),Xl(V)},remove:Xl}),create:_n({nu:Ie.fromTag,clone:V=>Ie.fromDom(V.dom.cloneNode(!1)),text:Ie.fromText}),query:_n({comparePosition:(V,K)=>V.dom.compareDocumentPosition(K.dom),prevSibling:V=>Ft.from(V.dom.previousSibling).map(Ie.fromDom),nextSibling:Cr}),property:_n({children:_a,name:en,parent:qr,document:V=>ks(V).dom,isText:fs,isComment:V=>8===Yt(V)||"#comment"===en(V),isElement:Jn,isSpecial:V=>{const K=en(V);return D(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],K)},getLanguage:V=>Jn(V)?Vs(V,"lang"):Ft.none(),getText:V=>Lr.get(V),setText:(V,K)=>Lr.set(V,K),isBoundary:V=>!!Jn(V)&&("body"===en(V)||D(Sl,en(V))),isEmptyTag:V=>!!Jn(V)&&D(["br","img","hr","input"],en(V)),isNonEditable:V=>Jn(V)&&"false"===Vo(V,"contenteditable")}),eq:Ue,is:Hs},Ui=V=>nr(V,"table"),ka=(V,K,G)=>Sr(V,K).bind(se=>Sr(V,G).bind(He=>{return(Fe=Ui,gt=[se,He],Zt=Ns,zt=gt,zt.length>0?(co=(Zt,Pt)=>Fe(Pt),((V,K,G,se)=>{const He=K(V,G);return Fe=(Zt,Pt)=>{const zt=K(V,Pt);return fc(V,Zt,zt)},gt=He,((Zt,Pt)=>{for(let zt=Zt.length-1;zt>=0;zt--)Pt(Zt[zt])})(se,(Zt,Pt)=>{gt=Fe(gt,Zt)}),gt;var Fe,gt})(Zt,co,(Wn=zt)[0],Wn.slice(1))):Ft.none()).map(Zt=>({first:se,last:He,table:Zt}));var Zt,zt,co,Wn,Fe,gt})),Kn=V=>qn(V,Ie.fromDom),Yl="data-mce-selected",Ms="data-mce-first-selected",kl="data-mce-last-selected",Fl={selected:Yl,selectedSelector:"td["+Yl+"],th["+Yl+"]",firstSelected:Ms,firstSelectedSelector:"td["+Ms+"],th["+Ms+"]",lastSelected:kl,lastSelectedSelector:"td["+kl+"],th["+kl+"]"},vr=V=>(K,G)=>{const se=en(K),He="col"===se||"colgroup"===se?jt(Fe=K).bind(gt=>((zt,ro)=>{const co=Dt(zt,ro);return co.length>0?Ft.some(co):Ft.none()})(gt,Fl.firstSelectedSelector)).fold(_n(Fe),gt=>gt[0]):K;var Fe;return zs(He,V,G)},wa=vr("th,td,caption"),Y=vr("th,td"),le=V=>Kn(V.model.table.getSelectedCells()),Le=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],ke=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ct=V=>{return(K=V,Ja(K,"#")?(G=K,G.substring(1)):K).toUpperCase();var G,K},Rt=V=>{const K=V.toString(16);return(1===K.length?"0"+K:K).toUpperCase()},wo=V=>{return K=Rt(V.red)+Rt(V.green)+Rt(V.blue),{value:ct(K)};var K},Jt=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ko=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Sn=(V,K,G,se)=>({red:V,green:K,blue:G,alpha:se}),cn=(V,K,G,se)=>{const He=parseInt(V,10),Fe=parseInt(K,10),gt=parseInt(G,10),Zt=parseFloat(se);return Sn(He,Fe,gt,Zt)},Xn=V=>{if("transparent"===V)return Ft.some(Sn(0,0,0,0));const K=Jt.exec(V);if(null!==K)return Ft.some(cn(K[1],K[2],K[3],"1"));const G=ko.exec(V);return null!==G?Ft.some(cn(G[1],G[2],G[3],G[4])):Ft.none()},zn=V=>{let K=V;return{get:()=>K,set:G=>{K=G}}},bn=(V,K,G)=>se=>{const He=(Zt=>{const Pt=zn(Ft.none()),zt=()=>Pt.get().each(Zt);return{clear:()=>{zt(),Pt.set(Ft.none())},isSet:()=>Pt.get().isSome(),get:()=>Pt.get(),set:ro=>{zt(),Pt.set(Ft.some(ro))}}})(Zt=>Zt.unbind()),Fe=!ai(G),gt=()=>{const Zt=le(V),Pt=zt=>V.formatter.match(K,{value:G},zt.dom,Fe);Fe?(se.setActive(!mt(Zt,Pt)),He.set(V.formatter.formatChanged(K,zt=>se.setActive(!zt),!0))):(se.setActive(sr(Zt,Pt)),He.set(V.formatter.formatChanged(K,se.setActive,!1,{value:G})))};return V.initialized?gt():V.on("init",gt),He.clear},vn=V=>lr(V,"menu"),ir=V=>qn(V,K=>{const G=K.text||K.title||"";return vn(K)?{text:G,items:ir(K.menu)}:{text:G,value:K.value}}),fe=(V,K,G,se)=>qn(K,He=>{const Fe=He.text||He.title;return vn(He)?{type:"nestedmenuitem",text:Fe,getSubmenuItems:()=>fe(V,He.menu,G,se)}:{text:Fe,type:"togglemenuitem",onAction:()=>se(He.value),onSetup:bn(V,G,He.value)}}),Qa=(V,K)=>G=>{V.execCommand("mceTableApplyCellStyle",!1,{[K]:G})},gl=V=>X(V,K=>vn(K)?[{...K,menu:gl(K.menu)}]:ai(K.value)?[K]:[]),li=(V,K,G,se)=>He=>He(fe(V,K,G,se)),Vc=(V,K,G)=>{const se=qn(K,He=>{return{text:He.title,value:"#"+(gt=He.value,(Fe=gt,Zt=Fe,ke.test(Zt)||lt.test(Zt)?Ft.some({value:ct(Fe)}):Ft.none()).orThunk(()=>Xn(gt).map(wo)).getOrThunk(()=>{const Zt=document.createElement("canvas");Zt.height=1,Zt.width=1;const Pt=Zt.getContext("2d");Pt.clearRect(0,0,Zt.width,Zt.height),Pt.fillStyle="#FFFFFF",Pt.fillStyle=gt,Pt.fillRect(0,0,1,1);const zt=Pt.getImageData(0,0,1,1).data;return wo(Sn(zt[0],zt[1],zt[2],zt[3]))})).value,type:"choiceitem"};var Zt,Fe,gt});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:se.length>0?se:void 0,allowCustomColors:!1},onAction:He=>{V.execCommand("mceTableApplyCellStyle",!1,{[G]:"remove"===He.value?"":He.value})}}]},yr=V=>()=>{const K="header"===V.queryCommandValue("mceTableRowType")?"body":"header";V.execCommand("mceTableRowType",!1,{type:K})},hl=V=>()=>{const K="th"===V.queryCommandValue("mceTableColType")?"td":"th";V.execCommand("mceTableColType",!1,{type:K})},Ld=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Le}],El=V=>Ld.concat((K=>{const G=ir(nl(K));return G.length>0?Ft.some({name:"class",type:"listbox",label:"Class",items:G}):Ft.none()})(V).toArray()),Zc=(V,K)=>{const G=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ir(ii(V)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===K?[{name:"borderwidth",type:"input",label:"Border width"}].concat(G):G}},Wi=(V,K)=>{const G=V.dom;return{setAttrib:(se,He)=>{G.setAttrib(K,se,He)},setStyle:(se,He)=>{G.setStyle(K,se,He)},setFormat:(se,He)=>{""===He?V.formatter.remove(se,{value:null},K,!0):V.formatter.apply(se,{value:He},K)}}},hu=Ha("th"),qm=(V,K)=>V&&K?"sectionCells":V?"section":"cells",jc=(V,K)=>Tt(V.all,G=>Jo(G.cells,se=>Ue(K,se.element))),Jl=(V,K)=>((V,K,G)=>{const se=(Fe=>{const gt=[],Zt=Pt=>{gt.push(Pt)};for(let Pt=0;Pt<Fe.length;Pt++)Fe[Pt].each(Zt);return gt})(qn(K.selection,Fe=>{return(gt=Fe,((Pt,zt,ro=jn)=>ro(zt)?Ft.none():D(Pt,en(zt))?Ft.some(zt):nr(zt,Pt.join(","),co=>To(co,"table")||ro(co)))(["td","th"],gt,void 0)).bind(Pt=>jc(V,Pt)).filter(G);var gt}));return se.length>0?Ft.some(se):Ft.none()})(V,K,At),ss=(V,K)=>sr(K,G=>jc(V,G).exists(Fe=>!Fe.isLocked)),bc=(V,K)=>{return(se=K,se.mergable).filter(G=>ss(V,G.cells));var se},Id=(V,K)=>{return(se=K,se.unmergable).filter(G=>ss(V,G));var se},_i=((V=>{if(!Qs(V))throw new Error("cases must be an array");if(0===V.length)throw new Error("there must be at least one case");const K=[],G={};fr(V,(se,He)=>{const Fe=eo(se);if(1!==Fe.length)throw new Error("one and only one name per case");const gt=Fe[0],Zt=se[gt];if(void 0!==G[gt])throw new Error("duplicate key detected:"+gt);if("cata"===gt)throw new Error("cannot have a case named cata (sorry)");if(!Qs(Zt))throw new Error("case arguments must be an array");K.push(gt),G[gt]=(...Pt)=>{const zt=Pt.length;if(zt!==Zt.length)throw new Error("Wrong number of arguments to case "+gt+". Expected "+Zt.length+" ("+Zt+"), got "+zt);return{fold:(...ro)=>{if(ro.length!==V.length)throw new Error("Wrong number of arguments to fold. Expected "+V.length+", got "+ro.length);return ro[He].apply(null,Pt)},match:ro=>{const co=eo(ro);if(K.length!==co.length)throw new Error("Wrong number of arguments to match. Expected: "+K.join(",")+"\nActual: "+co.join(","));if(!sr(K,Wn=>D(co,Wn)))throw new Error("Not all branches were specified when using match. Specified: "+co.join(", ")+"\nRequired: "+K.join(", "));return ro[gt].apply(null,Pt)},log:ro=>{console.log(ro,{constructors:K,constructor:gt,params:Pt})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(V,K)=>{const G=br(V);return Jl(G,K).bind(se=>{const He=se[se.length-1];return(V=>{const K=qn(V,He=>(Fe=>{const gt="thead"===Fe.section,Zt=Bi((Pt=>{const zt=Nt(Pt,ro=>hu(ro.element));return 0===zt.length?Ft.some("td"):zt.length===Pt.length?Ft.some("th"):Ft.none()})(Fe.cells),"th");return"tfoot"===Fe.section?{type:"footer"}:gt||Zt?{type:"header",subType:qm(gt,Zt)}:{type:"body"}})(He).type),G=D(K,"header"),se=D(K,"footer");if(G||se){const He=D(K,"body");return!G||He||se?G||He||!se?Ft.none():Ft.some("footer"):Ft.some("header")}return Ft.some("body")})(G.all.slice(se[0].row,He.row+He.rowspan))}).getOr("")}),vc=V=>{return Ja(V,"rgb")?Xn(K=V).map(wo).map(G=>"#"+G.value).getOr(K):V;var K},Ol=V=>{const K=Ie.fromDom(V);return{borderwidth:Fa(K,"border-width").getOr(""),borderstyle:Fa(K,"border-style").getOr(""),bordercolor:Fa(K,"border-color").map(vc).getOr(""),backgroundcolor:Fa(K,"background-color").map(vc).getOr("")}},Tl=V=>{const K=V[0],G=V.slice(1);return fr(G,se=>{fr(eo(K),He=>{it(se,(Fe,gt)=>{const Zt=K[He];""!==Zt&&He===gt&&Zt!==Fe&&(K[He]="")})})}),K},ua=(V,K,G,se)=>Jo(V,He=>!ps(G.formatter.matchNode(se,K+He))).getOr(""),ds=pt(ua,["left","center","right"],"align"),$i=pt(ua,["top","middle","bottom"],"valign"),Va=V=>jt(Ie.fromDom(V)).map(K=>{const G={selection:Kn(V.cells)};return _i(K,G)}).getOr(""),Hd=(V,K)=>{const G=br(V),se=X(G.all,gt=>gt.cells),He=Nt(se,Fe=>mt(K,gt=>Ue(Fe.element,gt)));return qn(He,Fe=>({element:Fe.element.dom,column:ue(G,Fe.column).map(gt=>gt.element.dom)}))},pu=(V,K,G,se)=>{const He=se.getData();se.close(),V.undoManager.transact(()=>{((Fe,gt,Zt,Pt)=>{const zt=Oe(Pt,(ro,co)=>Zt[co]!==ro);$n(zt)>0&&gt.length>=1&&jt(gt[0]).each(ro=>{const co=Hd(ro,gt),Wn=$n(Oe(zt,(on,ur)=>"scope"!==ur&&"celltype"!==ur))>0,xt=Dr(zt,"celltype");(Wn||Dr(zt,"scope"))&&((on,ur,xo,gn)=>{const W=1===ur.length;fr(ur,S=>{const F=S.element,ae=W?At:gn,Ve=Wi(on,F);var ve,ht,Mt,mo;ve=Ve,ht=S.column.map(ve=>Wi(on,ve)).getOr(Ve),Mt=xo,(mo=ae)("scope")&&ve.setAttrib("scope",Mt.scope),mo("class")&&ve.setAttrib("class",Mt.class),mo("height")&&ve.setStyle("height",Kt(Mt.height)),mo("width")&&ht.setStyle("width",Kt(Mt.width)),Gr(on)&&((ve,ht,Mt)=>{Mt("backgroundcolor")&&ve.setFormat("tablecellbackgroundcolor",ht.backgroundcolor),Mt("bordercolor")&&ve.setFormat("tablecellbordercolor",ht.bordercolor),Mt("borderstyle")&&ve.setFormat("tablecellborderstyle",ht.borderstyle),Mt("borderwidth")&&ve.setFormat("tablecellborderwidth",Kt(ht.borderwidth))})(Ve,xo,ae),gn("halign")&&yt(on,F,xo.halign),gn("valign")&&((ve,ht,Mt)=>{_e.each("top middle bottom".split(" "),mo=>{mo!==Mt&&ve.formatter.remove("valign"+mo,{},ht)}),Mt&&ve.formatter.apply("valign"+Mt,{},ht)})(on,F,xo.valign)})})(Fe,co,Pt,pt(Dr,zt)),xt&&Fe.execCommand("mceTableCellType",!1,{type:Pt.celltype,no_events:!0}),ft(Fe,ro.dom,{structure:xt,style:Wn})})})(V,K,G,He),V.focus()})},md=V=>{const K=le(V);if(0===K.length)return;const G=((Fe,gt)=>{const Zt=jt(gt[0]).map(Pt=>qn(Hd(Pt,gt),zt=>((ro,co,Wn,xt)=>{const on=ro.dom,ur=(gn,W)=>on.getStyle(gn,W)||on.getAttrib(gn,W);return{width:ur(xt.getOr(co),"width"),height:ur(co,"height"),scope:on.getAttrib(co,"scope"),celltype:(xo=co,xo.nodeName.toLowerCase()),class:on.getAttrib(co,"class",""),halign:ds(ro,co),valign:$i(ro,co),...Wn?Ol(co):{}};var xo})(Fe,zt.element,Gr(Fe),zt.column)));return Tl(Zt.getOrDie())})(V,K),se={type:"tabpanel",tabs:[{title:"General",name:"general",items:El(V)},Zc(V,"cell")]},He={type:"panel",items:[{type:"grid",columns:2,items:El(V)}]};V.windowManager.open({title:"Cell Properties",size:"normal",body:Gr(V)?se:He,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:G,onSubmit:pt(pu,V,K,G)})},Ql=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],us=V=>Ql.concat((K=>{const G=ir(za(K));return G.length>0?Ft.some({name:"class",type:"listbox",label:"Class",items:G}):Ft.none()})(V).toArray()),ma=(V,K,G,se)=>{const He=se.getData();se.close(),V.undoManager.transact(()=>{((Fe,gt,Zt,Pt)=>{const zt=Oe(Pt,(ro,co)=>Zt[co]!==ro);if($n(zt)>0){const ro=Dr(zt,"type"),co=!ro||$n(zt)>1;co&&((Wn,xt,on,ur)=>{const xo=1===xt.length?At:ur;fr(xt,gn=>{const W=Wi(Wn,gn);var S,F,ae;S=W,F=on,(ae=xo)("class")&&S.setAttrib("class",F.class),ae("height")&&S.setStyle("height",Kt(F.height)),rs(Wn)&&((S,F,ae)=>{ae("backgroundcolor")&&S.setStyle("background-color",F.backgroundcolor),ae("bordercolor")&&S.setStyle("border-color",F.bordercolor),ae("borderstyle")&&S.setStyle("border-style",F.borderstyle)})(W,on,xo),ur("align")&&yt(Wn,gn,on.align)})})(Fe,gt,Pt,pt(Dr,zt)),ro&&Fe.execCommand("mceTableRowType",!1,{type:Pt.type,no_events:!0}),jt(Ie.fromDom(gt[0])).each(Wn=>ft(Fe,Wn.dom,{structure:ro,style:co}))}})(V,K,G,He),V.focus()})},Al=V=>{const K=((V,K)=>{const G=Y(V),se=G.bind(He=>jt(He)).map(He=>Eo(He));return Es(G,se,(He,Fe)=>Nt(Fe,gt=>mt(Kn(gt.dom.cells),Zt=>"1"===Vo(Zt,K)||Ue(Zt,He)))).getOr([])})(Wo(V),Fl.selected);if(0===K.length)return;const G=qn(K,gt=>((Zt,Pt,zt)=>{const ro=Zt.dom;return{height:ro.getStyle(Pt,"height")||ro.getAttrib(Pt,"height"),class:ro.getAttrib(Pt,"class",""),type:Va(Pt),align:ds(Zt,Pt),...zt?Ol(Pt):{}}})(V,gt.dom,rs(V))),se=Tl(G),He={type:"tabpanel",tabs:[{title:"General",name:"general",items:us(V)},Zc(V,"row")]},Fe={type:"panel",items:[{type:"grid",columns:2,items:us(V)}]};V.windowManager.open({title:"Row Properties",size:"normal",body:rs(V)?He:Fe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:se,onSubmit:pt(ma,V,qn(K,gt=>gt.dom),se)})},Ea=(V,K,G)=>{const se=G?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],He=Kr(V)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Fe=K.length>0?[{type:"listbox",name:"class",label:"Class",items:K}]:[];return se.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(He).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(Fe)},$s=(V,K,G,se)=>{if("TD"===K.tagName||"TH"===K.tagName)ns(G)&&as(se)?V.setStyle(K,G,se):V.setStyles(K,G);else if(K.children)for(let He=0;He<K.children.length;He++)$s(V,K.children[He],G,se)},Li=(V,K,G,se)=>{const He=V.dom,Fe=se.getData(),gt=Oe(Fe,(Zt,Pt)=>G[Pt]!==Zt);se.close(),""===Fe.class&&delete Fe.class,V.undoManager.transact(()=>{if(!K){const Zt=ta(Fe.cols).getOr(1),Pt=ta(Fe.rows).getOr(1);V.execCommand("mceInsertTable",!1,{rows:Pt,columns:Zt}),K=Y(Wo(V),ls(V)).bind(zt=>jt(zt,ls(V))).map(zt=>zt.dom).getOrDie()}if($n(gt)>0){const Zt={border:Dr(gt,"border"),bordercolor:Dr(gt,"bordercolor"),cellpadding:Dr(gt,"cellpadding")};((zt,ro,co,Wn)=>{const xt=zt.dom,on={},ur={},xo=da(zt),gn=Fs(zt);if(ps(co.class)||(on.class=co.class),ur.height=Kt(co.height),xo?ur.width=Kt(co.width):xt.getAttrib(ro,"width")&&(on.width=(W=co.width)?W.replace(/px$/,""):""),xo?(ur["border-width"]=Kt(co.border),ur["border-spacing"]=Kt(co.cellspacing)):(on.border=co.border,on.cellpadding=co.cellpadding,on.cellspacing=co.cellspacing),xo&&ro.children){const W={};if(Wn.border&&(W["border-width"]=Kt(co.border)),Wn.cellpadding&&(W.padding=Kt(co.cellpadding)),gn&&Wn.bordercolor&&(W["border-color"]=co.bordercolor),!(S=>{for(const F in S)if(ne.call(S,F))return!1;return!0})(W))for(let S=0;S<ro.children.length;S++)$s(xt,ro.children[S],W)}var W;if(gn){const W=co;ur["background-color"]=W.backgroundcolor,ur["border-color"]=W.bordercolor,ur["border-style"]=W.borderstyle}on.style=xt.serializeStyle({...er(zt),...ur}),xt.setAttribs(ro,{...ra(zt),...on})})(V,K,Fe,Zt);const Pt=He.select("caption",K)[0];(Pt&&!Fe.caption||!Pt&&Fe.caption)&&V.execCommand("mceTableToggleCaption"),yt(V,K,Fe.align)}if(V.focus(),V.addVisual(),$n(gt)>0){const Zt=Dr(gt,"caption"),Pt=!Zt||$n(gt)>1;ft(V,K,{structure:Zt,style:Pt})}})},gd=(V,K)=>{const G=V.dom;let se,He=((Pt,zt)=>{const ro=er(Pt),co=ra(Pt),Wn=zt?{borderstyle:yo(ro,"border-style").getOr(""),bordercolor:vc(yo(ro,"border-color").getOr("")),backgroundcolor:vc(yo(ro,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...ro,...co,...Wn,...(()=>{const xt=ro["border-width"];return da(Pt)&&xt?{border:xt}:yo(co,"border").fold(()=>({}),on=>({border:on}))})(),...yo(ro,"border-spacing").or(yo(co,"cellspacing")).fold(()=>({}),xt=>({cellspacing:xt})),...yo(ro,"border-padding").or(yo(co,"cellpadding")).fold(()=>({}),xt=>({cellpadding:xt}))}})(V,Fs(V));K?(He.cols="1",He.rows="1",Fs(V)&&(He.borderstyle="",He.bordercolor="",He.backgroundcolor="")):(se=G.getParent(V.selection.getStart(),"table",V.getBody()),se?He=((Pt,zt,ro)=>{const co=Pt.dom,Wn=da(Pt)?co.getStyle(zt,"border-spacing")||co.getAttrib(zt,"cellspacing"):co.getAttrib(zt,"cellspacing")||co.getStyle(zt,"border-spacing"),xt=da(Pt)?We(co,zt,"padding")||co.getAttrib(zt,"cellpadding"):co.getAttrib(zt,"cellpadding")||We(co,zt,"padding");return{width:co.getStyle(zt,"width")||co.getAttrib(zt,"width"),height:co.getStyle(zt,"height")||co.getAttrib(zt,"height"),cellspacing:Wn??"",cellpadding:xt??"",border:((on,ur)=>{const xo=Fa(Ie.fromDom(ur),"border-width");return da(Pt)&&xo.isSome()?xo.getOr(""):on.getAttrib(ur,"border")||We(Pt.dom,ur,"border-width")||We(Pt.dom,ur,"border")||""})(co,zt),caption:!!co.select("caption",zt)[0],class:co.getAttrib(zt,"class",""),align:ds(Pt,zt),...ro?Ol(zt):{}}})(V,se,Fs(V)):Fs(V)&&(He.borderstyle="",He.bordercolor="",He.backgroundcolor=""));const Fe=ir(Bo(V));Fe.length>0&&He.class&&(He.class=He.class.replace(/\s*mce\-item\-table\s*/g,""));const gt={type:"grid",columns:2,items:Ea(V,Fe,K)},Zt=Fs(V)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[gt]},Zc(V,"table")]}:{type:"panel",items:[gt]};V.windowManager.open({title:"Table Properties",size:"normal",body:Zt,onSubmit:pt(Li,V,se,He),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:He})},Mn=uo,ci=V=>{const K=(G,se)=>Vs(G,se).exists(He=>parseInt(He,10)>1);return V.length>0&&sr(V,G=>K(G,"rowspan")||K(G,"colspan"))?Ft.some(V):Ft.none()},ec=(V,K,G)=>{return K.length<=1?Ft.none():(se=V,He=G.firstSelectedSelector,Fe=G.lastSelectedSelector,ka(se,He,Fe).bind(gt=>{const Zt=co=>Ue(se,co),Pt="thead,tfoot,tbody,table",zt=nr(gt.first,Pt,Zt),ro=nr(gt.last,Pt,Zt);return zt.bind(co=>ro.bind(Wn=>{return Ue(co,Wn)?(on=gt.first,ur=gt.last,((V,K,G)=>((se,He,Fe)=>{const gt=Zo(se,He,Ue),Zt=Zo(se,Fe,Ue);return gt.bind(Pt=>Zt.map(zt=>{return ro=Pt,co=zt,{startRow:Math.min(ro.row,co.row),startCol:Math.min(ro.column,co.column),finishRow:Math.max(ro.row+ro.rowspan-1,co.row+co.rowspan-1),finishCol:Math.max(ro.column+ro.colspan-1,co.column+co.colspan-1)};var ro,co}))})(V,K,G).bind(se=>((He,Fe)=>{let gt=!0;const Zt=pt(qo,Fe);for(let Pt=Fe.startRow;Pt<=Fe.finishRow;Pt++)for(let zt=Fe.startCol;zt<=Fe.finishCol;zt++)gt=gt&&Zs(He,Pt,zt).exists(Zt);return gt?Ft.some(Fe):Ft.none()})(V,se)))(It(gt.table),on,ur)):Ft.none();var on,ur}))})).map(gt=>({bounds:gt,cells:K}));var se,He,Fe};var fu=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const ei=V=>{var K;const G=null!==(K=fu.read())&&void 0!==K?K:[];return Tt(G,se=>Ft.from(se.getType(V)))},qi=()=>ei("x-tinymce/dom-table-rows"),Ml=()=>ei("x-tinymce/dom-table-columns"),Un=V=>K=>{const G=()=>{K.setEnabled(V.selection.isEditable())};return V.on("NodeChange",G),G(),()=>{V.off("NodeChange",G)}},bu=V=>K=>{const G=()=>{K.setEnabled(V.selection.isEditable())};return V.on("NodeChange",G),G(),()=>{V.off("NodeChange",G)}};Ca.add("table",V=>{const K=(V=>{const K=zn(Ft.none()),G=zn([]);let se=Ft.none();const He=Ha("caption"),Fe=xo=>se.forall(gn=>!gn[xo]),gt=()=>wa(Wo(V),ls(V)).bind(xo=>{return Es(jt(xo),wa((W=V,Ie.fromDom(W.selection.getEnd())),ls(V)).bind(jt),(W,S)=>{return Ue(W,S)?He(xo)?Ft.some({element:F=xo,mergable:Ft.none(),unmergable:Ft.none(),selection:[F]}):Ft.some(((F,ae,Ve)=>({element:Ve,mergable:ec(ae,F,Fl),unmergable:ci(F),selection:Mn(F)}))(le(V),W,xo)):Ft.none();var F}).bind(uo);var W}),Zt=xo=>jt(xo.element).map(gn=>{const W=br(gn),S=Jl(W,xo).getOr([]),F=Do(S,(ae,Ve)=>(Ve.isLocked&&(ae.onAny=!0,0===Ve.column?ae.onFirst=!0:Ve.column+Ve.colspan>=W.grid.columns&&(ae.onLast=!0)),ae),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:bc(W,xo).isSome(),unmergeable:Id(W,xo).isSome(),locked:F}}),Pt=()=>{K.set((xo=>{let gn,W=!1;return(...S)=>(W||(W=!0,gn=xo.apply(null,S)),gn)})(gt)()),se=K.get().bind(Zt),fr(G.get(),lo)},zt=xo=>(xo(),G.set(G.get().concat([xo])),()=>{G.set(Nt(G.get(),gn=>gn!==xo))}),ro=(xo,gn)=>zt(()=>K.get().fold(()=>{xo.setEnabled(!1)},W=>{xo.setEnabled(!gn(W)&&V.selection.isEditable())})),co=(xo,gn,W)=>zt(()=>K.get().fold(()=>{xo.setEnabled(!1),xo.setActive(!1)},S=>{xo.setEnabled(!gn(S)&&V.selection.isEditable()),xo.setActive(W(S))})),Wn=xo=>se.exists(gn=>gn.locked[xo]),xt=(xo,gn)=>W=>co(W,S=>He(S.element),()=>V.queryCommandValue(xo)===gn),on=xt("mceTableRowType","header"),ur=xt("mceTableColType","th");return V.on("NodeChange ExecCommand TableSelectorChange",Pt),{onSetupTable:xo=>ro(xo,gn=>!1),onSetupCellOrRow:xo=>ro(xo,gn=>He(gn.element)),onSetupColumn:xo=>gn=>ro(gn,W=>He(W.element)||Wn(xo)),onSetupPasteable:xo=>gn=>ro(gn,W=>He(W.element)||xo().isNone()),onSetupPasteableColumn:(xo,gn)=>W=>ro(W,S=>He(S.element)||xo().isNone()||Wn(gn)),onSetupMergeable:xo=>ro(xo,gn=>Fe("mergeable")),onSetupUnmergeable:xo=>ro(xo,gn=>Fe("unmergeable")),resetTargets:Pt,onSetupTableWithCaption:xo=>co(xo,jn,gn=>jt(gn.element,ls(V)).exists(W=>((V,K)=>Jo(V.dom.childNodes,He=>{return Fe=Ie.fromDom(He),To(Fe,"caption");var Fe}).map(Ie.fromDom))(W).isSome())),onSetupTableRowHeaders:on,onSetupTableColumnHeaders:ur,targets:K.get}})(V);(G=>{const se=G.options.register;se("table_border_widths",{processor:"object[]",default:tn}),se("table_border_styles",{processor:"object[]",default:Dn}),se("table_cell_advtab",{processor:"boolean",default:!0}),se("table_row_advtab",{processor:"boolean",default:!0}),se("table_advtab",{processor:"boolean",default:!0}),se("table_appearance_options",{processor:"boolean",default:!0}),se("table_grid",{processor:"boolean",default:!So.deviceType.isTouch()}),se("table_cell_class_list",{processor:"object[]",default:[]}),se("table_row_class_list",{processor:"object[]",default:[]}),se("table_class_list",{processor:"object[]",default:[]}),se("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),se("table_background_color_map",{processor:"object[]",default:[]}),se("table_border_color_map",{processor:"object[]",default:[]})})(V),(V=>{it({mceTableProps:pt(gd,V,!1),mceTableRowProps:pt(Al,V),mceTableCellProps:pt(md,V),mceInsertTableDialog:pt(gd,V,!0)},(K,G)=>V.addCommand(G,()=>{return se=K,void((Fe=Wo(V),gt=Ha("table"),Pn((Zt,Pt)=>Pt(Zt),Gn,Fe,gt,void 0)).forall(Ao)&&se());var Fe,gt,se}))})(V),((G,se)=>{const He=xt=>()=>G.execCommand(xt),Fe=(xt,on)=>!!G.queryCommandSupported(on.command)&&(G.ui.registry.addMenuItem(xt,{...on,onAction:Ar(on.onAction)?on.onAction:He(on.command)}),!0),gt=(xt,on)=>{G.queryCommandSupported(on.command)&&G.ui.registry.addToggleMenuItem(xt,{...on,onAction:Ar(on.onAction)?on.onAction:He(on.command)})},Zt=xt=>{G.execCommand("mceInsertTable",!1,{rows:xt.numRows,columns:xt.numColumns})},Pt=[Fe("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:se.onSetupCellOrRow}),Fe("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:se.onSetupCellOrRow}),Fe("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:se.onSetupCellOrRow}),Fe("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:se.onSetupCellOrRow}),Fe("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:se.onSetupCellOrRow}),Fe("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:se.onSetupCellOrRow}),Fe("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:se.onSetupPasteable(qi)}),Fe("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:se.onSetupPasteable(qi)})],zt=[Fe("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:se.onSetupColumn("onFirst")}),Fe("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:se.onSetupColumn("onLast")}),Fe("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:se.onSetupColumn("onAny")}),Fe("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:se.onSetupColumn("onAny")}),Fe("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:se.onSetupColumn("onAny")}),Fe("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:se.onSetupPasteableColumn(Ml,"onFirst")}),Fe("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:se.onSetupPasteableColumn(Ml,"onLast")})],ro=[Fe("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:se.onSetupCellOrRow}),Fe("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:se.onSetupMergeable}),Fe("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:se.onSetupUnmergeable})];na(G)?G.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Zt}],onSetup:bu(G)}):G.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:He("mceInsertTableDialog"),onSetup:bu(G)}),G.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:He("mceInsertTableDialog"),onSetup:bu(G)}),Fe("tableprops",{text:"Table properties",onSetup:se.onSetupTable,command:"mceTableProps"}),Fe("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:se.onSetupTable,command:"mceTableDelete"}),D(Pt,!0)&&G.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:_n("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),D(zt,!0)&&G.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:_n("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),D(ro,!0)&&G.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:_n("tablecellprops tablemergecells tablesplitcells")}),G.ui.registry.addContextMenu("table",{update:()=>(se.resetTargets(),se.targets().fold(_n(""),xt=>"caption"===en(xt.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const co=gl(Bo(G));0!==co.length&&G.queryCommandSupported("mceTableToggleClass")&&G.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>fe(G,co,"tableclass",xt=>G.execCommand("mceTableToggleClass",!1,xt)),onSetup:se.onSetupTable});const Wn=gl(nl(G));0!==Wn.length&&G.queryCommandSupported("mceTableCellToggleClass")&&G.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>fe(G,Wn,"tablecellclass",xt=>G.execCommand("mceTableCellToggleClass",!1,xt)),onSetup:se.onSetupCellOrRow}),G.queryCommandSupported("mceTableApplyCellStyle")&&(G.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>fe(G,Le,"tablecellverticalalign",Qa(G,"vertical-align")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>fe(G,ca(G),"tablecellborderwidth",Qa(G,"border-width")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>fe(G,ii(G),"tablecellborderstyle",Qa(G,"border-style")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Vc(G,Xr(G),"background-color"),onSetup:se.onSetupCellOrRow}),G.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Vc(G,vs(G),"border-color"),onSetup:se.onSetupCellOrRow})),gt("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:se.onSetupTableWithCaption}),gt("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:yr(G),onSetup:se.onSetupTableRowHeaders}),gt("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hl(G),onSetup:se.onSetupTableRowHeaders})})(V,K),((G,se)=>{G.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Un(G),fetch:zt=>zt("inserttable | cell row column | advtablesort | tableprops deletetable")});const He=zt=>()=>G.execCommand(zt),Fe=(zt,ro)=>{G.queryCommandSupported(ro.command)&&G.ui.registry.addButton(zt,{...ro,onAction:Ar(ro.onAction)?ro.onAction:He(ro.command)})},gt=(zt,ro)=>{G.queryCommandSupported(ro.command)&&G.ui.registry.addToggleButton(zt,{...ro,onAction:Ar(ro.onAction)?ro.onAction:He(ro.command)})};Fe("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:se.onSetupTable}),Fe("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:se.onSetupTable}),Fe("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:se.onSetupCellOrRow}),Fe("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:se.onSetupMergeable}),Fe("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:se.onSetupUnmergeable}),Fe("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:se.onSetupCellOrRow}),Fe("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:se.onSetupCellOrRow}),Fe("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:se.onSetupCellOrRow}),Fe("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:se.onSetupCellOrRow}),Fe("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:se.onSetupColumn("onFirst")}),Fe("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:se.onSetupColumn("onLast")}),Fe("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:se.onSetupColumn("onAny")}),Fe("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:se.onSetupCellOrRow}),Fe("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:se.onSetupCellOrRow}),Fe("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:se.onSetupPasteable(qi)}),Fe("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:se.onSetupPasteable(qi)}),Fe("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:se.onSetupColumn("onAny")}),Fe("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:se.onSetupColumn("onAny")}),Fe("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:se.onSetupPasteableColumn(Ml,"onFirst")}),Fe("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:se.onSetupPasteableColumn(Ml,"onLast")}),Fe("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Un(G)});const Zt=gl(Bo(G));0!==Zt.length&&G.queryCommandSupported("mceTableToggleClass")&&G.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:li(G,Zt,"tableclass",zt=>G.execCommand("mceTableToggleClass",!1,zt)),onSetup:se.onSetupTable});const Pt=gl(nl(G));0!==Pt.length&&G.queryCommandSupported("mceTableCellToggleClass")&&G.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:li(G,Pt,"tablecellclass",zt=>G.execCommand("mceTableCellToggleClass",!1,zt)),onSetup:se.onSetupCellOrRow}),G.queryCommandSupported("mceTableApplyCellStyle")&&(G.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:li(G,Le,"tablecellverticalalign",Qa(G,"vertical-align")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:li(G,ca(G),"tablecellborderwidth",Qa(G,"border-width")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:li(G,ii(G),"tablecellborderstyle",Qa(G,"border-style")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:zt=>zt(Vc(G,Xr(G),"background-color")),onSetup:se.onSetupCellOrRow}),G.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:zt=>zt(Vc(G,vs(G),"border-color")),onSetup:se.onSetupCellOrRow})),gt("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:se.onSetupTableWithCaption}),gt("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:yr(G),onSetup:se.onSetupTableRowHeaders}),gt("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hl(G),onSetup:se.onSetupTableColumnHeaders})})(V,K),(G=>{const se=rl(G);se.length>0&&G.ui.registry.addContextToolbar("table",{predicate:He=>G.dom.is(He,"table")&&G.getBody().contains(He)&&G.dom.isEditable(He.parentNode),items:se,scope:"node",position:"node"})})(V)})}(),function(){"use strict";var Ca=tinymce.util.Tools.resolve("tinymce.ModelManager");const Ss=g=>f=>(_=>{const E=typeof _;return null===_?"null":"object"===E&&Array.isArray(_)?"array":"object"===E&&(B=I=_,(Z=String).prototype.isPrototypeOf(B)||(null===(q=I.constructor)||void 0===q?void 0:q.name)===Z.name)?"string":E;var B,I,Z,q})(f)===g,va=g=>f=>typeof f===g,ns=g=>f=>g===f,Qs=Ss("string"),No=Ss("object"),ps=Ss("array"),as=ns(null),Ar=va("boolean"),Ya=ns(void 0),Is=g=>!(null==g),_n=va("function"),uo=va("number"),ut=()=>{},pt=g=>()=>g,lo=g=>g,jn=(g,f)=>g===f;function At(g,...f){return(..._)=>{const E=f.concat(_);return g.apply(null,E)}}const Ft=g=>f=>!g(f),eo=g=>g(),ne=pt(!1),it=pt(!0);class Oe{constructor(f,_){this.tag=f,this.value=_}static some(f){return new Oe(!0,f)}static none(){return Oe.singletonNone}fold(f,_){return this.tag?_(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?Oe.some(f(this.value)):Oe.none()}bind(f){return this.tag?f(this.value):Oe.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:Oe.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Is(f)?Oe.some(f):Oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oe.singletonNone=new Oe(!1);const $n=Array.prototype.slice,yo=Array.prototype.indexOf,Dr=Array.prototype.push,lr=(g,f)=>yo.call(g,f)>-1,ot=(g,f)=>{for(let _=0,E=g.length;_<E;_++)if(f(g[_],_))return!0;return!1},mn=(g,f)=>{const _=[];for(let E=0;E<g;E++)_.push(f(E));return _},D=(g,f)=>{const _=g.length,E=new Array(_);for(let B=0;B<_;B++)E[B]=f(g[B],B);return E},mt=(g,f)=>{for(let _=0,E=g.length;_<E;_++)f(g[_],_)},Ma=(g,f)=>{const _=[],E=[];for(let B=0,I=g.length;B<I;B++){const Z=g[B];(f(Z,B)?_:E).push(Z)}return{pass:_,fail:E}},qn=(g,f)=>{const _=[];for(let E=0,B=g.length;E<B;E++){const I=g[E];f(I,E)&&_.push(I)}return _},fr=(g,f,_)=>(((E,B)=>{for(let I=E.length-1;I>=0;I--)B(E[I],I)})(g,(E,B)=>{_=f(_,E,B)}),_),Nt=(g,f,_)=>(mt(g,(E,B)=>{_=f(_,E,B)}),_),Do=(g,f)=>((_,E,B)=>{for(let I=0,Z=_.length;I<Z;I++){const q=_[I];if(E(q,I))return Oe.some(q);if(B(q,I))break}return Oe.none()})(g,f,ne),Jo=(g,f)=>{for(let _=0,E=g.length;_<E;_++)if(f(g[_],_))return Oe.some(_);return Oe.none()},X=g=>{const f=[];for(let _=0,E=g.length;_<E;++_){if(!ps(g[_]))throw new Error("Arr.flatten item "+_+" was not an array, input: "+g);Dr.apply(f,g[_])}return f},sr=(g,f)=>X(D(g,f)),Xe=(g,f)=>{for(let _=0,E=g.length;_<E;++_)if(!0!==f(g[_],_))return!1;return!0},Tt=(g,f)=>{const _={};for(let E=0,B=g.length;E<B;E++){const I=g[E];_[String(I)]=f(I,E)}return _},Po=(g,f)=>f>=0&&f<g.length?Oe.some(g[f]):Oe.none(),Ie=g=>Po(g,0),To=g=>Po(g,g.length-1),Gt=(g,f)=>{for(let _=0;_<g.length;_++){const E=f(g[_],_);if(E.isSome())return E}return Oe.none()},Ue=Object.keys,Hs=Object.hasOwnProperty,en=(g,f)=>{const _=Ue(g);for(let E=0,B=_.length;E<B;E++){const I=_[E];f(g[I],I)}},Yt=(g,f)=>ts(g,(_,E)=>({k:E,v:f(_,E)})),ts=(g,f)=>{const _={};return en(g,(E,B)=>{const I=f(E,B);_[I.k]=I.v}),_},Jn=(g,f)=>{const _=[];return en(g,(E,B)=>{_.push(f(E,B))}),_},fs=g=>Jn(g,lo),or=(g,f)=>Hs.call(g,f),Ps=typeof window<"u"?window:Function("return this;")(),Ha=(g,f)=>((_,E)=>{let B=E??Ps;for(let I=0;I<_.length&&null!=B;++I)B=B[_[I]];return B})(g.split("."),f),ks=Object.getPrototypeOf,Cr=g=>g.dom.nodeName.toLowerCase(),_a=g=>g.dom.nodeType,is=g=>f=>_a(f)===g,_r=g=>8===_a(g)||"#comment"===Cr(g),Zi=g=>Pn(g)&&(g=>{const f=Ha("ownerDocument.defaultView",g);return No(g)&&((_=f,((E,B)=>{const I=Ha("HTMLElement",B);if(null==I)throw new Error("HTMLElement not available on this browser");return I})(0,_)).prototype.isPrototypeOf(g)||/^HTML\w*Element$/.test(ks(g).constructor.name));var _})(g.dom),Pn=is(1),Gn=is(3),nr=is(9),Di=is(11),Sr=g=>f=>Pn(f)&&Cr(f)===g,zs=(g,f,_)=>{if(!(Qs(_)||Ar(_)||uo(_)))throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",_,":: Element ",g),new Error("Attribute value was not simple");g.setAttribute(f,_+"")},Ao=(g,f,_)=>{zs(g.dom,f,_)},Nr=(g,f)=>{const _=g.dom;en(f,(E,B)=>{zs(_,B,E)})},ls=(g,f)=>{const _=g.dom.getAttribute(f);return null===_?void 0:_},Kt=(g,f)=>Oe.from(ls(g,f)),Wo=(g,f)=>{g.dom.removeAttribute(f)},bs=g=>Nt(g.dom.attributes,(f,_)=>(f[_.name]=_.value,f),{}),cs=g=>{if(null==g)throw new Error("Node cannot be null or undefined");return{dom:g}},Dt={fromHtml:(g,f)=>{const _=(f||document).createElement("div");if(_.innerHTML=g,!_.hasChildNodes()||_.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,g),new Error(E)}return cs(_.childNodes[0])},fromTag:(g,f)=>{const _=(f||document).createElement(g);return cs(_)},fromText:(g,f)=>{const _=(f||document).createTextNode(g);return cs(_)},fromDom:cs,fromPoint:(g,f,_)=>Oe.from(g.dom.elementFromPoint(f,_)).map(cs)},Nn=(g,f)=>{const _=g.dom;if(1!==_.nodeType)return!1;{const E=_;if(void 0!==E.matches)return E.matches(f);if(void 0!==E.msMatchesSelector)return E.msMatchesSelector(f);if(void 0!==E.webkitMatchesSelector)return E.webkitMatchesSelector(f);if(void 0!==E.mozMatchesSelector)return E.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},Vo=g=>1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType||0===g.childElementCount,Vs=(g,f)=>{const _=void 0===f?document:f.dom;return Vo(_)?Oe.none():Oe.from(_.querySelector(g)).map(Dt.fromDom)},ar=(g,f)=>g.dom===f.dom,Bi=(g,f)=>{const _=g.dom,E=f.dom;return _!==E&&_.contains(E)},Es=Nn,Ja=g=>Dt.fromDom(g.dom.ownerDocument),si=g=>nr(g)?g:Ja(g),Sa=g=>Oe.from(g.dom.parentNode).map(Dt.fromDom),ai=g=>Oe.from(g.dom.parentElement).map(Dt.fromDom),ta=(g,f)=>{const _=_n(f)?f:ne;let E=g.dom;const B=[];for(;null!=E.parentNode;){const I=E.parentNode,Z=Dt.fromDom(I);if(B.push(Z),!0===_(Z))break;E=I}return B},ya=g=>Oe.from(g.dom.previousSibling).map(Dt.fromDom),Pa=g=>Oe.from(g.dom.nextSibling).map(Dt.fromDom),Os=g=>D(g.dom.childNodes,Dt.fromDom),Fa=(g,f)=>Oe.from(g.dom.childNodes[f]).map(Dt.fromDom),pe=(g,f)=>{Sa(g).each(_=>{_.dom.insertBefore(f.dom,g.dom)})},Be=(g,f)=>{Pa(g).fold(()=>{Sa(g).each(_=>{Qe(_,f)})},_=>{pe(_,f)})},nt=(g,f)=>{var E;(E=g,Fa(E,0)).fold(()=>{Qe(g,f)},E=>{g.dom.insertBefore(f.dom,E.dom)})},Qe=(g,f)=>{g.dom.appendChild(f.dom)},Bt=(g,f)=>{pe(g,f),Qe(f,g)},Wt=(g,f)=>{mt(f,(_,E)=>{Be(0===E?g:f[E-1],_)})},jt=(g,f)=>{mt(f,_=>{Qe(g,_)})},Eo=g=>{g.dom.textContent="",mt(Os(g),f=>{ho(f)})},ho=g=>{const f=g.dom;null!==f.parentNode&&f.parentNode.removeChild(f)},Fn=g=>{const f=Os(g);f.length>0&&Wt(g,f),ho(g)},Qn=(g,f)=>Dt.fromDom(g.dom.cloneNode(f)),Rn=g=>Qn(g,!1),fn=g=>Qn(g,!0),br=(g,f)=>{const _=Dt.fromTag(f),E=bs(g);return Nr(_,E),_},Zs=["tfoot","thead","tbody","colgroup"],Zo=(g,f,_)=>({element:g,rowspan:f,colspan:_}),ue=(g,f,_)=>({element:g,cells:f,section:_}),_e=(g,f,_)=>({element:g,isNew:f,isLocked:_}),We=(g,f,_,E)=>({element:g,cells:f,section:_,isNew:E}),yt=_n(Element.prototype.attachShadow)&&_n(Node.prototype.getRootNode),ft=pt(yt),Lt=yt?g=>Dt.fromDom(g.dom.getRootNode()):si,Fo=g=>Dt.fromDom(g.dom.host),So=g=>{const f=Gn(g)?g.dom.parentNode:g.dom;if(null==f||null===f.ownerDocument)return!1;const _=f.ownerDocument;return(I=>{const Z=Lt(I);return Di(q=Z)&&Is(q.dom.host)?Oe.some(Z):Oe.none();var q})(Dt.fromDom(f)).fold(()=>_.body.contains(f),(E=So,B=Fo,I=>E(B(I))));var E,B},tn=g=>{const f=g.dom.body;if(null==f)throw new Error("Body is not available yet");return Dt.fromDom(f)},Dn=(g,f)=>{let _=[];return mt(Os(g),E=>{f(E)&&(_=_.concat([E])),_=_.concat(Dn(E,f))}),_},rr=(g,f,_)=>qn(ta(g,_),Z=>Nn(Z,f)),ln=(g,f)=>qn(Os(g),B=>Nn(B,f)),kr=(g,f)=>((_,E)=>{const B=void 0===E?document:E.dom;return Vo(B)?[]:D(B.querySelectorAll(_),Dt.fromDom)})(f,g);var oa=(g,f,_,E,B)=>g(_,E)?Oe.some(_):_n(B)&&B(_)?Oe.none():f(_,E,B);const ca=(g,f,_)=>{let E=g.dom;const B=_n(_)?_:ne;for(;E.parentNode;){E=E.parentNode;const I=Dt.fromDom(E);if(f(I))return Oe.some(I);if(B(I))break}return Oe.none()},ii=(g,f,_)=>oa((E,B)=>B(E),ca,g,f,_),Gr=(g,f,_)=>ca(g,E=>Nn(E,f),_),rs=(g,f)=>Do(g.dom.childNodes,B=>{return I=Dt.fromDom(B),Nn(I,f);var I}).map(Dt.fromDom),Fs=(g,f)=>Vs(f,g),Kr=(g,f,_)=>oa((E,B)=>Nn(E,B),Gr,g,f,_),na=(g,f,_=jn)=>g.exists(E=>_(E,f)),da=g=>{const f=[],_=E=>{f.push(E)};for(let E=0;E<g.length;E++)g[E].each(_);return f},nl=(g,f)=>g?Oe.some(f):Oe.none(),za=(g,f,_)=>""===f||g.length>=f.length&&g.substr(_,_+f.length)===f,Bo=(g,f,_=0,E)=>{const B=g.indexOf(f,_);return-1!==B&&(!!Ya(E)||B+f.length<=E)},rl=(g,f)=>za(g,f,0),Xr=(g,f)=>za(g,f,g.length-f.length),vs=(g=/^\s+|\s+$/g,f=>f.replace(g,"")),ji=g=>g.length>0,jr=g=>void 0!==g.style&&_n(g.style.getPropertyValue),er=(g,f,_)=>{if(!Qs(_))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",_,":: Element ",g),new Error("CSS value must be a string: "+_);jr(g)&&g.style.setProperty(f,_)},ra=(g,f,_)=>{er(g.dom,f,_)},qo=(g,f)=>{const _=g.dom;en(f,(E,B)=>{er(_,B,E)})},xi=(g,f)=>{const _=g.dom,E=window.getComputedStyle(_).getPropertyValue(f);return""!==E||So(g)?E:It(_,f)},It=(g,f)=>jr(g)?g.style.getPropertyValue(f):"",Ts=(g,f)=>{const E=It(g.dom,f);return Oe.from(E).filter(B=>B.length>0)},As=(g,f)=>{var _,E;E=f,jr(_=g.dom)&&_.style.removeProperty(E),na(Kt(g,"style").map(vs),"")&&Wo(g,"style")},Br=(g,f,_=0)=>Kt(g,f).map(E=>parseInt(E,10)).getOr(_),zc=(g,f)=>Br(g,f,1),Xl=g=>Sr("col")(g)?Br(g,"span",1)>1:zc(g,"colspan")>1,Lr=g=>zc(g,"rowspan")>1,Sl=(g,f)=>parseInt(xi(g,f),10),Er=pt(10),fc=pt(10),Ns=(g,f)=>Ui(g,f,it),Ui=(g,f,_)=>sr(Os(g),E=>Nn(E,f)?_(E)?[E]:[]:Ui(E,f,_)),ka=(g,f)=>((_,E,B=ne)=>B(E)?Oe.none():lr(_,Cr(E))?Oe.some(E):Gr(E,_.join(","),I=>Nn(I,"table")||B(I)))(["td","th"],g,f),Kn=g=>Ns(g,"th,td"),Yl=g=>Nn(g,"colgroup")?ln(g,"col"):sr(Fl(g),f=>ln(f,"col")),Ms=(g,f)=>Kr(g,"table",f),kl=g=>Ns(g,"tr"),Fl=g=>Ms(g).fold(pt([]),f=>ln(f,"colgroup")),vr=(g,f)=>D(g,_=>{if("colgroup"===Cr(_)){const E=D(Yl(_),B=>{const I=Br(B,"span",1);return Zo(B,1,I)});return ue(_,E,"colgroup")}{const E=D(Kn(_),B=>{const I=Br(B,"rowspan",1),Z=Br(B,"colspan",1);return Zo(B,I,Z)});return ue(_,E,f(_))}}),wa=g=>Sa(g).map(f=>{const _=Cr(f);return lr(Zs,_)?_:"tbody"}).getOr("tbody"),Y=g=>{const f=kl(g),_=[...Fl(g),...f];return vr(_,wa)},le=g=>{let f,_=!1;return(...E)=>(_||(_=!0,f=g.apply(null,E)),f)},Ce=()=>Le(0,0),Le=(g,f)=>({major:g,minor:f}),ke={nu:Le,detect:(g,f)=>{const _=String(f).toLowerCase();return 0===g.length?Ce():((E,B)=>{const I=((q,te)=>{for(let ge=0;ge<q.length;ge++){const ye=q[ge];if(ye.test(te))return ye}})(E,B);if(!I)return{major:0,minor:0};const Z=q=>Number(B.replace(I,"$"+q));return Le(Z(1),Z(2))})(g,_)},unknown:Ce},lt=(g,f)=>{const _=String(f).toLowerCase();return Do(g,E=>E.search(_))},ct=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rt=g=>f=>Bo(f,g),wo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:g=>Bo(g,"edge/")&&Bo(g,"chrome")&&Bo(g,"safari")&&Bo(g,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ct],search:g=>Bo(g,"chrome")&&!Bo(g,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:g=>Bo(g,"msie")||Bo(g,"trident")},{name:"Opera",versionRegexes:[ct,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rt("firefox")},{name:"Safari",versionRegexes:[ct,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:g=>(Bo(g,"safari")||Bo(g,"mobile/"))&&Bo(g,"applewebkit")}],Jt=[{name:"Windows",search:Rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:g=>Bo(g,"iphone")||Bo(g,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rt("linux"),versionRegexes:[]},{name:"Solaris",search:Rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ko={browsers:pt(wo),oses:pt(Jt)},cn="Chromium",zn="Firefox",vn=g=>{const f=g.current,E=B=>()=>f===B;return{current:f,version:g.version,isEdge:E("Edge"),isChromium:E(cn),isIE:E("IE"),isOpera:E("Opera"),isFirefox:E(zn),isSafari:E("Safari")}},ir=()=>vn({current:void 0,version:ke.unknown()}),fe=vn,Qa=(pt("Edge"),pt(cn),pt("IE"),pt("Opera"),pt(zn),pt("Safari"),"Windows"),gl="Android",yr="Solaris",hl="FreeBSD",Ld="ChromeOS",El=g=>{const f=g.current,E=B=>()=>f===B;return{current:f,version:g.version,isWindows:E(Qa),isiOS:E("iOS"),isAndroid:E(gl),isMacOS:E("macOS"),isLinux:E("Linux"),isSolaris:E(yr),isFreeBSD:E(hl),isChromeOS:E(Ld)}},Zc=()=>El({current:void 0,version:ke.unknown()}),Wi=El,hu=(pt(Qa),pt("iOS"),pt(gl),pt("Linux"),pt("macOS"),pt(yr),pt(hl),pt(Ld),g=>window.matchMedia(g).matches);var g;let qm=le(()=>((g,f,_)=>{const E=ko.browsers(),B=ko.oses(),I=f.bind(te=>{return ge=E,Gt(te.brands,he=>{const we=he.brand.toLowerCase();return Do(ge,Ee=>{var $e;return we===(null===($e=Ee.brand)||void 0===$e?void 0:$e.toLowerCase())}).map(Ee=>({current:Ee.name,version:ke.nu(parseInt(he.version,10),0)}))});var ge}).orThunk(()=>{return lt(E,ge=g).map(ye=>{const he=ke.detect(ye.versionRegexes,ge);return{current:ye.name,version:he}});var ge}).fold(ir,fe),Z=(te=B,ge=g,lt(te,ge).map(ye=>{const he=ke.detect(ye.versionRegexes,ge);return{current:ye.name,version:he}})).fold(Zc,Wi),q=((te,ge,ye,he)=>{const we=te.isiOS()&&!0===/ipad/i.test(ye),Ee=te.isiOS()&&!we,$e=te.isiOS()||te.isAndroid(),Ze=$e||he("(pointer:coarse)"),et=we||!Ee&&$e&&he("(min-device-width:768px)"),dt=Ee||$e&&!et,St=ge.isSafari()&&te.isiOS()&&!1===/safari/i.test(ye),wt=!dt&&!et&&!St;return{isiPad:pt(we),isiPhone:pt(Ee),isTablet:pt(et),isPhone:pt(dt),isTouch:pt(Ze),isAndroid:te.isAndroid,isiOS:te.isiOS,isWebView:pt(St),isDesktop:pt(wt)}})(Z,I,g,_);var te,ge;return{browser:I,os:Z,deviceType:q}})(navigator.userAgent,Oe.from(navigator.userAgentData),hu));const Ci=()=>qm(),jc=(g,f)=>{const _=B=>{const I=f(B);if(I<=0||null===I){const Z=xi(B,g);return parseFloat(Z)||0}return I},E=(B,I)=>Nt(I,(Z,q)=>{const te=xi(B,q),ge=void 0===te?0:parseInt(te,10);return isNaN(ge)?Z:Z+ge},0);return{set:(B,I)=>{if(!uo(I)&&!I.match(/^[0-9]+$/))throw new Error(g+".set accepts only positive integer values. Value was "+I);const Z=B.dom;jr(Z)&&(Z.style[g]=I+"px")},get:_,getOuter:_,aggregate:E,max:(B,I,Z)=>{const q=E(B,Z);return I>q?I-q:0}}},Uc=(g,f,_)=>{return B=_,(I=>{const Z=parseFloat(I);return isNaN(Z)?Oe.none():Oe.some(Z)})(xi(g,f)).getOr(B);var B},Jl=jc("width",g=>g.dom.offsetWidth),ss=g=>Jl.get(g),bc=g=>Jl.getOuter(g),Id=g=>((f,_)=>{const E=f.dom;return(E.getBoundingClientRect().width||E.offsetWidth)-Uc(I=f,"padding-left",0)-Uc(I,"padding-right",0)-Uc(I,"border-left-width",0)-Uc(I,"border-right-width",0);var I})(g),_i=(g,f,_)=>{const E=g.cells,B=E.slice(0,f),I=E.slice(f),Z=B.concat(_).concat(I);return Tl(g,Z)},vc=(g,f,_)=>_i(g,f,[_]),Ol=(g,f,_)=>{g.cells[f]=_},Tl=(g,f)=>We(g.element,f,g.section,g.isNew),ua=(g,f)=>g.cells[f],ds=(g,f)=>ua(g,f).element,$i=g=>g.cells.length,Va=g=>{const f=Ma(g,_=>"colgroup"===_.section);return{rows:f.fail,cols:f.pass}},Hd=(g,f,_)=>{const E=D(g.cells,_);return We(f(g.element),E,g.section,!0)},pu="data-snooker-locked-cols",md=g=>Kt(g,pu).bind(f=>Oe.from(f.match(/\d+/g))).map(f=>Tt(f,it)),Ql=g=>{const f=Nt(Va(g).rows,(E,B)=>(mt(B.cells,(I,Z)=>{I.isLocked&&(E[Z]=!0)}),E),{});return((E,B)=>{const I=$n.call(E,0);return I.sort(void 0),I})(Jn(f,(E,B)=>parseInt(B,10)))},us=(g,f)=>g+","+f,ma=(g,f)=>{const _=sr(g.all,E=>E.cells);return qn(_,f)},Al=g=>{const f={},_=[],E=Ie(g).map(we=>we.element).bind(Ms).bind(md).getOr({});let B=0,I=0,Z=0;const{pass:q,fail:te}=Ma(g,we=>"colgroup"===we.section);mt(te,we=>{const Ee=[];mt(we.cells,$e=>{let Ze=0;for(;void 0!==f[us(Z,Ze)];)Ze++;const et=(St=E,wt=Ze.toString(),or(St,wt)&&null!=St[wt]),dt=((St,wt,$t,Xt,no,$o)=>({element:St,rowspan:wt,colspan:$t,row:Xt,column:no,isLocked:$o}))($e.element,$e.rowspan,$e.colspan,Z,Ze,et);var St,wt;for(let St=0;St<$e.colspan;St++)for(let wt=0;wt<$e.rowspan;wt++){const $t=Ze+St,Xt=us(Z+wt,$t);f[Xt]=dt,I=Math.max(I,$t+1)}Ee.push(dt)}),B++,_.push(ue(we.element,Ee,we.section)),Z++});const{columns:ge,colgroups:ye}=To(q).map(we=>{const Ee=(Ze=>{const et={};let dt=0;return mt(Ze.cells,St=>{const wt=St.colspan;mn(wt,$t=>{const Xt=dt+$t;et[Xt]={element:St.element,colspan:wt,column:Xt}}),dt+=wt}),et})(we);return{colgroups:[(Ze=we.element,et=fs(Ee),{element:Ze,columns:et})],columns:Ee};var Ze,et}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:(we=B,Ee=I,{rows:we,columns:Ee}),access:f,all:_,columns:ge,colgroups:ye};var we,Ee},Ea=g=>{const f=Y(g);return Al(f)},$s=Al,Li=(g,f,_)=>Oe.from(g.access[us(f,_)]),gd=(g,f,_)=>{const E=ma(g,B=>_(f,B.element));return E.length>0?Oe.some(E[0]):Oe.none()},Wc=ma,Mn=g=>sr(g.all,f=>f.cells),ci=g=>fs(g.columns),ec=g=>Ue(g.columns).length>0,Nl=(g,f)=>Oe.from(g.columns[f]),fu=(g,f=it)=>{const _=g.grid,E=mn(_.columns,lo),B=mn(_.rows,lo);return D(E,I=>di(()=>sr(B,Z=>Li(g,Z,I).filter(q=>q.column===I).toArray()),Z=>1===Z.colspan&&f(Z.element),()=>Li(g,0,I)))},di=(g,f,_)=>{const E=g();return Do(E,f).orThunk(()=>Oe.from(E[0]).orThunk(_)).map(B=>B.element)},yc=g=>{const f=g.grid,_=mn(f.rows,lo),E=mn(f.columns,lo);return D(_,B=>di(()=>sr(E,I=>Li(g,B,I).filter(Z=>Z.row===B).fold(pt([]),Z=>[Z])),I=>1===I.rowspan,()=>Li(g,B,0)))},Gm=(g,f)=>_=>"rtl"===ei(_)?f:g,ei=g=>"rtl"===xi(g,"direction")?"rtl":"ltr",qi=jc("height",g=>{const f=g.dom;return So(g)?f.getBoundingClientRect().height:f.offsetHeight}),Ml=g=>qi.get(g),Un=g=>qi.getOuter(g),bu=(g,f)=>({left:g,top:f,translate:(_,E)=>bu(g+_,f+E)}),V=bu,K=(g,f)=>void 0!==g?g:void 0!==f?f:0,G=g=>{const f=g.dom.ownerDocument,_=f.body,E=f.defaultView,B=f.documentElement;if(_===g.dom)return V(_.offsetLeft,_.offsetTop);const I=K(E?.pageYOffset,B.scrollTop),Z=K(E?.pageXOffset,B.scrollLeft),q=K(B.clientTop,_.clientTop),te=K(B.clientLeft,_.clientLeft);return se(g).translate(Z-te,I-q)},se=g=>{const f=g.dom,_=f.ownerDocument.body;return _===f?V(_.offsetLeft,_.offsetTop):So(g)?(E=>{const B=E.getBoundingClientRect();return V(B.left,B.top)})(f):V(0,0)},He=(g,f)=>({row:g,y:f}),Fe=(g,f)=>({col:g,x:f}),gt=g=>G(g).left+bc(g),Zt=g=>G(g).left,Pt=(g,f)=>Fe(g,Zt(f)),zt=(g,f)=>Fe(g,gt(f)),ro=g=>G(g).top,co=(g,f)=>He(g,ro(f)),Wn=(g,f)=>He(g,ro(f)+Un(f)),xt=(g,f,_)=>{if(0===_.length)return[];const E=D(_.slice(1),(I,Z)=>I.map(q=>g(Z,q))),B=_[_.length-1].map(I=>f(_.length-1,I));return E.concat([B])},on={delta:lo,positions:g=>xt(co,Wn,g),edge:ro},ur=Gm({delta:lo,edge:Zt,positions:g=>xt(Pt,zt,g)},{delta:g=>-g,edge:gt,positions:g=>xt(zt,Pt,g)}),xo={delta:(g,f)=>ur(f).delta(g,f),positions:(g,f)=>ur(f).positions(g,f),edge:g=>ur(g).edge(g)},gn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},W=(()=>{const g="[0-9]+",f="[eE][+-]?"+g,_=B=>`(?:${B})?`,E=["Infinity",g+"\\."+_(g)+_(f),"\\."+g+_(f),g+_(f)].join("|");return new RegExp(`^([+-]?(?:${E}))(.*)$`)})(),S=/(\d+(\.\d+)?)%/,F=/(\d+(\.\d+)?)px|em/,ae=Sr("col"),Ve=(g,f,_)=>{const E=ai(g).getOrThunk(()=>tn(Ja(g)));return f(g)/_(E)*100},ve=(g,f)=>{ra(g,"width",f+"px")},ht=(g,f)=>{ra(g,"width",f+"%")},Mt=(g,f)=>{ra(g,"height",f+"px")},Go=(g,f)=>Ts(g,f).orThunk(()=>Kt(g,f).map(_=>_+"px")),zo=g=>Go(g,"width"),oo=g=>Ve(g,ss,Id),tr=g=>{return ae(g)?ss(g):Uc(f=g,"width",f.dom.offsetWidth);var f},dn=g=>{return(g=>{const f=Uc(E=g,"height",E.dom.offsetHeight)+"px";var E;return f?((_,E,B,I)=>{const Z=parseFloat(_);return Xr(_,"%")&&"table"!==Cr(E)?((q,te,ge,ye)=>{const he=Ms(q).map(we=>{const Ee=ge(we);return Math.floor(te/100*Ee)}).getOr(te);return ye(q,he),he})(E,Z,B,I):Z})(f,g,Ml,Mt):Ml(g)})(f=g)/zc(f,"rowspan");var f},tt=(g,f,_)=>{ra(g,"width",f+_)},kn=g=>Ve(g,ss,Id)+"%",Or=pt(S),Yn=Sr("col"),wr=g=>zo(g).getOrThunk(()=>tr(g)+"px"),Hr=g=>{return(f=g,Go(f,"height")).getOrThunk(()=>dn(g)+"px");var f},je=(g,f,_,E,B,I)=>g.filter(E).fold(()=>I(((Z,q)=>{if(q<0||q>=Z.length-1)return Oe.none();const te=Z[q].fold(()=>{const ye=(he=>{const we=$n.call(he,0);return we.reverse(),we})(Z.slice(0,q));return Gt(ye,(he,we)=>he.map(Ee=>({value:Ee,delta:we+1})))},ye=>Oe.some({value:ye,delta:0})),ge=Z[q+1].fold(()=>{const ye=Z.slice(q+1);return Gt(ye,(he,we)=>he.map(Ee=>({value:Ee,delta:we+1})))},ye=>Oe.some({value:ye,delta:1}));return te.bind(ye=>ge.map(he=>{const we=he.delta+ye.delta;return Math.abs(he.value-ye.value)/we}))})(_,f)),Z=>B(Z)),Vn=(g,f,_,E)=>{const B=fu(g),I=ec(g)?D(ci(g),ge=>Oe.from(ge.element)):B,Z=[Oe.some(xo.edge(f))].concat(D(xo.positions(B,f),te=>te.map(ge=>ge.x))),q=Ft(Xl);return D(I,(te,ge)=>je(te,ge,Z,q,ye=>{if((we=>{const Ee=Ci().browser,$e=Ee.isChromium()||Ee.isFirefox();return!Yn(we)||$e})(ye))return _(ye);{const we=null!=(he=B[ge])?he:Oe.none();return je(we,ge,Z,q,Ee=>E(Oe.some(ss(Ee))),E)}var he},E))},xr=g=>g.map(f=>f+"px").getOr(""),Oo=(g,f,_)=>Vn(g,f,tr,E=>E.getOrThunk(_.minCellWidth)),Ur=(g,f,_,E,B)=>{const I=yc(g),Z=[Oe.some(_.edge(f))].concat(D(_.positions(I,f),q=>q.map(te=>te.y)));return D(I,(q,te)=>je(q,te,Z,Ft(Lr),E,B))},Ir=(g,f)=>()=>So(g)?f(g):parseFloat(Ts(g,"width").getOr("0")),Yr=g=>{const f=Ir(g,E=>parseFloat(kn(E))),_=Ir(g,ss);return{width:f,pixelWidth:_,getWidths:(E,B)=>{return q=B,Vn(E,g,oo,te=>te.fold(()=>q.minCellWidth(),ge=>ge/q.pixelWidth()*100));var q},getCellDelta:E=>E/_()*100,singleColumnWidth:(E,B)=>[100-E],minCellWidth:()=>Er()/_()*100,setElementWidth:ht,adjustTableWidth:E=>{const B=f();ht(g,B+E/100*B)},isRelative:!0,label:"percent"}},pl=g=>{const f=Ir(g,ss);return{width:f,pixelWidth:f,getWidths:(_,E)=>Oo(_,g,E),getCellDelta:lo,singleColumnWidth:(_,E)=>[Math.max(Er(),_+E)-_],minCellWidth:Er,setElementWidth:ve,adjustTableWidth:_=>{const E=f()+_;ve(g,E)},isRelative:!1,label:"pixel"}},qs=g=>zo(g).fold(()=>(f=>{const _=Ir(f,ss),E=pt(0);return{width:_,pixelWidth:_,getWidths:(B,I)=>Oo(B,f,I),getCellDelta:E,singleColumnWidth:pt([0]),minCellWidth:E,setElementWidth:ut,adjustTableWidth:ut,isRelative:!0,label:"none"}})(g),f=>{return _=g,E=f,null!==Or().exec(E)?Yr(_):pl(_);var _,E}),Zn=pl,ga=Yr,os=(g,f,_)=>{const E=g[_].element,B=Dt.fromTag("td");Qe(B,Dt.fromTag("br")),(f?Qe:nt)(E,B)},Pr=((g,f)=>{const _=E=>g(E)?Oe.from(E.dom.nodeValue):Oe.none();return{get:E=>{if(!g(E))throw new Error("Can only get text value of a text node");return _(E).getOr("")},getOption:_,set:(E,B)=>{if(!g(E))throw new Error("Can only set raw text value of a text node");E.dom.nodeValue=B}}})(Gn),fl=g=>Pr.get(g),ui=g=>Pr.getOption(g),Pd=(g,f)=>Pr.set(g,f),Jr=g=>"img"===Cr(g)?1:ui(g).fold(()=>Os(g).length,f=>f.length),De=["img","br"],Wr=g=>{return ui(g).filter(f=>0!==f.trim().length||f.indexOf("\xa0")>-1).isSome()||lr(De,Cr(g))||Zi(f=g)&&"false"===ls(f,"contenteditable");var f},Ii=g=>((f,_)=>{const E=B=>{for(let I=0;I<B.childNodes.length;I++){const Z=Dt.fromDom(B.childNodes[I]);if(_(Z))return Oe.some(Z);const q=E(B.childNodes[I]);if(q.isSome())return q}return Oe.none()};return E(f.dom)})(g,Wr),Ra=g=>zl(g,Wr),zl=(g,f)=>{const _=E=>{const B=Os(E);for(let I=B.length-1;I>=0;I--){const Z=B[I];if(f(Z))return Oe.some(Z);const q=_(Z);if(q.isSome())return q}return Oe.none()};return _(g)},mi={scope:["row","col"]},Gs=g=>()=>{const f=Dt.fromTag("td",g.dom);return Qe(f,Dt.fromTag("br",g.dom)),f},wc=g=>()=>Dt.fromTag("col",g.dom),Fd=g=>()=>Dt.fromTag("colgroup",g.dom),Io=g=>()=>Dt.fromTag("tr",g.dom),Rl=(g,f,_)=>{const E=((B,I)=>{const Z=br(B,I),q=Os(fn(B));return jt(Z,q),Z})(g,f);return en(_,(B,I)=>{null===B?Wo(E,I):Ao(E,I,B)}),E},vu=g=>g,tc=(g,f,_)=>{const E=(B,I)=>{((Z,q)=>{const te=Z.dom,ge=q.dom;jr(te)&&jr(ge)&&(ge.style.cssText=te.style.cssText)})(B.element,I),As(I,"height"),1!==B.colspan&&As(I,"width")};return{col:B=>{const I=Dt.fromTag(Cr(B.element),f.dom);return E(B,I),g(B.element,I),I},colgroup:Fd(f),row:Io(f),cell:B=>{const I=Dt.fromTag(Cr(B.element),f.dom),Z=_.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),q=Z.length>0?(ge=I,ye=Z,Ii(te=B.element).map(he=>{const we=ye.join(","),Ee=rr(he,we,$e=>ar($e,te));return fr(Ee,($e,Ze)=>{const et=Rn(Ze);return Qe($e,et),et},ge)}).getOr(ge)):I;var te,ge,ye;return Qe(q,Dt.fromTag("br")),E(B,I),((te,ge)=>{en(mi,(ye,he)=>Kt(te,he).filter(we=>lr(ye,we)).each(we=>Ao(ge,he,we)))})(B.element,I),g(B.element,I),I},replace:Rl,colGap:wc(f),gap:Gs(f)}},$c=g=>({col:wc(g),colgroup:Fd(g),row:Io(g),cell:Gs(g),replace:vu,colGap:wc(g),gap:Gs(g)}),hd=g=>f=>f.options.get(g),sm=g=>{var f;const _=g.dom,E=null!==(f=_.getParent(g.selection.getStart(),_.isBlock))&&void 0!==f?f:g.getBody();return Id(Dt.fromDom(E))+"px"},qc=g=>Oe.from(g.options.get("table_clone_elements")),Vl=hd("table_header_type"),js=hd("table_column_resizing"),sl=g=>"preservetable"===js(g),Dl=g=>"resizetable"===js(g),Ba=hd("table_sizing_mode"),yu=g=>"relative"===Ba(g),ti=g=>"fixed"===Ba(g),xc=g=>"responsive"===Ba(g),wu=hd("table_resize_bars"),xu=hd("table_style_by_css"),Cc=hd("table_merge_content_on_paste"),_c=g=>{const f=g.options,_=f.get("table_default_attributes");return f.isSet("table_default_attributes")?_:(B=_,xc(E=g)||xu(E)?B:ti(E)?{...B,width:sm(E)}:{...B,width:"100%"});var E,B},jg=hd("table_use_colgroups"),Gc=g=>Kr(g,"[contenteditable]"),Wh=(g,f=!1)=>So(g)?g.dom.isContentEditable:Gc(g).fold(pt(f),_=>"true"===am(_)),am=g=>g.dom.contentEditable,Cu=g=>Dt.fromDom(g.getBody()),Sc=g=>f=>ar(f,Cu(g)),Km=g=>{Wo(g,"data-mce-style");const f=_=>Wo(_,"data-mce-style");mt(Kn(g),f),mt(Yl(g),f),mt(kl(g),f)},im=g=>Dt.fromDom(g.selection.getStart()),kc=g=>g.getBoundingClientRect().width,vf=g=>g.getBoundingClientRect().height,sa=g=>ii(g,Sr("table")).exists(Wh),Sx=(g,f)=>f.column<=g.finishCol&&f.column+f.colspan-1>=g.startCol&&f.row<=g.finishRow&&f.row+f.rowspan-1>=g.startRow,oc=(g,f)=>f.column>=g.startCol&&f.column+f.colspan-1<=g.finishCol&&f.row>=g.startRow&&f.row+f.rowspan-1<=g.finishRow,yf=(g,f,_)=>{const E=gd(g,f,ar),B=gd(g,_,ar);return E.bind(I=>B.map(Z=>{return q=I,te=Z,{startRow:Math.min(q.row,te.row),startCol:Math.min(q.column,te.column),finishRow:Math.max(q.row+q.rowspan-1,te.row+te.rowspan-1),finishCol:Math.max(q.column+q.colspan-1,te.column+te.colspan-1)};var q,te}))},$h=(g,f,_)=>yf(g,f,_).map(E=>{const B=Wc(g,At(Sx,E));return D(B,I=>I.element)}),_u=(g,f)=>gd(g,f,(_,E)=>Bi(E,_)).map(_=>_.element),bl=(g,f,_)=>{const E=lm(g);return $h(E,f,_)},Xm=(g,f,_,E,B)=>{const I=lm(g),Z=ar(g,_)?Oe.some(f):_u(I,f),q=ar(g,B)?Oe.some(E):_u(I,E);return Z.bind(te=>q.bind(ge=>$h(I,te,ge)))},lm=Ea;var kx=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ea=()=>({up:pt({selector:Gr,closest:Kr,predicate:ca,all:ta}),down:pt({selector:kr,predicate:Dn}),styles:pt({get:xi,getRaw:Ts,set:ra,remove:As}),attrs:pt({get:ls,set:Ao,remove:Wo,copyTo:(g,f)=>{const _=bs(g);Nr(f,_)}}),insert:pt({before:pe,after:Be,afterAll:Wt,append:Qe,appendAll:jt,prepend:nt,wrap:Bt}),remove:pt({unwrap:Fn,remove:ho}),create:pt({nu:Dt.fromTag,clone:g=>Dt.fromDom(g.dom.cloneNode(!1)),text:Dt.fromText}),query:pt({comparePosition:(g,f)=>g.dom.compareDocumentPosition(f.dom),prevSibling:ya,nextSibling:Pa}),property:pt({children:Os,name:Cr,parent:Sa,document:g=>si(g).dom,isText:Gn,isComment:_r,isElement:Pn,isSpecial:g=>{const f=Cr(g);return lr(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],f)},getLanguage:g=>Pn(g)?Kt(g,"lang"):Oe.none(),getText:fl,setText:Pd,isBoundary:g=>!!Pn(g)&&("body"===Cr(g)||lr(kx,Cr(g))),isEmptyTag:g=>!!Pn(g)&&lr(["br","img","hr","input"],Cr(g)),isNonEditable:g=>Pn(g)&&"false"===ls(g,"contenteditable")}),eq:ar,is:Es});const Ug=(g,f,_)=>f.bind(E=>_.filter(At(g.eq,E))),y0=ea(),wf=(g,f)=>{return(B=f).length>0?((g,f,_,E)=>{const B=f(g,_);return fr(E,(I,Z)=>{const q=f(g,Z);return Ug(g,I,q)},B)})(y0,(_,E)=>g(E),(q=B)[0],q.slice(1)):Oe.none();var B,q},Wg=g=>Gr(g,"table"),Jm=(g,f,_)=>{const E=B=>I=>void 0!==_&&_(I)||ar(I,B);return ar(g,f)?Oe.some({boxes:Oe.some([g]),start:g,finish:f}):Wg(g).bind(B=>Wg(f).bind(I=>{if(ar(B,I))return Oe.some({boxes:bl(B,g,f),start:g,finish:f});if(Bi(B,I)){const Z=rr(f,"td,th",E(B)),q=Z.length>0?Z[Z.length-1]:f;return Oe.some({boxes:Xm(B,g,B,f,I),start:g,finish:q})}if(Bi(I,B)){const Z=rr(g,"td,th",E(I)),q=Z.length>0?Z[Z.length-1]:g;return Oe.some({boxes:Xm(I,g,B,f,I),start:g,finish:q})}return(Z=g,q=f,((ge,ye,he,we=ne)=>{const Ee=[ye].concat(ge.up().all(ye)),$e=[he].concat(ge.up().all(he)),Ze=wt=>Jo(wt,we).fold(()=>wt,$t=>wt.slice(0,$t+1)),et=Ze(Ee),dt=Ze($e),St=Do(et,wt=>ot(dt,At(ge.eq,wt)));return{firstpath:et,secondpath:dt,shared:St}})(y0,Z,q,void 0)).shared.bind(Z=>Kr(Z,"table",_).bind(q=>{const te=rr(f,"td,th",E(q)),ge=te.length>0?te[te.length-1]:f,ye=rr(g,"td,th",E(q)),he=ye.length>0?ye[ye.length-1]:g;return Oe.some({boxes:Xm(q,g,B,f,I),start:he,finish:ge})}));var Z,q}))},nc=(g,f)=>{const _=kr(g,f);return _.length>0?Oe.some(_):Oe.none()},Qm=(g,f,_)=>Fs(g,f).bind(E=>Fs(g,_).bind(B=>wf(Wg,[E,B]).map(I=>({first:E,last:B,table:I})))),$g=(g,f)=>nc(g,f),zd=lo,ey=g=>{const f=(_,E)=>Kt(_,E).exists(B=>parseInt(B,10)>1);return g.length>0&&Xe(g,_=>f(_,"rowspan")||f(_,"colspan"))?Oe.some(g):Oe.none()},w0=(g,f,_)=>f.length<=1?Oe.none():((g,f,_)=>Qm(g,f,_).bind(E=>{const B=te=>ar(g,te),I="thead,tfoot,tbody,table",Z=Gr(E.first,I,B),q=Gr(E.last,I,B);return Z.bind(te=>q.bind(ge=>{return ar(te,ge)?(he=E.first,we=E.last,Ee=lm(E.table),yf(Ee,he,we).bind(et=>((dt,St)=>{let wt=!0;const $t=At(oc,St);for(let Xt=St.startRow;Xt<=St.finishRow;Xt++)for(let no=St.startCol;no<=St.finishCol;no++)wt=wt&&Li(dt,Xt,no).exists($t);return wt?Oe.some(St):Oe.none()})(Ee,et))):Oe.none();var he,we,Ee}))}))(g,_.firstSelectedSelector,_.lastSelectedSelector).map(E=>({bounds:E,cells:f})),qh="data-mce-selected",Gh="data-mce-first-selected",qg="data-mce-last-selected",Co={selected:qh,selectedSelector:"td["+qh+"],th["+qh+"]",firstSelected:Gh,firstSelectedSelector:"td["+Gh+"],th["+Gh+"]",lastSelected:qg,lastSelectedSelector:"td["+qg+"],th["+qg+"]"},pd=(g,f,_)=>({element:_,mergable:w0(f,g,Co),unmergable:ey(g),selection:zd(g)}),Kh=g=>(f,_)=>{const E=Cr(f),B="col"===E||"colgroup"===E?Ms(I=f).bind(Z=>$g(Z,Co.firstSelectedSelector)).fold(pt(I),Z=>Z[0]):f;var I;return Kr(B,g,_)},Xh=Kh("th,td,caption"),Cf=Kh("th,td"),Mr=g=>{return f=g.model.table.getSelectedCells(),D(f,Dt.fromDom);var f},Gg=(g,f)=>({element:g,offset:f}),Ct=(g,f,_)=>g.property().isText(f)&&0===g.property().getText(f).trim().length||g.property().isComment(f)?_(f).bind(E=>Ct(g,E,_).orThunk(()=>Oe.some(E))):Oe.none(),_f=(g,f)=>g.property().isText(f)?g.property().getText(f).length:g.property().children(f).length,fd=(g,f)=>{const _=Ct(g,f,g.query().prevSibling).getOr(f);if(g.property().isText(_))return Gg(_,_f(g,_));const E=g.property().children(_);return E.length>0?fd(g,E[E.length-1]):Gg(_,_f(g,_))},Kg=fd,Sf=ea(),Su=(g,f)=>{var E;Xl(g)||(E=g,zo(E).bind(B=>{return Z=["fixed","relative","empty"],Oe.from(W.exec(B)).bind(q=>{const te=Number(q[1]),ge=q[2];return ye=ge,ot(Z,we=>ot(gn[we],Ee=>ye===Ee))?Oe.some({value:te,unit:ge}):Oe.none();var ye});var Z})).each(E=>{const B=E.value/2;tt(g,B,E.unit),tt(f,B,E.unit)})},Jh=g=>D(g,pt(0)),dm=(g,f,_,E,B)=>B(g.slice(0,f)).concat(E).concat(B(g.slice(_))),ys=g=>(f,_,E,B)=>{if(g(E)){const I=Math.max(B,f[_]-Math.abs(E)),Z=Math.abs(I-f[_]);return E>=0?Z:-Z}return E},Hi=ys(g=>g<0),kf=ys(it),Ec=()=>{const g=(_,E,B,I)=>{const Z=(100+B)/100,q=Math.max(I,(_[E]+B)/Z);return D(_,(te,ge)=>(ge===E?q:te/Z)-te)},f=(_,E,B,I,Z,q)=>q?g(_,E,I,Z):((te,ge,ye,he,we)=>{const Ee=Hi(te,ge,he,we);return dm(te,ge,ye+1,[Ee,0],Jh)})(_,E,B,I,Z);return{resizeTable:(_,E)=>_(E),clampTableDelta:Hi,calcLeftEdgeDeltas:f,calcMiddleDeltas:(_,E,B,I,Z,q,te)=>f(_,B,I,Z,q,te),calcRightEdgeDeltas:(_,E,B,I,Z,q)=>{if(q)return g(_,B,I,Z);{const te=Hi(_,B,I,Z);return Jh(_.slice(0,B)).concat([te])}},calcRedestributedWidths:(_,E,B,I)=>{if(I){const Z=(E+B)/E,q=D(_,te=>te/Z);return{delta:100*Z-100,newSizes:q}}return{delta:B,newSizes:_}}}},Qh=()=>{const g=(f,_,E,B,I)=>{const Z=kf(f,B>=0?E:_,B,I);return dm(f,_,E+1,[Z,-Z],Jh)};return{resizeTable:(f,_,E)=>{E&&f(_)},clampTableDelta:(f,_,E,B,I)=>{if(I){if(E>=0)return E;{const Z=Nt(f,(q,te)=>q+te-B,0);return Math.max(-Z,E)}}return Hi(f,_,E,B)},calcLeftEdgeDeltas:g,calcMiddleDeltas:(f,_,E,B,I,Z)=>g(f,E,B,I,Z),calcRightEdgeDeltas:(f,_,E,B,I,Z)=>Z?Jh(f):D(f,pt(B/f.length)),calcRedestributedWidths:(f,_,E,B)=>({delta:0,newSizes:f})}},Oc=g=>Ea(g).grid,Si=Sr("th"),Tc=g=>Xe(g,f=>Si(f.element)),ty=(g,f)=>g&&f?"sectionCells":g?"section":"cells",x0=g=>{const f="thead"===g.section,_=na(ki(g.cells),"th");return"tfoot"===g.section?{type:"footer"}:f||_?{type:"header",subType:ty(f,_)}:{type:"body"}},ki=g=>{const f=qn(g,_=>Si(_.element));return 0===f.length?Oe.some("td"):f.length===g.length?Oe.some("th"):Oe.none()},ep=(g,f,_)=>_e(_(g.element,f),!0,g.isLocked),bo=(g,f)=>g.section!==f?We(g.element,g.cells,f,g.isNew):g,Ef=()=>({transformRow:bo,transformCell:(g,f,_)=>{const E=_(g.element,f),B="td"!==Cr(E)?((I,Z)=>{const q=br(I,"td");Be(I,q);const te=Os(I);return jt(q,te),ho(I),q})(E):E;return _e(B,g.isNew,g.isLocked)}}),ku=()=>({transformRow:bo,transformCell:ep}),Of=()=>({transformRow:(g,f)=>bo(g,"thead"===f?"tbody":f),transformCell:ep}),oy=Ef,Tf=ku,eg=Of,Xg=()=>({transformRow:lo,transformCell:ep}),tg=(g,f,_,E)=>{_===E?Wo(g,f):Ao(g,f,_)},um=(g,f,_)=>{To(ln(g,f)).fold(()=>nt(g,_),E=>Be(E,_))},tp=(g,f)=>{const _=[],E=[],B=we=>D(we,Ee=>{Ee.isNew&&_.push(Ee.element);const $e=Ee.element;return Eo($e),mt(Ee.cells,Ze=>{Ze.isNew&&E.push(Ze.element),tg(Ze.element,"colspan",Ze.colspan,1),tg(Ze.element,"rowspan",Ze.rowspan,1),Qe($e,Ze.element)}),$e}),I=we=>sr(we,Ee=>D(Ee.cells,$e=>(tg($e.element,"span",$e.colspan,1),$e.element))),Z=(we,Ee)=>{const $e=((et,dt)=>{const St=rs(et,dt).getOrThunk(()=>{const wt=Dt.fromTag(dt,Ja(et).dom);return"thead"===dt?um(et,"caption,colgroup",wt):"colgroup"===dt?um(et,"caption",wt):Qe(et,wt),wt});return Eo(St),St})(g,Ee),Ze=("colgroup"===Ee?I:B)(we);jt($e,Ze)},q=(we,Ee)=>{we.length>0?Z(we,Ee):rs(g,Ee).each(ho)},te=[],ge=[],ye=[],he=[];return mt(f,we=>{switch(we.section){case"thead":te.push(we);break;case"tbody":ge.push(we);break;case"tfoot":ye.push(we);break;case"colgroup":he.push(we)}}),q(he,"colgroup"),q(te,"thead"),q(ge,"tbody"),q(ye,"tfoot"),{newRows:_,newCells:E}},Af=(g,f)=>{if(0===g.length)return 0;const _=g[0];return Jo(g,E=>!f(_.element,E.element)).getOr(g.length)},Vd=(g,f,_)=>{const E=[];mt(g.colgroups,B=>{const I=[];for(let Z=0;Z<g.grid.columns;Z++){const q=Nl(g,Z).map(te=>_e(te.element,_,!1)).getOrThunk(()=>_e(f.colGap(),!0,!1));I.push(q)}E.push(We(B.element,I,"colgroup",_))});for(let B=0;B<g.grid.rows;B++){const I=[];for(let te=0;te<g.grid.columns;te++){const ge=Li(g,B,te).map(ye=>_e(ye.element,_,ye.isLocked)).getOrThunk(()=>_e(f.gap(),!0,!1));I.push(ge)}const Z=g.all[B],q=We(Z.element,I,Z.section,_);E.push(q)}return E},op=g=>((g,f)=>{const _=D(g,E=>D(E.cells,ne));return D(g,(E,B)=>{const I=sr(E.cells,(Z,q)=>{if(!1===_[B][q]){const we=((Ee,$e,Ze,et)=>{const dt=Ee[$e],St="colgroup"===dt.section;var Xt,no;return{colspan:Af(dt.cells.slice(Ze),et),rowspan:St?1:Af((Xt=Ee.slice($e),no=Ze,D(Xt,$o=>ua($o,no))),et)}})(g,B,q,f);return((Ee,$e,Ze,et)=>{for(let dt=Ee;dt<Ee+Ze;dt++)for(let St=$e;St<$e+et;St++)_[dt][St]=!0})(B,q,we.rowspan,we.colspan),[(te=Z.element,ge=we.rowspan,ye=we.colspan,he=Z.isNew,{element:te,rowspan:ge,colspan:ye,isNew:he})]}return[];var te,ge,ye,he});return{element:E.element,cells:I,section:E.section,isNew:E.isNew}})})(g,ar),Yg=(g,f)=>Gt(g.all,_=>Do(_.cells,E=>ar(f,E.element))),Jg=(g,f,_)=>{const E=D(f.selection,I=>ka(I).bind(Z=>Yg(g,Z)).filter(_)),B=da(E);return nl(B.length>0,B)},Rs=(g,f,_,E,B)=>(I,Z,q,te)=>{const ge=Ea(I),ye=Oe.from(te?.section).getOrThunk(Xg);return f(ge,Z).map(he=>{const we=Vd(ge,q,!1),Ee=g(we,he,ar,B(q),ye),$e=Ql(Ee.grid);return{info:he,grid:op(Ee.grid),cursor:Ee.cursor,lockedColumns:$e}}).bind(he=>{const we=tp(I,he.grid),Ee=Oe.from(te?.sizing).getOrThunk(()=>qs(I)),$e=Oe.from(te?.resize).getOrThunk(Qh);return _(I,he.grid,he.info,{sizing:Ee,resize:$e,section:ye}),E(I),Wo(I,pu),he.lockedColumns.length>0&&Ao(I,pu,he.lockedColumns.join(",")),Oe.some({cursor:he.cursor,newRows:we.newRows,newCells:we.newCells})})},vl=(g,f)=>Jg(g,f,it).map(_=>({cells:_,generators:f.generators,clipboard:f.clipboard})),Zl=(g,f)=>Jg(g,f,it),Pi=(g,f)=>Jg(g,f,_=>!_.isLocked),np=(g,f)=>Xe(f,_=>Yg(g,_).exists(I=>!I.isLocked)),ws=(g,f,_,E)=>{const B=Va(g).rows;let I=!0;for(let Z=0;Z<B.length;Z++)for(let q=0;q<$i(B[0]);q++){const te=B[Z],ge=ua(te,q),ye=_(ge.element,f);ye&&!I?Ol(te,q,_e(E(),!0,ge.isLocked)):ye&&(I=!1)}return g},ny=g=>{const f=I=>I(g),_=pt(g),E=()=>B,B={tag:!0,inner:g,fold:(I,Z)=>Z(g),isValue:it,isError:ne,map:I=>Za.value(I(g)),mapError:E,bind:f,exists:f,forall:f,getOr:_,or:E,getOrThunk:_,orThunk:E,getOrDie:_,each:I=>{I(g)},toOptional:()=>Oe.some(g)};return B},Zd=g=>{const f=()=>_,_={tag:!1,inner:g,fold:(B,I)=>B(g),isValue:ne,isError:it,map:f,mapError:B=>Za.error(B(g)),bind:f,exists:ne,forall:it,getOr:lo,or:lo,getOrThunk:eo,orThunk:eo,getOrDie:(E=String(g),()=>{throw new Error(E)}),each:ut,toOptional:Oe.none};var E;return _},Za={value:ny,error:Zd,fromOption:(g,f)=>g.fold(()=>Zd(f),ny)},Kc=(g,f)=>({rowDelta:0,colDelta:$i(g[0])-$i(f[0])}),Nf=(g,f)=>({rowDelta:g.length-f.length,colDelta:0}),Mf=(g,f,_,E)=>{const B="colgroup"===f.section?_.col:_.cell;return mn(g,I=>_e(B(),!0,E(I)))},Ac=(g,f,_,E)=>{const B=g[g.length-1];return g.concat(mn(f,()=>{const Z=Hd(B,"colgroup"===B.section?_.colgroup:_.row,lo),q=Mf(Z.cells.length,Z,_,te=>or(E,te.toString()));return Tl(Z,q)}))},Ei=(g,f,_,E)=>D(g,B=>{const I=Mf(f,B,_,ne);return _i(B,E,I)}),Qg=(g,f,_)=>{const E=f.colDelta<0?Ei:lo,B=f.rowDelta<0?Ac:lo,I=Ql(g),Z=$i(g[0]),q=ot(I,ye=>ye===Z-1),te=E(g,Math.abs(f.colDelta),_,q?Z-1:Z),ge=Ql(te);return B(te,Math.abs(f.rowDelta),_,Tt(ge,it))},Us=(g,f,_,E)=>{const B=At(E,ua(g[f],_).element),I=g[f];return g.length>1&&$i(I)>1&&(_>0&&B(ds(I,_-1))||_<I.cells.length-1&&B(ds(I,_+1))||f>0&&B(ds(g[f-1],_))||f<g.length-1&&B(ds(g[f+1],_)))},Ws=(g,f,_)=>qn(_,E=>E>=g.column&&E<=$i(f[0])+g.column),Gi=(g,f,_,E,B)=>{var ge,ye,he,we;ge=f,he=B,we=E.cell,(ye=g)>0&&ye<ge[0].cells.length&&mt(ge,Ee=>{const $e=Ee.cells[ye-1];let Ze=0;const et=we();for(;Ee.cells.length>ye+Ze&&he($e.element,Ee.cells[ye+Ze].element);)Ol(Ee,ye+Ze,_e(et,!0,Ee.cells[ye+Ze].isLocked)),Ze++});const I=Nf(_,f),Z=Qg(_,I,E),q=Nf(f,Z),te=Qg(f,q,E);return D(te,(ge,ye)=>_i(ge,g,Z[ye].cells))},jl=(g,f,_,E,B)=>{((St,wt,$t,Xt)=>{const no=Va(St).rows;if(wt>0&&wt<no.length){const $o=(gr=$t,Nt(no[wt-1].cells,(un,Bn)=>ot(un,yn=>gr(yn.element,Bn.element))?un:un.concat([Bn]),[]));mt($o,jo=>{let gr=Oe.none();for(let un=wt;un<no.length;un++)for(let Bn=0;Bn<$i(no[0]);Bn++){const yn=no[un],Vr=ua(yn,Bn);$t(Vr.element,jo.element)&&(gr.isNone()&&(gr=Oe.some(Xt())),gr.each(En=>{Ol(yn,Bn,_e(En,!0,Vr.isLocked))}))}})}var gr})(f,g,B,E.cell);const I=Ql(f),Z=Kc(f,_),q={...Z,colDelta:Z.colDelta-I.length},te=Qg(f,q,E),{cols:ge,rows:ye}=Va(te),he=Ql(te),we=Kc(_,f),Ee={...we,colDelta:we.colDelta+he.length},$e=(et=E,dt=he,D(_,St=>Nt(dt,(wt,$t)=>{const Xt=Mf(1,St,et,it)[0];return vc(wt,$t,Xt)},St))),Ze=Qg($e,Ee,E);var et,dt;return[...ge,...ye.slice(0,g),...Ze,...ye.slice(g,ye.length)]},Oi=(g,f,_,E,B)=>{const{rows:I,cols:Z}=Va(g),q=I.slice(0,f),te=I.slice(f);return[...Z,...q,(ge=I[_],he=E,we=B,Hd(ge,Ee=>we(Ee,he),(ge,ye)=>f>0&&f<I.length&&E(ds(I[f-1],ye),ds(I[f],ye))?ua(I[f],ye):_e(B(ge.element,E),!0,ge.isLocked))),...te];var ge,he,we},mm=(g,f,_,E,B)=>D(g,I=>{const Z=f>0&&f<$i(I)&&E(ds(I,f-1),ds(I,f)),q=((te,ge,ye,he,we,Ee,$e)=>{if("colgroup"!==ye&&he)return ua(te,ge);{const Ze=ua(te,we);return _e($e(Ze.element,Ee),!0,!1)}})(I,f,I.section,Z,_,E,B);return vc(I,f,q)}),rc=(g,f,_,E)=>{return q=E,void 0!==ds((B=g)[I=f],Z=_)&&I>0&&q(ds(B[I-1],Z),ds(B[I],Z))||((B,I,Z)=>I>0&&Z(ds(B,I-1),ds(B,I)))(g[f],_,E);var B,I,Z,q},Xc=(g,f,_,E)=>{const B=I=>("row"===I?Lr(f):Xl(f))?`${I}group`:I;return g?Si(f)?B(_):null:E&&Si(f)?B("row"===_?"col":"row"):null},og=(g,f,_)=>_e(_(g.element,f),!0,g.isLocked),rp=(g,f,_,E,B,I,Z)=>D(g,(q,te)=>((ge,ye)=>{const we=D(ge.cells,(Ee,$e)=>{if(Ze=Ee,ot(f,et=>_(Ze.element,et.element))){const Ze=Z(Ee,te,$e)?B(Ee,_,E):Ee;return I(Ze,te,$e).each(et=>{var dt,St;dt=Ze.element,St={scope:Oe.from(et)},en(St,(wt,$t)=>{wt.fold(()=>{Wo(dt,$t)},Xt=>{zs(dt.dom,$t,Xt)})})}),Ze}var Ze;return Ee});return We(ge.element,we,ge.section,ge.isNew)})(q)),Rf=(g,f,_)=>sr(g,(E,B)=>rc(g,B,f,_)?[]:[ua(E,f)]),Df=(g,f,_,E,B)=>{const I=Va(g).rows,Z=sr(f,ye=>Rf(I,ye,E)),q=D(I,ye=>Tc(ye.cells)),te=(ye=Z,Xe(he=q,lo)&&Tc(ye)?it:(we,Ee,$e)=>!("th"===Cr(we.element)&&he[Ee])),ge=((ye,he)=>(we,Ee)=>Oe.some(Xc(ye,we.element,"row",he[Ee])))(_,q);var ye,he;return rp(g,Z,E,B,og,ge,te)},C0=(g,f,_,E)=>{const B=Va(g).rows,I=D(f,Z=>ua(B[Z.row],Z.column));return rp(g,I,_,E,og,Oe.none,it)},gm=g=>{if(!ps(g))throw new Error("cases must be an array");if(0===g.length)throw new Error("there must be at least one case");const f=[],_={};return mt(g,(E,B)=>{const I=Ue(E);if(1!==I.length)throw new Error("one and only one name per case");const Z=I[0],q=E[Z];if(void 0!==_[Z])throw new Error("duplicate key detected:"+Z);if("cata"===Z)throw new Error("cannot have a case named cata (sorry)");if(!ps(q))throw new Error("case arguments must be an array");f.push(Z),_[Z]=(...te)=>{const ge=te.length;if(ge!==q.length)throw new Error("Wrong number of arguments to case "+Z+". Expected "+q.length+" ("+q+"), got "+ge);return{fold:(...ye)=>{if(ye.length!==g.length)throw new Error("Wrong number of arguments to fold. Expected "+g.length+", got "+ye.length);return ye[B].apply(null,te)},match:ye=>{const he=Ue(ye);if(f.length!==he.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+"\nActual: "+he.join(","));if(!Xe(f,we=>lr(he,we)))throw new Error("Not all branches were specified when using match. Specified: "+he.join(", ")+"\nRequired: "+f.join(", "));return ye[Z].apply(null,te)},log:ye=>{console.log(ye,{constructors:f,constructor:Z,params:te})}}}}),_},ng={...gm([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Ks=(g,f,_)=>{let E=0;for(let B=g;B<f;B++)E+=void 0!==_[B]?_[B]:0;return E},Ou=(g,f,_)=>{const E=(I=f,ec(B=g)?((Z,q)=>{const te=ci(Z);return D(te,(ge,ye)=>({element:ge.element,width:q[ye],colspan:ge.colspan}))})(B,I):((Z,q)=>{const te=Mn(Z);return D(te,ge=>{const ye=Ks(ge.column,ge.column+ge.colspan,q);return{element:ge.element,width:ye,colspan:ge.colspan}})})(B,I));var B,I;mt(E,B=>{_.setElementWidth(B.element,B.width)})},sp=(g,f,_,E,B)=>{const I=Ea(g),Z=B.getCellDelta(f),q=B.getWidths(I,B),te=_===I.grid.columns-1,ge=E.clampTableDelta(q,_,Z,B.minCellWidth(),te),ye=((we,Ee,$e,Ze,et)=>{const dt=we.slice(0),St=(Xt=Ee,0===($t=we).length?ng.none():1===$t.length?ng.only(0):0===Xt?ng.left(0,1):Xt===$t.length-1?ng.right(Xt-1,Xt):Xt>0&&Xt<$t.length-1?ng.middle(Xt-1,Xt,Xt+1):ng.none()),wt=pt(D(dt,pt(0)));var $t,Xt;return St.fold(wt,$t=>Ze.singleColumnWidth(dt[$t],$e),($t,Xt)=>et.calcLeftEdgeDeltas(dt,$t,Xt,$e,Ze.minCellWidth(),Ze.isRelative),($t,Xt,no)=>et.calcMiddleDeltas(dt,$t,Xt,no,$e,Ze.minCellWidth(),Ze.isRelative),($t,Xt)=>et.calcRightEdgeDeltas(dt,$t,Xt,$e,Ze.minCellWidth(),Ze.isRelative))})(q,_,ge,B,E),he=D(ye,(we,Ee)=>we+q[Ee]);Ou(I,he,B),E.resizeTable(B.adjustTableWidth,ge,te)},ja=g=>Nt(g,(f,_)=>ot(f,E=>E.column===_.column)?f:f.concat([_]),[]).sort((f,_)=>f.column-_.column),sc=Sr("col"),Tu=Sr("colgroup"),hm=g=>"tr"===Cr(g)||Tu(g),pm=g=>({element:g,colspan:Br(g,"colspan",1),rowspan:Br(g,"rowspan",1)}),Bf=g=>Kt(g,"scope").map(f=>f.substr(0,3)),Nc=(g,f=pm)=>{const _=B=>{if(hm(B))return Tu((I={element:B}).element)?g.colgroup(I):g.row(I);{const Z=B,q=(te=f(Z),sc(te.element)?g.col(te):g.cell(te));return E=Oe.some({item:Z,replacement:q}),q}var te,I};let E=Oe.none();return{getOrInit:(B,I)=>E.fold(()=>_(B),Z=>I(B,Z.item)?Z.replacement:_(B))}},Mc=g=>f=>{const _=[],E=B=>{const Z=f.replace(B,g,"td"===g?{scope:null}:{});return _.push({item:B,sub:Z}),Z};return{replaceOrInit:(B,I)=>{if(hm(B)||sc(B))return B;{const Z=B;return(q=Z,te=I,Do(_,ge=>te(ge.item,q))).fold(()=>E(Z),q=>I(B,q.item)?q.sub:E(Z))}var q,te}}},fm=g=>({unmerge:f=>{const _=Bf(f);return _.each(E=>Ao(f,"scope",E)),()=>{const E=g.cell({element:f,colspan:1,rowspan:1});return As(E,"width"),As(f,"width"),_.each(B=>Ao(E,"scope",B)),E}},merge:f=>(As(f[0],"width"),(()=>{const _=da(D(f,Bf));if(0===_.length)return Oe.none();{const E=_[0],B=["row","col"];return ot(_,I=>I!==E&&lr(B,I))?Oe.none():Oe.from(E)}})().fold(()=>Wo(f[0],"scope"),_=>Ao(f[0],"scope",_+"group")),pt(f[0]))}),Oa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Bl=ea(),ac=g=>((f,_)=>{const E=f.property().name(_);return lr(Oa,E)})(Bl,g),ry=g=>((f,_)=>{const E=f.property().name(_);return lr(["ol","ul"],E)})(Bl,g),vm=g=>Wh(g,!0),Lf=g=>{0===Kn(g).length&&ho(g)},ap=(g,f)=>({grid:g,cursor:f}),al=(g,f,_)=>{const E=((B,I,Z)=>{var q,te;const ge=Va(B).rows;return Oe.from(null===(te=null===(q=ge[I])||void 0===q?void 0:q.cells[Z])||void 0===te?void 0:te.element).filter(vm).orThunk(()=>Gt(ge,he=>Gt(he.cells,we=>{const Ee=we.element;return nl(vm(Ee),Ee)})))})(g,f,_);return ap(g,E)},ym=g=>Nt(g,(f,_)=>ot(f,E=>E.row===_.row)?f:f.concat([_]),[]).sort((f,_)=>f.row-_.row),If=(g,f)=>(_,E,B,I,Z)=>{const q=ym(E),ge=((ye,he,we,Ee,$e,Ze,et)=>{const{cols:dt,rows:St}=Va(ye),wt=St[he[0]],$t=sr(he,un=>{return Vr=$e,sr((Bn=St)[yn=un].cells,(aa,Wa)=>rc(Bn,yn,Wa,Vr)?[]:[aa]);var Bn,yn,Vr}),Xt=D(wt.cells,(un,Bn)=>Tc(Rf(St,Bn,$e))),no=[...St];mt(he,un=>{no[un]=et.transformRow(St[un],we)});const $o=[...dt,...no],jo=(un=wt,Xe(Bn=Xt,lo)&&Tc(un.cells)?it:(yn,Vr,En)=>!("th"===Cr(yn.element)&&Bn[En])),gr=((un,Bn)=>(yn,Vr,En)=>Oe.some(Xc(un,yn.element,"col",Bn[En])))(Ee,Xt);var un,Bn;return rp($o,$t,$e,Ze,et.transformCell,gr,jo)})(_,D(q,ye=>ye.row),g,f,B,I.replaceOrInit,Z);return al(ge,E[0].row,E[0].column)},rg=If("thead",!0),S0=If("tbody",!1),sy=If("tfoot",!1),jd=(g,f,_)=>{const E=(Z=_.section,vr(g,()=>Z)),B=$s(E);var Z;return Vd(B,f,!0)},bd=(g,f,_,E)=>((B,I,Z,q)=>{const te=$s(I),ge=q.getWidths(te,q);Ou(te,ge,q)})(0,f,0,E.sizing),wm=(g,f,_,E)=>((B,I,Z,q,te)=>{const ge=$s(I),ye=q.getWidths(ge,q),he=q.pixelWidth(),{newSizes:we,delta:Ee}=te.calcRedestributedWidths(ye,he,Z.pixelDelta,q.isRelative);Ou(ge,we,q),q.adjustTableWidth(Ee)})(0,f,_,E.sizing,E.resize),cr=(g,f)=>ot(f,_=>0===_.column&&_.isLocked),il=(g,f)=>ot(f,_=>_.column+_.colspan>=g.grid.columns&&_.isLocked),Au=(g,f)=>{const _=fu(g),E=ja(f);return Nt(E,(B,I)=>B+_[I.column].map(bc).getOr(0),0)},vd=g=>(f,_)=>Zl(f,_).filter(E=>!(g?cr:il)(f,E)).map(E=>({details:E,pixelDelta:Au(f,E)})),Qr=g=>(f,_)=>vl(f,_).filter(E=>!(g?cr:il)(f,E.cells)),rt=Mc("th"),xm=Mc("td"),gi=Rs((g,f,_,E)=>{const B=f[0].row,I=ym(f),Z=fr(I,(q,te)=>({grid:Oi(q.grid,B,te.row+q.delta,_,E.getOrInit),delta:q.delta+1}),{grid:g,delta:0}).grid;return al(Z,B,f[0].column)},Zl,ut,ut,Nc),ll=Rs((g,f,_,E)=>{const B=ym(f),I=B[B.length-1],Z=I.row+I.rowspan,q=fr(B,(te,ge)=>Oi(te,Z,ge.row,_,E.getOrInit),g);return al(q,Z,f[0].column)},Zl,ut,ut,Nc),ip=Rs((g,f,_,E)=>{const B=f.details,I=ja(B),Z=I[0].column,q=fr(I,(te,ge)=>({grid:mm(te.grid,Z,ge.column+te.delta,_,E.getOrInit),delta:te.delta+1}),{grid:g,delta:0}).grid;return al(q,B[0].row,Z)},vd(!0),wm,ut,Nc),Hf=Rs((g,f,_,E)=>{const B=f.details,I=B[B.length-1],Z=I.column+I.colspan,q=ja(B),te=fr(q,(ge,ye)=>mm(ge,Z,ye.column,_,E.getOrInit),g);return al(te,B[0].row,Z)},vd(!1),wm,ut,Nc),Pf=Rs((g,f,_,E)=>{const B=ja(f.details),I=(q=g,te=D(B,q=>q.column),sr(q,ge=>{const he=fr(te,(we,Ee)=>Ee>=0&&Ee<we.length?we.slice(0,Ee).concat(we.slice(Ee+1)):we,ge.cells);return he.length>0?[We(ge.element,he,ge.section,ge.isNew)]:[]}));var q,te;return al(I,B[0].row,Math.min(B[0].column,I.length>0?I[0].cells.length-1:0))},(g,f)=>Pi(g,f).map(_=>({details:_,pixelDelta:-Au(g,_)})),wm,Lf,Nc),lp=Rs((g,f,_,E)=>{const B=ym(f),I=((q,te,ge)=>{const{rows:ye,cols:he}=Va(q);return[...he,...ye.slice(0,te),...ye.slice(ge+1)]})(g,B[0].row,B[B.length-1].row);return al(I,Math.min(f[0].row,I.length>0?I.length-1:0),f[0].column)},Zl,ut,Lf,Nc),k0=Rs((g,f,_,E)=>{const B=ja(f),I=D(B,q=>q.column),Z=Df(g,I,!0,_,E.replaceOrInit);return al(Z,f[0].row,f[0].column)},Pi,ut,ut,rt),E0=Rs((g,f,_,E)=>{const B=ja(f),I=D(B,q=>q.column),Z=Df(g,I,!1,_,E.replaceOrInit);return al(Z,f[0].row,f[0].column)},Pi,ut,ut,xm),O0=Rs(rg,Pi,ut,ut,rt),T0=Rs(S0,Pi,ut,ut,xm),Nu=Rs(sy,Pi,ut,ut,xm),Ul=Rs((g,f,_,E)=>{const B=C0(g,f,_,E.replaceOrInit);return al(B,f[0].row,f[0].column)},Pi,ut,ut,rt),hi=Rs((g,f,_,E)=>{const B=C0(g,f,_,E.replaceOrInit);return al(B,f[0].row,f[0].column)},Pi,ut,ut,xm),Mu=Rs((g,f,_,E)=>{const B=f.cells;(g=>{const f=Sr("br"),E=(()=>{const B=sr(g,I=>{const Z=Os(I);return Xe(Z,te=>f(te)||Gn(te)&&0===fl(te).trim().length)?[]:Z.concat((B=>Ra(B).bind(I=>{const Z=Pa(I).map(q=>{return!!ac(q)||(ge=q,!!lr(["br","img","hr","input"],Bl.property().name(ge))&&"img"!==Cr(q));var ge}).getOr(!1);return Sa(I).map(q=>{return!0===Z||"li"===Cr(te=q)||ca(te,ry).isSome()||f(I)||ac(q)&&!ar(B,q)?[]:[Dt.fromTag("br")];var te})}).getOr([]))(I))});return 0===B.length?[Dt.fromTag("br")]:B})();Eo(g[0]),jt(g[0],E)})(B);const I=((Z,q,te,ge)=>{const ye=Va(Z).rows;if(0===ye.length)return Z;for(let he=q.startRow;he<=q.finishRow;he++)for(let we=q.startCol;we<=q.finishCol;we++){const Ee=ye[he],$e=ua(Ee,we).isLocked;Ol(Ee,we,_e(ge(),!1,$e))}return Z})(g,f.bounds,0,E.merge(B));return ap(I,Oe.from(B[0]))},(g,f)=>{return(E=f,E.mergable).filter(_=>np(g,_.cells));var E},bd,ut,fm),A0=Rs((g,f,_,E)=>{const B=fr(f,(I,Z)=>ws(I,Z,_,E.unmerge(Z)),g);return ap(B,Oe.from(f[0]))},(g,f)=>{return(E=f,E.unmergable).filter(_=>np(g,_));var E},bd,ut,fm),N0=Rs((g,f,_,E)=>{const B=((q,te)=>{const ge=Ea(q);return Vd(ge,te,!0)})(f.clipboard,f.generators);var I,Z;return((q,te,ge,ye,he)=>{const we=Ql(te),Ee=((dt,St,wt)=>{const $t=$i(St[0]),Xt=Va(St).cols.length+dt.row,no=mn($t-dt.column,$o=>$o+dt.column);return{row:Xt,column:Do(no,$o=>Xe(wt,jo=>jo!==$o)).getOr($t-1)}})(q,te,we),$e=Va(ge).rows,Ze=Ws(Ee,$e,we);return((dt,St,wt)=>{if(dt.row>=St.length||dt.column>$i(St[0]))return Za.error("invalid start address out of table bounds, row: "+dt.row+", column: "+dt.column);const $t=St.slice(dt.row),Xt=$t[0].cells.slice(dt.column),no=$i(wt[0]);return Za.value({rowDelta:$t.length-wt.length,colDelta:Xt.length-no})})(Ee,te,$e).map(dt=>{const St={...dt,colDelta:dt.colDelta-Ze.length},wt=Qg(te,St,ye),$t=Ql(wt),Xt=Ws(Ee,$e,$t);return((no,$o,jo,gr,un,Bn)=>{const yn=no.row,Vr=no.column,En=yn+jo.length,aa=Vr+$i(jo[0])+Bn.length,Wa=Tt(Bn,it);for(let Ji=yn;Ji<En;Ji++){let Yd=0;for(let $a=Vr;$a<aa;$a++){if(Wa[$a]){Yd++;continue}Us($o,Ji,$a,un)&&ws($o,ds($o[Ji],$a),un,gr.cell);const hh=ua(jo[Ji-yn],$a-Vr-Yd),ph=gr.replace(hh.element);Ol($o[Ji],$a,_e(ph,!0,hh.isLocked))}}return $o})(Ee,wt,$e,ye,he,Xt)})})((I=f.row,Z=f.column,{row:I,column:Z}),g,B,f.generators,_).fold(()=>ap(g,Oe.some(f.element)),q=>al(q,f.row,f.column))},(g,f)=>ka(f.element).bind(_=>Yg(g,_).map(E=>({...E,generators:f.generators,clipboard:f.clipboard}))),bd,ut,Nc),M0=Rs((g,f,_,E)=>{const B=Va(g).rows,I=f.cells[0].column,q=jd(f.clipboard,f.generators,B[f.cells[0].row]),te=Gi(I,g,q,f.generators,_);return al(te,f.cells[0].row,f.cells[0].column)},Qr(!0),ut,ut,Nc),Ff=Rs((g,f,_,E)=>{const B=Va(g).rows,I=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,q=jd(f.clipboard,f.generators,B[f.cells[0].row]),te=Gi(I,g,q,f.generators,_);return al(te,f.cells[0].row,f.cells[0].column)},Qr(!1),ut,ut,Nc),zf=Rs((g,f,_,E)=>{const B=Va(g).rows,I=f.cells[0].row,q=jd(f.clipboard,f.generators,B[I]),te=jl(I,g,q,f.generators,_);return al(te,f.cells[0].row,f.cells[0].column)},vl,ut,ut,Nc),Vf=Rs((g,f,_,E)=>{const B=Va(g).rows,I=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,q=jd(f.clipboard,f.generators,B[f.cells[0].row]),te=jl(I,g,q,f.generators,_);return al(te,f.cells[0].row,f.cells[0].column)},vl,ut,ut,Nc),Ti=(g,f)=>{const _=Ea(g);return Zl(_,f).bind(E=>{const B=E[E.length-1],I=E[0].column,Z=B.column+B.colspan,q=X(D(_.all,te=>qn(te.cells,ge=>ge.column>=I&&ge.column<Z)));return ki(q)}).getOr("")},Ai=(g,f)=>{const _=Ea(g);return Zl(_,f).bind(ki).getOr("")},Xs=(g,f)=>{const _=Ea(g);return Zl(_,f).bind(E=>{const B=E[E.length-1];return(q=>{const te=D(q,he=>x0(he).type),ge=lr(te,"header"),ye=lr(te,"footer");if(ge||ye){const he=lr(te,"body");return!ge||he||ye?ge||he||!ye?Oe.none():Oe.some("footer"):Oe.some("header")}return Oe.some("body")})(_.all.slice(E[0].row,B.row+B.rowspan))}).getOr("")},Ta=(g,f)=>g.dispatch("NewRow",{node:f}),Wl=(g,f)=>g.dispatch("NewCell",{node:f}),ha=(g,f,_)=>{g.dispatch("TableModified",{..._,table:f})},eh={structure:!1,style:!0},Ua={structure:!0,style:!1},R0={structure:!0,style:!0},Zf=(g,f)=>yu(g)?ga(f):ti(g)?Zn(f):qs(f),D0=(g,f,_)=>{const E=Br(g,f,1);1===_||E<=1?Wo(g,f):Ao(g,f,Math.min(_,E))},Uf=(g,f)=>_=>_.column+_.colspan-1>=g&&_.column<f,Cm=gm([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),po=(g,f,_)=>{const E=_.substring(0,_.length-g.length),B=parseFloat(E);return E===B.toString()?f(B):Cm.invalid(_)},Ru={...Cm,from:g=>Xr(g,"%")?po("%",Cm.percent,g):Xr(g,"px")?po("px",Cm.pixels,g):Cm.invalid(g)},cp=(g,f,_)=>{const E=Ru.from(_),B=Xe(g,I=>"0px"===I)?((I,Z)=>{const q=I.fold(()=>pt(""),te=>pt(te/Z+"px"),()=>pt(100/Z+"%"));return mn(Z,q)})(E,g.length):(Z=g,q=f,E.fold(()=>Z,te=>((ge,ye,he)=>{const we=he/ye;return D(ge,Ee=>Ru.from(Ee).fold(()=>Ee,$e=>$e*we+"px",$e=>$e/100*he+"px"))})(Z,q,te),te=>{return ye=q,D(Z,he=>Ru.from(he).fold(()=>he,we=>we/ye*100+"%",we=>we+"%"));var ye}));var Z,q;return Vt(B)},B0=(g,f)=>0===g.length?f:fr(g,(_,E)=>Ru.from(E).fold(pt(0),lo,lo)+_,0),ay=(g,f)=>Ru.from(g).fold(pt(g),_=>_+f+"px",_=>_+f+"%"),Vt=g=>{if(0===g.length)return g;const f=fr(g,(E,B)=>{const I=Ru.from(B).fold(()=>({value:B,remainder:0}),Z=>((q,te)=>{const ge=Math.floor(q);return{value:ge+"px",remainder:q-ge}})(Z),Z=>({value:Z+"%",remainder:0}));return{output:[I.value].concat(E.output),remainder:E.remainder+I.remainder}},{output:[],remainder:0}),_=f.output;return _.slice(0,_.length-1).concat([ay(_[_.length-1],Math.round(f.remainder))])},Ex=Ru.from,pi=g=>Ex(g).fold(pt("px"),pt("px"),pt("%")),L0=(g,f,_)=>{const E=Ea(g),B=E.all,I=Mn(E),Z=ci(E);f.each(q=>{const te=pi(q),ge=ss(g),ye=Vn(E,g,wr,xr),he=cp(ye,ge,q);var we,$e;ec(E)?(we=he,$e=te,mt(Z,(Ze,et)=>{const dt=B0([we[et]],Er());ra(Ze.element,"width",dt+$e)})):((we,Ee,$e)=>{mt(Ee,Ze=>{const et=we.slice(Ze.column,Ze.colspan+Ze.column),dt=B0(et,Er());ra(Ze.element,"width",dt+$e)})})(he,I,te),ra(g,"width",q)}),_.each(q=>{const te=pi(q),ge=Ml(g),ye=Ur(E,g,on,Hr,xr);var he,we,$e;he=cp(ye,ge,q),we=B,$e=te,mt(I,Ze=>{const et=he.slice(Ze.row,Ze.rowspan+Ze.row),dt=B0(et,fc());ra(Ze.element,"height",dt+$e)}),mt(we,(Ze,et)=>{ra(Ze.element,"height",he[et])}),ra(g,"height",q)})},I0=g=>zo(g).exists(f=>S.test(f)),yl=g=>zo(g).exists(f=>F.test(f)),Ki=g=>zo(g).isNone(),Wf=g=>{Wo(g,"width")},Ll=g=>{const f=kn(g);L0(g,Oe.some(f),Oe.none()),Wf(g)},dp=g=>{const f=ss(g)+"px";L0(g,Oe.some(f),Oe.none()),Wf(g)},th=g=>{As(g,"width");const f=Yl(g),_=f.length>0?f:Kn(g);mt(_,E=>{As(E,"width"),Wf(E)}),Wf(g)},Ud={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Rc=(g,f,_,E)=>mn(g,B=>((I,Z,q,te)=>{const ge=Dt.fromTag("tr");for(let ye=0;ye<I;ye++){const he=Dt.fromTag(te<Z||ye<q?"th":"td");ye<q&&Ao(he,"scope","row"),te<Z&&Ao(he,"scope","col"),Qe(he,Dt.fromTag("br")),Qe(ge,he)}return ge})(f,_,E,B)),$f=(g,f)=>{g.selection.select(f.dom,!0),g.selection.collapse(!0)};var oh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const qf="x-tinymce/dom-table-",Gf=qf+"rows",Kf=qf+"columns",Xf=g=>{const f=oh.FakeClipboardItem(g);oh.write([f])},H0=g=>{var f;const _=null!==(f=oh.read())&&void 0!==f?f:[];return Gt(_,E=>Oe.from(E.getType(g)))},P0=g=>{H0(g).isSome()&&oh.clear()},Yf=g=>{g.fold(z0,f=>Xf({[Gf]:f}))},F0=()=>H0(Gf),z0=()=>P0(Gf),Jf=g=>{g.fold(Ox,f=>Xf({[Kf]:f}))},up=()=>H0(Kf),Ox=()=>P0(Kf),mp=g=>Xh(im(g),Sc(g)).filter(sa),sg=(g,f)=>{const _=Sc(g),E=he=>Ms(he,_),B=he=>{return(we=g,Cf(im(we),Sc(we)).filter(sa)).bind(we=>E(we).map(Ee=>he(Ee,we)));var we},I=he=>{g.focus()},Z=(he,we=!1)=>B((Ee,$e)=>{const Ze=pd(Mr(g),Ee,$e);he(Ee,Ze,we).each(I)}),q=()=>B((he,we)=>((Ee,$e,Ze)=>{const et=Ea(Ee);return Zl(et,$e).bind(dt=>{const St=Vd(et,Ze,!1),wt=Va(St).rows.slice(dt[0].row,dt[dt.length-1].row+dt[dt.length-1].rowspan),$t=sr(wt,no=>{const $o=qn(no.cells,jo=>!jo.isLocked);return $o.length>0?[{...no,cells:$o}]:[]}),Xt=op($t);return nl(Xt.length>0,Xt)}).map(dt=>D(dt,St=>{const wt=Rn(St.element);return mt(St.cells,$t=>{const Xt=fn($t.element);tg(Xt,"colspan",$t.colspan,1),tg(Xt,"rowspan",$t.rowspan,1),Qe(wt,Xt)}),wt}))})(he,pd(Mr(g),he,we),tc(ut,Dt.fromDom(g.getDoc()),Oe.none()))),te=()=>B((he,we)=>((Ee,$e)=>{const Ze=Ea(Ee);return Pi(Ze,$e).map(et=>{const dt=et[et.length-1],St=et[0].column,wt=dt.column+dt.colspan,$t=((no,$o,jo)=>{if(ec(no)){const gr=qn(ci(no),Uf($o,jo)),un=D(gr,yn=>{const Vr=fn(yn.element);return D0(Vr,"span",jo-$o),Vr}),Bn=Dt.fromTag("colgroup");return jt(Bn,un),[Bn]}return[]})(Ze,St,wt);var $o,jo;return[...$t,...($o=St,jo=wt,D(Ze.all,gr=>{const un=qn(gr.cells,Uf($o,jo)),Bn=D(un,Vr=>{const En=fn(Vr.element);return D0(En,"colspan",jo-$o),En}),yn=Dt.fromTag("tr");return jt(yn,Bn),yn}))]})})(he,pd(Mr(g),he,we))),ge=(he,we)=>we().each(Ee=>{const $e=D(Ee,Ze=>fn(Ze));B((Ze,et)=>{const dt=$c(Dt.fromDom(g.getDoc())),St=(wt=Mr(g),Xt=$e,no=dt,{selection:zd(wt),clipboard:Xt,generators:no});var wt,Xt,no;he(Ze,St).each(I)})}),ye=he=>(we,Ee)=>{return($e=Ee,or($e,"type")?Oe.from($e.type):Oe.none()).each($e=>{Z(he($e),Ee.no_events)});var $e};en({mceTableSplitCells:()=>Z(f.unmergeCells),mceTableMergeCells:()=>Z(f.mergeCells),mceTableInsertRowBefore:()=>Z(f.insertRowsBefore),mceTableInsertRowAfter:()=>Z(f.insertRowsAfter),mceTableInsertColBefore:()=>Z(f.insertColumnsBefore),mceTableInsertColAfter:()=>Z(f.insertColumnsAfter),mceTableDeleteCol:()=>Z(f.deleteColumn),mceTableDeleteRow:()=>Z(f.deleteRow),mceTableCutCol:()=>te().each(he=>{Jf(he),Z(f.deleteColumn)}),mceTableCutRow:()=>q().each(he=>{Yf(he),Z(f.deleteRow)}),mceTableCopyCol:()=>te().each(he=>Jf(he)),mceTableCopyRow:()=>q().each(he=>Yf(he)),mceTablePasteColBefore:()=>ge(f.pasteColsBefore,up),mceTablePasteColAfter:()=>ge(f.pasteColsAfter,up),mceTablePasteRowBefore:()=>ge(f.pasteRowsBefore,F0),mceTablePasteRowAfter:()=>ge(f.pasteRowsAfter,F0),mceTableDelete:()=>mp(g).each(he=>{Ms(he,_).filter(Ft(_)).each(we=>{const Ee=Dt.fromText("");if(Be(we,Ee),ho(we),g.dom.isEmpty(g.getBody()))g.setContent(""),g.selection.setCursorLocation();else{const $e=g.dom.createRng();$e.setStart(Ee.dom,0),$e.setEnd(Ee.dom,0),g.selection.setRng($e),g.nodeChanged()}})}),mceTableCellToggleClass:(he,we)=>{B(Ee=>{const $e=Mr(g),et=Xe($e,dt=>g.formatter.match("tablecellclass",{value:we},dt.dom))?g.formatter.remove:g.formatter.apply;mt($e,dt=>et("tablecellclass",{value:we},dt.dom)),ha(g,Ee.dom,eh)})},mceTableToggleClass:(he,we)=>{B(Ee=>{g.formatter.toggle("tableclass",{value:we},Ee.dom),ha(g,Ee.dom,eh)})},mceTableToggleCaption:()=>{mp(g).each(he=>{Ms(he,_).each(we=>{rs(we,"caption").fold(()=>{const Ee=Dt.fromTag("caption");var $e,Ze;Qe(Ee,Dt.fromText("Caption")),Ze=Ee,Fa($e=we,0).fold(()=>{Qe($e,Ze)},dt=>{pe(dt,Ze)}),g.selection.setCursorLocation(Ee.dom,0)},Ee=>{Sr("caption")(he)&&Vs("td",we).each($e=>g.selection.setCursorLocation($e.dom,0)),ho(Ee)}),ha(g,we.dom,Ua)})})},mceTableSizingMode:(he,we)=>{return Ee=we,mp(g).each($e=>{xc(g)||ti(g)||yu(g)||Ms($e,_).each(Ze=>{"relative"!==Ee||I0(Ze)?"fixed"!==Ee||yl(Ze)?"responsive"!==Ee||Ki(Ze)||th(Ze):dp(Ze):Ll(Ze),Km(Ze),ha(g,Ze.dom,Ua)})});var Ee},mceTableCellType:ye(he=>"th"===he?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:ye(he=>"th"===he?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:ye(he=>{switch(he){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(he,we)=>g.addCommand(we,he)),g.addCommand("mceInsertTable",(he,we)=>{((Ee,$e,Ze,et={})=>{const dt=St=>uo(St)&&St>0;if(dt($e)&&dt(Ze))return((g,f,_,E,B)=>{const I=(q=>{const te=q.options,ge=te.get("table_default_styles");return te.isSet("table_default_styles")?ge:(he=ge,xc(ye=q)||!xu(ye)?he:ti(ye)?{...he,width:sm(ye)}:{...he,width:"100%"});var ye,he})(g),Z={styles:I,attributes:_c(g),colGroups:jg(g)};return g.undoManager.ignore(()=>{const q=((ge,ye,he,we,Ee,$e=Ud)=>{const Ze=Dt.fromTag("table"),et="cells"!==Ee;qo(Ze,$e.styles),Nr(Ze,$e.attributes),$e.colGroups&&Qe(Ze,($t=>{const Xt=Dt.fromTag("colgroup");return mn($t,()=>Qe(Xt,Dt.fromTag("col"))),Xt})(ye));const dt=Math.min(ge,he);if(et&&he>0){const $t=Dt.fromTag("thead");Qe(Ze,$t);const Xt=Rc(he,ye,"sectionCells"===Ee?dt:0,we);jt($t,Xt)}const St=Dt.fromTag("tbody");Qe(Ze,St);const wt=Rc(et?ge-dt:ge,ye,et?0:he,we);return jt(St,wt),Ze})(_,f,B,E,Vl(g),Z);Ao(q,"data-mce-id","__mce");const te=(ge=>{const ye=Dt.fromTag("div"),he=Dt.fromDom(ge.dom.cloneNode(!0));return Qe(ye,he),ye.dom.innerHTML})(q);g.insertContent(te),g.addVisual()}),Fs(Cu(g),'table[data-mce-id="__mce"]').map(q=>{return ti(g)?dp(q):xc(g)?th(q):(yu(g)||Qs(te=I.width)&&-1!==te.indexOf("%"))&&Ll(q),Km(q),Wo(q,"data-mce-id"),((te,ge)=>{mt(kr(ge,"tr"),ye=>{Ta(te,ye.dom),mt(kr(ye,"th,td"),he=>{Wl(te,he.dom)})})})(g,q),((te,ge)=>{Fs(ge,"td,th").each(At($f,te))})(g,q),q.dom;var te}).getOrNull()})(Ee,Ze,$e,et.headerColumns||0,et.headerRows||0);console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(g,we.rows,we.columns,we.options)}),g.addCommand("mceTableApplyCellStyle",(he,we)=>{const Ee=et=>"tablecell"+et.toLowerCase().replace("-","");if(!No(we))return;const $e=qn(Mr(g),sa);if(0===$e.length)return;const Ze=((et,dt)=>{const St={};return((wt,$t,Xt,no)=>{en(wt,($o,jo)=>{(((et,dt)=>g.formatter.has(Ee(dt))&&Qs(et))($o,jo)?Xt:no)($o,jo)})})(et,0,(wt=St,($t,Xt)=>{wt[Xt]=$t}),ut),St;var wt})(we);(et=>{for(const dt in et)if(Hs.call(et,dt))return!1;return!0})(Ze)||(en(Ze,(et,dt)=>{const St=Ee(dt);mt($e,wt=>{""===et?g.formatter.remove(St,{value:null},wt.dom,!0):g.formatter.apply(St,{value:et},wt.dom)})}),E($e[0]).each(et=>ha(g,et.dom,eh)))})},Ds=gm([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cl={before:Ds.before,on:Ds.on,after:Ds.after,cata:(g,f,_,E)=>g.fold(f,_,E),getStart:g=>g.fold(lo,lo,lo)},oi=(g,f)=>({selection:g,kill:f}),V0=(g,f)=>{const _=g.document.createRange();return _.selectNode(f.dom),_},iy=(g,f)=>{const _=g.document.createRange();return Z0(_,f),_},Z0=(g,f)=>g.selectNodeContents(f.dom),gp=(g,f,_)=>{const E=g.document.createRange();var B,I;return B=E,f.fold(I=>{B.setStartBefore(I.dom)},(I,Z)=>{B.setStart(I.dom,Z)},I=>{B.setStartAfter(I.dom)}),I=E,_.fold(q=>{I.setEndBefore(q.dom)},(q,te)=>{I.setEnd(q.dom,te)},q=>{I.setEndAfter(q.dom)}),E},_m=(g,f,_,E,B)=>{const I=g.document.createRange();return I.setStart(f.dom,_),I.setEnd(E.dom,B),I},ly=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom,width:g.width,height:g.height}),ag=gm([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),nh=(g,f,_)=>f(Dt.fromDom(_.startContainer),_.startOffset,Dt.fromDom(_.endContainer),_.endOffset),ig=(g,f)=>{var E;return((E,B)=>{const I=B.ltr();return I.collapsed?B.rtl().filter(Z=>!1===Z.collapsed).map(Z=>ag.rtl(Dt.fromDom(Z.endContainer),Z.endOffset,Dt.fromDom(Z.startContainer),Z.startOffset)).getOrThunk(()=>nh(0,ag.ltr,I)):nh(0,ag.ltr,I)})(0,(E=g,f.match({domRange:I=>({ltr:pt(I),rtl:Oe.none}),relative:(I,Z)=>({ltr:le(()=>gp(E,I,Z)),rtl:le(()=>Oe.some(gp(E,Z,I)))}),exact:(I,Z,q,te)=>({ltr:le(()=>_m(E,I,Z,q,te)),rtl:le(()=>Oe.some(_m(E,q,te,I,Z)))})})))},j0=(g,f)=>ig(g,f).match({ltr:(_,E,B,I)=>{const Z=g.document.createRange();return Z.setStart(_.dom,E),Z.setEnd(B.dom,I),Z},rtl:(_,E,B,I)=>{const Z=g.document.createRange();return Z.setStart(B.dom,I),Z.setEnd(_.dom,E),Z}}),hp=(g,f,_,E)=>({start:g,soffset:f,finish:_,foffset:E}),lg=(g,f,_,E)=>({start:cl.on(g,f),finish:cl.on(_,E)}),pp=(g,f)=>{const _=j0(g,f);return hp(Dt.fromDom(_.startContainer),_.startOffset,Dt.fromDom(_.endContainer),_.endOffset)},cg=lg,rh=(g,f,_,E,B)=>ar(_,E)?Oe.none():Jm(_,E,f).bind(I=>{const Z=I.boxes.getOr([]);return Z.length>1?(B(g,Z,I.start,I.finish),Oe.some(oi(Oe.some(cg(_,0,_,Jr(_))),!0))):Oe.none()}),U0=(g,f)=>({item:g,mode:f}),Wd=(g,f,_,E=Sm)=>g.property().parent(f).map(B=>U0(B,E)),Sm=(g,f,_,E=fp)=>_.sibling(g,f).map(B=>U0(B,E)),fp=(g,f,_,E=fp)=>{const B=g.property().children(f);return _.first(B).map(I=>U0(I,E))},km=[{current:Wd,next:Sm,fallback:Oe.none()},{current:Sm,next:fp,fallback:Oe.some(Wd)},{current:fp,next:fp,fallback:Oe.some(Sm)}],bp=(g,f,_,E,B=km)=>Do(B,I=>I.current===_).bind(I=>I.current(g,f,E,I.next).orThunk(()=>I.fallback.bind(Z=>bp(g,f,Z,E)))),Qf=(g,f,_,E,B,I)=>bp(g,f,E,B).bind(Z=>I(Z.item)?Oe.none():_(Z.item)?Oe.some(Z.item):Qf(g,Z.item,_,Z.mode,B,I)),cy=g=>f=>0===g.property().children(f).length,e1=(g,f,_,E)=>Qf(g,f,_,Sm,{sibling:(B,I)=>B.query().prevSibling(I),first:B=>B.length>0?Oe.some(B[B.length-1]):Oe.none()},E),vp=(g,f,_,E)=>Qf(g,f,_,Sm,{sibling:(B,I)=>B.query().nextSibling(I),first:B=>B.length>0?Oe.some(B[0]):Oe.none()},E),t1=ea(),W0=(g,f)=>{return B=f,e1(_=t1,g,cy(_),B);var _,B},$0=(g,f)=>{return B=f,vp(_=t1,g,cy(_),B);var _,B},o1=gm([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dy=g=>Kr(g,"tr"),dg={...o1,verify:(g,f,_,E,B,I,Z)=>Kr(E,"td,th",Z).bind(q=>Kr(f,"td,th",Z).map(te=>ar(q,te)?ar(E,q)&&Jr(q)===B?I(te):o1.none("in same cell"):wf(dy,[q,te]).fold(()=>((ge,ye,he)=>{const we=ge.getRect(ye),Ee=ge.getRect(he);return Ee.right>we.left&&Ee.left<we.right})(g,te,q)?o1.success():I(te),ge=>I(te)))).getOr(o1.none("default")),cata:(g,f,_,E,B)=>g.fold(f,_,E,B)},yp=Sr("br"),n1=(g,f,_)=>f(g,_).bind(E=>Gn(E)&&0===fl(E).trim().length?n1(E,f,_):Oe.some(E)),sh=(g,f)=>({left:g.left,top:g.top+f,right:g.right,bottom:g.bottom+f}),ah=(g,f)=>({left:g.left,top:g.top-f,right:g.right,bottom:g.bottom-f}),uy=(g,f,_)=>({left:g.left+f,top:g.top+_,right:g.right+f,bottom:g.bottom+_}),ug=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom}),Du=(g,f)=>Oe.some(g.getRect(f)),q0=(g,f,_)=>{return Pn(f)?Du(g,f).map(ug):Gn(f)?(E=g,B=f,I=_,I>=0&&I<Jr(B)?E.getRangedRect(B,I,B,I+1):I>0?E.getRangedRect(B,I-1,B,I):Oe.none()).map(ug):Oe.none();var E,B,I},G0=(g,f)=>Pn(f)?Du(g,f).map(ug):Gn(f)?g.getRangedRect(f,0,f,Jr(f)).map(ug):Oe.none(),Bu=gm([{none:[]},{retry:["caret"]}]),ih=(g,f,_)=>ii(f,ac).fold(ne,E=>G0(g,E).exists(B=>{return(I=_).left<(Z=B).left||Math.abs(Z.right-I.left)<1||I.left>Z.right;var I,Z})),my={point:g=>g.bottom,adjuster:(g,f,_,E,B)=>{const I=sh(B,5);return Math.abs(_.bottom-E.bottom)<1||_.top>B.bottom?Bu.retry(I):_.top===B.bottom?Bu.retry(sh(B,1)):ih(g,f,B)?Bu.retry(uy(I,5,0)):Bu.none()},move:sh,gather:$0},r1=(g,f,_,E,B)=>{return 0===B?Oe.some(E):(I=g,Z=E.left,q=f.point(E),I.elementFromPoint(Z,q).filter(te=>"table"===Cr(te)).isSome()?((I,Z,q,te,ge)=>r1(I,Z,q,Z.move(te,5),ge))(g,f,_,E,B-1):g.situsFromPoint(E.left,f.point(E)).bind(I=>I.start.fold(Oe.none,Z=>G0(g,Z).bind(q=>f.adjuster(g,Z,q,_,E).fold(Oe.none,te=>r1(g,f,_,te,B-1))).orThunk(()=>Oe.some(E)),Oe.none)));var I,Z,q},K0=(g,f,_)=>{const E=g.move(_,5),B=r1(f,g,_,E,100).getOr(E);return(I=g,Z=B,q=f,I.point(Z)>q.getInnerHeight()?Oe.some(I.point(Z)-q.getInnerHeight()):I.point(Z)<0?Oe.some(-I.point(Z)):Oe.none()).fold(()=>f.situsFromPoint(B.left,g.point(B)),I=>(f.scrollBy(0,I),f.situsFromPoint(B.left,g.point(B)-I)));var I,Z,q},Xi={tryUp:At(K0,{point:g=>g.top,adjuster:(g,f,_,E,B)=>{const I=ah(B,5);return Math.abs(_.top-E.top)<1||_.bottom<B.top?Bu.retry(I):_.bottom===B.top?Bu.retry(ah(B,1)):ih(g,f,B)?Bu.retry(uy(I,5,0)):Bu.none()},move:ah,gather:W0}),tryDown:At(K0,my),getJumpSize:pt(5)},X0=(g,f,_,E,B,I)=>0===I?Oe.none():wp(g,f,_,E,B).bind(Z=>{const q=g.fromSitus(Z),te=dg.verify(g,_,E,q.finish,q.foffset,B.failure,f);return dg.cata(te,()=>Oe.none(),()=>Oe.some(Z),ge=>ar(_,ge)&&0===E?Y0(g,_,E,ah,B):X0(g,f,ge,0,B,I-1),ge=>ar(_,ge)&&E===Jr(ge)?Y0(g,_,E,sh,B):X0(g,f,ge,Jr(ge),B,I-1))}),Y0=(g,f,_,E,B)=>q0(g,f,_).bind(I=>hy(g,B,E(I,Xi.getJumpSize()))),hy=(g,f,_)=>{const E=Ci().browser;return E.isChromium()||E.isSafari()||E.isFirefox()?f.retry(g,_):Oe.none()},wp=(g,f,_,E,B)=>q0(g,_,E).bind(I=>hy(g,B,I)),J0=(g,f,_,E,B)=>Kr(E,"td,th",f).bind(I=>Kr(I,"table",f).bind(Z=>{return te=Z,ca(B,ge=>Sa(ge).exists(ye=>ar(ye,te)),void 0).isSome()?((q,te,ge)=>((g,f,_)=>g.getSelection().bind(E=>{return(B=f,I=E.finish,Z=E.foffset,q=_,(yp(I)?(ge=B,ye=I,he=q,he.traverse(ye).orThunk(()=>n1(ye,he.gather,ge)).map(he.relative)):((g,f,_,E)=>{return(B=f,I=_,Fa(B,I).filter(yp).orThunk(()=>Fa(B,I-1).filter(yp))).bind(B=>E.traverse(B).fold(()=>n1(B,E.gather,g).map(E.relative),I=>{return(Z=I,Sa(Z).bind(q=>{const te=Os(q);return(ge=te,ye=Z,Jo(ge,At(ar,ye))).map(ge=>((ye,he,we,Ee)=>({parent:ye,children:he,element:we,index:Ee}))(q,te,Z,ge));var ge,ye})).map(Z=>cl.on(Z.parent,Z.index));var Z}));var B,I})(B,I,Z,q)).map(ge=>({start:ge,finish:ge}))).fold(()=>Oe.some(Gg(E.finish,E.foffset)),B=>{const I=g.fromSitus(B);return Z=dg.verify(g,E.finish,E.foffset,I.finish,I.foffset,_.failure,f),dg.cata(Z,q=>Oe.none(),()=>Oe.none(),q=>Oe.some(Gg(q,0)),q=>Oe.some(Gg(q,Jr(q))));var Z});var B,I,Z,q,ge,ye,he}))(q,te,ge).bind(ye=>X0(q,te,ye.element,ye.offset,ge,20).map(q.fromSitus)))(g,f,_).bind(q=>Kr(q.finish,"td,th",f).map(te=>({start:I,finish:te,range:q}))):Oe.none();var te})),s1=(g,f,_,E,B,I)=>I(E,f).orThunk(()=>J0(g,f,_,E,B).map(Z=>{const q=Z.range;return oi(Oe.some(cg(q.start,q.soffset,q.finish,q.foffset)),!0)})),py=(g,f)=>Kr(g,"tr",f).bind(_=>Kr(_,"table",f).bind(E=>{const B=kr(E,"tr");return ar(_,B[0])?(I=E,q=f,e1(t1,I,te=>Ra(te).isSome(),q)).map(I=>{const Z=Jr(I);return oi(Oe.some(cg(I,Z,I,Z)),!0)}):Oe.none();var I,q})),Ax=(g,f)=>Kr(g,"tr",f).bind(_=>Kr(_,"table",f).bind(E=>{const B=kr(E,"tr");return ar(_,B[B.length-1])?(I=E,q=f,vp(t1,I,te=>Ii(te).isSome(),q)).map(I=>oi(Oe.some(cg(I,0,I,0)),!0)):Oe.none();var I,q})),mg=(g,f,_,E,B,I,Z)=>J0(g,_,E,B,I).bind(q=>rh(f,_,q.start,q.finish,Z)),a1=g=>{let f=g;return{get:()=>f,set:_=>{f=_}}},lh=()=>{const g=(f=>{const _=a1(Oe.none()),E=()=>_.get().each(f);return{clear:()=>{E(),_.set(Oe.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:B=>{E(),_.set(Oe.some(B))}}})(ut);return{...g,on:f=>g.get().each(f)}},Q0=(g,f)=>Kr(g,"td,th",f),fy=g=>ai(g).exists(Wh),eb={traverse:Pa,gather:$0,relative:cl.before,retry:Xi.tryDown,failure:dg.failedDown},tb={traverse:ya,gather:W0,relative:cl.before,retry:Xi.tryUp,failure:dg.failedUp},Em=g=>f=>f===g,xp=Em(38),ch=Em(40),Om=g=>g>=37&&g<=40,by={isBackward:Em(37),isForward:Em(39)},Nx={isBackward:Em(39),isForward:Em(37)},$d=gm([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),dh={domRange:$d.domRange,relative:$d.relative,exact:$d.exact,exactFromRange:g=>$d.exact(g.start,g.soffset,g.finish,g.foffset),getWin:g=>{const f=g.match({domRange:E=>Dt.fromDom(E.startContainer),relative:(E,B)=>cl.getStart(E),exact:(E,B,I,Z)=>E});return Dt.fromDom(si(f).dom.defaultView)},range:hp},Mx=document.caretPositionFromPoint?(g,f,_)=>{var E,B;return Oe.from(null===(B=(E=g.dom).caretPositionFromPoint)||void 0===B?void 0:B.call(E,f,_)).bind(I=>{if(null===I.offsetNode)return Oe.none();const Z=g.dom.createRange();return Z.setStart(I.offsetNode,I.offset),Z.collapse(),Oe.some(Z)})}:document.caretRangeFromPoint?(g,f,_)=>{var E,B;return Oe.from(null===(B=(E=g.dom).caretRangeFromPoint)||void 0===B?void 0:B.call(E,f,_))}:Oe.none,Cp=(g,f)=>{const _=Cr(g);return"input"===_?cl.after(g):lr(["br","img"],_)?0===f?cl.before(g):cl.after(g):cl.on(g,f)},_p=g=>Oe.from(g.getSelection()),Yi=(g,f)=>{_p(g).each(_=>{_.removeAllRanges(),_.addRange(f)})},uh=(g,f,_,E,B)=>{const I=_m(g,f,_,E,B);Yi(g,I)},qd=(g,f)=>ig(g,f).match({ltr:(_,E,B,I)=>{uh(g,_,E,B,I)},rtl:(_,E,B,I)=>{_p(g).each(Z=>{if(Z.setBaseAndExtent)Z.setBaseAndExtent(_.dom,E,B.dom,I);else if(Z.extend)try{he=B,we=I,(te=Z).collapse(_.dom,E),te.extend(he.dom,we)}catch{uh(g,B,I,_,E)}else uh(g,B,I,_,E);var te,he,we})}}),Gd=(g,f,_,E,B)=>{const I=((Z,q,te,ge)=>{const ye=Cp(Z,q),he=Cp(te,ge);return dh.relative(ye,he)})(f,_,E,B);qd(g,I)},ob=(g,f,_)=>{const E=((B,I)=>{const Z=B.fold(cl.before,Cp,cl.after),q=I.fold(cl.before,Cp,cl.after);return dh.relative(Z,q)})(f,_);qd(g,E)},mh=g=>{if(g.rangeCount>0){const f=g.getRangeAt(0),_=g.getRangeAt(g.rangeCount-1);return Oe.some(hp(Dt.fromDom(f.startContainer),f.startOffset,Dt.fromDom(_.endContainer),_.endOffset))}return Oe.none()},vy=g=>{if(null===g.anchorNode||null===g.focusNode)return mh(g);{const f=Dt.fromDom(g.anchorNode),_=Dt.fromDom(g.focusNode);return((E,B,I,Z)=>{const q=((ge,ye,he,we)=>{const Ee=Ja(ge).dom.createRange();return Ee.setStart(ge.dom,ye),Ee.setEnd(he.dom,we),Ee})(E,B,I,Z),te=ar(E,I)&&B===Z;return q.collapsed&&!te})(f,g.anchorOffset,_,g.focusOffset)?Oe.some(hp(f,g.anchorOffset,_,g.focusOffset)):mh(g)}},Lu=(g,f,_=!0)=>{const E=(_?iy:V0)(g,f);Yi(g,E)},i1=g=>{return(f=g,_p(f).filter(_=>_.rangeCount>0).bind(vy)).map(f=>dh.exact(f.start,f.soffset,f.finish,f.foffset));var f},Sp=g=>({elementFromPoint:(f,_)=>Dt.fromPoint(Dt.fromDom(g.document),f,_),getRect:f=>f.dom.getBoundingClientRect(),getRangedRect:(f,_,E,B)=>{const I=dh.exact(f,_,E,B);return(te=>{const ge=te.getClientRects(),ye=ge.length>0?ge[0]:te.getBoundingClientRect();return ye.width>0||ye.height>0?Oe.some(ye).map(ly):Oe.none()})(j0(g,I))},getSelection:()=>i1(g).map(f=>pp(g,f)),fromSitus:f=>{const _=dh.relative(f.start,f.finish);return pp(g,_)},situsFromPoint:(f,_)=>{return(E=g,B=f,I=_,((Z,q,te)=>{const ge=Dt.fromDom(Z.document);return Mx(ge,q,te).map(ye=>hp(Dt.fromDom(ye.startContainer),ye.startOffset,Dt.fromDom(ye.endContainer),ye.endOffset))})(E,B,I)).map(E=>lg(E.start,E.soffset,E.finish,E.foffset));var E,B,I},clearSelection:()=>{_p(g).each(_=>_.removeAllRanges())},collapseSelection:(f=!1)=>{i1(g).each(_=>_.fold(E=>E.collapse(f),(E,B)=>{const I=f?E:B;ob(g,I,I)},(E,B,I,Z)=>{const q=f?E:I,te=f?B:Z;Gd(g,q,te,q,te)}))},setSelection:f=>{Gd(g,f.start,f.soffset,f.finish,f.foffset)},setRelativeSelection:(f,_)=>{ob(g,f,_)},selectNode:f=>{Lu(g,f,!1)},selectContents:f=>{Lu(g,f)},getInnerHeight:()=>g.innerHeight,getScrollY:()=>(f=>{const _=void 0!==f?f.dom:document;return V(_.body.scrollLeft||_.documentElement.scrollLeft,_.body.scrollTop||_.documentElement.scrollTop)})(Dt.fromDom(g.document)).top,scrollBy:(f,_)=>{((E,B,I)=>{const Z=(void 0!==I?I.dom:document).defaultView;Z&&Z.scrollBy(E,B)})(f,_,Dt.fromDom(g.document))}}),ic=(g,f)=>({rows:g,cols:f}),nb=g=>ii(g,Zi).exists(Wh),kp=(g,f)=>nb(g)||nb(f),Kd=g=>void 0!==g.dom.classList,Iu=(g,f)=>{Kd(g)?g.dom.classList.add(f):((g,f)=>{((_,E,B)=>{const I=((Z,q)=>{const te=ls(Z,"class");return void 0===te||""===te?[]:te.split(" ")})(_).concat([B]);Ao(_,"class",I.join(" "))})(g,0,f)})(g,f)},Am=(g,f)=>Kd(g)&&g.dom.classList.contains(f),Hu=()=>({tag:"none"}),yd=g=>({tag:"multiple",elements:g}),l1=g=>({tag:"single",element:g}),c1=g=>{const f=Dt.fromDom((q=>{if(ft()&&Is(q.target)){const te=Dt.fromDom(q.target);if(Pn(te)&&Is(te.dom.shadowRoot)&&q.composed&&q.composedPath){const ge=q.composedPath();if(ge)return Ie(ge)}}return Oe.from(q.target)})(g).getOr(g.target)),_=()=>g.stopPropagation(),E=()=>g.preventDefault(),B=(I=E,Z=_,(...q)=>I(Z.apply(null,q)));var I,Z;return{target:f,x:g.clientX,y:g.clientY,stop:_,prevent:E,kill:B,raw:g}},yy=(g,f,_,E)=>{g.dom.removeEventListener(f,_,E)},wy=it,Xd=(g,f,_)=>((q,te,ge,ye,he)=>{const we=(Ee=ge,$e=ye,Ze=>{Ee(Ze)&&$e(c1(Ze))});var Ee,$e;return q.dom.addEventListener(te,we,!1),{unbind:At(yy,q,te,we,!1)}})(g,f,wy,_),Pu=c1,Ep=g=>!Am(Dt.fromDom(g.target),"ephox-snooker-resizer-bar"),ni=g=>{let f=[];return{bind:_=>{if(void 0===_)throw new Error("Event bind error: undefined handler");f.push(_)},unbind:_=>{f=qn(f,E=>E!==_)},trigger:(..._)=>{const E={};mt(g,(B,I)=>{E[B]=_[I]}),mt(f,B=>{B(E)})}}},$l=g=>({registry:Yt(g,f=>({bind:f.bind,unbind:f.unbind})),trigger:Yt(g,f=>f.trigger)}),Fu=g=>g.slice(0).sort(),d1=(g,f)=>{const _=qn(f,E=>!lr(g,E));_.length>0&&(E=>{throw new Error("Unsupported keys for object: "+Fu(E).join(", "))})(_)},La=g=>((E,B,I)=>{if(0===B.length)throw new Error("You must specify at least one required field.");return((Z,q)=>{if(!ps(q))throw new Error("The "+Z+" fields must be an array. Was: "+q+".");mt(q,te=>{if(!Qs(te))throw new Error("The value "+te+" in the "+Z+" fields was not a string.")})})("required",B),(Z=>{const q=Fu(Z);Do(q,(te,ge)=>ge<q.length-1&&te===q[ge+1]).each(te=>{throw new Error("The field: "+te+" occurs more than once in the combined fields: ["+q.join(", ")+"].")})})(B),Z=>{const q=Ue(Z);Xe(B,ge=>lr(q,ge))||((ge,ye)=>{throw new Error("All required keys ("+Fu(ge).join(", ")+") were not specified. Specified keys were: "+Fu(ye).join(", ")+".")})(B,q),E(B,q);const te=qn(B,ge=>!I.validate(Z[ge],ge));return te.length>0&&((ge,ye)=>{throw new Error("All values need to be of type: "+ye+". Keys ("+Fu(ge).join(", ")+") were not.")})(te,I.label),Z}})(d1,g,{validate:_n,label:"function"}),Rx=La(["compare","extract","mutate","sink"]),Jc=La(["element","start","stop","destroy"]),u1=La(["forceDrop","drop","move","delayDrop"]),gg=g=>{const f=g.replace(/\./g,"-");return{resolve:_=>f+"-"+_}},rb=gg("ephox-dragster").resolve;var Op=Rx({compare:(g,f)=>V(f.left-g.left,f.top-g.top),extract:g=>Oe.some(V(g.x,g.y)),sink:(g,f)=>{const _=(q=>{const te={layerClass:rb("blocker"),...q},ge=Dt.fromTag("div");return Ao(ge,"role","presentation"),qo(ge,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Iu(ge,rb("blocker")),Iu(ge,te.layerClass),{element:pt(ge),destroy:()=>{ho(ge)}}})(f),E=Xd(_.element(),"mousedown",g.forceDrop),B=Xd(_.element(),"mouseup",g.drop),I=Xd(_.element(),"mousemove",g.move),Z=Xd(_.element(),"mouseout",g.delayDrop);return Jc({element:_.element,start:q=>{Qe(q,_.element())},stop:()=>{ho(_.element())},destroy:()=>{_.destroy(),B.unbind(),I.unbind(),Z.unbind(),E.unbind()}})},mutate:(g,f)=>{g.mutate(f.left,f.top)}});const gh=gg("ephox-snooker").resolve,g1=gh("resizer-bar"),Tp=gh("resizer-rows"),wd=gh("resizer-cols"),h1=g=>{const f=kr(g.parent(),"."+g1);mt(f,ho)},sb=(g,f,_)=>{const E=g.origin();mt(f,B=>{B.each(I=>{const Z=_(E,I);Iu(Z,g1),Qe(g.parent(),Z)})})},Ut=(g,f)=>{if(h1(g),g.isResizable(f)){const _=Ea(f);((g,f,_,E,B)=>{const I=G(_),Z=f.isResizable,q=E.length>0?on.positions(E,_):[],te=q.length>0?(we=Z,sr(g.all,(Ee,$e)=>we(Ee.element)?[$e]:[])):[];var we;((he,we,Ee,$e)=>{sb(he,we,(Ze,et)=>{const dt=((St,wt,$t,Xt,no)=>{const $o=Dt.fromTag("div");return qo($o,{position:"absolute",left:wt+"px",top:$t-3.5+"px",height:"7px",width:Xt+"px"}),Nr($o,{"data-row":St,role:"presentation"}),$o})(et.row,Ee.left-Ze.left,et.y-Ze.top,$e);return Iu(dt,Tp),dt})})(f,qn(q,(he,we)=>ot(te,Ee=>we===Ee)),I,bc(_));const ge=B.length>0?xo.positions(B,_):[],ye=ge.length>0?((he,we)=>{const Ee=[];return mn(he.grid.columns,$e=>{Nl(he,$e).map(Ze=>Ze.element).forall(we)&&Ee.push($e)}),qn(Ee,$e=>{const Ze=Wc(he,et=>et.column===$e);return Xe(Ze,et=>we(et.element))})})(g,Z):[];((he,we,Ee,$e)=>{sb(he,we,(Ze,et)=>{const dt=((St,wt,$t,Xt,no)=>{const $o=Dt.fromTag("div");return qo($o,{position:"absolute",left:wt-3.5+"px",top:$t+"px",height:no+"px",width:"7px"}),Nr($o,{"data-column":St,role:"presentation"}),$o})(et.col,et.x-Ze.left,Ee.top-Ze.top,0,$e);return Iu(dt,wd),dt})})(f,qn(ge,(he,we)=>ot(ye,Ee=>we===Ee)),I,Un(_))})(_,g,f,yc(_),fu(_))}},xa=(g,f)=>{const _=kr(g.parent(),"."+g1);mt(_,f)},p1=g=>{xa(g,f=>{ra(f,"display","none")})},Aa=g=>{xa(g,f=>{ra(f,"display","block")})},fi=gh("resizer-bar-dragging"),dl=(g,f,_)=>{const E=on,B=xo,I=(g=>{const f=(()=>{const he=$l({drag:ni(["xDelta","yDelta","target"])});let we=Oe.none();const Ee=(()=>{const $e=$l({drag:ni(["xDelta","yDelta"])});return{mutate:(Ze,et)=>{$e.trigger.drag(Ze,et)},events:$e.registry}})();return Ee.events.drag.bind($e=>{we.each(Ze=>{he.trigger.drag($e.xDelta,$e.yDelta,Ze)})}),{assign:$e=>{we=Oe.some($e)},get:()=>we,mutate:Ee.mutate,events:he.registry}})(),_=((he,we={})=>{var Ee;return(($e,Ze,et)=>{let dt=!1;const St=$l({start:ni([]),stop:ni([])}),wt=(()=>{const g=(()=>{const E=$l({move:ni(["info"])});return{onEvent:ut,reset:ut,events:E.registry}})(),f=(()=>{let E=Oe.none();const B=$l({move:ni(["info"])});return{onEvent:(I,Z)=>{Z.extract(I).each(q=>{((ge,ye)=>{const he=E.map(we=>ge.compare(we,ye));return E=Oe.some(ye),he})(Z,q).each(ge=>{B.trigger.move(ge)})})},reset:()=>{E=Oe.none()},events:B.registry}})();let _=g;return{on:()=>{_.reset(),_=f},off:()=>{_.reset(),_=g},isOn:()=>_===f,onEvent:(E,B)=>{_.onEvent(E,B)},events:f.events}})(),$t=()=>{$o.stop(),wt.isOn()&&(wt.off(),St.trigger.stop())},Xt=((jo,gr)=>{let un=null;const Bn=()=>{as(un)||(clearTimeout(un),un=null)};return{cancel:Bn,throttle:(...yn)=>{Bn(),un=setTimeout(()=>{un=null,jo.apply(null,yn)},200)}}})($t);wt.events.move.bind(jo=>{Ze.mutate($e,jo.info)});const no=jo=>(...gr)=>{dt&&jo.apply(null,gr)},$o=Ze.sink(u1({forceDrop:$t,drop:no($t),move:no(jo=>{Xt.cancel(),wt.onEvent(jo,Ze)}),delayDrop:no(Xt.throttle)}),et);return{element:$o.element,go:jo=>{$o.start(jo),wt.on(),St.trigger.start()},on:()=>{dt=!0},off:()=>{dt=!1},isActive:()=>dt,destroy:()=>{$o.destroy()},events:St.registry}})(he,null!==(Ee=we.mode)&&void 0!==Ee?Ee:Op,we)})(f,{});let E=Oe.none();const B=(he,we)=>Oe.from(ls(he,we));f.events.drag.bind(he=>{B(he.target,"data-row").each(we=>{const Ee=Sl(he.target,"top");ra(he.target,"top",Ee+he.yDelta+"px")}),B(he.target,"data-column").each(we=>{const Ee=Sl(he.target,"left");ra(he.target,"left",Ee+he.xDelta+"px")})});const I=(he,we)=>Sl(he,we)-Br(he,"data-initial-"+we,0);_.events.stop.bind(()=>{f.get().each(he=>{E.each(we=>{B(he,"data-row").each(Ee=>{const $e=I(he,"top");Wo(he,"data-initial-top"),ye.trigger.adjustHeight(we,$e,parseInt(Ee,10))}),B(he,"data-column").each(Ee=>{const $e=I(he,"left");Wo(he,"data-initial-left"),ye.trigger.adjustWidth(we,$e,parseInt(Ee,10))}),Ut(g,we)})})});const Z=(he,we)=>{ye.trigger.startAdjust(),f.assign(he),Ao(he,"data-initial-"+we,Sl(he,we)),Iu(he,fi),ra(he,"opacity","0.2"),_.go(g.parent())},q=Xd(g.parent(),"mousedown",he=>{Am(he.target,Tp)&&Z(he.target,"top"),Am(he.target,wd)&&Z(he.target,"left")}),te=he=>ar(he,g.view()),ge=Xd(g.view(),"mouseover",he=>{var we;(we=he.target,Kr(we,"table",te).filter(Wh)).fold(()=>{So(he.target)&&h1(g)},Ee=>{_.isActive()&&(E=Oe.some(Ee),Ut(g,Ee))})}),ye=$l({adjustHeight:ni(["table","delta","row"]),adjustWidth:ni(["table","delta","column"]),startAdjust:ni([])});return{destroy:()=>{q.unbind(),ge.unbind(),_.destroy(),h1(g)},refresh:he=>{Ut(g,he)},on:_.on,off:_.off,hideBars:At(p1,g),showBars:At(Aa,g),events:ye.registry}})(g),Z=$l({beforeResize:ni(["table","type"]),afterResize:ni(["table","type"]),startDrag:ni([])});return I.events.adjustHeight.bind(q=>{const te=q.table;Z.trigger.beforeResize(te,"row"),((ge,ye,he,we)=>{const Ee=Ea(ge),$e=Ur(Ee,ge,we,dn,no=>no.getOrThunk(fc)),Ze=D($e,(wt,$t)=>he===$t?Math.max(ye+wt,fc()):wt),et=((g,f)=>{const _=Mn(g);return D(_,E=>{const B=Ks(E.row,E.row+E.rowspan,f);return{element:E.element,height:B,rowspan:E.rowspan}})})(Ee,Ze),dt=($t=Ze,D(Ee.all,(Xt,no)=>({element:Xt.element,height:$t[no]})));var $t;mt(dt,wt=>{Mt(wt.element,wt.height)}),mt(et,wt=>{Mt(wt.element,wt.height)});const St=fr(Ze,(wt,$t)=>wt+$t,0);Mt(ge,St)})(te,E.delta(q.delta,te),q.row,E),Z.trigger.afterResize(te,"row")}),I.events.startAdjust.bind(q=>{Z.trigger.startDrag()}),I.events.adjustWidth.bind(q=>{const te=q.table;Z.trigger.beforeResize(te,"col");const ge=B.delta(q.delta,te),ye=_(te);sp(te,ge,q.column,f,ye),Z.trigger.afterResize(te,"col")}),{on:I.on,off:I.off,refreshBars:I.refresh,hideBars:I.hideBars,showBars:I.showBars,destroy:I.destroy,events:Z.registry}},Il=g=>Is(g)&&"TABLE"===g.nodeName,hg="bar-",Dc=g=>"false"!==ls(g,"data-mce-resize"),Cy=g=>{(B=>{const I=B.options.register;I("table_clone_elements",{processor:"string[]"}),I("table_use_colgroups",{processor:"boolean",default:!0}),I("table_header_type",{processor:Z=>{const q=lr(["section","cells","sectionCells","auto"],Z);return q?{value:Z,valid:q}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),I("table_sizing_mode",{processor:"string",default:"auto"}),I("table_default_attributes",{processor:"object",default:{border:"1"}}),I("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),I("table_column_resizing",{processor:Z=>{const q=lr(["preservetable","resizetable"],Z);return q?{value:Z,valid:q}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),I("table_resize_bars",{processor:"boolean",default:!0}),I("table_style_by_css",{processor:"boolean",default:!0}),I("table_merge_content_on_paste",{processor:"boolean",default:!0})})(g);const f=(g=>{const f=lh(),_=lh(),E=lh();let B,I;const Z=te=>Zf(g,te),q=()=>sl(g)?Qh():Ec();return g.on("init",()=>{const te=(ye=Dc,(ge=g).inline?(he=Dt.fromDom(ge.getBody()),we=(()=>{const he=Dt.fromTag("div");return qo(he,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Qe(tn(Dt.fromDom(document)),he),he})(),Ee=ye,{parent:pt(we),view:pt(he),origin:pt(V(0,0)),isResizable:Ee}):((he,we)=>{const Ee=nr(he)?Dt.fromDom(si(he).dom.documentElement):he;return{parent:pt(Ee),view:pt(he),origin:pt(V(0,0)),isResizable:we}})(Dt.fromDom(ge.getDoc()),ye));var ge,ye,he,we,Ee;if(E.set(te),(ge=>{const ye=ge.options.get("object_resizing");return lr(ye.split(","),"table")})(g)&&wu(g)){const ge=q(),ye=dl(te,ge,Z);ye.on(),ye.events.startDrag.bind(he=>{f.set(g.selection.getRng())}),ye.events.beforeResize.bind(he=>{const we=he.table.dom;((Ee,$e,Ze,et,dt)=>{Ee.dispatch("ObjectResizeStart",{target:$e,width:Ze,height:et,origin:dt})})(g,we,kc(we),vf(we),hg+he.type)}),ye.events.afterResize.bind(he=>{const we=he.table,Ee=we.dom;var $e,Ze,et,dt;Km(we),f.on($e=>{g.selection.setRng($e),g.focus()}),$e=g,Ze=Ee,et=kc(Ee),dt=vf(Ee),$e.dispatch("ObjectResized",{target:Ze,width:et,height:dt,origin:hg+he.type}),g.undoManager.add()}),_.set(ye)}}),g.on("ObjectResizeStart",te=>{const ge=te.target;if(Il(ge)){const ye=Dt.fromDom(ge);mt(g.dom.select(".mce-clonedresizable"),he=>{g.dom.addClass(he,"mce-"+js(g)+"-columns")}),!yl(ye)&&ti(g)?dp(ye):!I0(ye)&&yu(g)&&Ll(ye),Ki(ye)&&rl(te.origin,hg)&&Ll(ye),B=te.width,I=xc(g)?"":((he,we)=>{const Ee=he.dom.getStyle(we,"width")||he.dom.getAttrib(we,"width");return Oe.from(Ee).filter(ji)})(g,ge).getOr("")}}),g.on("ObjectResized",te=>{const ge=te.target;if(Il(ge)){const ye=Dt.fromDom(ge),he=te.origin;rl(he,"corner-")&&((we,Ee,$e)=>{const Ze=Xr(Ee,"e");if(""===I&&Ll(we),$e!==B&&""!==I){ra(we,"width",I);const et=q(),dt=Z(we),St=sl(g)||Ze?Oc(we).columns-1:0;sp(we,$e-B,St,et,dt)}else if(/^(\d+(\.\d+)?)%$/.test(I)){const et=parseFloat(I.replace("%",""));ra(we,"width",$e*et/B+"%")}/^(\d+(\.\d+)?)px$/.test(I)&&(et=>{const dt=Ea(et);ec(dt)||mt(Kn(et),St=>{const wt=xi(St,"width");ra(St,"width",wt),Wo(St,"width")})})(we)})(ye,he,te.width),Km(ye),ha(g,ye.dom,eh)}}),g.on("SwitchMode",()=>{_.on(te=>{g.mode.isReadOnly()?te.hideBars():te.showBars()})}),g.on("dragstart dragend",te=>{_.on(ge=>{"dragstart"===te.type?(ge.hideBars(),ge.off()):(ge.on(),ge.showBars())})}),g.on("remove",()=>{_.on(te=>{te.destroy()}),E.on(te=>{g.inline&&ho(te.parent())})}),{refresh:te=>{_.on(ge=>ge.refreshBars(Dt.fromDom(te)))},hide:()=>{_.on(te=>te.hideBars())},show:()=>{_.on(te=>te.showBars())}}})(g),_=((g,f)=>{const _=(B=Co.selectedSelector,{get:()=>$g(Dt.fromDom(g.getBody()),B).fold(()=>Cf(im(g),Sc(g)).fold(Hu,l1),yd)}),E=((I,Z,q)=>{const te=we=>{Wo(we,I.selected),Wo(we,I.firstSelected),Wo(we,I.lastSelected)},ge=we=>{Ao(we,I.selected,"1")},ye=we=>{he(we),(I=>{I.dispatch("TableSelectionClear")})(g)},he=we=>{const Ee=kr(we,`${I.selectedSelector},${I.firstSelectedSelector},${I.lastSelectedSelector}`);mt(Ee,te)};return{clearBeforeUpdate:he,clear:ye,selectRange:(we,Ee,$e,Ze)=>{ye(we),mt(Ee,ge),Ao($e,I.firstSelected,"1"),Ao(Ze,I.lastSelected,"1"),((I,Z,q)=>{Ms(Z).each(te=>{const ge=qc(g),ye=tc(ut,Dt.fromDom(g.getDoc()),ge),he=((we,Ee,$e)=>{const Ze=Ea(we);return Zl(Ze,Ee).map(et=>{const dt=Vd(Ze,$e,!1),{rows:St}=Va(dt);return{upOrLeftCells:((Xt,no)=>{const $o=Xt.slice(0,no[no.length-1].row+1),jo=op($o);return sr(jo,gr=>{const un=gr.cells.slice(0,no[no.length-1].column+1);return D(un,Bn=>Bn.element)})})(St,et),downOrRightCells:((Xt,no)=>{const $o=Xt.slice(no[0].row+no[0].rowspan-1,Xt.length),jo=op($o);return sr(jo,gr=>{const un=gr.cells.slice(no[0].column+no[0].colspan-1,gr.cells.length);return D(un,Bn=>Bn.element)})})(St,et)}})})(te,{selection:Mr(g)},ye);((we,Ee,$e,Ze,et)=>{we.dispatch("TableSelectionChange",{cells:Ee,start:$e,finish:Ze,otherCells:et})})(g,I,Z,q,he)})})(Ee,$e,Ze)},selectedSelector:I.selectedSelector,firstSelectedSelector:I.firstSelectedSelector,lastSelectedSelector:I.lastSelectedSelector}})(Co);var B;return g.on("init",I=>{const Z=g.getWin(),q=Cu(g),te=Sc(g),ge=((Ze,et,dt,St)=>{const wt=(($t,Xt,no,$o)=>{const jo=lh(),gr=jo.clear,un=Bn=>{jo.on(yn=>{$o.clearBeforeUpdate(Xt),Q0(Bn.target,no).each(Vr=>{Jm(yn,Vr,no).each(En=>{const aa=En.boxes.getOr([]);if(1===aa.length){const Wa=aa[0],Ji="false"===am(Wa),Yd=na(Gc(Bn.target),Wa,ar);Ji&&Yd&&($o.selectRange(Xt,aa,Wa,Wa),$t.selectContents(Wa))}else aa.length>1&&($o.selectRange(Xt,aa,En.start,En.finish),$t.selectContents(Vr))})})})};return{clearstate:gr,mousedown:Bn=>{$o.clear(Xt),Q0(Bn.target,no).filter(fy).each(jo.set)},mouseover:Bn=>{un(Bn)},mouseup:Bn=>{un(Bn),gr()}}})(Sp(Ze),et,dt,St);return{clearstate:wt.clearstate,mousedown:wt.mousedown,mouseover:wt.mouseover,mouseup:wt.mouseup}})(Z,q,te,E),ye=((Ze,et,dt,St)=>{const wt=Sp(Ze),$t=()=>(St.clear(et),Oe.none());return{keydown:(Xt,no,$o,jo,gr,un)=>{const Bn=Xt.raw,yn=Bn.which,Vr=!0===Bn.shiftKey;return nc(et,St.selectedSelector).fold(()=>(Om(yn)&&!Vr&&St.clearBeforeUpdate(et),Om(yn)&&Vr&&!kp(no,jo)?Oe.none:ch(yn)&&Vr?At(mg,wt,et,dt,eb,jo,no,St.selectRange):xp(yn)&&Vr?At(mg,wt,et,dt,tb,jo,no,St.selectRange):ch(yn)?At(s1,wt,dt,eb,jo,no,Ax):xp(yn)?At(s1,wt,dt,tb,jo,no,py):Oe.none),aa=>{const Wa=Ji=>()=>Gt(Ji,$a=>{return Ap=et,((g,f,_,E,B)=>{return(I=g,Z=B,Do(I,q=>Nn(q,Z))).bind(I=>((Z,q,te)=>Ms(Z).bind(ge=>{return ye=lm(ge),we=q,Ee=te,gd(ye,Z,ar).bind($e=>Li(ye,(we>0?$e.row+$e.rowspan-1:$e.row)+we,(Ee>0?$e.column+$e.colspan-1:$e.column)+Ee).map(dt=>dt.element));var ye,we,Ee}))(I,f,_).bind(Z=>{return te=E,Gr(q=Z,"table").bind(ge=>Fs(ge,te).bind(ye=>Jm(ye,q).bind(he=>he.boxes.map(we=>({boxes:we,start:he.start,finish:he.finish})))));var q,te}));var I,Z})(aa,$a.rows,$a.cols,(xd=St).firstSelectedSelector,xd.lastSelectedSelector).map(pg=>(xd.clearBeforeUpdate(Ap),xd.selectRange(Ap,pg.boxes,pg.start,pg.finish),pg.boxes));var Ap,xd}).fold(()=>Qm(et,St.firstSelectedSelector,St.lastSelectedSelector).map($a=>{const zu=ch(yn)||un.isForward(yn)?cl.after:cl.before;return wt.setRelativeSelection(cl.on($a.first,0),zu($a.table)),St.clear(et),oi(Oe.none(),!0)}),$a=>Oe.some(oi(Oe.none(),!0)));return Om(yn)&&Vr&&!kp(no,jo)?Oe.none:ch(yn)&&Vr?Wa([ic(1,0)]):xp(yn)&&Vr?Wa([ic(-1,0)]):un.isBackward(yn)&&Vr?Wa([ic(0,-1),ic(-1,0)]):un.isForward(yn)&&Vr?Wa([ic(0,1),ic(1,0)]):Om(yn)&&!Vr?$t:Oe.none})()},keyup:(Xt,no,$o,jo,gr)=>nc(et,St.selectedSelector).fold(()=>{const un=Xt.raw;return!0===un.shiftKey&&Om(un.which)&&kp(no,jo)?(yn=et,Vr=dt,aa=$o,Ji=gr,Yd=St.selectRange,ar(En=no,Wa=jo)&&aa===Ji?Oe.none():Kr(En,"td,th",Vr).bind($a=>Kr(Wa,"td,th",Vr).bind(zu=>rh(yn,Vr,$a,zu,Yd)))):Oe.none();var yn,Vr,En,aa,Wa,Ji,Yd},Oe.none)}})(Z,q,te,E),he=((Ze,et,dt,St)=>{const wt=Sp(Ze);return($t,Xt)=>{St.clearBeforeUpdate(et),Jm($t,Xt,dt).each(no=>{const $o=no.boxes.getOr([]);St.selectRange(et,$o,no.start,no.finish),wt.selectContents(Xt),wt.collapseSelection()})}})(Z,q,te,E);g.on("TableSelectorChange",Ze=>he(Ze.start,Ze.finish));const we=(Ze,et)=>{!0===Ze.raw.shiftKey&&(et.kill&&Ze.kill(),et.selection.each(dt=>{const St=dh.relative(dt.start,dt.finish),wt=j0(Z,St);g.selection.setRng(wt)}))},Ee=Ze=>0===Ze.button,$e=(()=>{const Ze=a1(Dt.fromDom(q)),et=a1(0);return{touchEnd:dt=>{const St=Dt.fromDom(dt.target);if(Sr("td")(St)||Sr("th")(St)){const wt=Ze.get(),$t=et.get();ar(wt,St)&&dt.timeStamp-$t<300&&(dt.preventDefault(),he(St,St))}Ze.set(St),et.set(dt.timeStamp)}}})();g.on("dragstart",Ze=>{ge.clearstate()}),g.on("mousedown",Ze=>{Ee(Ze)&&Ep(Ze)&&ge.mousedown(Pu(Ze))}),g.on("mouseover",Ze=>{var et;void 0!==(et=Ze).buttons&&0==(1&et.buttons)||!Ep(Ze)||ge.mouseover(Pu(Ze))}),g.on("mouseup",Ze=>{Ee(Ze)&&Ep(Ze)&&ge.mouseup(Pu(Ze))}),g.on("touchend",$e.touchEnd),g.on("keyup",Ze=>{const et=Pu(Ze);if(et.raw.shiftKey&&Om(et.raw.which)){const dt=g.selection.getRng(),St=Dt.fromDom(dt.startContainer),wt=Dt.fromDom(dt.endContainer);ye.keyup(et,St,dt.startOffset,wt,dt.endOffset).each($t=>{we(et,$t)})}}),g.on("keydown",Ze=>{const et=Pu(Ze);f.hide();const dt=g.selection.getRng(),St=Dt.fromDom(dt.startContainer),wt=Dt.fromDom(dt.endContainer),$t=Gm(by,Nx)(Dt.fromDom(g.selection.getStart()));ye.keydown(et,St,dt.startOffset,wt,dt.endOffset,$t).each(Xt=>{we(et,Xt)}),f.show()}),g.on("NodeChange",()=>{const Ze=g.selection,et=Dt.fromDom(Ze.getStart()),dt=Dt.fromDom(Ze.getEnd());wf(Ms,[et,dt]).fold(()=>E.clear(q),ut)})}),g.on("PreInit",()=>{g.serializer.addTempAttr(Co.firstSelected),g.serializer.addTempAttr(Co.lastSelected)}),{getSelectedCells:()=>((I,Z,q,te)=>{switch(I.tag){case"none":return Z();case"single":return[I.element.dom];case"multiple":return D(I.elements,ye=>ye.dom)}})(_.get(),pt([])),clearSelectedCells:I=>E.clear(Dt.fromDom(I))}})(g,f),E=((g,f,_)=>{const E=ye=>"table"===Cr(Cu(ye)),B=qc(g),I=Dl(g)?ut:Su,Z=ye=>{switch(Vl(g)){case"section":return oy();case"sectionCells":return Tf();case"cells":return eg();default:return((he,we)=>{var Ee;switch((Ee=Ea(he),Gt(Ee.all,$e=>{const Ze=x0($e);return"header"===Ze.type?Oe.from(Ze.subType):Oe.none()})).getOr("section")){case"section":return Ef();case"sectionCells":return ku();case"cells":return Of()}})(ye)}},q=(ye,he,we,Ee)=>($e,Ze,et=!1)=>{Km($e);const dt=Dt.fromDom(g.getDoc()),St=tc(we,dt,B),wt={sizing:Zf(g,$e),resize:Dl(g)?Ec():Qh(),section:Z($e)};return he($e)?ye($e,Ze,St,wt).bind($t=>{f.refresh($e.dom),mt($t.newRows,no=>{Ta(g,no.dom)}),mt($t.newCells,no=>{Wl(g,no.dom)});const Xt=(no=$e,$t.cursor.fold(()=>{const jo=Kn(no);return Ie(jo).filter(So).map(gr=>{_.clearSelectedCells(no.dom);const un=g.dom.createRng();return un.selectNode(gr.dom),g.selection.setRng(un),Ao(gr,"data-mce-selected","1"),un})},jo=>{const gr=Kg(Sf,jo),un=g.dom.createRng();return un.setStart(gr.element.dom,gr.offset),un.setEnd(gr.element.dom,gr.offset),g.selection.setRng(un),_.clearSelectedCells(no.dom),Oe.some(un)}));var no;return So($e)&&(Km($e),et||ha(g,$e.dom,Ee)),Xt.map(no=>({rng:no,effect:Ee}))}):Oe.none()};return{deleteRow:q(lp,ye=>!E(g)||Oc(ye).rows>1,ut,Ua),deleteColumn:q(Pf,ye=>!E(g)||Oc(ye).columns>1,ut,Ua),insertRowsBefore:q(gi,it,ut,Ua),insertRowsAfter:q(ll,it,ut,Ua),insertColumnsBefore:q(ip,it,I,Ua),insertColumnsAfter:q(Hf,it,I,Ua),mergeCells:q(Mu,it,ut,Ua),unmergeCells:q(A0,it,ut,Ua),pasteColsBefore:q(M0,it,ut,Ua),pasteColsAfter:q(Ff,it,ut,Ua),pasteRowsBefore:q(zf,it,ut,Ua),pasteRowsAfter:q(Vf,it,ut,Ua),pasteCells:q(N0,it,ut,R0),makeCellsHeader:q(Ul,it,ut,Ua),unmakeCellsHeader:q(hi,it,ut,Ua),makeColumnsHeader:q(k0,it,ut,Ua),unmakeColumnsHeader:q(E0,it,ut,Ua),makeRowsHeader:q(O0,it,ut,Ua),makeRowsBody:q(T0,it,ut,Ua),makeRowsFooter:q(Nu,it,ut,Ua),getTableRowType:Xs,getTableCellType:Ai,getTableColType:Ti}})(g,f,_);return sg(g,E),((B,I)=>{const Z=Sc(B),q=te=>Cf(im(B)).bind(ge=>Ms(ge,Z).map(ye=>{const he=pd(Mr(B),ye,ge);return te(ye,he)})).getOr("");en({mceTableRowType:()=>q(I.getTableRowType),mceTableCellType:()=>q(I.getTableCellType),mceTableColType:()=>q(I.getTableColType)},(te,ge)=>B.addQueryValueHandler(ge,te))})(g,E),((g,f)=>{g.on("BeforeGetContent",_=>{if(!0===_.selection){const B=qn(Mr(g),Z=>Nn(Z,Co.selectedSelector));B.length>=1&&(B=>{var I;_.preventDefault(),(I=B,Ms(I[0]).map(Z=>{const q=((te,ge)=>{const ye=wt=>Nn(wt.element,"[data-mce-selected]"),he=fn(te),we=Y(he),Ee=qs(te),$e=$s(we),Ze=((wt,$t)=>{let no=wt.grid.rows,$o=wt.grid.columns,jo=0,gr=0;const un=[],Bn=[];return en(wt.access,yn=>{if(un.push(yn),$t(yn)){Bn.push(yn);const Vr=yn.row,En=Vr+yn.rowspan-1,aa=yn.column,Wa=aa+yn.colspan-1;Vr<no?no=Vr:En>jo&&(jo=En),aa<$o?$o=aa:Wa>gr&&(gr=Wa)}}),{minRow:no,minCol:$o,maxRow:jo,maxCol:gr,allCells:un,selectedCells:Bn}})($e,ye),dt=Ui(he,"th,td",wt=>Nn(wt,"th:not([data-mce-selected]),td:not([data-mce-selected])"));return mt(dt,ho),((wt,$t,Xt,no)=>{const $o=qn(wt,un=>"colgroup"!==un.section),jo=$t.grid.columns,gr=$t.grid.rows;for(let un=0;un<gr;un++){let Bn=!1;for(let yn=0;yn<jo;yn++)un<Xt.minRow||un>Xt.maxRow||yn<Xt.minCol||yn>Xt.maxCol||(Li($t,un,yn).filter(no).isNone()?os($o,Bn,un):Bn=!0)}})(we,$e,Ze,ye),((wt,$t,Xt,no)=>{en(Xt.columns,jo=>{(jo.column<$t.minCol||jo.column>$t.maxCol)&&ho(jo.element)});const $o=qn(Ns(wt,"tr"),jo=>0===jo.dom.childElementCount);mt($o,ho),$t.minCol!==$t.maxCol&&$t.minRow!==$t.maxRow||mt(Ns(wt,"th,td"),jo=>{Wo(jo,"rowspan"),Wo(jo,"colspan")}),Wo(wt,pu),Wo(wt,"data-snooker-col-series"),qs(wt).adjustTableWidth(void 0)})(he,Ze,$e,((wt,$t,Xt,no)=>{if(0===no.minCol&&$t.grid.columns===no.maxCol+1)return 0;const $o=Oo($t,wt,Xt),jo=Nt($o,(Bn,yn)=>Bn+yn,0),un=Nt($o.slice(no.minCol,no.maxCol+1),(Bn,yn)=>Bn+yn,0)/jo*Xt.pixelWidth()-Xt.pixelWidth();Xt.getCellDelta(un)})(te,Ea(te),Ee,Ze)),he})(Z);return Km(q),[q]})).each(I=>{var Z;_.content="text"===_.format?D(I,q=>q.dom.innerText).join(""):(Z=g,D(I,te=>Z.selection.serializer.serialize(te.dom,{})).join(""))})})(B)}}),g.on("BeforeSetContent",_=>{if(!0===_.selection&&!0===_.paste){const E=Mr(g);Ie(E).each(B=>{Ms(B).each(I=>{const Z=qn(((te,ge)=>{const ye=document.createElement("div");return ye.innerHTML=te,Os(Dt.fromDom(ye))})(_.content),te=>"meta"!==Cr(te)),q=Sr("table");if(Cc(g)&&1===Z.length&&q(Z[0])){_.preventDefault();const te=Dt.fromDom(g.getDoc()),ge=$c(te);f.pasteCells(I,{element:B,clipboard:Z[0],generators:ge}).each(()=>{g.focus()})}})})}})})(g,E),{getSelectedCells:_.getSelectedCells,clearSelectedCells:_.clearSelectedCells}};Ca.add("dom",g=>({table:Cy(g)}))}();